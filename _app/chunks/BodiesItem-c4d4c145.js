import{S as ie,i as se,s as re,_ as oe,C as $,e as J,c as X,a as V,d as R,b as F,a1 as Ie,I as G,g as Z,J as N,W as we,X as le,Y as fe,Z as ue,z as Pe,q as j,o as q,a2 as Se,a3 as We,w as Te,k as de,x as Be,m as pe,y as Ae,B as Le,t as he,h as ge,j as Ce,O as xe,P as ye,f as U,Q as ne,G as Oe,ac as Ke,r as Me,K as Ze,af as ht,N as Ve,l as nt,T as ve,E as it,a4 as Ne,L as st,v as be,a5 as gt,a6 as vt}from"./index-bbca5c05.js";import{i as Je}from"./intersect-eda3c074.js";import{b as rt}from"./paths-396f020f.js";import{a as mt,r as dt}from"./revealText-510b6fa3.js";import{c as at,d as Ue,m as ot}from"./maplibre-gl-394f1951.js";import{w as Qe}from"./index-236d7f9e.js";import{g as lt}from"./themeColors-35fcc233.js";import{a as ft}from"./index-d82f60b1.js";import"./scroll-ddb61233.js";import{c as De,g as pt}from"./_commonjsHelpers-7d66b65f.js";function Ct(S){let h,d,I,u,e;const s=S[2].default,n=oe(s,S,S[1],null);let i=[S[0]],c={};for(let a=0;a<i.length;a+=1)c=$(c,i[a]);return{c(){h=J("h2"),d=J("span"),n&&n.c(),this.h()},l(a){h=X(a,"H2",{});var f=V(h);d=X(f,"SPAN",{class:!0});var r=V(d);n&&n.l(r),r.forEach(R),f.forEach(R),this.h()},h(){F(d,"class","cpeum-1uh9iq8"),Ie(h,c),G(h,"cpeum-1uh9iq8",!0)},m(a,f){Z(a,h,f),N(h,d),n&&n.m(d,null),I=!0,u||(e=we(mt.call(null,h,dt)),u=!0)},p(a,[f]){n&&n.p&&(!I||f&2)&&le(n,s,a,a[1],I?ue(s,a[1],f,null):fe(a[1]),null),Ie(h,c=Pe(i,[f&1&&a[0]])),G(h,"cpeum-1uh9iq8",!0)},i(a){I||(j(n,a),I=!0)},o(a){q(n,a),I=!1},d(a){a&&R(h),n&&n.d(a),u=!1,e()}}}function wt(S,h,d){const I=[];let u=Se(h,I),{$$slots:e={},$$scope:s}=h;return S.$$set=n=>{h=$($({},h),We(n)),d(0,u=Se(h,I)),"$$scope"in n&&d(1,s=n.$$scope)},[u,s,e]}class ze extends ie{constructor(h){super(),se(this,h,wt,Ct,re,{})}}function Mt(S){let h;return{c(){h=he(S[0])},l(d){h=ge(d,S[0])},m(d,I){Z(d,h,I)},p(d,I){I&1&&Ce(h,d[0])},d(d){d&&R(h)}}}function Et(S){let h,d,I,u;d=new ze({props:{$$slots:{default:[Mt]},$$scope:{ctx:S}}});const e=S[1].default,s=oe(e,S,S[2],null);return{c(){h=J("section"),Te(d.$$.fragment),I=de(),s&&s.c()},l(n){h=X(n,"SECTION",{});var i=V(h);Be(d.$$.fragment,i),I=pe(i),s&&s.l(i),i.forEach(R)},m(n,i){Z(n,h,i),Ae(d,h,null),N(h,I),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&5&&(c.$$scope={dirty:i,ctx:n}),d.$set(c),s&&s.p&&(!u||i&4)&&le(s,e,n,n[2],u?ue(e,n[2],i,null):fe(n[2]),null)},i(n){u||(j(d.$$.fragment,n),j(s,n),u=!0)},o(n){q(d.$$.fragment,n),q(s,n),u=!1},d(n){n&&R(h),Le(d),s&&s.d(n)}}}function It(S,h,d){let{$$slots:I={},$$scope:u}=h,{heading:e}=h;return S.$$set=s=>{"heading"in s&&d(0,e=s.heading),"$$scope"in s&&d(2,u=s.$$scope)},[e,I,u]}class Tn extends ie{constructor(h){super(),se(this,h,It,Et,re,{heading:0})}}function kt(S,{scrollParent:h=document.body,factor:d=.8}={}){let I=0;function u(){const e=S.getBoundingClientRect();I=(Math.min(window.innerHeight,Math.max(-e.height,e.top-I))+e.height/2-window.innerHeight/2)*(d-1),S.style.transform=`translateY(${I}px)`}return u(),h.addEventListener("scroll",u),{destroy(){h.removeEventListener("scroll",u)}}}function Tt(S){let h,d,I,u,e,s,n,i,c,a,f,r,t,o,l=`rotateZ(${2.5-Math.random()*5}deg)`,g,x,C,M;const v=S[6].default,p=oe(v,S,S[5],null);return{c(){h=J("section"),d=J("header"),I=xe("svg"),u=xe("text"),e=he(S[1]),s=de(),n=J("hgroup"),i=J("span"),c=he(S[0]),a=de(),f=J("h3"),r=he(S[2]),t=de(),o=J("div"),g=de(),p&&p.c(),this.h()},l(m){h=X(m,"SECTION",{class:!0});var y=V(h);d=X(y,"HEADER",{class:!0});var w=V(d);I=ye(w,"svg",{width:!0,height:!0,viewBox:!0,class:!0});var E=V(I);u=ye(E,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0,"dominant-baseline":!0,class:!0});var k=V(u);e=ge(k,S[1]),k.forEach(R),E.forEach(R),s=pe(w),n=X(w,"HGROUP",{class:!0});var P=V(n);i=X(P,"SPAN",{class:!0});var T=V(i);c=ge(T,S[0]),T.forEach(R),a=pe(P),f=X(P,"H3",{class:!0});var B=V(f);r=ge(B,S[2]),B.forEach(R),P.forEach(R),t=pe(w),o=X(w,"DIV",{class:!0}),V(o).forEach(R),w.forEach(R),g=pe(y),p&&p.l(y),y.forEach(R),this.h()},h(){F(u,"x","0"),F(u,"y","450"),F(u,"font-size","500"),F(u,"text-anchor","middle"),F(u,"dominant-baseline","baseline"),F(u,"class","cpeum-wktov9"),F(I,"width","500"),F(I,"height","500"),F(I,"viewBox","0 0 500 500"),F(I,"class","cpeum-wktov9"),F(i,"class","cpeum-wktov9"),F(f,"class","cpeum-wktov9"),F(n,"class","cpeum-wktov9"),F(o,"class","image cpeum-wktov9"),U(o,"background-image",S[3]?`url(${rt+S[3]})`:"",!1),F(d,"class","cpeum-wktov9"),U(d,"transform",l,!1),F(h,"class","cpeum-wktov9")},m(m,y){Z(m,h,y),N(h,d),N(d,I),N(I,u),N(u,e),N(d,s),N(d,n),N(n,i),N(i,c),N(n,a),N(n,f),N(f,r),N(d,t),N(d,o),N(h,g),p&&p.m(h,null),x=!0,C||(M=[we(mt.call(null,f,dt)),we(kt.call(null,n,{factor:.7})),we(Je.call(null,h)),ne(h,"enter",Bt),ne(h,"leave",At)],C=!0)},p(m,[y]){(!x||y&2)&&Ce(e,m[1]),(!x||y&1)&&Ce(c,m[0]),(!x||y&4)&&Ce(r,m[2]),y&8&&U(o,"background-image",m[3]?`url(${rt+m[3]})`:"",!1),p&&p.p&&(!x||y&32)&&le(p,v,m,m[5],x?ue(v,m[5],y,null):fe(m[5]),null)},i(m){x||(j(p,m),x=!0)},o(m){q(p,m),x=!1},d(m){m&&R(h),p&&p.d(m),C=!1,Oe(M)}}}function Bt(){}function At(){}function Lt(S,h,d){let{$$slots:I={},$$scope:u}=h,{label:e}=h,{shortLabel:s=e}=h,{title:n}=h,{key:i}=h,{src:c=""}=h;return Ke("exercice"),S.$$set=a=>{"label"in a&&d(0,e=a.label),"shortLabel"in a&&d(1,s=a.shortLabel),"title"in a&&d(2,n=a.title),"key"in a&&d(4,i=a.key),"src"in a&&d(3,c=a.src),"$$scope"in a&&d(5,u=a.$$scope)},[e,s,n,c,i,u,I]}class Bn extends ie{constructor(h){super(),se(this,h,Lt,Tt,re,{label:0,shortLabel:1,title:2,key:4,src:3})}}function Ht(S){let h;return{c(){h=he(S[0])},l(d){h=ge(d,S[0])},m(d,I){Z(d,h,I)},p(d,I){I&1&&Ce(h,d[0])},d(d){d&&R(h)}}}function Rt(S){let h,d,I,u;d=new ze({props:{$$slots:{default:[Ht]},$$scope:{ctx:S}}});const e=S[1].default,s=oe(e,S,S[2],null);return{c(){h=J("section"),Te(d.$$.fragment),I=de(),s&&s.c()},l(n){h=X(n,"SECTION",{});var i=V(h);Be(d.$$.fragment,i),I=pe(i),s&&s.l(i),i.forEach(R)},m(n,i){Z(n,h,i),Ae(d,h,null),N(h,I),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&5&&(c.$$scope={dirty:i,ctx:n}),d.$set(c),s&&s.p&&(!u||i&4)&&le(s,e,n,n[2],u?ue(e,n[2],i,null):fe(n[2]),null)},i(n){u||(j(d.$$.fragment,n),j(s,n),u=!0)},o(n){q(d.$$.fragment,n),q(s,n),u=!1},d(n){n&&R(h),Le(d),s&&s.d(n)}}}function Ft(S,h,d){let{$$slots:I={},$$scope:u}=h,{heading:e}=h;return S.$$set=s=>{"heading"in s&&d(0,e=s.heading),"$$scope"in s&&d(2,u=s.$$scope)},[e,I,u]}class An extends ie{constructor(h){super(),se(this,h,Ft,Rt,re,{heading:0})}}function Dt(S){let h,d;const I=S[3].default,u=oe(I,S,S[2],null);let e=[S[1]],s={};for(let n=0;n<e.length;n+=1)s=$(s,e[n]);return{c(){h=J("dl"),u&&u.c(),this.h()},l(n){h=X(n,"DL",{});var i=V(h);u&&u.l(i),i.forEach(R),this.h()},h(){Ie(h,s),U(h,"font-size",S[0]==="small"?"13px":"15px",!1),G(h,"cpeum-gwxlad",!0)},m(n,i){Z(n,h,i),u&&u.m(h,null),d=!0},p(n,[i]){u&&u.p&&(!d||i&4)&&le(u,I,n,n[2],d?ue(I,n[2],i,null):fe(n[2]),null),Ie(h,s=Pe(e,[i&2&&n[1]])),U(h,"font-size",n[0]==="small"?"13px":"15px",!1),G(h,"cpeum-gwxlad",!0)},i(n){d||(j(u,n),d=!0)},o(n){q(u,n),d=!1},d(n){n&&R(h),u&&u.d(n)}}}function Wt(S,h,d){const I=["size"];let u=Se(h,I),{$$slots:e={},$$scope:s}=h,{size:n="medium"}=h;return Me("legend",{}),S.$$set=i=>{h=$($({},h),We(i)),d(1,u=Se(h,I)),"size"in i&&d(0,n=i.size),"$$scope"in i&&d(2,s=i.$$scope)},[n,u,s,e]}class Ln extends ie{constructor(h){super(),se(this,h,Wt,Dt,re,{size:0})}}function Ot(S){let h,d,I,u=`${S[0]}px`,e,s,n;const i=S[8].default,c=oe(i,S,S[7],null);let a=[{class:"trigger"},S[4]],f={};for(let r=0;r<a.length;r+=1)f=$(f,a[r]);return{c(){h=J("div"),d=J("div"),c&&c.c(),this.h()},l(r){h=X(r,"DIV",{class:!0});var t=V(h);d=X(t,"DIV",{class:!0});var o=V(d);c&&c.l(o),o.forEach(R),t.forEach(R),this.h()},h(){F(d,"class","content cpeum-1ngz0xy"),Ze(()=>S[9].call(d)),U(d,"--h",u,!1),Ie(h,f),G(h,"cpeum-1ngz0xy",!0)},m(r,t){Z(r,h,t),N(h,d),c&&c.m(d,null),I=ht(d,S[9].bind(d)),e=!0,s||(n=[we(Je.call(null,h,{rootMargin:"-50% 0% -50%"})),ne(h,"enter",S[2]),ne(h,"leave",S[3])],s=!0)},p(r,[t]){c&&c.p&&(!e||t&128)&&le(c,i,r,r[7],e?ue(i,r[7],t,null):fe(r[7]),null),t&1&&u!==(u=`${r[0]}px`)&&U(d,"--h",u,!1),Ie(h,f=Pe(a,[{class:"trigger"},t&16&&r[4]])),G(h,"cpeum-1ngz0xy",!0)},i(r){e||(j(c,r),e=!0)},o(r){q(c,r),e=!1},d(r){r&&R(h),c&&c.d(r),I(),s=!1,Oe(n)}}}function Vt(S,h,d){const I=["bounds"];let u=Se(h,I),e,{$$slots:s={},$$scope:n}=h,{bounds:i=null}=h,c=0,a=Qe(!1),f=Qe(null);Ve(S,f,g=>d(6,e=g));let r=0;function t(){ot.setClass("figure"),a.set(!0),i&&Ue.set({bounds:i})}function o(){ot.setClass(""),a.set(!1)}Me("figuremap",{active:a}),Me("currentKey",f),Me("markers",{getIndex:()=>c++});function l(){r=this.clientHeight,d(0,r)}return S.$$set=g=>{h=$($({},h),We(g)),d(4,u=Se(h,I)),"bounds"in g&&d(5,i=g.bounds),"$$scope"in g&&d(7,n=g.$$scope)},S.$$.update=()=>{S.$$.dirty&96&&(e?(at.set({key:e}),Ue.set({filter:{key:e}})):e||(at.set(null),Ue.set({bounds:i})))},[r,f,t,o,u,i,e,n,s,l]}class Hn extends ie{constructor(h){super(),se(this,h,Vt,Ot,re,{bounds:5})}}function zt(S){let h,d,I;return{c(){h=xe("text"),d=he("Source: "),I=he(S[1]),this.h()},l(u){h=ye(u,"text",{class:!0});var e=V(h);d=ge(e,"Source: "),I=ge(e,S[1]),e.forEach(R),this.h()},h(){F(h,"class","cpeum-1dpg14g")},m(u,e){Z(u,h,e),N(h,d),N(h,I)},p(u,e){e&2&&Ce(I,u[1])},d(u){u&&R(h)}}}function Gt(S){let h,d,I=[{d:d="M"+0+","+2*Q/3+" Q"+Q/4+","+Ee+" "+Q/2+","+Q/2+" T"+Q+","+Q/3},S[6]],u={};for(let e=0;e<I.length;e+=1)u=$(u,I[e]);return{c(){h=xe("path"),this.h()},l(e){h=ye(e,"path",{d:!0}),V(h).forEach(R),this.h()},h(){ve(h,u),G(h,"highlight",S[5]),G(h,"cpeum-1dpg14g",!0)},m(e,s){Z(e,h,s)},p(e,s){ve(h,u=Pe(I,[{d},s&64&&e[6]])),G(h,"highlight",e[5]),G(h,"cpeum-1dpg14g",!0)},d(e){e&&R(h)}}}function Nt(S){let h,d,I=[{points:d=Q/2+" "+Ee+", "+Ee+" "+(Q-S[7])+", "+(Q-Ee)+" "+(Q-S[7])},S[6]],u={};for(let e=0;e<I.length;e+=1)u=$(u,I[e]);return{c(){h=xe("polygon"),this.h()},l(e){h=ye(e,"polygon",{points:!0}),V(h).forEach(R),this.h()},h(){ve(h,u),G(h,"highlight",S[5]),G(h,"cpeum-1dpg14g",!0)},m(e,s){Z(e,h,s)},p(e,s){ve(h,u=Pe(I,[{points:d},s&64&&e[6]])),G(h,"highlight",e[5]),G(h,"cpeum-1dpg14g",!0)},d(e){e&&R(h)}}}function Ut(S){let h,d,I,u,e=[{cx:d=Q/2},{cy:I=Q/2},{r:u=Q/2-Ee},S[6]],s={};for(let n=0;n<e.length;n+=1)s=$(s,e[n]);return{c(){h=xe("circle"),this.h()},l(n){h=ye(n,"circle",{cx:!0,cy:!0,r:!0}),V(h).forEach(R),this.h()},h(){ve(h,s),G(h,"highlight",S[5]),G(h,"cpeum-1dpg14g",!0)},m(n,i){Z(n,h,i)},p(n,i){ve(h,s=Pe(e,[{cx:d},{cy:I},{r:u},i&64&&n[6]])),G(h,"highlight",n[5]),G(h,"cpeum-1dpg14g",!0)},d(n){n&&R(h)}}}function Qt(S){let h,d,I,u,e,s=[{rx:d=Q/20},{ry:I=Q/20},{x:S[7]},{y:S[7]},{width:u=Q-2*S[7]},{height:e=Q-2*S[7]},S[6]],n={};for(let i=0;i<s.length;i+=1)n=$(n,s[i]);return{c(){h=xe("rect"),this.h()},l(i){h=ye(i,"rect",{rx:!0,ry:!0,x:!0,y:!0,width:!0,height:!0}),V(h).forEach(R),this.h()},h(){ve(h,n),G(h,"highlight",S[5]),G(h,"cpeum-1dpg14g",!0)},m(i,c){Z(i,h,c)},p(i,c){ve(h,n=Pe(s,[{rx:d},{ry:I},{x:i[7]},{y:i[7]},{width:u},{height:e},c&64&&i[6]])),G(h,"highlight",i[5]),G(h,"cpeum-1dpg14g",!0)},d(i){i&&R(h)}}}function ut(S){let h,d,I;return{c(){h=xe("text"),d=he(S[4]),this.h()},l(u){h=ye(u,"text",{"font-size":!0,"font-family":!0,"font-weight":!0,dy:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,class:!0});var e=V(h);d=ge(e,S[4]),e.forEach(R),this.h()},h(){F(h,"font-size",S[8]),F(h,"font-family","var(--font-display)"),F(h,"font-weight","600"),F(h,"dy",".3em"),F(h,"x","50%"),F(h,"y","50%"),F(h,"text-anchor","middle"),F(h,"fill",I=S[5]?S[3]:S[2]),F(h,"class","cpeum-1dpg14g")},m(u,e){Z(u,h,e),N(h,d)},p(u,e){e&16&&Ce(d,u[4]),e&44&&I!==(I=u[5]?u[3]:u[2])&&F(h,"fill",I)},d(u){u&&R(h)}}}function Kt(S){let h,d,I,u,e;function s(r,t){if(t&1&&(d=null),t&2&&(I=null),r[0]==="square")return Qt;if(r[0]==="circle")return Ut;if(r[0]==="triangle")return Nt;if(d==null&&(d=["line","dotted","dashed"].indexOf(r[0])>-1),d)return Gt;if(I==null&&(I=!!Boolean(r[1])),I)return zt}let n=s(S,-1),i=n&&n(S),c=S[4]&&ut(S),a=[{width:Q},{height:Q},{viewBox:e="0 0 "+Q+" "+Q},S[9]],f={};for(let r=0;r<a.length;r+=1)f=$(f,a[r]);return{c(){h=xe("svg"),i&&i.c(),u=nt(),c&&c.c(),this.h()},l(r){h=ye(r,"svg",{width:!0,height:!0,viewBox:!0});var t=V(h);i&&i.l(t),u=nt(),c&&c.l(t),t.forEach(R),this.h()},h(){ve(h,f),G(h,"cpeum-1dpg14g",!0)},m(r,t){Z(r,h,t),i&&i.m(h,null),N(h,u),c&&c.m(h,null)},p(r,[t]){n===(n=s(r,t))&&i?i.p(r,t):(i&&i.d(1),i=n&&n(r),i&&(i.c(),i.m(h,u))),r[4]?c?c.p(r,t):(c=ut(r),c.c(),c.m(h,null)):c&&(c.d(1),c=null),ve(h,f=Pe(a,[{width:Q},{height:Q},{viewBox:e},t&512&&r[9]])),G(h,"cpeum-1dpg14g",!0)},i:it,o:it,d(r){r&&R(h),i&&i.d(),c&&c.d()}}}const Q=50,Ee=5;function Zt(S,h,d){const I=["shape","src","color","colorHighlight","label","fill","fillHighlight","stroke","strokeHighlight","strokeWidth","strokeWidthHighlight","strokeType","highlight"];let u=Se(h,I),{shape:e="circle"}=h,{src:s=null}=h,{color:n="var(--dark1)"}=h,{colorHighlight:i=n}=h,{label:c=null}=h,{fill:a="none"}=h,{fillHighlight:f=a}=h,{stroke:r="none"}=h,{strokeHighlight:t=r}=h,{strokeWidth:o=1}=h,{strokeWidthHighlight:l=o}=h,{strokeType:g="solid"}=h,{highlight:x=!1}=h;const C=Ee*1.5,M=Q/2.2,v=g==="dashed"?`${3*o}, ${1.5*o}`:g==="dotted"?`0, ${2*o}`:null;let p;return S.$$set=m=>{h=$($({},h),We(m)),d(9,u=Se(h,I)),"shape"in m&&d(0,e=m.shape),"src"in m&&d(1,s=m.src),"color"in m&&d(2,n=m.color),"colorHighlight"in m&&d(3,i=m.colorHighlight),"label"in m&&d(4,c=m.label),"fill"in m&&d(10,a=m.fill),"fillHighlight"in m&&d(11,f=m.fillHighlight),"stroke"in m&&d(12,r=m.stroke),"strokeHighlight"in m&&d(13,t=m.strokeHighlight),"strokeWidth"in m&&d(14,o=m.strokeWidth),"strokeWidthHighlight"in m&&d(15,l=m.strokeWidthHighlight),"strokeType"in m&&d(16,g=m.strokeType),"highlight"in m&&d(5,x=m.highlight)},S.$$.update=()=>{S.$$.dirty&64545&&d(6,p={fill:x?f:a,stroke:x?t:r,"stroke-width":x?l:o,"stroke-linecap":e==="dashed"?"butt":"round","stroke-dasharray":v||""})},[e,s,n,i,c,x,p,C,M,u,a,f,r,t,o,l,g]}class bt extends ie{constructor(h){super(),se(this,h,Zt,Kt,re,{shape:0,src:1,color:2,colorHighlight:3,label:4,fill:10,fillHighlight:11,stroke:12,strokeHighlight:13,strokeWidth:14,strokeWidthHighlight:15,strokeType:16,highlight:5})}}function Jt(S){let h;return{c(){h=he("Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},l(d){h=ge(d,"Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},m(d,I){Z(d,h,I)},d(d){d&&R(h)}}}function Xt(S){let h,d,I,u;d=new ze({props:{$$slots:{default:[Jt]},$$scope:{ctx:S}}});const e=S[0].default,s=oe(e,S,S[1],null);return{c(){h=J("section"),Te(d.$$.fragment),I=de(),s&&s.c()},l(n){h=X(n,"SECTION",{});var i=V(h);Be(d.$$.fragment,i),I=pe(i),s&&s.l(i),i.forEach(R)},m(n,i){Z(n,h,i),Ae(d,h,null),N(h,I),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&2&&(c.$$scope={dirty:i,ctx:n}),d.$set(c),s&&s.p&&(!u||i&2)&&le(s,e,n,n[1],u?ue(e,n[1],i,null):fe(n[1]),null)},i(n){u||(j(d.$$.fragment,n),j(s,n),u=!0)},o(n){q(d.$$.fragment,n),q(s,n),u=!1},d(n){n&&R(h),Le(d),s&&s.d(n)}}}function Yt(S,h,d){let{$$slots:I={},$$scope:u}=h;return S.$$set=e=>{"$$scope"in e&&d(1,u=e.$$scope)},[I,u]}class Rn extends ie{constructor(h){super(),se(this,h,Yt,Xt,re,{})}}function _t(S){let h;return{c(){h=he("Propositions d'am\xE9nagement")},l(d){h=ge(d,"Propositions d'am\xE9nagement")},m(d,I){Z(d,h,I)},d(d){d&&R(h)}}}function jt(S){let h,d,I,u;d=new ze({props:{$$slots:{default:[_t]},$$scope:{ctx:S}}});const e=S[0].default,s=oe(e,S,S[1],null);return{c(){h=J("section"),Te(d.$$.fragment),I=de(),s&&s.c()},l(n){h=X(n,"SECTION",{});var i=V(h);Be(d.$$.fragment,i),I=pe(i),s&&s.l(i),i.forEach(R)},m(n,i){Z(n,h,i),Ae(d,h,null),N(h,I),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&2&&(c.$$scope={dirty:i,ctx:n}),d.$set(c),s&&s.p&&(!u||i&2)&&le(s,e,n,n[1],u?ue(e,n[1],i,null):fe(n[1]),null)},i(n){u||(j(d.$$.fragment,n),j(s,n),u=!0)},o(n){q(d.$$.fragment,n),q(s,n),u=!1},d(n){n&&R(h),Le(d),s&&s.d(n)}}}function qt(S,h,d){let{$$slots:I={},$$scope:u}=h;return S.$$set=e=>{"$$scope"in e&&d(1,u=e.$$scope)},[I,u]}class Fn extends ie{constructor(h){super(),se(this,h,qt,jt,re,{})}}function $t(S){let h,d,I,u,e,s,n,i;I=new bt({props:{label:S[0],color:S[5],fill:S[6],stroke:S[7],strokeWidth:S[8],colorHighlight:S[9],fillHighlight:S[10],strokeHighlight:S[11],strokeWidthHighlight:S[12],src:S[13],shape:S[4],interactive:S[2],highlight:S[3]}});const c=S[21].default,a=oe(c,S,S[20],null);return{c(){h=J("div"),d=J("dt"),Te(I.$$.fragment),u=de(),e=J("dd"),a&&a.c(),this.h()},l(f){h=X(f,"DIV",{class:!0});var r=V(h);d=X(r,"DT",{class:!0});var t=V(d);Be(I.$$.fragment,t),t.forEach(R),u=pe(r),e=X(r,"DD",{class:!0});var o=V(e);a&&a.l(o),o.forEach(R),r.forEach(R),this.h()},h(){F(d,"class","cpeum-i3hzbr"),F(e,"class","cpeum-i3hzbr"),F(h,"class","cpeum-i3hzbr"),G(h,"interactive",S[2]),G(h,"highlight",S[3]||S[15]&&S[14]===S[1])},m(f,r){Z(f,h,r),N(h,d),Ae(I,d,null),N(h,u),N(h,e),a&&a.m(e,null),s=!0,n||(i=[ne(h,"mouseover",S[22]),ne(h,"mouseleave",S[23]),ne(h,"mouseover",S[16]),ne(h,"mouseleave",S[17]),ne(h,"focus",S[24])],n=!0)},p(f,[r]){const t={};r&1&&(t.label=f[0]),r&32&&(t.color=f[5]),r&64&&(t.fill=f[6]),r&128&&(t.stroke=f[7]),r&256&&(t.strokeWidth=f[8]),r&512&&(t.colorHighlight=f[9]),r&1024&&(t.fillHighlight=f[10]),r&2048&&(t.strokeHighlight=f[11]),r&4096&&(t.strokeWidthHighlight=f[12]),r&8192&&(t.src=f[13]),r&16&&(t.shape=f[4]),r&4&&(t.interactive=f[2]),r&8&&(t.highlight=f[3]),I.$set(t),a&&a.p&&(!s||r&1048576)&&le(a,c,f,f[20],s?ue(c,f[20],r,null):fe(f[20]),null),r&4&&G(h,"interactive",f[2]),r&49162&&G(h,"highlight",f[3]||f[15]&&f[14]===f[1])},i(f){s||(j(I.$$.fragment,f),j(a,f),s=!0)},o(f){q(I.$$.fragment,f),q(a,f),s=!1},d(f){f&&R(h),Le(I),a&&a.d(f),n=!1,Oe(i)}}}function en(S,h,d){let I,{$$slots:u={},$$scope:e}=h,{label:s=null}=h,{key:n=null}=h,{interactive:i=n!==null}=h,{highlight:c=!1}=h,{shape:a="circle"}=h,{color:f="var(--light1)"}=h,{fill:r="var(--accent2)"}=h,{stroke:t=null}=h,{strokeWidth:o=0}=h,{colorHighlight:l=void 0}=h,{fillHighlight:g=void 0}=h,{strokeHighlight:x=void 0}=h,{strokeWidthHighlight:C=void 0}=h,{arrowEnd:M=!1}=h,{arrowStart:v=!1}=h,{src:p=null}=h;const m=Ke("currentKey");Ve(S,m,T=>d(14,I=T));function y(){m&&m.set(n)}function w(){m&&m.set(null)}function E(T){Ne.call(this,S,T)}function k(T){Ne.call(this,S,T)}function P(T){Ne.call(this,S,T)}return S.$$set=T=>{"label"in T&&d(0,s=T.label),"key"in T&&d(1,n=T.key),"interactive"in T&&d(2,i=T.interactive),"highlight"in T&&d(3,c=T.highlight),"shape"in T&&d(4,a=T.shape),"color"in T&&d(5,f=T.color),"fill"in T&&d(6,r=T.fill),"stroke"in T&&d(7,t=T.stroke),"strokeWidth"in T&&d(8,o=T.strokeWidth),"colorHighlight"in T&&d(9,l=T.colorHighlight),"fillHighlight"in T&&d(10,g=T.fillHighlight),"strokeHighlight"in T&&d(11,x=T.strokeHighlight),"strokeWidthHighlight"in T&&d(12,C=T.strokeWidthHighlight),"arrowEnd"in T&&d(18,M=T.arrowEnd),"arrowStart"in T&&d(19,v=T.arrowStart),"src"in T&&d(13,p=T.src),"$$scope"in T&&d(20,e=T.$$scope)},[s,n,i,c,a,f,r,t,o,l,g,x,C,p,I,m,y,w,M,v,e,u,E,k,P]}class Dn extends ie{constructor(h){super(),se(this,h,en,$t,re,{label:0,key:1,interactive:2,highlight:3,shape:4,color:5,fill:6,stroke:7,strokeWidth:8,colorHighlight:9,fillHighlight:10,strokeHighlight:11,strokeWidthHighlight:12,arrowEnd:18,arrowStart:19,src:13})}}function tn(S){let h,d,I,u;const e=S[2].default,s=oe(e,S,S[1],null);return{c(){h=J("div"),s&&s.c(),this.h()},l(n){h=X(n,"DIV",{style:!0,class:!0});var i=V(h);s&&s.l(i),i.forEach(R),this.h()},h(){F(h,"style",d=lt(S[0])),F(h,"class","cpeum-1sqjp0y")},m(n,i){Z(n,h,i),s&&s.m(h,null),u=!0},p(n,[i]){s&&s.p&&(!u||i&2)&&le(s,e,n,n[1],u?ue(e,n[1],i,null):fe(n[1]),null),(!u||i&1&&d!==(d=lt(n[0])))&&F(h,"style",d)},i(n){u||(j(s,n),Ze(()=>{I||(I=st(h,ft,{},!0)),I.run(1)}),u=!0)},o(n){q(s,n),I||(I=st(h,ft,{},!1)),I.run(0),u=!1},d(n){n&&R(h),s&&s.d(n),n&&I&&I.end()}}}function nn(S,h,d){let{$$slots:I={},$$scope:u}=h,{key:e}=h;return Me("exercice",e),be(()=>{}),gt(()=>{}),S.$$set=s=>{"key"in s&&d(0,e=s.key),"$$scope"in s&&d(1,u=s.$$scope)},[e,u,I]}class Wn extends ie{constructor(h){super(),se(this,h,nn,tn,re,{key:0})}}var Xe={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(S,h){(function(I,u){S.exports=u()})(De,function(){return function(d){var I={};function u(e){if(I[e])return I[e].exports;var s=I[e]={i:e,l:!1,exports:{}};return d[e].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return u.m=d,u.c=I,u.d=function(e,s,n){u.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:n})},u.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,s){if(s&1&&(e=u(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var i in e)u.d(n,i,function(c){return e[c]}.bind(null,i));return n},u.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(s,"a",s),s},u.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},u.p="",u(u.s=21)}([function(d,I){var u={};d.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(s,n){var i,c;typeof n=="boolean"?(i=2,c=n):(i=1,c=!0);for(var a=i;a<arguments.length;a++){var f=arguments[a];if(f)for(var r in f)c&&f[r]&&f[r].constructor===Object&&(!s[r]||s[r].constructor===Object)?(s[r]=s[r]||{},u.extend(s[r],c,f[r])):s[r]=f[r]}return s},u.clone=function(s,n){return u.extend({},n,s)},u.keys=function(s){if(Object.keys)return Object.keys(s);var n=[];for(var i in s)n.push(i);return n},u.values=function(s){var n=[];if(Object.keys){for(var i=Object.keys(s),c=0;c<i.length;c++)n.push(s[i[c]]);return n}for(var a in s)n.push(s[a]);return n},u.get=function(s,n,i,c){n=n.split(".").slice(i,c);for(var a=0;a<n.length;a+=1)s=s[n[a]];return s},u.set=function(s,n,i,c,a){var f=n.split(".").slice(c,a);return u.get(s,n,0,-1)[f[f.length-1]]=i,i},u.shuffle=function(s){for(var n=s.length-1;n>0;n--){var i=Math.floor(u.random()*(n+1)),c=s[n];s[n]=s[i],s[i]=c}return s},u.choose=function(s){return s[Math.floor(u.random()*s.length)]},u.isElement=function(s){return typeof HTMLElement!="undefined"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},u.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},u.isFunction=function(s){return typeof s=="function"},u.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},u.isString=function(s){return toString.call(s)==="[object String]"},u.clamp=function(s,n,i){return s<n?n:s>i?i:s},u.sign=function(s){return s<0?-1:1},u.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(s,n){return s=typeof s!="undefined"?s:0,n=typeof n!="undefined"?n:1,s+e()*(n-s)};var e=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[s]||(u.warn(s),u._warnedOnce[s]=!0)},u.deprecated=function(s,n,i){s[n]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",i)},s[n])},u.nextId=function(){return u._nextId++},u.indexOf=function(s,n){if(s.indexOf)return s.indexOf(n);for(var i=0;i<s.length;i++)if(s[i]===n)return i;return-1},u.map=function(s,n){if(s.map)return s.map(n);for(var i=[],c=0;c<s.length;c+=1)i.push(n(s[c]));return i},u.topologicalSort=function(s){var n=[],i=[],c=[];for(var a in s)!i[a]&&!c[a]&&u._topologicalSort(a,i,c,s,n);return n},u._topologicalSort=function(s,n,i,c,a){var f=c[s]||[];i[s]=!0;for(var r=0;r<f.length;r+=1){var t=f[r];i[t]||n[t]||u._topologicalSort(t,n,i,c,a)}i[s]=!1,n[s]=!0,a.push(s)},u.chain=function(){for(var s=[],n=0;n<arguments.length;n+=1){var i=arguments[n];i._chained?s.push.apply(s,i._chained):s.push(i)}var c=function(){for(var a,f=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)f[r]=arguments[r];for(r=0;r<s.length;r+=1){var o=s[r].apply(a,f);typeof o!="undefined"&&(a=o)}return a};return c._chained=s,c},u.chainPathBefore=function(s,n,i){return u.set(s,n,u.chain(i,u.get(s,n)))},u.chainPathAfter=function(s,n,i){return u.set(s,n,u.chain(u.get(s,n),i))},u.setDecomp=function(s){u._decomp=s},u.getDecomp=function(){var s=u._decomp;try{!s&&typeof window!="undefined"&&(s=window.decomp),!s&&typeof De!="undefined"&&(s=De.decomp)}catch{s=null}return s}}()},function(d,I){var u={};d.exports=u,function(){u.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&u.update(s,e),s},u.update=function(e,s,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<s.length;i++){var c=s[i];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},u.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},u.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},u.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},u.shift=function(e,s){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+n,e.min.y=s.y,e.max.y=s.y+i}}()},function(d,I){var u={};d.exports=u,function(){u.create=function(e,s){return{x:e||0,y:s||0}},u.clone=function(e){return{x:e.x,y:e.y}},u.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},u.rotate=function(e,s,n){var i=Math.cos(s),c=Math.sin(s);n||(n={});var a=e.x*i-e.y*c;return n.y=e.x*c+e.y*i,n.x=a,n},u.rotateAbout=function(e,s,n,i){var c=Math.cos(s),a=Math.sin(s);i||(i={});var f=n.x+((e.x-n.x)*c-(e.y-n.y)*a);return i.y=n.y+((e.x-n.x)*a+(e.y-n.y)*c),i.x=f,i},u.normalise=function(e){var s=u.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},u.dot=function(e,s){return e.x*s.x+e.y*s.y},u.cross=function(e,s){return e.x*s.y-e.y*s.x},u.cross3=function(e,s,n){return(s.x-e.x)*(n.y-e.y)-(s.y-e.y)*(n.x-e.x)},u.add=function(e,s,n){return n||(n={}),n.x=e.x+s.x,n.y=e.y+s.y,n},u.sub=function(e,s,n){return n||(n={}),n.x=e.x-s.x,n.y=e.y-s.y,n},u.mult=function(e,s){return{x:e.x*s,y:e.y*s}},u.div=function(e,s){return{x:e.x/s,y:e.y/s}},u.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},u.neg=function(e){return{x:-e.x,y:-e.y}},u.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(d,I,u){var e={};d.exports=e;var s=u(2),n=u(0);(function(){e.create=function(i,c){for(var a=[],f=0;f<i.length;f++){var r=i[f],t={x:r.x,y:r.y,index:f,body:c,isInternal:!1};a.push(t)}return a},e.fromPath=function(i,c){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return i.replace(a,function(r,t,o){f.push({x:parseFloat(t),y:parseFloat(o)})}),e.create(f,c)},e.centre=function(i){for(var c=e.area(i,!0),a={x:0,y:0},f,r,t,o=0;o<i.length;o++)t=(o+1)%i.length,f=s.cross(i[o],i[t]),r=s.mult(s.add(i[o],i[t]),f),a=s.add(a,r);return s.div(a,6*c)},e.mean=function(i){for(var c={x:0,y:0},a=0;a<i.length;a++)c.x+=i[a].x,c.y+=i[a].y;return s.div(c,i.length)},e.area=function(i,c){for(var a=0,f=i.length-1,r=0;r<i.length;r++)a+=(i[f].x-i[r].x)*(i[f].y+i[r].y),f=r;return c?a/2:Math.abs(a)/2},e.inertia=function(i,c){for(var a=0,f=0,r=i,t,o,l=0;l<r.length;l++)o=(l+1)%r.length,t=Math.abs(s.cross(r[o],r[l])),a+=t*(s.dot(r[o],r[o])+s.dot(r[o],r[l])+s.dot(r[l],r[l])),f+=t;return c/6*(a/f)},e.translate=function(i,c,a){a=typeof a!="undefined"?a:1;var f=i.length,r=c.x*a,t=c.y*a,o;for(o=0;o<f;o++)i[o].x+=r,i[o].y+=t;return i},e.rotate=function(i,c,a){if(c!==0){var f=Math.cos(c),r=Math.sin(c),t=a.x,o=a.y,l=i.length,g,x,C,M;for(M=0;M<l;M++)g=i[M],x=g.x-t,C=g.y-o,g.x=t+(x*f-C*r),g.y=o+(x*r+C*f);return i}},e.contains=function(i,c){for(var a=c.x,f=c.y,r=i.length,t=i[r-1],o,l=0;l<r;l++){if(o=i[l],(a-t.x)*(o.y-t.y)+(f-t.y)*(t.x-o.x)>0)return!1;t=o}return!0},e.scale=function(i,c,a,f){if(c===1&&a===1)return i;f=f||e.centre(i);for(var r,t,o=0;o<i.length;o++)r=i[o],t=s.sub(r,f),i[o].x=f.x+t.x*c,i[o].y=f.y+t.y*a;return i},e.chamfer=function(i,c,a,f,r){typeof c=="number"?c=[c]:c=c||[8],a=typeof a!="undefined"?a:-1,f=f||2,r=r||14;for(var t=[],o=0;o<i.length;o++){var l=i[o-1>=0?o-1:i.length-1],g=i[o],x=i[(o+1)%i.length],C=c[o<c.length?o:c.length-1];if(C===0){t.push(g);continue}var M=s.normalise({x:g.y-l.y,y:l.x-g.x}),v=s.normalise({x:x.y-g.y,y:g.x-x.x}),p=Math.sqrt(2*Math.pow(C,2)),m=s.mult(n.clone(M),C),y=s.normalise(s.mult(s.add(M,v),.5)),w=s.sub(g,s.mult(y,p)),E=a;a===-1&&(E=Math.pow(C,.32)*1.75),E=n.clamp(E,f,r),E%2===1&&(E+=1);for(var k=Math.acos(s.dot(M,v)),P=k/E,T=0;T<E;T++)t.push(s.add(s.rotate(m,P*T),w))}return t},e.clockwiseSort=function(i){var c=e.mean(i);return i.sort(function(a,f){return s.angle(c,a)-s.angle(c,f)}),i},e.isConvex=function(i){var c=0,a=i.length,f,r,t,o;if(a<3)return null;for(f=0;f<a;f++)if(r=(f+1)%a,t=(f+2)%a,o=(i[r].x-i[f].x)*(i[t].y-i[r].y),o-=(i[r].y-i[f].y)*(i[t].x-i[r].x),o<0?c|=1:o>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(i){var c=[],a=[],f,r;for(i=i.slice(0),i.sort(function(t,o){var l=t.x-o.x;return l!==0?l:t.y-o.y}),r=0;r<i.length;r+=1){for(f=i[r];a.length>=2&&s.cross3(a[a.length-2],a[a.length-1],f)<=0;)a.pop();a.push(f)}for(r=i.length-1;r>=0;r-=1){for(f=i[r];c.length>=2&&s.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),a.pop(),c.concat(a)}})()},function(d,I,u){var e={};d.exports=e;var s=u(0);(function(){e.on=function(n,i,c){for(var a=i.split(" "),f,r=0;r<a.length;r++)f=a[r],n.events=n.events||{},n.events[f]=n.events[f]||[],n.events[f].push(c);return c},e.off=function(n,i,c){if(!i){n.events={};return}typeof i=="function"&&(c=i,i=s.keys(n.events).join(" "));for(var a=i.split(" "),f=0;f<a.length;f++){var r=n.events[a[f]],t=[];if(c&&r)for(var o=0;o<r.length;o++)r[o]!==c&&t.push(r[o]);n.events[a[f]]=t}},e.trigger=function(n,i,c){var a,f,r,t,o=n.events;if(o&&s.keys(o).length>0){c||(c={}),a=i.split(" ");for(var l=0;l<a.length;l++)if(f=a[l],r=o[f],r){t=s.clone(c,!1),t.name=f,t.source=n;for(var g=0;g<r.length;g++)r[g].apply(n,[t])}}}})()},function(d,I,u){var e={};d.exports=e;var s=u(4),n=u(0),i=u(1),c=u(6);(function(){e.create=function(a){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},e.setModified=function(a,f,r,t){if(a.isModified=f,f&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),r&&a.parent&&e.setModified(a.parent,f,r,t),t)for(var o=0;o<a.composites.length;o++){var l=a.composites[o];e.setModified(l,f,r,t)}},e.add=function(a,f){var r=[].concat(f);s.trigger(a,"beforeAdd",{object:f});for(var t=0;t<r.length;t++){var o=r[t];switch(o.type){case"body":if(o.parent!==o){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(a,o);break;case"constraint":e.addConstraint(a,o);break;case"composite":e.addComposite(a,o);break;case"mouseConstraint":e.addConstraint(a,o.constraint);break}}return s.trigger(a,"afterAdd",{object:f}),a},e.remove=function(a,f,r){var t=[].concat(f);s.trigger(a,"beforeRemove",{object:f});for(var o=0;o<t.length;o++){var l=t[o];switch(l.type){case"body":e.removeBody(a,l,r);break;case"constraint":e.removeConstraint(a,l,r);break;case"composite":e.removeComposite(a,l,r);break;case"mouseConstraint":e.removeConstraint(a,l.constraint);break}}return s.trigger(a,"afterRemove",{object:f}),a},e.addComposite=function(a,f){return a.composites.push(f),f.parent=a,e.setModified(a,!0,!0,!1),a},e.removeComposite=function(a,f,r){var t=n.indexOf(a.composites,f);if(t!==-1&&e.removeCompositeAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeComposite(a.composites[o],f,!0);return a},e.removeCompositeAt=function(a,f){return a.composites.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addBody=function(a,f){return a.bodies.push(f),e.setModified(a,!0,!0,!1),a},e.removeBody=function(a,f,r){var t=n.indexOf(a.bodies,f);if(t!==-1&&e.removeBodyAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeBody(a.composites[o],f,!0);return a},e.removeBodyAt=function(a,f){return a.bodies.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addConstraint=function(a,f){return a.constraints.push(f),e.setModified(a,!0,!0,!1),a},e.removeConstraint=function(a,f,r){var t=n.indexOf(a.constraints,f);if(t!==-1&&e.removeConstraintAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeConstraint(a.composites[o],f,!0);return a},e.removeConstraintAt=function(a,f){return a.constraints.splice(f,1),e.setModified(a,!0,!0,!1),a},e.clear=function(a,f,r){if(r)for(var t=0;t<a.composites.length;t++)e.clear(a.composites[t],f,!0);return f?a.bodies=a.bodies.filter(function(o){return o.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,e.setModified(a,!0,!0,!1),a},e.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var f=[].concat(a.bodies),r=0;r<a.composites.length;r++)f=f.concat(e.allBodies(a.composites[r]));return a.cache&&(a.cache.allBodies=f),f},e.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var f=[].concat(a.constraints),r=0;r<a.composites.length;r++)f=f.concat(e.allConstraints(a.composites[r]));return a.cache&&(a.cache.allConstraints=f),f},e.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var f=[].concat(a.composites),r=0;r<a.composites.length;r++)f=f.concat(e.allComposites(a.composites[r]));return a.cache&&(a.cache.allComposites=f),f},e.get=function(a,f,r){var t,o;switch(r){case"body":t=e.allBodies(a);break;case"constraint":t=e.allConstraints(a);break;case"composite":t=e.allComposites(a).concat(a);break}return t?(o=t.filter(function(l){return l.id.toString()===f.toString()}),o.length===0?null:o[0]):null},e.move=function(a,f,r){return e.remove(a,f),e.add(r,f),a},e.rebase=function(a){for(var f=e.allBodies(a).concat(e.allConstraints(a)).concat(e.allComposites(a)),r=0;r<f.length;r++)f[r].id=n.nextId();return a},e.translate=function(a,f,r){for(var t=r?e.allBodies(a):a.bodies,o=0;o<t.length;o++)c.translate(t[o],f);return a},e.rotate=function(a,f,r,t){for(var o=Math.cos(f),l=Math.sin(f),g=t?e.allBodies(a):a.bodies,x=0;x<g.length;x++){var C=g[x],M=C.position.x-r.x,v=C.position.y-r.y;c.setPosition(C,{x:r.x+(M*o-v*l),y:r.y+(M*l+v*o)}),c.rotate(C,f)}return a},e.scale=function(a,f,r,t,o){for(var l=o?e.allBodies(a):a.bodies,g=0;g<l.length;g++){var x=l[g],C=x.position.x-t.x,M=x.position.y-t.y;c.setPosition(x,{x:t.x+C*f,y:t.y+M*r}),c.scale(x,f,r)}return a},e.bounds=function(a){for(var f=e.allBodies(a),r=[],t=0;t<f.length;t+=1){var o=f[t];r.push(o.bounds.min,o.bounds.max)}return i.create(r)}})()},function(d,I,u){var e={};d.exports=e;var s=u(3),n=u(2),i=u(7);u(16);var c=u(0),a=u(1),f=u(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var o={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},l=c.extend(o,t);return r(l,t),l},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,o){o=o||{},e.set(t,{bounds:t.bounds||a.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),a.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:o.axes||t.axes,area:o.area||t.area,mass:o.mass||t.mass,inertia:o.inertia||t.inertia});var l=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),g=t.isStatic?"#555":"#ccc",x=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||l,t.render.strokeStyle=t.render.strokeStyle||g,t.render.lineWidth=t.render.lineWidth||x,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,o,l){var g;typeof o=="string"&&(g=o,o={},o[g]=l);for(g in o)if(!!Object.prototype.hasOwnProperty.call(o,g))switch(l=o[g],g){case"isStatic":e.setStatic(t,l);break;case"isSleeping":i.set(t,l);break;case"mass":e.setMass(t,l);break;case"density":e.setDensity(t,l);break;case"inertia":e.setInertia(t,l);break;case"vertices":e.setVertices(t,l);break;case"position":e.setPosition(t,l);break;case"angle":e.setAngle(t,l);break;case"velocity":e.setVelocity(t,l);break;case"angularVelocity":e.setAngularVelocity(t,l);break;case"parts":e.setParts(t,l);break;case"centre":e.setCentre(t,l);break;default:t[g]=l}},e.setStatic=function(t,o){for(var l=0;l<t.parts.length;l++){var g=t.parts[l];g.isStatic=o,o?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},e.setMass=function(t,o){var l=t.inertia/(t.mass/6);t.inertia=l*(o/6),t.inverseInertia=1/t.inertia,t.mass=o,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,o){e.setMass(t,o*t.area),t.density=o},e.setInertia=function(t,o){t.inertia=o,t.inverseInertia=1/t.inertia},e.setVertices=function(t,o){o[0].body===t?t.vertices=o:t.vertices=s.create(o,t),t.axes=f.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var l=s.centre(t.vertices);s.translate(t.vertices,l,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),a.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,o,l){var g;for(o=o.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,g=0;g<o.length;g++){var x=o[g];x!==t&&(x.parent=t,t.parts.push(x))}if(t.parts.length!==1){if(l=typeof l!="undefined"?l:!0,l){var C=[];for(g=0;g<o.length;g++)C=C.concat(o[g].vertices);s.clockwiseSort(C);var M=s.hull(C),v=s.centre(M);e.setVertices(t,M),s.translate(t.vertices,v)}var p=e._totalProperties(t);t.area=p.area,t.parent=t,t.position.x=p.centre.x,t.position.y=p.centre.y,t.positionPrev.x=p.centre.x,t.positionPrev.y=p.centre.y,e.setMass(t,p.mass),e.setInertia(t,p.inertia),e.setPosition(t,p.centre)}},e.setCentre=function(t,o,l){l?(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y,t.position.x+=o.x,t.position.y+=o.y):(t.positionPrev.x=o.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=o.y-(t.position.y-t.positionPrev.y),t.position.x=o.x,t.position.y=o.y)},e.setPosition=function(t,o){var l=n.sub(o,t.position);t.positionPrev.x+=l.x,t.positionPrev.y+=l.y;for(var g=0;g<t.parts.length;g++){var x=t.parts[g];x.position.x+=l.x,x.position.y+=l.y,s.translate(x.vertices,l),a.update(x.bounds,x.vertices,t.velocity)}},e.setAngle=function(t,o){var l=o-t.angle;t.anglePrev+=l;for(var g=0;g<t.parts.length;g++){var x=t.parts[g];x.angle+=l,s.rotate(x.vertices,l,t.position),f.rotate(x.axes,l),a.update(x.bounds,x.vertices,t.velocity),g>0&&n.rotateAbout(x.position,l,t.position,x.position)}},e.setVelocity=function(t,o){t.positionPrev.x=t.position.x-o.x,t.positionPrev.y=t.position.y-o.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,o){t.anglePrev=t.angle-o,t.angularVelocity=o,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,o){e.setPosition(t,n.add(t.position,o))},e.rotate=function(t,o,l){if(!l)e.setAngle(t,t.angle+o);else{var g=Math.cos(o),x=Math.sin(o),C=t.position.x-l.x,M=t.position.y-l.y;e.setPosition(t,{x:l.x+(C*g-M*x),y:l.y+(C*x+M*g)}),e.setAngle(t,t.angle+o)}},e.scale=function(t,o,l,g){var x=0,C=0;g=g||t.position;for(var M=0;M<t.parts.length;M++){var v=t.parts[M];s.scale(v.vertices,o,l,g),v.axes=f.fromVertices(v.vertices),v.area=s.area(v.vertices),e.setMass(v,t.density*v.area),s.translate(v.vertices,{x:-v.position.x,y:-v.position.y}),e.setInertia(v,e._inertiaScale*s.inertia(v.vertices,v.mass)),s.translate(v.vertices,{x:v.position.x,y:v.position.y}),M>0&&(x+=v.area,C+=v.inertia),v.position.x=g.x+(v.position.x-g.x)*o,v.position.y=g.y+(v.position.y-g.y)*l,a.update(v.bounds,v.vertices,t.velocity)}t.parts.length>1&&(t.area=x,t.isStatic||(e.setMass(t,t.density*x),e.setInertia(t,C))),t.circleRadius&&(o===l?t.circleRadius*=o:t.circleRadius=null)},e.update=function(t,o,l,g){var x=Math.pow(o*l*t.timeScale,2),C=1-t.frictionAir*l*t.timeScale,M=t.position.x-t.positionPrev.x,v=t.position.y-t.positionPrev.y;t.velocity.x=M*C*g+t.force.x/t.mass*x,t.velocity.y=v*C*g+t.force.y/t.mass*x,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*g+t.torque/t.inertia*x,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var p=0;p<t.parts.length;p++){var m=t.parts[p];s.translate(m.vertices,t.velocity),p>0&&(m.position.x+=t.velocity.x,m.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(m.vertices,t.angularVelocity,t.position),f.rotate(m.axes,t.angularVelocity),p>0&&n.rotateAbout(m.position,t.angularVelocity,t.position,m.position)),a.update(m.bounds,m.vertices,t.velocity)}},e.applyForce=function(t,o,l){t.force.x+=l.x,t.force.y+=l.y;var g={x:o.x-t.position.x,y:o.y-t.position.y};t.torque+=g.x*l.y-g.y*l.x},e._totalProperties=function(t){for(var o={mass:0,area:0,inertia:0,centre:{x:0,y:0}},l=t.parts.length===1?0:1;l<t.parts.length;l++){var g=t.parts[l],x=g.mass!==1/0?g.mass:1;o.mass+=x,o.area+=g.area,o.inertia+=g.inertia,o.centre=n.add(o.centre,n.mult(g.position,x))}return o.centre=n.div(o.centre,o.mass),o}})()},function(d,I,u){var e={};d.exports=e;var s=u(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,i){for(var c=i*i*i,a=0;a<n.length;a++){var f=n[a],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,r),o=Math.max(f.motion,r);f.motion=e._minBias*t+(1-e._minBias)*o,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(n,i){for(var c=i*i*i,a=0;a<n.length;a++){var f=n[a];if(!!f.isActive){var r=f.collision,t=r.bodyA.parent,o=r.bodyB.parent;if(!(t.isSleeping&&o.isSleeping||t.isStatic||o.isStatic)&&(t.isSleeping||o.isSleeping)){var l=t.isSleeping&&!t.isStatic?t:o,g=l===t?o:t;!l.isStatic&&g.motion>e._motionWakeThreshold*c&&e.set(l,!1)}}}},e.set=function(n,i){var c=n.isSleeping;i?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,c||s.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,c&&s.trigger(n,"sleepEnd"))}})()},function(d,I,u){var e={};d.exports=e;var s=u(3),n=u(9);(function(){var i=[],c={overlap:0,axis:null},a={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,t){if(e._overlapAxes(c,f.vertices,r.vertices,f.axes),c.overlap<=0||(e._overlapAxes(a,r.vertices,f.vertices,r.axes),a.overlap<=0))return null;var o=t&&t.table[n.id(f,r)],l;o?l=o.collision:(l=e.create(f,r),l.collided=!0,l.bodyA=f.id<r.id?f:r,l.bodyB=f.id<r.id?r:f,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent),f=l.bodyA,r=l.bodyB;var g;c.overlap<a.overlap?g=c:g=a;var x=l.normal,C=l.supports,M=g.axis,v=M.x,p=M.y;v*(r.position.x-f.position.x)+p*(r.position.y-f.position.y)<0?(x.x=v,x.y=p):(x.x=-v,x.y=-p),l.tangent.x=-x.y,l.tangent.y=x.x,l.depth=g.overlap,l.penetration.x=x.x*l.depth,l.penetration.y=x.y*l.depth;var m=e._findSupports(f,r,x,1),y=0;if(s.contains(f.vertices,m[0])&&(C[y++]=m[0]),s.contains(f.vertices,m[1])&&(C[y++]=m[1]),y<2){var w=e._findSupports(r,f,x,-1);s.contains(r.vertices,w[0])&&(C[y++]=w[0]),y<2&&s.contains(r.vertices,w[1])&&(C[y++]=w[1])}return y===0&&(C[y++]=m[0]),C.length=y,l},e._overlapAxes=function(f,r,t,o){var l=r.length,g=t.length,x=r[0].x,C=r[0].y,M=t[0].x,v=t[0].y,p=o.length,m=Number.MAX_VALUE,y=0,w,E,k,P,T,B;for(T=0;T<p;T++){var A=o[T],L=A.x,H=A.y,D=x*L+C*H,z=M*L+v*H,W=D,K=z;for(B=1;B<l;B+=1)P=r[B].x*L+r[B].y*H,P>W?W=P:P<D&&(D=P);for(B=1;B<g;B+=1)P=t[B].x*L+t[B].y*H,P>K?K=P:P<z&&(z=P);if(E=W-z,k=K-D,w=E<k?E:k,w<m&&(m=w,y=T,w<=0))break}f.axis=o[y],f.overlap=m},e._projectToAxis=function(f,r,t){for(var o=r[0].x*t.x+r[0].y*t.y,l=o,g=1;g<r.length;g+=1){var x=r[g].x*t.x+r[g].y*t.y;x>l?l=x:x<o&&(o=x)}f.min=o,f.max=l},e._findSupports=function(f,r,t,o){var l=r.vertices,g=l.length,x=f.position.x,C=f.position.y,M=t.x*o,v=t.y*o,p=Number.MAX_VALUE,m,y,w,E,k;for(k=0;k<g;k+=1)y=l[k],E=M*(x-y.x)+v*(C-y.y),E<p&&(p=E,m=y);return w=l[(g+m.index-1)%g],p=M*(x-w.x)+v*(C-w.y),y=l[(m.index+1)%g],M*(x-y.x)+v*(C-y.y)<p?(i[0]=m,i[1]=y,i):(i[0]=m,i[1]=w,i)}})()},function(d,I,u){var e={};d.exports=e;var s=u(17);(function(){e.create=function(n,i){var c=n.bodyA,a=n.bodyB,f={id:e.id(c,a),bodyA:c,bodyB:a,collision:n,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||a.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,n,i),f},e.update=function(n,i,c){var a=n.contacts,f=i.supports,r=n.activeContacts,t=i.parentA,o=i.parentB,l=t.vertices.length;n.isActive=!0,n.timeUpdated=c,n.collision=i,n.separation=i.depth,n.inverseMass=t.inverseMass+o.inverseMass,n.friction=t.friction<o.friction?t.friction:o.friction,n.frictionStatic=t.frictionStatic>o.frictionStatic?t.frictionStatic:o.frictionStatic,n.restitution=t.restitution>o.restitution?t.restitution:o.restitution,n.slop=t.slop>o.slop?t.slop:o.slop,i.pair=n,r.length=0;for(var g=0;g<f.length;g++){var x=f[g],C=x.body===t?x.index:l+x.index,M=a[C];M?r.push(M):r.push(a[C]=s.create(x))}},e.setActive=function(n,i,c){i?(n.isActive=!0,n.timeUpdated=c):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,i){return n.id<i.id?"A"+n.id+"B"+i.id:"A"+i.id+"B"+n.id}})()},function(d,I,u){var e={};d.exports=e;var s=u(3),n=u(2),i=u(7),c=u(1),a=u(11),f=u(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var o=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,l=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,g=n.magnitude(n.sub(o,l));t.length=typeof t.length!="undefined"?t.length:g,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var x={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(x.type="pin",x.anchors=!1):t.stiffness<.9&&(x.type="spring"),t.render=f.extend(x,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var o=r[t],l=o.constraintImpulse;o.isStatic||l.x===0&&l.y===0&&l.angle===0||(o.position.x+=l.x,o.position.y+=l.y,o.angle+=l.angle)}},e.solveAll=function(r,t){for(var o=0;o<r.length;o+=1){var l=r[o],g=!l.bodyA||l.bodyA&&l.bodyA.isStatic,x=!l.bodyB||l.bodyB&&l.bodyB.isStatic;(g||x)&&e.solve(r[o],t)}for(o=0;o<r.length;o+=1)l=r[o],g=!l.bodyA||l.bodyA&&l.bodyA.isStatic,x=!l.bodyB||l.bodyB&&l.bodyB.isStatic,!g&&!x&&e.solve(r[o],t)},e.solve=function(r,t){var o=r.bodyA,l=r.bodyB,g=r.pointA,x=r.pointB;if(!(!o&&!l)){o&&!o.isStatic&&(n.rotate(g,o.angle-r.angleA,g),r.angleA=o.angle),l&&!l.isStatic&&(n.rotate(x,l.angle-r.angleB,x),r.angleB=l.angle);var C=g,M=x;if(o&&(C=n.add(o.position,g)),l&&(M=n.add(l.position,x)),!(!C||!M)){var v=n.sub(C,M),p=n.magnitude(v);p<e._minLength&&(p=e._minLength);var m=(p-r.length)/p,y=r.stiffness<1?r.stiffness*t:r.stiffness,w=n.mult(v,m*y),E=(o?o.inverseMass:0)+(l?l.inverseMass:0),k=(o?o.inverseInertia:0)+(l?l.inverseInertia:0),P=E+k,T,B,A,L,H;if(r.damping){var D=n.create();A=n.div(v,p),H=n.sub(l&&n.sub(l.position,l.positionPrev)||D,o&&n.sub(o.position,o.positionPrev)||D),L=n.dot(A,H)}o&&!o.isStatic&&(B=o.inverseMass/E,o.constraintImpulse.x-=w.x*B,o.constraintImpulse.y-=w.y*B,o.position.x-=w.x*B,o.position.y-=w.y*B,r.damping&&(o.positionPrev.x-=r.damping*A.x*L*B,o.positionPrev.y-=r.damping*A.y*L*B),T=n.cross(g,w)/P*e._torqueDampen*o.inverseInertia*(1-r.angularStiffness),o.constraintImpulse.angle-=T,o.angle-=T),l&&!l.isStatic&&(B=l.inverseMass/E,l.constraintImpulse.x+=w.x*B,l.constraintImpulse.y+=w.y*B,l.position.x+=w.x*B,l.position.y+=w.y*B,r.damping&&(l.positionPrev.x+=r.damping*A.x*L*B,l.positionPrev.y+=r.damping*A.y*L*B),T=n.cross(x,w)/P*e._torqueDampen*l.inverseInertia*(1-r.angularStiffness),l.constraintImpulse.angle+=T,l.angle+=T)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var o=r[t],l=o.constraintImpulse;if(!(o.isStatic||l.x===0&&l.y===0&&l.angle===0)){i.set(o,!1);for(var g=0;g<o.parts.length;g++){var x=o.parts[g];s.translate(x.vertices,l),g>0&&(x.position.x+=l.x,x.position.y+=l.y),l.angle!==0&&(s.rotate(x.vertices,l.angle,o.position),a.rotate(x.axes,l.angle),g>0&&n.rotateAbout(x.position,l.angle,o.position,x.position)),c.update(x.bounds,x.vertices,o.velocity)}l.angle*=e._warming,l.x*=e._warming,l.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(d,I,u){var e={};d.exports=e;var s=u(2),n=u(0);(function(){e.fromVertices=function(i){for(var c={},a=0;a<i.length;a++){var f=(a+1)%i.length,r=s.normalise({x:i[f].y-i[a].y,y:i[a].x-i[f].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),c[t]=r}return n.values(c)},e.rotate=function(i,c){if(c!==0)for(var a=Math.cos(c),f=Math.sin(c),r=0;r<i.length;r++){var t=i[r],o;o=t.x*a-t.y*f,t.y=t.x*f+t.y*a,t.x=o}}})()},function(d,I,u){var e={};d.exports=e;var s=u(3),n=u(0),i=u(6),c=u(1),a=u(2);(function(){e.rectangle=function(f,r,t,o,l){l=l||{};var g={label:"Rectangle Body",position:{x:f,y:r},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+o+" L 0 "+o)};if(l.chamfer){var x=l.chamfer;g.vertices=s.chamfer(g.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete l.chamfer}return i.create(n.extend({},g,l))},e.trapezoid=function(f,r,t,o,l,g){g=g||{},l*=.5;var x=(1-l*2)*t,C=t*l,M=C+x,v=M+C,p;l<.5?p="L 0 0 L "+C+" "+-o+" L "+M+" "+-o+" L "+v+" 0":p="L 0 0 L "+M+" "+-o+" L "+v+" 0";var m={label:"Trapezoid Body",position:{x:f,y:r},vertices:s.fromPath(p)};if(g.chamfer){var y=g.chamfer;m.vertices=s.chamfer(m.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete g.chamfer}return i.create(n.extend({},m,g))},e.circle=function(f,r,t,o,l){o=o||{};var g={label:"Circle Body",circleRadius:t};l=l||25;var x=Math.ceil(Math.max(10,Math.min(l,t)));return x%2===1&&(x+=1),e.polygon(f,r,x,t,n.extend({},g,o))},e.polygon=function(f,r,t,o,l){if(l=l||{},t<3)return e.circle(f,r,o,l);for(var g=2*Math.PI/t,x="",C=g*.5,M=0;M<t;M+=1){var v=C+M*g,p=Math.cos(v)*o,m=Math.sin(v)*o;x+="L "+p.toFixed(3)+" "+m.toFixed(3)+" "}var y={label:"Polygon Body",position:{x:f,y:r},vertices:s.fromPath(x)};if(l.chamfer){var w=l.chamfer;y.vertices=s.chamfer(y.vertices,w.radius,w.quality,w.qualityMin,w.qualityMax),delete l.chamfer}return i.create(n.extend({},y,l))},e.fromVertices=function(f,r,t,o,l,g,x,C){var M=n.getDecomp(),v,p,m,y,w,E,k,P,T,B,A;for(v=Boolean(M&&M.quickDecomp),o=o||{},m=[],l=typeof l!="undefined"?l:!1,g=typeof g!="undefined"?g:.01,x=typeof x!="undefined"?x:10,C=typeof C!="undefined"?C:.01,n.isArray(t[0])||(t=[t]),B=0;B<t.length;B+=1)if(E=t[B],y=s.isConvex(E),w=!y,w&&!v&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),y||!v)y?E=s.clockwiseSort(E):E=s.hull(E),m.push({position:{x:f,y:r},vertices:E});else{var L=E.map(function(te){return[te.x,te.y]});M.makeCCW(L),g!==!1&&M.removeCollinearPoints(L,g),C!==!1&&M.removeDuplicatePoints&&M.removeDuplicatePoints(L,C);var H=M.quickDecomp(L);for(k=0;k<H.length;k++){var D=H[k],z=D.map(function(te){return{x:te[0],y:te[1]}});x>0&&s.area(z)<x||m.push({position:s.centre(z),vertices:z})}}for(k=0;k<m.length;k++)m[k]=i.create(n.extend(m[k],o));if(l){var W=5;for(k=0;k<m.length;k++){var K=m[k];for(P=k+1;P<m.length;P++){var Y=m[P];if(c.overlaps(K.bounds,Y.bounds)){var _=K.vertices,b=Y.vertices;for(T=0;T<K.vertices.length;T++)for(A=0;A<Y.vertices.length;A++){var ce=a.magnitudeSquared(a.sub(_[(T+1)%_.length],b[A])),ee=a.magnitudeSquared(a.sub(_[T],b[(A+1)%b.length]));ce<W&&ee<W&&(_[T].isInternal=!0,b[A].isInternal=!0)}}}}}return m.length>1?(p=i.create(n.extend({parts:m.slice(0)},o)),i.setPosition(p,{x:f,y:r}),p):m[0]}})()},function(d,I,u){var e={};d.exports=e;var s=u(0);(function(){e.create=function(n){var i={};return n||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=n||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(c){var a=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&(i.button=0,c.preventDefault()),i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=c},i.mousedown=function(c){var a=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f?(i.button=0,c.preventDefault()):i.button=c.button,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=c},i.mouseup=function(c){var a=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),i.button=-1,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=c},i.mousewheel=function(c){i.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(n,i){n.element=i,i.addEventListener("mousemove",n.mousemove),i.addEventListener("mousedown",n.mousedown),i.addEventListener("mouseup",n.mouseup),i.addEventListener("mousewheel",n.mousewheel),i.addEventListener("DOMMouseScroll",n.mousewheel),i.addEventListener("touchmove",n.mousemove),i.addEventListener("touchstart",n.mousedown),i.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,i){n.offset.x=i.x,n.offset.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,i){n.scale.x=i.x,n.scale.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,i,c){var a=i.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,o=n.changedTouches,l,g;return o?(l=o[0].pageX-a.left-r,g=o[0].pageY-a.top-t):(l=n.pageX-a.left-r,g=n.pageY-a.top-t),{x:l/(i.clientWidth/(i.width||i.clientWidth)*c),y:g/(i.clientHeight/(i.height||i.clientHeight)*c)}}})()},function(d,I,u){var e={};d.exports=e;var s=u(0),n=u(8);(function(){e.create=function(i){var c={bodies:[],pairs:null};return s.extend(c,i)},e.setBodies=function(i,c){i.bodies=c.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var c=[],a=i.pairs,f=i.bodies,r=f.length,t=e.canCollide,o=n.collides,l,g;for(f.sort(e._compareBoundsX),l=0;l<r;l++){var x=f[l],C=x.bounds,M=x.bounds.max.x,v=x.bounds.max.y,p=x.bounds.min.y,m=x.isStatic||x.isSleeping,y=x.parts.length,w=y===1;for(g=l+1;g<r;g++){var E=f[g],k=E.bounds;if(k.min.x>M)break;if(!(v<k.min.y||p>k.max.y)&&!(m&&(E.isStatic||E.isSleeping))&&!!t(x.collisionFilter,E.collisionFilter)){var P=E.parts.length;if(w&&P===1){var T=o(x,E,a);T&&c.push(T)}else for(var B=y>1?1:0,A=P>1?1:0,L=B;L<y;L++)for(var H=x.parts[L],C=H.bounds,D=A;D<P;D++){var z=E.parts[D],k=z.bounds;if(!(C.min.x>k.max.x||C.max.x<k.min.x||C.max.y<k.min.y||C.min.y>k.max.y)){var T=o(H,z,a);T&&c.push(T)}}}}}return c},e.canCollide=function(i,c){return i.group===c.group&&i.group!==0?i.group>0:(i.mask&c.category)!==0&&(c.mask&i.category)!==0},e._compareBoundsX=function(i,c){return i.bounds.min.x-c.bounds.min.x}})()},function(d,I,u){var e={};d.exports=e;var s=u(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||s.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var i=e._registry[n.name],c=e.versionParse(n.version).number,a=e.versionParse(i.version).number;c>a?(s.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(n)),e._registry[n.name]=n):c<a?s.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(n)):n!==i&&s.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,i){return n.used.indexOf(i)>-1},e.isFor=function(n,i){var c=n.for&&e.dependencyParse(n.for);return!n.for||i.name===c.name&&e.versionSatisfies(i.version,c.range)},e.use=function(n,i){if(n.uses=(n.uses||[]).concat(i||[]),n.uses.length===0){s.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var c=e.dependencies(n),a=s.topologicalSort(c),f=[],r=0;r<a.length;r+=1)if(a[r]!==n.name){var t=e.resolve(a[r]);if(!t){f.push("\u274C "+a[r]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),n.used.push(t.name))}f.length>0&&s.info(f.join("  "))},e.dependencies=function(n,i){var c=e.dependencyParse(n),a=c.name;if(i=i||{},!(a in i)){n=e.resolve(n)||n,i[a]=s.map(n.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),o=e.resolve(r);return o&&!e.versionSatisfies(o.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(o),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),o._warned=!0,n._warned=!0):o||(s.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(c),"could not be resolved."),n._warned=!0),t.name});for(var f=0;f<i[a].length;f+=1)e.dependencies(i[a][f],i);return i}},e.dependencyParse=function(n){if(s.isString(n)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(n)||s.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(n)||s.warn("Plugin.versionParse:",n,"is not a valid version or range.");var c=i.exec(n),a=Number(c[4]),f=Number(c[5]),r=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:n,operator:c[1]||c[2]||"",major:a,minor:f,patch:r,parts:[a,f,r],prerelease:c[7],number:a*1e8+f*1e4+r}},e.versionSatisfies=function(n,i){i=i||"*";var c=e.versionParse(i),a=e.versionParse(n);if(c.isRange){if(c.operator==="*"||n==="*")return!0;if(c.operator===">")return a.number>c.number;if(c.operator===">=")return a.number>=c.number;if(c.operator==="~")return a.major===c.major&&a.minor===c.minor&&a.patch>=c.patch;if(c.operator==="^")return c.major>0?a.major===c.major&&a.number>=c.number:c.minor>0?a.minor===c.minor&&a.patch>=c.patch:a.patch===c.patch}return n===i||n==="*"}})()},function(d,I,u){var e={};d.exports=e;var s=u(0),n=u(5),i=u(1),c=u(4),a=u(2),f=u(13);(function(){var r,t;typeof window!="undefined"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(s.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(v){var p={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},m=s.extend(p,v);return m.canvas&&(m.canvas.width=m.options.width||m.canvas.width,m.canvas.height=m.options.height||m.canvas.height),m.mouse=v.mouse,m.engine=v.engine,m.canvas=m.canvas||g(m.options.width,m.options.height),m.context=m.canvas.getContext("2d"),m.textures={},m.bounds=m.bounds||{min:{x:0,y:0},max:{x:m.canvas.width,y:m.canvas.height}},m.options.showBroadphase=!1,m.options.pixelRatio!==1&&e.setPixelRatio(m,m.options.pixelRatio),s.isElement(m.element)?m.element.appendChild(m.canvas):m.canvas.parentNode||s.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),m},e.run=function(v){(function p(m){v.frameRequestId=r(p),o(v,m),e.world(v,m),(v.options.showStats||v.options.showDebug)&&e.stats(v,v.context,m),(v.options.showPerformance||v.options.showDebug)&&e.performance(v,v.context,m)})()},e.stop=function(v){t(v.frameRequestId)},e.setPixelRatio=function(v,p){var m=v.options,y=v.canvas;p==="auto"&&(p=x(y)),m.pixelRatio=p,y.setAttribute("data-pixel-ratio",p),y.width=m.width*p,y.height=m.height*p,y.style.width=m.width+"px",y.style.height=m.height+"px"},e.lookAt=function(v,p,m,y){y=typeof y!="undefined"?y:!0,p=s.isArray(p)?p:[p],m=m||{x:0,y:0};for(var w={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},E=0;E<p.length;E+=1){var k=p[E],P=k.bounds?k.bounds.min:k.min||k.position||k,T=k.bounds?k.bounds.max:k.max||k.position||k;P&&T&&(P.x<w.min.x&&(w.min.x=P.x),T.x>w.max.x&&(w.max.x=T.x),P.y<w.min.y&&(w.min.y=P.y),T.y>w.max.y&&(w.max.y=T.y))}var B=w.max.x-w.min.x+2*m.x,A=w.max.y-w.min.y+2*m.y,L=v.canvas.height,H=v.canvas.width,D=H/L,z=B/A,W=1,K=1;z>D?K=z/D:W=D/z,v.options.hasBounds=!0,v.bounds.min.x=w.min.x,v.bounds.max.x=w.min.x+B*W,v.bounds.min.y=w.min.y,v.bounds.max.y=w.min.y+A*K,y&&(v.bounds.min.x+=B*.5-B*W*.5,v.bounds.max.x+=B*.5-B*W*.5,v.bounds.min.y+=A*.5-A*K*.5,v.bounds.max.y+=A*.5-A*K*.5),v.bounds.min.x-=m.x,v.bounds.max.x-=m.x,v.bounds.min.y-=m.y,v.bounds.max.y-=m.y,v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),f.setOffset(v.mouse,v.bounds.min))},e.startViewTransform=function(v){var p=v.bounds.max.x-v.bounds.min.x,m=v.bounds.max.y-v.bounds.min.y,y=p/v.options.width,w=m/v.options.height;v.context.setTransform(v.options.pixelRatio/y,0,0,v.options.pixelRatio/w,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},e.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},e.world=function(v,p){var m=s.now(),y=v.engine,w=y.world,E=v.canvas,k=v.context,P=v.options,T=v.timing,B=n.allBodies(w),A=n.allConstraints(w),L=P.wireframes?P.wireframeBackground:P.background,H=[],D=[],z,W={timestamp:y.timing.timestamp};if(c.trigger(v,"beforeRender",W),v.currentBackground!==L&&M(v,L),k.globalCompositeOperation="source-in",k.fillStyle="transparent",k.fillRect(0,0,E.width,E.height),k.globalCompositeOperation="source-over",P.hasBounds){for(z=0;z<B.length;z++){var K=B[z];i.overlaps(K.bounds,v.bounds)&&H.push(K)}for(z=0;z<A.length;z++){var Y=A[z],_=Y.bodyA,b=Y.bodyB,ce=Y.pointA,ee=Y.pointB;_&&(ce=a.add(_.position,Y.pointA)),b&&(ee=a.add(b.position,Y.pointB)),!(!ce||!ee)&&(i.contains(v.bounds,ce)||i.contains(v.bounds,ee))&&D.push(Y)}e.startViewTransform(v),v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),f.setOffset(v.mouse,v.bounds.min))}else D=A,H=B,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!P.wireframes||y.enableSleeping&&P.showSleeping?e.bodies(v,H,k):(P.showConvexHulls&&e.bodyConvexHulls(v,H,k),e.bodyWireframes(v,H,k)),P.showBounds&&e.bodyBounds(v,H,k),(P.showAxes||P.showAngleIndicator)&&e.bodyAxes(v,H,k),P.showPositions&&e.bodyPositions(v,H,k),P.showVelocity&&e.bodyVelocity(v,H,k),P.showIds&&e.bodyIds(v,H,k),P.showSeparations&&e.separations(v,y.pairs.list,k),P.showCollisions&&e.collisions(v,y.pairs.list,k),P.showVertexNumbers&&e.vertexNumbers(v,H,k),P.showMousePosition&&e.mousePosition(v,v.mouse,k),e.constraints(D,k),P.hasBounds&&e.endViewTransform(v),c.trigger(v,"afterRender",W),T.lastElapsed=s.now()-m},e.stats=function(v,p,m){for(var y=v.engine,w=y.world,E=n.allBodies(w),k=0,P=55,T=44,B=0,A=0,L=0;L<E.length;L+=1)k+=E[L].parts.length;var H={Part:k,Body:E.length,Cons:n.allConstraints(w).length,Comp:n.allComposites(w).length,Pair:y.pairs.list.length};p.fillStyle="#0e0f19",p.fillRect(B,A,P*5.5,T),p.font="12px Arial",p.textBaseline="top",p.textAlign="right";for(var D in H){var z=H[D];p.fillStyle="#aaa",p.fillText(D,B+P,A+8),p.fillStyle="#eee",p.fillText(z,B+P,A+26),B+=P}},e.performance=function(v,p){var m=v.engine,y=v.timing,w=y.deltaHistory,E=y.elapsedHistory,k=y.timestampElapsedHistory,P=y.engineDeltaHistory,T=y.engineElapsedHistory,B=m.timing.lastDelta,A=l(w),L=l(E),H=l(P),D=l(T),z=l(k),W=z/A||0,K=1e3/A||0,Y=4,_=12,b=60,ce=34,ee=10,te=69;p.fillStyle="#0e0f19",p.fillRect(0,50,_*4+b*5+22,ce),e.status(p,ee,te,b,Y,w.length,Math.round(K)+" fps",K/e._goodFps,function(ae){return w[ae]/A-1}),e.status(p,ee+_+b,te,b,Y,P.length,B.toFixed(2)+" dt",e._goodDelta/B,function(ae){return P[ae]/H-1}),e.status(p,ee+(_+b)*2,te,b,Y,T.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(ae){return T[ae]/D-1}),e.status(p,ee+(_+b)*3,te,b,Y,E.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(ae){return E[ae]/L-1}),e.status(p,ee+(_+b)*4,te,b,Y,k.length,W.toFixed(2)+" x",W*W*W,function(ae){return(k[ae]/w[ae]/W||0)-1})},e.status=function(v,p,m,y,w,E,k,P,T){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(p,m+7,y,1),v.beginPath(),v.moveTo(p,m+7-w*s.clamp(.4*T(0),-2,2));for(var B=0;B<y;B+=1)v.lineTo(p+B,m+7-(B<E?w*s.clamp(.4*T(B),-2,2):0));v.stroke(),v.fillStyle="hsl("+s.clamp(25+95*P,0,120)+",100%,60%)",v.fillRect(p,m-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(k,p+y,m-5)},e.constraints=function(v,p){for(var m=p,y=0;y<v.length;y++){var w=v[y];if(!(!w.render.visible||!w.pointA||!w.pointB)){var E=w.bodyA,k=w.bodyB,P,T;if(E?P=a.add(E.position,w.pointA):P=w.pointA,w.render.type==="pin")m.beginPath(),m.arc(P.x,P.y,3,0,2*Math.PI),m.closePath();else{if(k?T=a.add(k.position,w.pointB):T=w.pointB,m.beginPath(),m.moveTo(P.x,P.y),w.render.type==="spring")for(var B=a.sub(T,P),A=a.perp(a.normalise(B)),L=Math.ceil(s.clamp(w.length/5,12,20)),H,D=1;D<L;D+=1)H=D%2===0?1:-1,m.lineTo(P.x+B.x*(D/L)+A.x*H*4,P.y+B.y*(D/L)+A.y*H*4);m.lineTo(T.x,T.y)}w.render.lineWidth&&(m.lineWidth=w.render.lineWidth,m.strokeStyle=w.render.strokeStyle,m.stroke()),w.render.anchors&&(m.fillStyle=w.render.strokeStyle,m.beginPath(),m.arc(P.x,P.y,3,0,2*Math.PI),m.arc(T.x,T.y,3,0,2*Math.PI),m.closePath(),m.fill())}}},e.bodies=function(v,p,m){var y=m;v.engine;var w=v.options,E=w.showInternalEdges||!w.wireframes,k,P,T,B;for(T=0;T<p.length;T++)if(k=p[T],!!k.render.visible){for(B=k.parts.length>1?1:0;B<k.parts.length;B++)if(P=k.parts[B],!!P.render.visible){if(w.showSleeping&&k.isSleeping?y.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(y.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!w.wireframes){var A=P.render.sprite,L=C(v,A.texture);y.translate(P.position.x,P.position.y),y.rotate(P.angle),y.drawImage(L,L.width*-A.xOffset*A.xScale,L.height*-A.yOffset*A.yScale,L.width*A.xScale,L.height*A.yScale),y.rotate(-P.angle),y.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)y.beginPath(),y.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{y.beginPath(),y.moveTo(P.vertices[0].x,P.vertices[0].y);for(var H=1;H<P.vertices.length;H++)!P.vertices[H-1].isInternal||E?y.lineTo(P.vertices[H].x,P.vertices[H].y):y.moveTo(P.vertices[H].x,P.vertices[H].y),P.vertices[H].isInternal&&!E&&y.moveTo(P.vertices[(H+1)%P.vertices.length].x,P.vertices[(H+1)%P.vertices.length].y);y.lineTo(P.vertices[0].x,P.vertices[0].y),y.closePath()}w.wireframes?(y.lineWidth=1,y.strokeStyle="#bbb",y.stroke()):(y.fillStyle=P.render.fillStyle,P.render.lineWidth&&(y.lineWidth=P.render.lineWidth,y.strokeStyle=P.render.strokeStyle,y.stroke()),y.fill())}y.globalAlpha=1}}},e.bodyWireframes=function(v,p,m){var y=m,w=v.options.showInternalEdges,E,k,P,T,B;for(y.beginPath(),P=0;P<p.length;P++)if(E=p[P],!!E.render.visible)for(B=E.parts.length>1?1:0;B<E.parts.length;B++){for(k=E.parts[B],y.moveTo(k.vertices[0].x,k.vertices[0].y),T=1;T<k.vertices.length;T++)!k.vertices[T-1].isInternal||w?y.lineTo(k.vertices[T].x,k.vertices[T].y):y.moveTo(k.vertices[T].x,k.vertices[T].y),k.vertices[T].isInternal&&!w&&y.moveTo(k.vertices[(T+1)%k.vertices.length].x,k.vertices[(T+1)%k.vertices.length].y);y.lineTo(k.vertices[0].x,k.vertices[0].y)}y.lineWidth=1,y.strokeStyle="#bbb",y.stroke()},e.bodyConvexHulls=function(v,p,m){var y=m,w,E,k;for(y.beginPath(),E=0;E<p.length;E++)if(w=p[E],!(!w.render.visible||w.parts.length===1)){for(y.moveTo(w.vertices[0].x,w.vertices[0].y),k=1;k<w.vertices.length;k++)y.lineTo(w.vertices[k].x,w.vertices[k].y);y.lineTo(w.vertices[0].x,w.vertices[0].y)}y.lineWidth=1,y.strokeStyle="rgba(255,255,255,0.2)",y.stroke()},e.vertexNumbers=function(v,p,m){var y=m,w,E,k;for(w=0;w<p.length;w++){var P=p[w].parts;for(k=P.length>1?1:0;k<P.length;k++){var T=P[k];for(E=0;E<T.vertices.length;E++)y.fillStyle="rgba(255,255,255,0.2)",y.fillText(w+"_"+E,T.position.x+(T.vertices[E].x-T.position.x)*.8,T.position.y+(T.vertices[E].y-T.position.y)*.8)}}},e.mousePosition=function(v,p,m){var y=m;y.fillStyle="rgba(255,255,255,0.8)",y.fillText(p.position.x+"  "+p.position.y,p.position.x+5,p.position.y-5)},e.bodyBounds=function(v,p,m){var y=m;v.engine;var w=v.options;y.beginPath();for(var E=0;E<p.length;E++){var k=p[E];if(k.render.visible)for(var P=p[E].parts,T=P.length>1?1:0;T<P.length;T++){var B=P[T];y.rect(B.bounds.min.x,B.bounds.min.y,B.bounds.max.x-B.bounds.min.x,B.bounds.max.y-B.bounds.min.y)}}w.wireframes?y.strokeStyle="rgba(255,255,255,0.08)":y.strokeStyle="rgba(0,0,0,0.1)",y.lineWidth=1,y.stroke()},e.bodyAxes=function(v,p,m){var y=m;v.engine;var w=v.options,E,k,P,T;for(y.beginPath(),k=0;k<p.length;k++){var B=p[k],A=B.parts;if(!!B.render.visible)if(w.showAxes)for(P=A.length>1?1:0;P<A.length;P++)for(E=A[P],T=0;T<E.axes.length;T++){var L=E.axes[T];y.moveTo(E.position.x,E.position.y),y.lineTo(E.position.x+L.x*20,E.position.y+L.y*20)}else for(P=A.length>1?1:0;P<A.length;P++)for(E=A[P],T=0;T<E.axes.length;T++)y.moveTo(E.position.x,E.position.y),y.lineTo((E.vertices[0].x+E.vertices[E.vertices.length-1].x)/2,(E.vertices[0].y+E.vertices[E.vertices.length-1].y)/2)}w.wireframes?(y.strokeStyle="indianred",y.lineWidth=1):(y.strokeStyle="rgba(255, 255, 255, 0.4)",y.globalCompositeOperation="overlay",y.lineWidth=2),y.stroke(),y.globalCompositeOperation="source-over"},e.bodyPositions=function(v,p,m){var y=m;v.engine;var w=v.options,E,k,P,T;for(y.beginPath(),P=0;P<p.length;P++)if(E=p[P],!!E.render.visible)for(T=0;T<E.parts.length;T++)k=E.parts[T],y.arc(k.position.x,k.position.y,3,0,2*Math.PI,!1),y.closePath();for(w.wireframes?y.fillStyle="indianred":y.fillStyle="rgba(0,0,0,0.5)",y.fill(),y.beginPath(),P=0;P<p.length;P++)E=p[P],E.render.visible&&(y.arc(E.positionPrev.x,E.positionPrev.y,2,0,2*Math.PI,!1),y.closePath());y.fillStyle="rgba(255,165,0,0.8)",y.fill()},e.bodyVelocity=function(v,p,m){var y=m;y.beginPath();for(var w=0;w<p.length;w++){var E=p[w];!E.render.visible||(y.moveTo(E.position.x,E.position.y),y.lineTo(E.position.x+(E.position.x-E.positionPrev.x)*2,E.position.y+(E.position.y-E.positionPrev.y)*2))}y.lineWidth=3,y.strokeStyle="cornflowerblue",y.stroke()},e.bodyIds=function(v,p,m){var y=m,w,E;for(w=0;w<p.length;w++)if(!!p[w].render.visible){var k=p[w].parts;for(E=k.length>1?1:0;E<k.length;E++){var P=k[E];y.font="12px Arial",y.fillStyle="rgba(255,255,255,0.5)",y.fillText(P.id,P.position.x+10,P.position.y-10)}}},e.collisions=function(v,p,m){var y=m,w=v.options,E,k,P,T;for(y.beginPath(),P=0;P<p.length;P++)if(E=p[P],!!E.isActive)for(k=E.collision,T=0;T<E.activeContacts.length;T++){var B=E.activeContacts[T],A=B.vertex;y.rect(A.x-1.5,A.y-1.5,3.5,3.5)}for(w.wireframes?y.fillStyle="rgba(255,255,255,0.7)":y.fillStyle="orange",y.fill(),y.beginPath(),P=0;P<p.length;P++)if(E=p[P],!!E.isActive&&(k=E.collision,E.activeContacts.length>0)){var L=E.activeContacts[0].vertex.x,H=E.activeContacts[0].vertex.y;E.activeContacts.length===2&&(L=(E.activeContacts[0].vertex.x+E.activeContacts[1].vertex.x)/2,H=(E.activeContacts[0].vertex.y+E.activeContacts[1].vertex.y)/2),k.bodyB===k.supports[0].body||k.bodyA.isStatic===!0?y.moveTo(L-k.normal.x*8,H-k.normal.y*8):y.moveTo(L+k.normal.x*8,H+k.normal.y*8),y.lineTo(L,H)}w.wireframes?y.strokeStyle="rgba(255,165,0,0.7)":y.strokeStyle="orange",y.lineWidth=1,y.stroke()},e.separations=function(v,p,m){var y=m,w=v.options,E,k,P,T,B;for(y.beginPath(),B=0;B<p.length;B++)if(E=p[B],!!E.isActive){k=E.collision,P=k.bodyA,T=k.bodyB;var A=1;!T.isStatic&&!P.isStatic&&(A=.5),T.isStatic&&(A=0),y.moveTo(T.position.x,T.position.y),y.lineTo(T.position.x-k.penetration.x*A,T.position.y-k.penetration.y*A),A=1,!T.isStatic&&!P.isStatic&&(A=.5),P.isStatic&&(A=0),y.moveTo(P.position.x,P.position.y),y.lineTo(P.position.x+k.penetration.x*A,P.position.y+k.penetration.y*A)}w.wireframes?y.strokeStyle="rgba(255,165,0,0.5)":y.strokeStyle="orange",y.stroke()},e.inspector=function(v,p){v.engine;var m=v.selected,y=v.render,w=y.options,E;if(w.hasBounds){var k=y.bounds.max.x-y.bounds.min.x,P=y.bounds.max.y-y.bounds.min.y,T=k/y.options.width,B=P/y.options.height;p.scale(1/T,1/B),p.translate(-y.bounds.min.x,-y.bounds.min.y)}for(var A=0;A<m.length;A++){var L=m[A].data;switch(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.9)",p.setLineDash([1,2]),L.type){case"body":E=L.bounds,p.beginPath(),p.rect(Math.floor(E.min.x-3),Math.floor(E.min.y-3),Math.floor(E.max.x-E.min.x+6),Math.floor(E.max.y-E.min.y+6)),p.closePath(),p.stroke();break;case"constraint":var H=L.pointA;L.bodyA&&(H=L.pointB),p.beginPath(),p.arc(H.x,H.y,10,0,2*Math.PI),p.closePath(),p.stroke();break}p.setLineDash([]),p.translate(-.5,-.5)}v.selectStart!==null&&(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.6)",p.fillStyle="rgba(255,165,0,0.1)",E=v.selectBounds,p.beginPath(),p.rect(Math.floor(E.min.x),Math.floor(E.min.y),Math.floor(E.max.x-E.min.x),Math.floor(E.max.y-E.min.y)),p.closePath(),p.stroke(),p.fill(),p.translate(-.5,-.5)),w.hasBounds&&p.setTransform(1,0,0,1,0,0)};var o=function(v,p){var m=v.engine,y=v.timing,w=y.historySize,E=m.timing.timestamp;y.delta=p-y.lastTime||e._goodDelta,y.lastTime=p,y.timestampElapsed=E-y.lastTimestamp||0,y.lastTimestamp=E,y.deltaHistory.unshift(y.delta),y.deltaHistory.length=Math.min(y.deltaHistory.length,w),y.engineDeltaHistory.unshift(m.timing.lastDelta),y.engineDeltaHistory.length=Math.min(y.engineDeltaHistory.length,w),y.timestampElapsedHistory.unshift(y.timestampElapsed),y.timestampElapsedHistory.length=Math.min(y.timestampElapsedHistory.length,w),y.engineElapsedHistory.unshift(m.timing.lastElapsed),y.engineElapsedHistory.length=Math.min(y.engineElapsedHistory.length,w),y.elapsedHistory.unshift(y.lastElapsed),y.elapsedHistory.length=Math.min(y.elapsedHistory.length,w)},l=function(v){for(var p=0,m=0;m<v.length;m+=1)p+=v[m];return p/v.length||0},g=function(v,p){var m=document.createElement("canvas");return m.width=v,m.height=p,m.oncontextmenu=function(){return!1},m.onselectstart=function(){return!1},m},x=function(v){var p=v.getContext("2d"),m=window.devicePixelRatio||1,y=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return m/y},C=function(v,p){var m=v.textures[p];return m||(m=v.textures[p]=new Image,m.src=p,m)},M=function(v,p){var m=p;/(jpg|gif|png)$/.test(p)&&(m="url("+p+")"),v.canvas.style.background=m,v.canvas.style.backgroundSize="contain",v.currentBackground=p}})()},function(d,I){var u={};d.exports=u,function(){u.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(d,I,u){var e={};d.exports=e;var s=u(7),n=u(19),i=u(14),c=u(20),a=u(4),f=u(5),r=u(10),t=u(0),o=u(6);(function(){e.create=function(l){l=l||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},x=t.extend(g,l);return x.world=l.world||f.create({label:"World"}),x.pairs=l.pairs||c.create(),x.detector=l.detector||i.create(),x.grid={buckets:[]},x.world.gravity=x.gravity,x.broadphase=x.grid,x.metrics={},x},e.update=function(l,g,x){var C=t.now();g=g||1e3/60,x=x||1;var M=l.world,v=l.detector,p=l.pairs,m=l.timing,y=m.timestamp,w;m.timestamp+=g*m.timeScale,m.lastDelta=g*m.timeScale;var E={timestamp:m.timestamp};a.trigger(l,"beforeUpdate",E);var k=f.allBodies(M),P=f.allConstraints(M);for(M.isModified&&i.setBodies(v,k),M.isModified&&f.setModified(M,!1,!1,!0),l.enableSleeping&&s.update(k,m.timeScale),e._bodiesApplyGravity(k,l.gravity),e._bodiesUpdate(k,g,m.timeScale,x,M.bounds),r.preSolveAll(k),w=0;w<l.constraintIterations;w++)r.solveAll(P,m.timeScale);r.postSolveAll(k),v.pairs=l.pairs;var T=i.collisions(v);for(c.update(p,T,y),l.enableSleeping&&s.afterCollisions(p.list,m.timeScale),p.collisionStart.length>0&&a.trigger(l,"collisionStart",{pairs:p.collisionStart}),n.preSolvePosition(p.list),w=0;w<l.positionIterations;w++)n.solvePosition(p.list,m.timeScale);for(n.postSolvePosition(k),r.preSolveAll(k),w=0;w<l.constraintIterations;w++)r.solveAll(P,m.timeScale);for(r.postSolveAll(k),n.preSolveVelocity(p.list),w=0;w<l.velocityIterations;w++)n.solveVelocity(p.list,m.timeScale);return p.collisionActive.length>0&&a.trigger(l,"collisionActive",{pairs:p.collisionActive}),p.collisionEnd.length>0&&a.trigger(l,"collisionEnd",{pairs:p.collisionEnd}),e._bodiesClearForces(k),a.trigger(l,"afterUpdate",E),l.timing.lastElapsed=t.now()-C,l},e.merge=function(l,g){if(t.extend(l,g),g.world){l.world=g.world,e.clear(l);for(var x=f.allBodies(l.world),C=0;C<x.length;C++){var M=x[C];s.set(M,!1),M.id=t.nextId()}}},e.clear=function(l){c.clear(l.pairs),i.clear(l.detector)},e._bodiesClearForces=function(l){for(var g=0;g<l.length;g++){var x=l[g];x.force.x=0,x.force.y=0,x.torque=0}},e._bodiesApplyGravity=function(l,g){var x=typeof g.scale!="undefined"?g.scale:.001;if(!(g.x===0&&g.y===0||x===0))for(var C=0;C<l.length;C++){var M=l[C];M.isStatic||M.isSleeping||(M.force.y+=M.mass*g.y*x,M.force.x+=M.mass*g.x*x)}},e._bodiesUpdate=function(l,g,x,C,M){for(var v=0;v<l.length;v++){var p=l[v];p.isStatic||p.isSleeping||o.update(p,g,x,C)}}})()},function(d,I,u){var e={};d.exports=e;var s=u(3),n=u(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var c,a,f,r=i.length;for(c=0;c<r;c++)a=i[c],a.isActive&&(f=a.activeContacts.length,a.collision.parentA.totalContacts+=f,a.collision.parentB.totalContacts+=f)},e.solvePosition=function(i,c){var a,f,r,t,o,l,g,x,C=e._positionDampen,M=i.length;for(a=0;a<M;a++)f=i[a],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,l=r.normal,f.separation=l.x*(o.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+l.y*(o.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(a=0;a<M;a++)f=i[a],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,l=r.normal,x=(f.separation-f.slop)*c,(t.isStatic||o.isStatic)&&(x*=2),t.isStatic||t.isSleeping||(g=C/t.totalContacts,t.positionImpulse.x+=l.x*x*g,t.positionImpulse.y+=l.y*x*g),o.isStatic||o.isSleeping||(g=C/o.totalContacts,o.positionImpulse.x-=l.x*x*g,o.positionImpulse.y-=l.y*x*g))},e.postSolvePosition=function(i){for(var c=e._positionWarming,a=i.length,f=s.translate,r=n.update,t=0;t<a;t++){var o=i[t],l=o.positionImpulse,g=l.x,x=l.y,C=o.velocity;if(o.totalContacts=0,g!==0||x!==0){for(var M=0;M<o.parts.length;M++){var v=o.parts[M];f(v.vertices,l),r(v.bounds,v.vertices,C),v.position.x+=g,v.position.y+=x}o.positionPrev.x+=g,o.positionPrev.y+=x,g*C.x+x*C.y<0?(l.x=0,l.y=0):(l.x*=c,l.y*=c)}}},e.preSolveVelocity=function(i){var c=i.length,a,f;for(a=0;a<c;a++){var r=i[a];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,o=t.length,l=r.collision,g=l.parentA,x=l.parentB,C=l.normal,M=l.tangent;for(f=0;f<o;f++){var v=t[f],p=v.vertex,m=v.normalImpulse,y=v.tangentImpulse;if(m!==0||y!==0){var w=C.x*m+M.x*y,E=C.y*m+M.y*y;g.isStatic||g.isSleeping||(g.positionPrev.x+=w*g.inverseMass,g.positionPrev.y+=E*g.inverseMass,g.anglePrev+=g.inverseInertia*((p.x-g.position.x)*E-(p.y-g.position.y)*w)),x.isStatic||x.isSleeping||(x.positionPrev.x-=w*x.inverseMass,x.positionPrev.y-=E*x.inverseMass,x.anglePrev-=x.inverseInertia*((p.x-x.position.x)*E-(p.y-x.position.y)*w))}}}}},e.solveVelocity=function(i,c){var a=c*c,f=e._restingThresh*a,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*a,o=Number.MAX_VALUE,l=i.length,g,x,C,M;for(C=0;C<l;C++){var v=i[C];if(!(!v.isActive||v.isSensor)){var p=v.collision,m=p.parentA,y=p.parentB,w=m.velocity,E=y.velocity,k=p.normal.x,P=p.normal.y,T=p.tangent.x,B=p.tangent.y,A=v.activeContacts,L=A.length,H=1/L,D=m.inverseMass+y.inverseMass,z=v.friction*v.frictionStatic*r*a;for(w.x=m.position.x-m.positionPrev.x,w.y=m.position.y-m.positionPrev.y,E.x=y.position.x-y.positionPrev.x,E.y=y.position.y-y.positionPrev.y,m.angularVelocity=m.angle-m.anglePrev,y.angularVelocity=y.angle-y.anglePrev,M=0;M<L;M++){var W=A[M],K=W.vertex,Y=K.x-m.position.x,_=K.y-m.position.y,b=K.x-y.position.x,ce=K.y-y.position.y,ee=w.x-_*m.angularVelocity,te=w.y+Y*m.angularVelocity,ae=E.x-ce*y.angularVelocity,yt=E.y+b*y.angularVelocity,Ye=ee-ae,_e=te-yt,ke=k*Ye+P*_e,me=T*Ye+B*_e,je=v.separation+ke,Ge=Math.min(je,1);Ge=je<0?0:Ge;var qe=Ge*z;me>qe||-me>qe?(x=me>0?me:-me,g=v.friction*(me>0?1:-1)*a,g<-x?g=-x:g>x&&(g=x)):(g=me,x=o);var $e=Y*P-_*k,et=b*P-ce*k,tt=H/(D+m.inverseInertia*$e*$e+y.inverseInertia*et*et),He=(1+v.restitution)*ke*tt;if(g*=tt,ke*ke>f&&ke<0)W.normalImpulse=0;else{var St=W.normalImpulse;W.normalImpulse+=He,W.normalImpulse=Math.min(W.normalImpulse,0),He=W.normalImpulse-St}if(me*me>t)W.tangentImpulse=0;else{var Pt=W.tangentImpulse;W.tangentImpulse+=g,W.tangentImpulse<-x&&(W.tangentImpulse=-x),W.tangentImpulse>x&&(W.tangentImpulse=x),g=W.tangentImpulse-Pt}var Re=k*He+T*g,Fe=P*He+B*g;m.isStatic||m.isSleeping||(m.positionPrev.x+=Re*m.inverseMass,m.positionPrev.y+=Fe*m.inverseMass,m.anglePrev+=(Y*Fe-_*Re)*m.inverseInertia),y.isStatic||y.isSleeping||(y.positionPrev.x-=Re*y.inverseMass,y.positionPrev.y-=Fe*y.inverseMass,y.anglePrev-=(b*Fe-ce*Re)*y.inverseInertia)}}}}})()},function(d,I,u){var e={};d.exports=e;var s=u(9),n=u(0);(function(){e.create=function(i){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,c,a){var f=i.list,r=f.length,t=i.table,o=c.length,l=i.collisionStart,g=i.collisionEnd,x=i.collisionActive,C,M,v,p;for(l.length=0,g.length=0,x.length=0,p=0;p<r;p++)f[p].confirmedActive=!1;for(p=0;p<o;p++)C=c[p],v=C.pair,v?(v.isActive?x.push(v):l.push(v),s.update(v,C,a),v.confirmedActive=!0):(v=s.create(C,a),t[v.id]=v,l.push(v),f.push(v));var m=[];for(r=f.length,p=0;p<r;p++)v=f[p],v.confirmedActive||(s.setActive(v,!1,a),g.push(v),!v.collision.bodyA.isSleeping&&!v.collision.bodyB.isSleeping&&m.push(p));for(p=0;p<m.length;p++)M=m[p]-p,v=f[M],f.splice(M,1),delete t[v.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(d,I,u){var e=d.exports=u(22);e.Axes=u(11),e.Bodies=u(12),e.Body=u(6),e.Bounds=u(1),e.Collision=u(8),e.Common=u(0),e.Composite=u(5),e.Composites=u(23),e.Constraint=u(10),e.Contact=u(17),e.Detector=u(14),e.Engine=u(18),e.Events=u(4),e.Grid=u(24),e.Mouse=u(13),e.MouseConstraint=u(25),e.Pair=u(9),e.Pairs=u(20),e.Plugin=u(15),e.Query=u(26),e.Render=u(16),e.Resolver=u(19),e.Runner=u(27),e.SAT=u(28),e.Sleeping=u(7),e.Svg=u(29),e.Vector=u(2),e.Vertices=u(3),e.World=u(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(d,I,u){var e={};d.exports=e;var s=u(15),n=u(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,c){return i=i.replace(/^Matter./,""),n.chainPathBefore(e,i,c)},e.after=function(i,c){return i=i.replace(/^Matter./,""),n.chainPathAfter(e,i,c)}})()},function(d,I,u){var e={};d.exports=e;var s=u(5),n=u(10),i=u(0),c=u(6),a=u(12),f=i.deprecated;(function(){e.stack=function(r,t,o,l,g,x,C){for(var M=s.create({label:"Stack"}),v=r,p=t,m,y=0,w=0;w<l;w++){for(var E=0,k=0;k<o;k++){var P=C(v,p,k,w,m,y);if(P){var T=P.bounds.max.y-P.bounds.min.y,B=P.bounds.max.x-P.bounds.min.x;T>E&&(E=T),c.translate(P,{x:B*.5,y:T*.5}),v=P.bounds.max.x+g,s.addBody(M,P),m=P,y+=1}else v+=g}p+=E+x,v=r}return M},e.chain=function(r,t,o,l,g,x){for(var C=r.bodies,M=1;M<C.length;M++){var v=C[M-1],p=C[M],m=v.bounds.max.y-v.bounds.min.y,y=v.bounds.max.x-v.bounds.min.x,w=p.bounds.max.y-p.bounds.min.y,E=p.bounds.max.x-p.bounds.min.x,k={bodyA:v,pointA:{x:y*t,y:m*o},bodyB:p,pointB:{x:E*l,y:w*g}},P=i.extend(k,x);s.addConstraint(r,n.create(P))}return r.label+=" Chain",r},e.mesh=function(r,t,o,l,g){var x=r.bodies,C,M,v,p,m;for(C=0;C<o;C++){for(M=1;M<t;M++)v=x[M-1+C*t],p=x[M+C*t],s.addConstraint(r,n.create(i.extend({bodyA:v,bodyB:p},g)));if(C>0)for(M=0;M<t;M++)v=x[M+(C-1)*t],p=x[M+C*t],s.addConstraint(r,n.create(i.extend({bodyA:v,bodyB:p},g))),l&&M>0&&(m=x[M-1+(C-1)*t],s.addConstraint(r,n.create(i.extend({bodyA:m,bodyB:p},g)))),l&&M<t-1&&(m=x[M+1+(C-1)*t],s.addConstraint(r,n.create(i.extend({bodyA:m,bodyB:p},g))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,o,l,g,x,C){return e.stack(r,t,o,l,g,x,function(M,v,p,m,y,w){var E=Math.min(l,Math.ceil(o/2)),k=y?y.bounds.max.x-y.bounds.min.x:0;if(!(m>E)){m=E-m;var P=m,T=o-1-m;if(!(p<P||p>T)){w===1&&c.translate(y,{x:(p+(o%2===1?1:-1))*k,y:0});var B=y?p*k:0;return C(r+B+p*g,v,p,m,y,w)}}})},e.newtonsCradle=function(r,t,o,l,g){for(var x=s.create({label:"Newtons Cradle"}),C=0;C<o;C++){var M=1.9,v=a.circle(r+C*(l*M),t+g,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),p=n.create({pointA:{x:r+C*(l*M),y:t},bodyB:v});s.addBody(x,v),s.addConstraint(x,p)}return x},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,o,l,g){var x=c.nextGroup(!0),C=20,M=-o*.5+C,v=o*.5-C,p=0,m=s.create({label:"Car"}),y=a.rectangle(r,t,o,l,{collisionFilter:{group:x},chamfer:{radius:l*.5},density:2e-4}),w=a.circle(r+M,t+p,g,{collisionFilter:{group:x},friction:.8}),E=a.circle(r+v,t+p,g,{collisionFilter:{group:x},friction:.8}),k=n.create({bodyB:y,pointB:{x:M,y:p},bodyA:w,stiffness:1,length:0}),P=n.create({bodyB:y,pointB:{x:v,y:p},bodyA:E,stiffness:1,length:0});return s.addBody(m,y),s.addBody(m,w),s.addBody(m,E),s.addConstraint(m,k),s.addConstraint(m,P),m},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,o,l,g,x,C,M,v,p){v=i.extend({inertia:1/0},v),p=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var m=e.stack(r,t,o,l,g,x,function(y,w){return a.circle(y,w,M,v)});return e.mesh(m,o,l,C,p),m.label="Soft Body",m},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(d,I,u){var e={};d.exports=e;var s=u(9),n=u(0),i=n.deprecated;(function(){e.create=function(c){var a={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(a,c)},e.update=function(c,a,f,r){var t,o,l,g=f.world,x=c.buckets,C,M,v=!1;for(t=0;t<a.length;t++){var p=a[t];if(!(p.isSleeping&&!r)&&!(g.bounds&&(p.bounds.max.x<g.bounds.min.x||p.bounds.min.x>g.bounds.max.x||p.bounds.max.y<g.bounds.min.y||p.bounds.min.y>g.bounds.max.y))){var m=e._getRegion(c,p);if(!p.region||m.id!==p.region.id||r){(!p.region||r)&&(p.region=m);var y=e._regionUnion(m,p.region);for(o=y.startCol;o<=y.endCol;o++)for(l=y.startRow;l<=y.endRow;l++){M=e._getBucketId(o,l),C=x[M];var w=o>=m.startCol&&o<=m.endCol&&l>=m.startRow&&l<=m.endRow,E=o>=p.region.startCol&&o<=p.region.endCol&&l>=p.region.startRow&&l<=p.region.endRow;!w&&E&&E&&C&&e._bucketRemoveBody(c,C,p),(p.region===m||w&&!E||r)&&(C||(C=e._createBucket(x,M)),e._bucketAddBody(c,C,p))}p.region=m,v=!0}}}v&&(c.pairsList=e._createActivePairsList(c))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,a){var f=Math.min(c.startCol,a.startCol),r=Math.max(c.endCol,a.endCol),t=Math.min(c.startRow,a.startRow),o=Math.max(c.endRow,a.endRow);return e._createRegion(f,r,t,o)},e._getRegion=function(c,a){var f=a.bounds,r=Math.floor(f.min.x/c.bucketWidth),t=Math.floor(f.max.x/c.bucketWidth),o=Math.floor(f.min.y/c.bucketHeight),l=Math.floor(f.max.y/c.bucketHeight);return e._createRegion(r,t,o,l)},e._createRegion=function(c,a,f,r){return{id:c+","+a+","+f+","+r,startCol:c,endCol:a,startRow:f,endRow:r}},e._getBucketId=function(c,a){return"C"+c+"R"+a},e._createBucket=function(c,a){var f=c[a]=[];return f},e._bucketAddBody=function(c,a,f){var r=c.pairs,t=s.id,o=a.length,l;for(l=0;l<o;l++){var g=a[l];if(!(f.id===g.id||f.isStatic&&g.isStatic)){var x=t(f,g),C=r[x];C?C[2]+=1:r[x]=[f,g,1]}}a.push(f)},e._bucketRemoveBody=function(c,a,f){var r=c.pairs,t=s.id,o;a.splice(n.indexOf(a,f),1);var l=a.length;for(o=0;o<l;o++){var g=r[t(f,a[o])];g&&(g[2]-=1)}},e._createActivePairsList=function(c){var a,f=c.pairs,r=n.keys(f),t=r.length,o=[],l;for(l=0;l<t;l++)a=f[r[l]],a[2]>0?o.push(a):delete f[r[l]];return o}})()},function(d,I,u){var e={};d.exports=e;var s=u(3),n=u(7),i=u(13),c=u(4),a=u(14),f=u(10),r=u(5),t=u(0),o=u(1);(function(){e.create=function(l,g){var x=(l?l.mouse:null)||(g?g.mouse:null);x||(l&&l.render&&l.render.canvas?x=i.create(l.render.canvas):g&&g.element?x=i.create(g.element):(x=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var C=f.create({label:"Mouse Constraint",pointA:x.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),M={type:"mouseConstraint",mouse:x,element:null,body:null,constraint:C,collisionFilter:{category:1,mask:4294967295,group:0}},v=t.extend(M,g);return c.on(l,"beforeUpdate",function(){var p=r.allBodies(l.world);e.update(v,p),e._triggerEvents(v)}),v},e.update=function(l,g){var x=l.mouse,C=l.constraint,M=l.body;if(x.button===0){if(C.bodyB)n.set(C.bodyB,!1),C.pointA=x.position;else for(var v=0;v<g.length;v++)if(M=g[v],o.contains(M.bounds,x.position)&&a.canCollide(M.collisionFilter,l.collisionFilter))for(var p=M.parts.length>1?1:0;p<M.parts.length;p++){var m=M.parts[p];if(s.contains(m.vertices,x.position)){C.pointA=x.position,C.bodyB=l.body=M,C.pointB={x:x.position.x-M.position.x,y:x.position.y-M.position.y},C.angleB=M.angle,n.set(M,!1),c.trigger(l,"startdrag",{mouse:x,body:M});break}}}else C.bodyB=l.body=null,C.pointB=null,M&&c.trigger(l,"enddrag",{mouse:x,body:M})},e._triggerEvents=function(l){var g=l.mouse,x=g.sourceEvents;x.mousemove&&c.trigger(l,"mousemove",{mouse:g}),x.mousedown&&c.trigger(l,"mousedown",{mouse:g}),x.mouseup&&c.trigger(l,"mouseup",{mouse:g}),i.clearSourceEvents(g)}})()},function(d,I,u){var e={};d.exports=e;var s=u(2),n=u(8),i=u(1),c=u(12),a=u(3);(function(){e.collides=function(f,r){for(var t=[],o=r.length,l=f.bounds,g=n.collides,x=i.overlaps,C=0;C<o;C++){var M=r[C],v=M.parts.length,p=v===1?0:1;if(x(M.bounds,l))for(var m=p;m<v;m++){var y=M.parts[m];if(x(y.bounds,l)){var w=g(y,f);if(w){t.push(w);break}}}}return t},e.ray=function(f,r,t,o){o=o||1e-100;for(var l=s.angle(r,t),g=s.magnitude(s.sub(r,t)),x=(t.x+r.x)*.5,C=(t.y+r.y)*.5,M=c.rectangle(x,C,g,o,{angle:l}),v=e.collides(M,f),p=0;p<v.length;p+=1){var m=v[p];m.body=m.bodyB=m.bodyA}return v},e.region=function(f,r,t){for(var o=[],l=0;l<f.length;l++){var g=f[l],x=i.overlaps(g.bounds,r);(x&&!t||!x&&t)&&o.push(g)}return o},e.point=function(f,r){for(var t=[],o=0;o<f.length;o++){var l=f[o];if(i.contains(l.bounds,r))for(var g=l.parts.length===1?0:1;g<l.parts.length;g++){var x=l.parts[g];if(i.contains(x.bounds,r)&&a.contains(x.vertices,r)){t.push(l);break}}}return t}})()},function(d,I,u){var e={};d.exports=e;var s=u(4),n=u(18),i=u(0);(function(){var c,a;if(typeof window!="undefined"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(r){f=setTimeout(function(){r(i.now())},1e3/60)},a=function(){clearTimeout(f)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},o=i.extend(t,r);return o.delta=o.delta||1e3/o.fps,o.deltaMin=o.deltaMin||1e3/o.fps,o.deltaMax=o.deltaMax||1e3/(o.fps*.5),o.fps=1e3/o.delta,o},e.run=function(r,t){return typeof r.positionIterations!="undefined"&&(t=r,r=e.create()),function o(l){r.frameRequestId=c(o),l&&r.enabled&&e.tick(r,t,l)}(),r},e.tick=function(r,t,o){var l=t.timing,g=1,x,C={timestamp:l.timestamp};s.trigger(r,"beforeTick",C),r.isFixed?x=r.delta:(x=o-r.timePrev||r.delta,r.timePrev=o,r.deltaHistory.push(x),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),x=Math.min.apply(null,r.deltaHistory),x=x<r.deltaMin?r.deltaMin:x,x=x>r.deltaMax?r.deltaMax:x,g=x/r.delta,r.delta=x),r.timeScalePrev!==0&&(g*=l.timeScale/r.timeScalePrev),l.timeScale===0&&(g=0),r.timeScalePrev=l.timeScale,r.correction=g,r.frameCounter+=1,o-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((o-r.counterTimestamp)/1e3),r.counterTimestamp=o,r.frameCounter=0),s.trigger(r,"tick",C),s.trigger(r,"beforeUpdate",C),n.update(t,x,g),s.trigger(r,"afterUpdate",C),s.trigger(r,"afterTick",C)},e.stop=function(r){a(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(d,I,u){var e={};d.exports=e;var s=u(8),n=u(0),i=n.deprecated;(function(){e.collides=function(c,a){return s.collides(c,a)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(d,I,u){var e={};d.exports=e,u(1);var s=u(0);(function(){e.pathToVertices=function(n,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,a,f,r,t,o,l,g,x,C,M=[],v,p,m=0,y=0,w=0;i=i||15;var E=function(P,T,B){var A=B%2===1&&B>1;if(!x||P!=x.x||T!=x.y){x&&A?(v=x.x,p=x.y):(v=0,p=0);var L={x:v+P,y:p+T};(A||!x)&&(x=L),M.push(L),y=v+P,w=p+T}},k=function(P){var T=P.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":y=P.x,w=P.y;break;case"H":y=P.x;break;case"V":w=P.y;break}E(y,w,P.pathSegType)}};for(e._svgPathToAbsolute(n),f=n.getTotalLength(),o=[],c=0;c<n.pathSegList.numberOfItems;c+=1)o.push(n.pathSegList.getItem(c));for(l=o.concat();m<f;){if(C=n.getPathSegAtLength(m),t=o[C],t!=g){for(;l.length&&l[0]!=t;)k(l.shift());g=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=n.getPointAtLength(m),E(r.x,r.y,0);break}m+=i}for(c=0,a=l.length;c<a;++c)k(l[c]);return M},e._svgPathToAbsolute=function(n){for(var i,c,a,f,r,t,o=n.pathSegList,l=0,g=0,x=o.numberOfItems,C=0;C<x;++C){var M=o.getItem(C),v=M.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in M&&(l=M.x),"y"in M&&(g=M.y);else switch("x1"in M&&(a=l+M.x1),"x2"in M&&(r=l+M.x2),"y1"in M&&(f=g+M.y1),"y2"in M&&(t=g+M.y2),"x"in M&&(l+=M.x),"y"in M&&(g+=M.y),v){case"m":o.replaceItem(n.createSVGPathSegMovetoAbs(l,g),C);break;case"l":o.replaceItem(n.createSVGPathSegLinetoAbs(l,g),C);break;case"h":o.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(l),C);break;case"v":o.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),C);break;case"c":o.replaceItem(n.createSVGPathSegCurvetoCubicAbs(l,g,a,f,r,t),C);break;case"s":o.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(l,g,r,t),C);break;case"q":o.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(l,g,a,f),C);break;case"t":o.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(l,g),C);break;case"a":o.replaceItem(n.createSVGPathSegArcAbs(l,g,M.r1,M.r2,M.angle,M.largeArcFlag,M.sweepFlag),C);break;case"z":case"Z":l=i,g=c;break}(v=="M"||v=="m")&&(i=l,c=g)}}})()},function(d,I,u){var e={};d.exports=e;var s=u(5);u(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(Xe);var O=pt(Xe.exports),xt={exports:{}};/*!
 * matter-attractors 0.1.6 by Liam Brummitt 2017-05-15
 * https://github.com/liabru/matter-attractors
 * License MIT
 */(function(S,h){(function(I,u){S.exports=u(Xe.exports)})(De,function(d){return function(I){var u={};function e(s){if(u[s])return u[s].exports;var n=u[s]={i:s,l:!1,exports:{}};return I[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=I,e.c=u,e.i=function(s){return s},e.d=function(s,n,i){e.o(s,n)||Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(s){var n=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(n,"a",n),n},e.o=function(s,n){return Object.prototype.hasOwnProperty.call(s,n)},e.p="/libs",e(e.s=1)}([function(I,u){I.exports=d},function(I,u,e){var s=e(0),n={name:"matter-attractors",version:"0.1.4",for:"matter-js@^0.12.0",install:function(c){c.after("Body.create",function(){n.Body.init(this)}),c.before("Engine.update",function(a){n.Engine.update(a)})},Body:{init:function(c){c.plugin.attractors=c.plugin.attractors||[]}},Engine:{update:function(c){for(var a=c.world,f=s.Composite.allBodies(a),r=0;r<f.length;r+=1){var t=f[r],o=t.plugin.attractors;if(o&&o.length>0)for(var l=0;l<f.length;l+=1){var g=f[l];if(g.id!==t.id)for(var x=0;x<o.length;x+=1){var C=o[x],M=C;s.Common.isFunction(C)&&(M=C(t,g)),M&&s.Body.applyForce(g,g.position,M)}}}}},Attractors:{gravityConstant:.001,gravity:function(c,a){var f=s.Vector.sub(a.position,c.position),r=s.Vector.magnitudeSquared(f)||1e-4,t=s.Vector.normalise(f),o=-n.Attractors.gravityConstant*(c.mass*a.mass/r),l=s.Vector.mult(t,o);s.Body.applyForce(c,c.position,s.Vector.neg(l)),s.Body.applyForce(a,a.position,l)}}};s.Plugin.register(n),I.exports=n}])})})(xt);var sn=pt(xt.exports);O.use(sn);class rn{constructor(h,d,I,u){this.areaWidth=d,this.areaHeight=I,this.thickness=u;const e={isStatic:!0,render:{fillStyle:"transparent"}};this.top=O.Bodies.rectangle(d/2,-u/2,d,u,e),this.right=O.Bodies.rectangle(d+u/2,I/2,u,I,e),this.bottom=O.Bodies.rectangle(d/2,I+u/2,d,u,e),this.left=O.Bodies.rectangle(-u/2,I/2,u,I,e),O.Composite.add(h.world,[this.top,this.right,this.bottom,this.left])}update(h,d){O.Body.setPosition(this.top,{x:h/2,y:this.top.position.y}),O.Body.setPosition(this.right,{x:h+this.thickness/2,y:d/2}),O.Body.setPosition(this.bottom,{x:h/2,y:d+this.thickness/2}),O.Body.setPosition(this.left,{x:this.left.position.x,y:d/2}),O.Body.scale(this.top,h/this.areaWidth,1),O.Body.scale(this.right,1,d/this.areaHeight),O.Body.scale(this.bottom,h/this.areaWidth,1),O.Body.scale(this.left,1,d/this.areaHeight),this.areaWidth=h,this.areaHeight=d}}const an=(S,h)=>({x:(S.position.x-h.position.x)*2e-4,y:(S.position.y-h.position.y)*2e-4});class on{constructor(h,d){this.body=O.Bodies.circle(d.clientWidth/2,0,1,{isStatic:!0,plugin:{attractors:[an]},collisionFilter:{group:-1}}),O.Composite.add(h.world,this.body),this.mouse=O.Mouse.create(d),O.Events.on(h,"afterUpdate",()=>{!this.mouse.position.x||O.Body.translate(this.body,{x:(this.mouse.position.x-this.body.position.x)*.25,y:(this.mouse.position.y-this.body.position.y)*.25})}),this.mouse.element.removeEventListener("mousewheel",this.mouse.mousewheel),this.mouse.element.removeEventListener("DOMMouseScroll",this.mouse.mousewheel)}setAnchor(){this.mouse.position.x=this.mouse.element.clientWidth/2,this.mouse.position.y=0,O.Body.setPosition(this.body,{x:this.mouse.element.clientWidth/2,y:0})}}function ln(S){let h,d,I=`${S[2]}px`,u=`${S[0]}ms`,e,s,n;const i=S[9].default,c=oe(i,S,S[8],null);return{c(){h=J("ul"),c&&c.c(),this.h()},l(a){h=X(a,"UL",{class:!0});var f=V(h);c&&c.l(f),f.forEach(R),this.h()},h(){F(h,"class","cpeum-1s5e709"),Ze(()=>S[11].call(h)),U(h,"height",I,!1),U(h,"--delay",u,!1)},m(a,f){Z(a,h,f),c&&c.m(h,null),S[10](h),d=ht(h,S[11].bind(h)),e=!0,s||(n=[we(Je.call(null,h,{rootMargin:"0% 0px -30%"})),ne(h,"enter",S[5]),ne(h,"leave",S[6]),ne(h,"mouseenter",hn),ne(h,"mouseleave",S[7])],s=!0)},p(a,[f]){c&&c.p&&(!e||f&256)&&le(c,i,a,a[8],e?ue(i,a[8],f,null):fe(a[8]),null),f&4&&I!==(I=`${a[2]}px`)&&U(h,"height",I,!1),f&1&&u!==(u=`${a[0]}ms`)&&U(h,"--delay",u,!1)},i(a){e||(j(c,a),e=!0)},o(a){q(c,a),e=!1},d(a){a&&R(h),c&&c.d(a),S[10](null),d(),s=!1,Oe(n)}}}const fn=200,ct=400,un=500,cn=3;function hn(){}function gn(S,h,d){let I,{$$slots:u={},$$scope:e}=h,{staggerDelay:s=120}=h,n,i,c=500;const a=Qe(!1);Ve(S,a,m=>d(15,I=m));let f=0,r=[];Me("bodies",{getEngine:()=>t,getIndex:()=>f++,addBodyRef:m=>{r.push(m)},visible:a,staggerDelay:s});const t=O.Engine.create();t.gravity.y=0,t.gravity.scale=0,t.positionIterations=5,t.velocityIterations=3,t.enableSleeping=!0;const o=O.Runner.create(),l=new rn(t,ct,ct,fn);let g;function x(){I?t.enabled=!0:(a.set(!0),O.Runner.run(o,t))}function C(){t.enabled=!1}function M(){g.setAnchor()}be(()=>{g=new on(t,n)}),gt(()=>{O.Runner.stop(o),O.World.clear(t.world,!1),O.Engine.clear(t)});function v(m){vt[m?"unshift":"push"](()=>{n=m,d(3,n)})}function p(){i=this.clientWidth,d(1,i)}return S.$$set=m=>{"staggerDelay"in m&&d(0,s=m.staggerDelay),"$$scope"in m&&d(8,e=m.$$scope)},S.$$.update=()=>{S.$$.dirty&6&&i&&(d(2,c=Math.max(Math.ceil((un+cn*r.map(m=>m.area).reduce((m,y)=>m+y,0))/i),400)),l.update(i,c))},[s,i,c,n,a,x,C,M,e,u,v,p]}class On extends ie{constructor(h){super(),se(this,h,gn,ln,re,{staggerDelay:0})}}function vn(S){let h,d,I=`rotate(${-1*S[4]}rad)`,u=`${S[2]}px`,e=`${S[0]}px`,s=`${S[1]}px`,n=`-${S[1]*.5}px`,i=`-${S[0]*.5}px`,c=`translate(${S[6]}px, ${S[5]}px) rotate(${S[4]}rad)`,a=`${S[10]*S[8].staggerDelay}ms`,f;const r=S[13].default,t=oe(r,S,S[12],null);return{c(){h=J("li"),d=J("span"),t&&t.c(),this.h()},l(o){h=X(o,"LI",{class:!0});var l=V(h);d=X(l,"SPAN",{});var g=V(d);t&&t.l(g),g.forEach(R),l.forEach(R),this.h()},h(){U(d,"transform",I,!1),F(h,"class","cpeum-38i3u2"),G(h,"hidden",!S[7]),U(h,"border-radius",u,!1),U(h,"width",e,!1),U(h,"height",s,!1),U(h,"top",n,!1),U(h,"left",i,!1),U(h,"transform",c,!1),U(h,"--delay",a,!1)},m(o,l){Z(o,h,l),N(h,d),t&&t.m(d,null),S[14](h),f=!0},p(o,[l]){t&&t.p&&(!f||l&4096)&&le(t,r,o,o[12],f?ue(r,o[12],l,null):fe(o[12]),null),l&16&&I!==(I=`rotate(${-1*o[4]}rad)`)&&U(d,"transform",I,!1),l&128&&G(h,"hidden",!o[7]),l&4&&u!==(u=`${o[2]}px`)&&U(h,"border-radius",u,!1),l&1&&e!==(e=`${o[0]}px`)&&U(h,"width",e,!1),l&2&&s!==(s=`${o[1]}px`)&&U(h,"height",s,!1),l&2&&n!==(n=`-${o[1]*.5}px`)&&U(h,"top",n,!1),l&1&&i!==(i=`-${o[0]*.5}px`)&&U(h,"left",i,!1),l&112&&c!==(c=`translate(${o[6]}px, ${o[5]}px) rotate(${o[4]}rad)`)&&U(h,"transform",c,!1)},i(o){f||(j(t,o),f=!0)},o(o){q(t,o),f=!1},d(o){o&&R(h),t&&t.d(o),S[14](null)}}}const mn=150,dn=12;function pn(S,h,d){let I,{$$slots:u={},$$scope:e}=h,{size:s=void 0}=h,{width:n=void 0}=h,{height:i=void 0}=h,{radius:c=void 0}=h,a,f=(Math.random()-.5)/180,r=0,t=0;const o=Ke("bodies"),l=o.visible;Ve(S,l,v=>d(7,I=v));const g=o.getIndex(),x=o.getEngine();let C;be(()=>{s||d(11,s=mn+Math.sqrt(a.textContent.length)*dn),n||d(0,n=s),i||d(1,i=n),c||d(2,c=Math.round(Math.random()*.5*n)),C=O.Bodies.rectangle(O.Common.random(0,a.parentElement.clientWidth),O.Common.random(0,a.parentElement.clientHeight),n,i,{angle:f,friction:.1,frictionStatic:12,density:5e-4,chamfer:{radius:c}}),o.addBodyRef(C),O.Composite.add(x.world,C),O.Events.on(x,"afterUpdate",()=>{d(4,f=C.angle),d(5,r=C.position.y),d(6,t=C.position.x)})});function M(v){vt[v?"unshift":"push"](()=>{a=v,d(3,a)})}return S.$$set=v=>{"size"in v&&d(11,s=v.size),"width"in v&&d(0,n=v.width),"height"in v&&d(1,i=v.height),"radius"in v&&d(2,c=v.radius),"$$scope"in v&&d(12,e=v.$$scope)},[n,i,c,a,f,r,t,I,o,l,g,s,e,u,M]}class Vn extends ie{constructor(h){super(),se(this,h,pn,vn,re,{size:11,width:0,height:1,radius:2})}}export{On as B,Tn as C,Wn as E,Hn as F,An as I,Ln as L,Rn as P,bt as S,Fn as a,Bn as b,Vn as c,Dn as d};
