import{S as j,i as _,s as w,N as R,ac as x,a9 as B,X as q}from"./index-caf3a8f3.js";import{m as z,a as t}from"./Map-12c7cf07.js";import{d as I}from"./map-b06c0350.js";function K(n,i,o){let g,E;R(n,z,e=>o(19,g=e));let{data:r}=i,{fillColor:s="none"}=i,{fillColorHover:y=s}=i,{fillColorHighlight:d=s}=i,{fillOpacity:h=1}=i,{fillOpacityHover:v=h}=i,{fillOpacityHighlight:m=h}=i,{strokeWidth:k=6}=i,{strokeWidthHover:H=12}=i,{strokeWidthHighlight:C=10}=i,{strokeColor:c="none"}=i,{strokeColorHover:b=c}=i,{strokeColorHighlight:L=c}=i,{strokeOpacity:u=1}=i,{strokeOpacityHover:S=u}=i,{strokeOpacityHighlight:O=u}=i,{strokeDashArray:M=[1,0]}=i,{id:l}=i;const P=x("figuremap");x("currentKey");const W=P?P.active:null;R(n,W,e=>o(20,E=e));const a={LINES:l+"-lines",CIRCLES:l+"-circles",FILLS:l+"-fills"};let f=null;const N=B();function F(e){e.features.length>0&&(f!==e.features[0].id&&(N("hover",e),f!==null&&t.setFeatureState({source:l,id:f},{hover:!1})),f=e.features[0].id,t.setFeatureState({source:l,id:f},{hover:!0}))}function A(e){f!==null&&(t.setFeatureState({source:l,id:f},{hover:!1}),f=null),f=null,N("leave",e)}return r.features?(r.features.forEach((e,D)=>{e.id||(e.id=Math.floor((D+Math.random())*1e3))}),I.add(...r.features)):(r.id||(r.id=Math.floor(Math.random()*1e3)),I.add(r)),q(()=>{t.getSource(l)&&t.removeSource(l);for(const e of Object.values(a))t.removeLayer(e);r.features?r.features.forEach(e=>I.removeById(e.id)):I.removeById(r.id)}),n.$$set=e=>{"data"in e&&o(1,r=e.data),"fillColor"in e&&o(2,s=e.fillColor),"fillColorHover"in e&&o(3,y=e.fillColorHover),"fillColorHighlight"in e&&o(4,d=e.fillColorHighlight),"fillOpacity"in e&&o(5,h=e.fillOpacity),"fillOpacityHover"in e&&o(6,v=e.fillOpacityHover),"fillOpacityHighlight"in e&&o(7,m=e.fillOpacityHighlight),"strokeWidth"in e&&o(8,k=e.strokeWidth),"strokeWidthHover"in e&&o(9,H=e.strokeWidthHover),"strokeWidthHighlight"in e&&o(10,C=e.strokeWidthHighlight),"strokeColor"in e&&o(11,c=e.strokeColor),"strokeColorHover"in e&&o(12,b=e.strokeColorHover),"strokeColorHighlight"in e&&o(13,L=e.strokeColorHighlight),"strokeOpacity"in e&&o(14,u=e.strokeOpacity),"strokeOpacityHover"in e&&o(15,S=e.strokeOpacityHover),"strokeOpacityHighlight"in e&&o(16,O=e.strokeOpacityHighlight),"strokeDashArray"in e&&o(17,M=e.strokeDashArray),"id"in e&&o(18,l=e.id)},n.$$.update=()=>{if(n.$$.dirty&1572864&&W&&g){const e=E?"visible":"none";for(const D of Object.values(a))t.setLayoutProperty(D,"visibility",e)}n.$$.dirty&1048574&&g&&!t.getSource(l)&&(t.addSource(l,{type:"geojson",data:r}),t.addLayer({id:a.LINES,type:"line",source:l,filter:["any",["==",["geometry-type"],"LineString"],["==",["geometry-type"],"MultiLineString"],["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"line-width":["case",["boolean",["feature-state","hover"],!1],H,["boolean",["feature-state","highlight"],!1],C,k],"line-color":["case",["boolean",["feature-state","hover"],!1],b,["boolean",["feature-state","highlight"],!1],L,c],"line-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],O,u],"line-dasharray":M},layout:{visibility:"visible","line-cap":"round","line-join":"round"}}),t.on("mouseenter",a.LINES,function(e){}),t.on("mousemove",a.LINES,function(e){F(e)}),t.on("mouseleave",a.LINES,function(e){A(e)}),t.addLayer({id:a.CIRCLES,type:"circle",source:l,filter:["any",["==",["geometry-type"],"Point"],["==",["geometry-type"],"MultiPoint"]],paint:{"circle-pitch-alignment":"map","circle-pitch-scale":"map","circle-radius":["interpolate",["exponential",2],["zoom"],10,["/",["get","radius"],58.554],20,["/",["get","radius"],.014]],"circle-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],d,s],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],v,["boolean",["feature-state","highlight"],!1],m,h],"circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],H,["boolean",["feature-state","highlight"],!1],C,k],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],b,["boolean",["feature-state","highlight"],!1],L,c],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],O,u]},layout:{visibility:"visible"}}),t.on("mouseenter",a.CIRCLES,function(e){}),t.on("mousemove",a.CIRCLES,function(e){F(e)}),t.on("mouseleave",a.CIRCLES,function(e){A(e)}),t.addLayer({id:a.FILLS,type:"fill",source:l,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],d,s],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],v,["boolean",["feature-state","highlight"],!1],m,h],"fill-antialias":!0},layout:{visibility:"visible"}}),t.on("mouseenter",a.FILLS,function(e){}),t.on("mousemove",a.FILLS,function(e){F(e)}),t.on("mouseleave",a.FILLS,function(e){A(e)}))},[W,r,s,y,d,h,v,m,k,H,C,c,b,L,u,S,O,M,l,g,E]}class J extends j{constructor(i){super(),_(this,i,K,null,w,{data:1,fillColor:2,fillColorHover:3,fillColorHighlight:4,fillOpacity:5,fillOpacityHover:6,fillOpacityHighlight:7,strokeWidth:8,strokeWidthHover:9,strokeWidthHighlight:10,strokeColor:11,strokeColorHover:12,strokeColorHighlight:13,strokeOpacity:14,strokeOpacityHover:15,strokeOpacityHighlight:16,strokeDashArray:17,id:18})}}export{J as M};
