import{S as G,i as Q,s as X,C as N,e as Z,O as w,c as p,a as A,P as B,d as M,b as g,a1 as q,I as J,g as $,J as K,z as ee,U as te,a2 as T,a3 as ie,N as U,ac as V,a9 as oe,a5 as le}from"./index-8814b013.js";import{a as ae}from"./index-b9ab12a0.js";import{m as re,i as Y,a as r}from"./Map-861cc6bb.js";import{g as W}from"./Map.svelte_svelte_type_style_lang-ad9468b4.js";import{b as se}from"./paths-396f020f.js";function ne(s){let t,i,a,d,l,f,y=[{class:"loading-wrapper"},{style:d="font-size: "+s[0]+"px; background-color: "+s[2]},s[3]],n={};for(let o=0;o<y.length;o+=1)n=N(n,y[o]);return{c(){t=Z("div"),i=w("svg"),a=w("circle"),this.h()},l(o){t=p(o,"DIV",{class:!0,style:!0});var h=A(t);i=B(h,"svg",{class:!0,viewBox:!0});var k=A(i);a=B(k,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"vector-effect":!0,class:!0});var m=A(a);m.forEach(M),k.forEach(M),h.forEach(M),this.h()},h(){g(a,"cx","50"),g(a,"cy","50"),g(a,"r","50"),g(a,"fill","none"),g(a,"stroke",s[1]),g(a,"stroke-width","4"),g(a,"stroke-linecap","round"),g(a,"vector-effect","non-scaling-stroke"),g(a,"class","cpeum-13to7g7"),g(i,"class","loading cpeum-13to7g7"),g(i,"viewBox","0 0 100 100"),q(t,n),J(t,"cpeum-13to7g7",!0)},m(o,h){$(o,t,h),K(t,i),K(i,a),f=!0},p(o,[h]){(!f||h&2)&&g(a,"stroke",o[1]),q(t,n=ee(y,[{class:"loading-wrapper"},(!f||h&5&&d!==(d="font-size: "+o[0]+"px; background-color: "+o[2]))&&{style:d},h&8&&o[3]])),J(t,"cpeum-13to7g7",!0)},i(o){f||(l&&l.end(1),f=!0)},o(o){l=te(t,ae,{duration:250}),f=!1},d(o){o&&M(t),o&&l&&l.end()}}}function ce(s,t,i){const a=["size","color","background"];let d=T(t,a),{size:l=40}=t,{color:f="var(--dark1)"}=t,{background:y="transparent"}=t;return s.$$set=n=>{t=N(N({},t),ie(n)),i(3,d=T(t,a)),"size"in n&&i(0,l=n.size),"color"in n&&i(1,f=n.color),"background"in n&&i(2,y=n.background)},[l,f,y,d]}class ve extends G{constructor(t){super(),Q(this,t,ce,ne,X,{size:0,color:1,background:2})}}function fe(s,t,i){let a,d;U(s,re,e=>i(20,a=e));let{data:l}=t,{fillColor:f="none"}=t,{fillColorHover:y=f}=t,{fillColorHighlight:n=f}=t,{fillOpacity:o=1}=t,{fillOpacityHover:h=o}=t,{fillOpacityHighlight:k=o}=t,{strokeWidth:m=6}=t,{strokeWidthHover:C=m}=t,{strokeWidthHighlight:L=m}=t,{strokeColor:b="none"}=t,{strokeColorHover:_=b}=t,{strokeColorHighlight:O=b}=t,{strokeOpacity:H=1}=t,{strokeOpacityHover:S=H}=t,{strokeOpacityHighlight:I=H}=t,{strokeDashArray:F=[1,0]}=t,{radius:E=10}=t,{id:c}=t;const R=V("figuremap");V("currentKey");const z=R?R.active:null;U(s,z,e=>i(21,d=e));const u={LINES:c+"-lines",CIRCLES:c+"-circles",FILLS:c+"-fills"};let v=null;const j=oe();function D(e){e.features.length>0&&(v!==e.features[0].id&&(j("hover",e),v!==null&&r.setFeatureState({source:c,id:v},{hover:!1})),v=e.features[0].id,r.setFeatureState({source:c,id:v},{hover:!0}))}function P(e){v!==null&&(r.setFeatureState({source:c,id:v},{hover:!1}),v=null),v=null,j("leave",e)}return l.features?(l.features.forEach((e,x)=>{Y(e.id)||(e.id=Math.floor((x+Math.random())*1e3)),e.properties.source=c}),W.add(...l.features)):((!l.id||!Y(l.id))&&(l.id=Math.floor(Math.random()*1e3)),l.properties.source=c,W.add(l)),le(()=>{r.getSource(c)&&r.removeSource(c);for(const e of Object.values(u))r.getLayer(e)&&r.removeLayer(e);l.features?l.features.forEach(e=>W.removeById(e.id)):W.removeById(l.id)}),s.$$set=e=>{"data"in e&&i(1,l=e.data),"fillColor"in e&&i(2,f=e.fillColor),"fillColorHover"in e&&i(3,y=e.fillColorHover),"fillColorHighlight"in e&&i(4,n=e.fillColorHighlight),"fillOpacity"in e&&i(5,o=e.fillOpacity),"fillOpacityHover"in e&&i(6,h=e.fillOpacityHover),"fillOpacityHighlight"in e&&i(7,k=e.fillOpacityHighlight),"strokeWidth"in e&&i(8,m=e.strokeWidth),"strokeWidthHover"in e&&i(9,C=e.strokeWidthHover),"strokeWidthHighlight"in e&&i(10,L=e.strokeWidthHighlight),"strokeColor"in e&&i(11,b=e.strokeColor),"strokeColorHover"in e&&i(12,_=e.strokeColorHover),"strokeColorHighlight"in e&&i(13,O=e.strokeColorHighlight),"strokeOpacity"in e&&i(14,H=e.strokeOpacity),"strokeOpacityHover"in e&&i(15,S=e.strokeOpacityHover),"strokeOpacityHighlight"in e&&i(16,I=e.strokeOpacityHighlight),"strokeDashArray"in e&&i(17,F=e.strokeDashArray),"radius"in e&&i(18,E=e.radius),"id"in e&&i(19,c=e.id)},s.$$.update=()=>{if(s.$$.dirty&3145728&&z&&a){const e=d?"visible":"none";for(const x of Object.values(u))r.setLayoutProperty(x,"visibility",e)}s.$$.dirty&2097150&&a&&!r.getSource(c)&&(r.addSource(c,{type:"geojson",data:l}),r.addLayer({id:u.LINES,type:"line",source:c,filter:["any",["==",["geometry-type"],"LineString"],["==",["geometry-type"],"MultiLineString"],["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"line-width":["case",["boolean",["feature-state","hover"],!1],C,["boolean",["feature-state","highlight"],!1],L,m],"line-color":["case",["boolean",["feature-state","hover"],!1],_,["boolean",["feature-state","highlight"],!1],O,b],"line-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],I,H],"line-dasharray":F},layout:{visibility:"visible","line-cap":"round","line-join":"round"}}),r.on("mouseenter",u.LINES,function(e){}),r.on("mousemove",u.LINES,function(e){D(e)}),r.on("mouseleave",u.LINES,function(e){P(e)}),r.addLayer({id:u.CIRCLES,type:"circle",source:c,filter:["any",["==",["geometry-type"],"Point"],["==",["geometry-type"],"MultiPoint"]],paint:{"circle-pitch-alignment":"map","circle-pitch-scale":"map","circle-radius":["interpolate",["exponential",2],["zoom"],10,["/",["coalesce",["get","radius"],E],58.554],20,["/",["coalesce",["get","radius"],E],.014]],"circle-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],n,f],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],h,["boolean",["feature-state","highlight"],!1],k,o],"circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],C,["boolean",["feature-state","highlight"],!1],L,m],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],_,["boolean",["feature-state","highlight"],!1],O,b],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],I,H]},layout:{visibility:"visible"}}),r.on("mouseenter",u.CIRCLES,function(e){}),r.on("mousemove",u.CIRCLES,function(e){D(e)}),r.on("mouseleave",u.CIRCLES,function(e){P(e)}),r.addLayer({id:u.FILLS,type:"fill",source:c,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],n,f],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],h,["boolean",["feature-state","highlight"],!1],k,o],"fill-antialias":!0},layout:{visibility:"visible"}}),r.on("mouseenter",u.FILLS,function(e){}),r.on("mousemove",u.FILLS,function(e){D(e)}),r.on("mouseleave",u.FILLS,function(e){P(e)}))},[z,l,f,y,n,o,h,k,m,C,L,b,_,O,H,S,I,F,E,c,a,d]}class me extends G{constructor(t){super(),Q(this,t,fe,null,X,{data:1,fillColor:2,fillColorHover:3,fillColorHighlight:4,fillOpacity:5,fillOpacityHover:6,fillOpacityHighlight:7,strokeWidth:8,strokeWidthHover:9,strokeWidthHighlight:10,strokeColor:11,strokeColorHover:12,strokeColorHighlight:13,strokeOpacity:14,strokeOpacityHover:15,strokeOpacityHighlight:16,strokeDashArray:17,radius:18,id:19})}}async function ke(s){const t=await fetch(se+s);if(t.ok)return t.json();throw Error(t.status+": "+t.statusText)}export{ve as L,me as M,ke as g};
