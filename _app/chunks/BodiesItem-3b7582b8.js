import{S as ne,i as ie,s as se,R as ae,C as $,e as b,c as X,a as H,d as F,b as O,K as Ee,L as N,g as K,M as G,a6 as we,V as oe,W as le,X as fe,z as Pe,q as j,o as q,O as Se,P as Ve,w as Te,k as de,x as Be,m as pe,y as Ae,B as ke,t as ve,h as he,j as Ce,I as xe,J as ye,f as U,N as ce,G as Oe,a8 as at,r as Ge,v as We,l as _e,a3 as ge,E as je,Q as qe,$ as ot,a0 as $e,ac as lt,ad as xt,Y as ft,_ as ut}from"./index-897d5eac.js";import{i as Ne}from"./intersect-eda3c074.js";import{b as et}from"./map-322c38b0.js";import{c as De,a as ct}from"./route-dab53cb1.js";import{b as tt}from"./paths-396f020f.js";import{a as vt,r as ht}from"./revealText-510b6fa3.js";import{g as nt}from"./themeColors-84e338fb.js";import{a as it}from"./index-3148e0ff.js";import{w as yt}from"./index-3c0165fd.js";import"./scroll-b5859ca7.js";function St(I){let v,p,C,u,e;const s=I[2].default,n=ae(s,I,I[1],null);let i=[I[0]],c={};for(let r=0;r<i.length;r+=1)c=$(c,i[r]);return{c(){v=b("h2"),p=b("span"),n&&n.c(),this.h()},l(r){v=X(r,"H2",{});var f=H(v);p=X(f,"SPAN",{class:!0});var a=H(p);n&&n.l(a),a.forEach(F),f.forEach(F),this.h()},h(){O(p,"class","cpeum-1uh9iq8"),Ee(v,c),N(v,"cpeum-1uh9iq8",!0)},m(r,f){K(r,v,f),G(v,p),n&&n.m(p,null),C=!0,u||(e=we(vt.call(null,v,ht)),u=!0)},p(r,[f]){n&&n.p&&(!C||f&2)&&oe(n,s,r,r[1],C?fe(s,r[1],f,null):le(r[1]),null),Ee(v,c=Pe(i,[f&1&&r[0]])),N(v,"cpeum-1uh9iq8",!0)},i(r){C||(j(n,r),C=!0)},o(r){q(n,r),C=!1},d(r){r&&F(v),n&&n.d(r),u=!1,e()}}}function Pt(I,v,p){const C=[];let u=Se(v,C),{$$slots:e={},$$scope:s}=v;return I.$$set=n=>{v=$($({},v),Ve(n)),p(0,u=Se(v,C)),"$$scope"in n&&p(1,s=n.$$scope)},[u,s,e]}class He extends ne{constructor(v){super(),ie(this,v,Pt,St,se,{})}}function Ct(I){let v;return{c(){v=ve(I[0])},l(p){v=he(p,I[0])},m(p,C){K(p,v,C)},p(p,C){C&1&&Ce(v,p[0])},d(p){p&&F(v)}}}function wt(I){let v,p,C,u;p=new He({props:{$$slots:{default:[Ct]},$$scope:{ctx:I}}});const e=I[1].default,s=ae(e,I,I[2],null);return{c(){v=b("section"),Te(p.$$.fragment),C=de(),s&&s.c()},l(n){v=X(n,"SECTION",{});var i=H(v);Be(p.$$.fragment,i),C=pe(i),s&&s.l(i),i.forEach(F)},m(n,i){K(n,v,i),Ae(p,v,null),G(v,C),s&&s.m(v,null),u=!0},p(n,[i]){const c={};i&5&&(c.$$scope={dirty:i,ctx:n}),p.$set(c),s&&s.p&&(!u||i&4)&&oe(s,e,n,n[2],u?fe(e,n[2],i,null):le(n[2]),null)},i(n){u||(j(p.$$.fragment,n),j(s,n),u=!0)},o(n){q(p.$$.fragment,n),q(s,n),u=!1},d(n){n&&F(v),ke(p),s&&s.d(n)}}}function Mt(I,v,p){let{$$slots:C={},$$scope:u}=v,{heading:e}=v;return I.$$set=s=>{"heading"in s&&p(0,e=s.heading),"$$scope"in s&&p(2,u=s.$$scope)},[e,C,u]}class In extends ne{constructor(v){super(),ie(this,v,Mt,wt,se,{heading:0})}}function Et(I,{scrollParent:v=document.body,factor:p=.8}={}){let C=0;function u(){const e=I.getBoundingClientRect();C=(Math.min(window.innerHeight,Math.max(-e.height,e.top-C))+e.height/2-window.innerHeight/2)*(p-1),I.style.transform=`translateY(${C}px)`}return u(),v.addEventListener("scroll",u),{destroy(){v.removeEventListener("scroll",u)}}}function It(I){let v,p,C,u,e,s,n,i,c,r,f,a,t,o,l=`rotateZ(${2.5-Math.random()*5}deg)`,g,y,w,S;const h=I[6].default,m=ae(h,I,I[5],null);return{c(){v=b("section"),p=b("header"),C=xe("svg"),u=xe("text"),e=ve(I[1]),s=de(),n=b("hgroup"),i=b("span"),c=ve(I[0]),r=de(),f=b("h3"),a=ve(I[2]),t=de(),o=b("div"),g=de(),m&&m.c(),this.h()},l(d){v=X(d,"SECTION",{class:!0});var x=H(v);p=X(x,"HEADER",{class:!0});var M=H(p);C=ye(M,"svg",{width:!0,height:!0,viewBox:!0,class:!0});var E=H(C);u=ye(E,"text",{x:!0,y:!0,"font-size":!0,"text-anchor":!0,"dominant-baseline":!0,class:!0});var T=H(u);e=he(T,I[1]),T.forEach(F),E.forEach(F),s=pe(M),n=X(M,"HGROUP",{class:!0});var P=H(n);i=X(P,"SPAN",{class:!0});var B=H(i);c=he(B,I[0]),B.forEach(F),r=pe(P),f=X(P,"H3",{class:!0});var A=H(f);a=he(A,I[2]),A.forEach(F),P.forEach(F),t=pe(M),o=X(M,"DIV",{class:!0}),H(o).forEach(F),M.forEach(F),g=pe(x),m&&m.l(x),x.forEach(F),this.h()},h(){O(u,"x","0"),O(u,"y","450"),O(u,"font-size","500"),O(u,"text-anchor","middle"),O(u,"dominant-baseline","baseline"),O(u,"class","cpeum-wktov9"),O(C,"width","500"),O(C,"height","500"),O(C,"viewBox","0 0 500 500"),O(C,"class","cpeum-wktov9"),O(i,"class","cpeum-wktov9"),O(f,"class","cpeum-wktov9"),O(n,"class","cpeum-wktov9"),O(o,"class","image cpeum-wktov9"),U(o,"background-image",I[3]?`url(${tt+I[3]})`:"",!1),O(p,"class","cpeum-wktov9"),U(p,"transform",l,!1),O(v,"class","cpeum-wktov9")},m(d,x){K(d,v,x),G(v,p),G(p,C),G(C,u),G(u,e),G(p,s),G(p,n),G(n,i),G(i,c),G(n,r),G(n,f),G(f,a),G(p,t),G(p,o),G(v,g),m&&m.m(v,null),y=!0,w||(S=[we(vt.call(null,f,ht)),we(Et.call(null,n,{factor:.7})),we(Ne.call(null,v)),ce(v,"enter",Tt),ce(v,"leave",Bt)],w=!0)},p(d,[x]){(!y||x&2)&&Ce(e,d[1]),(!y||x&1)&&Ce(c,d[0]),(!y||x&4)&&Ce(a,d[2]),x&8&&U(o,"background-image",d[3]?`url(${tt+d[3]})`:"",!1),m&&m.p&&(!y||x&32)&&oe(m,h,d,d[5],y?fe(h,d[5],x,null):le(d[5]),null)},i(d){y||(j(m,d),y=!0)},o(d){q(m,d),y=!1},d(d){d&&F(v),m&&m.d(d),w=!1,Oe(S)}}}function Tt(){}function Bt(){}function At(I,v,p){let{$$slots:C={},$$scope:u}=v,{label:e}=v,{shortLabel:s=e}=v,{title:n}=v,{key:i}=v,{src:c=""}=v;return at("exercice"),I.$$set=r=>{"label"in r&&p(0,e=r.label),"shortLabel"in r&&p(1,s=r.shortLabel),"title"in r&&p(2,n=r.title),"key"in r&&p(4,i=r.key),"src"in r&&p(3,c=r.src),"$$scope"in r&&p(5,u=r.$$scope)},[e,s,n,c,i,u,C]}class Tn extends ne{constructor(v){super(),ie(this,v,At,It,se,{label:0,shortLabel:1,title:2,key:4,src:3})}}function kt(I){let v;return{c(){v=ve(I[0])},l(p){v=he(p,I[0])},m(p,C){K(p,v,C)},p(p,C){C&1&&Ce(v,p[0])},d(p){p&&F(v)}}}function Lt(I){let v,p,C,u;p=new He({props:{$$slots:{default:[kt]},$$scope:{ctx:I}}});const e=I[1].default,s=ae(e,I,I[2],null);return{c(){v=b("section"),Te(p.$$.fragment),C=de(),s&&s.c()},l(n){v=X(n,"SECTION",{});var i=H(v);Be(p.$$.fragment,i),C=pe(i),s&&s.l(i),i.forEach(F)},m(n,i){K(n,v,i),Ae(p,v,null),G(v,C),s&&s.m(v,null),u=!0},p(n,[i]){const c={};i&5&&(c.$$scope={dirty:i,ctx:n}),p.$set(c),s&&s.p&&(!u||i&4)&&oe(s,e,n,n[2],u?fe(e,n[2],i,null):le(n[2]),null)},i(n){u||(j(p.$$.fragment,n),j(s,n),u=!0)},o(n){q(p.$$.fragment,n),q(s,n),u=!1},d(n){n&&F(v),ke(p),s&&s.d(n)}}}function Rt(I,v,p){let{$$slots:C={},$$scope:u}=v,{heading:e}=v;return I.$$set=s=>{"heading"in s&&p(0,e=s.heading),"$$scope"in s&&p(2,u=s.$$scope)},[e,C,u]}class Bn extends ne{constructor(v){super(),ie(this,v,Rt,Lt,se,{heading:0})}}function Ft(I){let v,p;const C=I[3].default,u=ae(C,I,I[2],null);let e=[I[1]],s={};for(let n=0;n<e.length;n+=1)s=$(s,e[n]);return{c(){v=b("dl"),u&&u.c(),this.h()},l(n){v=X(n,"DL",{});var i=H(v);u&&u.l(i),i.forEach(F),this.h()},h(){Ee(v,s),U(v,"font-size",I[0]==="small"?"13px":"15px",!1),N(v,"cpeum-14c0ev5",!0)},m(n,i){K(n,v,i),u&&u.m(v,null),p=!0},p(n,[i]){u&&u.p&&(!p||i&4)&&oe(u,C,n,n[2],p?fe(C,n[2],i,null):le(n[2]),null),Ee(v,s=Pe(e,[i&2&&n[1]])),U(v,"font-size",n[0]==="small"?"13px":"15px",!1),N(v,"cpeum-14c0ev5",!0)},i(n){p||(j(u,n),p=!0)},o(n){q(u,n),p=!1},d(n){n&&F(v),u&&u.d(n)}}}function Dt(I,v,p){const C=["size"];let u=Se(v,C),{$$slots:e={},$$scope:s}=v,{size:n="medium"}=v;return Ge("legend",{}),I.$$set=i=>{v=$($({},v),Ve(i)),p(1,u=Se(v,C)),"size"in i&&p(0,n=i.size),"$$scope"in i&&p(2,s=i.$$scope)},[n,u,s,e]}class An extends ne{constructor(v){super(),ie(this,v,Dt,Ft,se,{size:0})}}function Vt(I){let v,p,C,u,e;const s=I[4].default,n=ae(s,I,I[3],null);let i=[{class:"trigger"},I[2]],c={};for(let r=0;r<i.length;r+=1)c=$(c,i[r]);return{c(){v=b("div"),p=b("div"),n&&n.c(),this.h()},l(r){v=X(r,"DIV",{class:!0});var f=H(v);p=X(f,"DIV",{class:!0});var a=H(p);n&&n.l(a),a.forEach(F),f.forEach(F),this.h()},h(){O(p,"class","content cpeum-17ouul0"),Ee(v,c),N(v,"cpeum-17ouul0",!0)},m(r,f){K(r,v,f),G(v,p),n&&n.m(p,null),C=!0,u||(e=[we(Ne.call(null,v,{rootMargin:"-50% 0% -50%"})),ce(v,"enter",I[0]),ce(v,"leave",I[1])],u=!0)},p(r,[f]){n&&n.p&&(!C||f&8)&&oe(n,s,r,r[3],C?fe(s,r[3],f,null):le(r[3]),null),Ee(v,c=Pe(i,[{class:"trigger"},f&4&&r[2]])),N(v,"cpeum-17ouul0",!0)},i(r){C||(j(n,r),C=!0)},o(r){q(n,r),C=!1},d(r){r&&F(v),n&&n.d(r),u=!1,Oe(e)}}}function Ot(I,v,p){const C=[];let u=Se(v,C),{$$slots:e={},$$scope:s}=v;function n(){et.setClass("figure")}function i(){et.setClass("")}return We(()=>{}),I.$$set=c=>{v=$($({},v),Ve(c)),p(2,u=Se(v,C)),"$$scope"in c&&p(3,s=c.$$scope)},[n,i,u,s,e]}class kn extends ne{constructor(v){super(),ie(this,v,Ot,Vt,se,{})}}function Wt(I){let v,p,C;return{c(){v=xe("text"),p=ve("Source: "),C=ve(I[1])},l(u){v=ye(u,"text",{});var e=H(v);p=he(e,"Source: "),C=he(e,I[1]),e.forEach(F)},m(u,e){K(u,v,e),G(v,p),G(v,C)},p(u,e){e&2&&Ce(C,u[1])},d(u){u&&F(v)}}}function Ht(I){let v,p,C=[{d:p="M"+0+","+2*Q/3+" Q"+Q/4+","+Me+" "+Q/2+","+Q/2+" T"+Q+","+Q/3},I[8]],u={};for(let e=0;e<C.length;e+=1)u=$(u,C[e]);return{c(){v=xe("path"),this.h()},l(e){v=ye(e,"path",{d:!0}),H(v).forEach(F),this.h()},h(){ge(v,u),N(v,"cpeum-3d36ro",!0)},m(e,s){K(e,v,s)},p(e,s){ge(v,u=Pe(C,[{d:p},e[8]])),N(v,"cpeum-3d36ro",!0)},d(e){e&&F(v)}}}function zt(I){let v,p,C=[{points:p=Q/2+" "+Me+", "+Me+" "+(Q-I[6])+", "+(Q-Me)+" "+(Q-I[6])},I[8]],u={};for(let e=0;e<C.length;e+=1)u=$(u,C[e]);return{c(){v=xe("polygon"),this.h()},l(e){v=ye(e,"polygon",{points:!0}),H(v).forEach(F),this.h()},h(){ge(v,u),N(v,"cpeum-3d36ro",!0)},m(e,s){K(e,v,s)},p(e,s){ge(v,u=Pe(C,[{points:p},e[8]])),N(v,"cpeum-3d36ro",!0)},d(e){e&&F(v)}}}function Gt(I){let v,p,C,u,e=[{cx:p=Q/2},{cy:C=Q/2},{r:u=Q/2-Me},I[8]],s={};for(let n=0;n<e.length;n+=1)s=$(s,e[n]);return{c(){v=xe("circle"),this.h()},l(n){v=ye(n,"circle",{cx:!0,cy:!0,r:!0}),H(v).forEach(F),this.h()},h(){ge(v,s),N(v,"cpeum-3d36ro",!0)},m(n,i){K(n,v,i)},p(n,i){ge(v,s=Pe(e,[{cx:p},{cy:C},{r:u},n[8]])),N(v,"cpeum-3d36ro",!0)},d(n){n&&F(v)}}}function Nt(I){let v,p,C,u,e,s=[{rx:p=Q/20},{ry:C=Q/20},{x:I[6]},{y:I[6]},{width:u=Q-2*I[6]},{height:e=Q-2*I[6]},I[8]],n={};for(let i=0;i<s.length;i+=1)n=$(n,s[i]);return{c(){v=xe("rect"),this.h()},l(i){v=ye(i,"rect",{rx:!0,ry:!0,x:!0,y:!0,width:!0,height:!0}),H(v).forEach(F),this.h()},h(){ge(v,n),N(v,"cpeum-3d36ro",!0)},m(i,c){K(i,v,c)},p(i,c){ge(v,n=Pe(s,[{rx:p},{ry:C},{x:i[6]},{y:i[6]},{width:u},{height:e},i[8]])),N(v,"cpeum-3d36ro",!0)},d(i){i&&F(v)}}}function st(I){let v,p;return{c(){v=xe("text"),p=ve(I[3]),this.h()},l(C){v=ye(C,"text",{"font-size":!0,"font-family":!0,"font-weight":!0,dy:!0,x:!0,y:!0,"text-anchor":!0,fill:!0});var u=H(v);p=he(u,I[3]),u.forEach(F),this.h()},h(){O(v,"font-size",I[7]),O(v,"font-family","var(--font-display)"),O(v,"font-weight","600"),O(v,"dy",".3em"),O(v,"x","50%"),O(v,"y","50%"),O(v,"text-anchor","middle"),O(v,"fill",I[2])},m(C,u){K(C,v,u),G(v,p)},p(C,u){u&8&&Ce(p,C[3]),u&4&&O(v,"fill",C[2])},d(C){C&&F(v)}}}function Ut(I){let v,p,C,u,e;function s(a,t){if(t&1&&(p=null),t&2&&(C=null),a[0]==="square")return Nt;if(a[0]==="circle")return Gt;if(a[0]==="triangle")return zt;if(p==null&&(p=["line","dotted","dashed"].indexOf(a[0])>-1),p)return Ht;if(C==null&&(C=!!Boolean(a[1])),C)return Wt}let n=s(I,-1),i=n&&n(I),c=I[3]&&st(I),r=[{width:Q},{height:Q},{viewBox:e="0 0 "+Q+" "+Q},I[9]],f={};for(let a=0;a<r.length;a+=1)f=$(f,r[a]);return{c(){v=xe("svg"),i&&i.c(),u=_e(),c&&c.c(),this.h()},l(a){v=ye(a,"svg",{width:!0,height:!0,viewBox:!0});var t=H(v);i&&i.l(t),u=_e(),c&&c.l(t),t.forEach(F),this.h()},h(){ge(v,f),N(v,"interactive",I[4]),N(v,"highlight",I[5]),N(v,"cpeum-3d36ro",!0)},m(a,t){K(a,v,t),i&&i.m(v,null),G(v,u),c&&c.m(v,null)},p(a,[t]){n===(n=s(a,t))&&i?i.p(a,t):(i&&i.d(1),i=n&&n(a),i&&(i.c(),i.m(v,u))),a[3]?c?c.p(a,t):(c=st(a),c.c(),c.m(v,null)):c&&(c.d(1),c=null),ge(v,f=Pe(r,[{width:Q},{height:Q},{viewBox:e},t&512&&a[9]])),N(v,"interactive",a[4]),N(v,"highlight",a[5]),N(v,"cpeum-3d36ro",!0)},i:je,o:je,d(a){a&&F(v),i&&i.d(),c&&c.d()}}}const Q=50,Me=5;function Qt(I,v,p){const C=["shape","src","color","label","fill","stroke","strokeWidth","strokeType","interactive","highlight"];let u=Se(v,C),{shape:e="circle"}=v,{src:s=null}=v,{color:n="var(--dark1)"}=v,{label:i=null}=v,{fill:c="none"}=v,{stroke:r="none"}=v,{strokeWidth:f=1}=v,{strokeType:a="solid"}=v,{interactive:t=!1}=v,{highlight:o=!1}=v;const l=Me*1.5,g=Q/2.2,y=a==="dashed"?`${3*f}, ${1.5*f}`:a==="dotted"?`0, ${2*f}`:null,w={fill:c,stroke:r,"stroke-width":f,"stroke-linecap":e==="dashed"?"butt":"round","stroke-dasharray":y||""};return I.$$set=S=>{v=$($({},v),Ve(S)),p(9,u=Se(v,C)),"shape"in S&&p(0,e=S.shape),"src"in S&&p(1,s=S.src),"color"in S&&p(2,n=S.color),"label"in S&&p(3,i=S.label),"fill"in S&&p(10,c=S.fill),"stroke"in S&&p(11,r=S.stroke),"strokeWidth"in S&&p(12,f=S.strokeWidth),"strokeType"in S&&p(13,a=S.strokeType),"interactive"in S&&p(4,t=S.interactive),"highlight"in S&&p(5,o=S.highlight)},[e,s,n,i,t,o,l,g,w,u,c,r,f,a]}class Zt extends ne{constructor(v){super(),ie(this,v,Qt,Ut,se,{shape:0,src:1,color:2,label:3,fill:10,stroke:11,strokeWidth:12,strokeType:13,interactive:4,highlight:5})}}function Kt(I){let v;return{c(){v=ve("Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},l(p){v=he(p,"Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},m(p,C){K(p,v,C)},d(p){p&&F(v)}}}function Jt(I){let v,p,C,u;p=new He({props:{$$slots:{default:[Kt]},$$scope:{ctx:I}}});const e=I[0].default,s=ae(e,I,I[1],null);return{c(){v=b("section"),Te(p.$$.fragment),C=de(),s&&s.c()},l(n){v=X(n,"SECTION",{});var i=H(v);Be(p.$$.fragment,i),C=pe(i),s&&s.l(i),i.forEach(F)},m(n,i){K(n,v,i),Ae(p,v,null),G(v,C),s&&s.m(v,null),u=!0},p(n,[i]){const c={};i&2&&(c.$$scope={dirty:i,ctx:n}),p.$set(c),s&&s.p&&(!u||i&2)&&oe(s,e,n,n[1],u?fe(e,n[1],i,null):le(n[1]),null)},i(n){u||(j(p.$$.fragment,n),j(s,n),u=!0)},o(n){q(p.$$.fragment,n),q(s,n),u=!1},d(n){n&&F(v),ke(p),s&&s.d(n)}}}function bt(I,v,p){let{$$slots:C={},$$scope:u}=v;return I.$$set=e=>{"$$scope"in e&&p(1,u=e.$$scope)},[C,u]}class Ln extends ne{constructor(v){super(),ie(this,v,bt,Jt,se,{})}}function Xt(I){let v;return{c(){v=ve("Propositions d'am\xE9nagement")},l(p){v=he(p,"Propositions d'am\xE9nagement")},m(p,C){K(p,v,C)},d(p){p&&F(v)}}}function Yt(I){let v,p,C,u;p=new He({props:{$$slots:{default:[Xt]},$$scope:{ctx:I}}});const e=I[0].default,s=ae(e,I,I[1],null);return{c(){v=b("section"),Te(p.$$.fragment),C=de(),s&&s.c()},l(n){v=X(n,"SECTION",{});var i=H(v);Be(p.$$.fragment,i),C=pe(i),s&&s.l(i),i.forEach(F)},m(n,i){K(n,v,i),Ae(p,v,null),G(v,C),s&&s.m(v,null),u=!0},p(n,[i]){const c={};i&2&&(c.$$scope={dirty:i,ctx:n}),p.$set(c),s&&s.p&&(!u||i&2)&&oe(s,e,n,n[1],u?fe(e,n[1],i,null):le(n[1]),null)},i(n){u||(j(p.$$.fragment,n),j(s,n),u=!0)},o(n){q(p.$$.fragment,n),q(s,n),u=!1},d(n){n&&F(v),ke(p),s&&s.d(n)}}}function _t(I,v,p){let{$$slots:C={},$$scope:u}=v;return I.$$set=e=>{"$$scope"in e&&p(1,u=e.$$scope)},[C,u]}class Rn extends ne{constructor(v){super(),ie(this,v,_t,Yt,se,{})}}function jt(I){let v,p,C,u,e,s,n,i;C=new Zt({props:{label:I[0],color:I[4],fill:I[5],stroke:I[6],strokeWidth:I[7],src:I[8],shape:I[3],interactive:I[1]}});const c=I[13].default,r=ae(c,I,I[12],null);return{c(){v=b("div"),p=b("dt"),Te(C.$$.fragment),u=de(),e=b("dd"),r&&r.c(),this.h()},l(f){v=X(f,"DIV",{class:!0});var a=H(v);p=X(a,"DT",{class:!0});var t=H(p);Be(C.$$.fragment,t),t.forEach(F),u=pe(a),e=X(a,"DD",{class:!0});var o=H(e);r&&r.l(o),o.forEach(F),a.forEach(F),this.h()},h(){O(p,"class","cpeum-20i04b"),O(e,"class","cpeum-20i04b"),O(v,"class","cpeum-20i04b"),N(v,"interactive",I[1]),N(v,"highlight",I[2])},m(f,a){K(f,v,a),G(v,p),Ae(C,p,null),G(v,u),G(v,e),r&&r.m(e,null),s=!0,n||(i=[ce(v,"mouseover",I[14]),ce(v,"mouseleave",I[15])],n=!0)},p(f,[a]){const t={};a&1&&(t.label=f[0]),a&16&&(t.color=f[4]),a&32&&(t.fill=f[5]),a&64&&(t.stroke=f[6]),a&128&&(t.strokeWidth=f[7]),a&256&&(t.src=f[8]),a&8&&(t.shape=f[3]),a&2&&(t.interactive=f[1]),C.$set(t),r&&r.p&&(!s||a&4096)&&oe(r,c,f,f[12],s?fe(c,f[12],a,null):le(f[12]),null),a&2&&N(v,"interactive",f[1]),a&4&&N(v,"highlight",f[2])},i(f){s||(j(C.$$.fragment,f),j(r,f),s=!0)},o(f){q(C.$$.fragment,f),q(r,f),s=!1},d(f){f&&F(v),ke(C),r&&r.d(f),n=!1,Oe(i)}}}function qt(I,v,p){let{$$slots:C={},$$scope:u}=v,{label:e=null}=v,{key:s=null}=v,{interactive:n=s!==null}=v,{highlight:i=!1}=v,{shape:c="circle"}=v,{color:r="var(--light1)"}=v,{fill:f="var(--accent2)"}=v,{stroke:a=null}=v,{arrowEnd:t=!1}=v,{arrowStart:o=!1}=v,{strokeWidth:l=0}=v,{src:g=null}=v;function y(S){qe.call(this,I,S)}function w(S){qe.call(this,I,S)}return I.$$set=S=>{"label"in S&&p(0,e=S.label),"key"in S&&p(9,s=S.key),"interactive"in S&&p(1,n=S.interactive),"highlight"in S&&p(2,i=S.highlight),"shape"in S&&p(3,c=S.shape),"color"in S&&p(4,r=S.color),"fill"in S&&p(5,f=S.fill),"stroke"in S&&p(6,a=S.stroke),"arrowEnd"in S&&p(10,t=S.arrowEnd),"arrowStart"in S&&p(11,o=S.arrowStart),"strokeWidth"in S&&p(7,l=S.strokeWidth),"src"in S&&p(8,g=S.src),"$$scope"in S&&p(12,u=S.$$scope)},[e,n,i,c,r,f,a,l,g,s,t,o,u,C,y,w]}class Fn extends ne{constructor(v){super(),ie(this,v,qt,jt,se,{label:0,key:9,interactive:1,highlight:2,shape:3,color:4,fill:5,stroke:6,arrowEnd:10,arrowStart:11,strokeWidth:7,src:8})}}function $t(I){let v,p,C,u;const e=I[2].default,s=ae(e,I,I[1],null);return{c(){v=b("div"),s&&s.c(),this.h()},l(n){v=X(n,"DIV",{style:!0,class:!0});var i=H(v);s&&s.l(i),i.forEach(F),this.h()},h(){O(v,"style",p=nt(I[0])),O(v,"class","cpeum-1sqjp0y")},m(n,i){K(n,v,i),s&&s.m(v,null),u=!0},p(n,[i]){s&&s.p&&(!u||i&2)&&oe(s,e,n,n[1],u?fe(e,n[1],i,null):le(n[1]),null),(!u||i&1&&p!==(p=nt(n[0])))&&O(v,"style",p)},i(n){u||(j(s,n),ot(()=>{C||(C=$e(v,it,{},!0)),C.run(1)}),u=!0)},o(n){q(s,n),C||(C=$e(v,it,{},!1)),C.run(0),u=!1},d(n){n&&F(v),s&&s.d(n),n&&C&&C.end()}}}function en(I,v,p){let{$$slots:C={},$$scope:u}=v,{key:e}=v;return Ge("exercice",e),We(()=>{}),lt(()=>{}),I.$$set=s=>{"key"in s&&p(0,e=s.key),"$$scope"in s&&p(1,u=s.$$scope)},[e,u,C]}class Dn extends ne{constructor(v){super(),ie(this,v,en,$t,se,{key:0})}}var Ue={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(I,v){(function(C,u){I.exports=u()})(De,function(){return function(p){var C={};function u(e){if(C[e])return C[e].exports;var s=C[e]={i:e,l:!1,exports:{}};return p[e].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return u.m=p,u.c=C,u.d=function(e,s,n){u.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:n})},u.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,s){if(s&1&&(e=u(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var i in e)u.d(n,i,function(c){return e[c]}.bind(null,i));return n},u.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(s,"a",s),s},u.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},u.p="",u(u.s=21)}([function(p,C){var u={};p.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(s,n){var i,c;typeof n=="boolean"?(i=2,c=n):(i=1,c=!0);for(var r=i;r<arguments.length;r++){var f=arguments[r];if(f)for(var a in f)c&&f[a]&&f[a].constructor===Object&&(!s[a]||s[a].constructor===Object)?(s[a]=s[a]||{},u.extend(s[a],c,f[a])):s[a]=f[a]}return s},u.clone=function(s,n){return u.extend({},n,s)},u.keys=function(s){if(Object.keys)return Object.keys(s);var n=[];for(var i in s)n.push(i);return n},u.values=function(s){var n=[];if(Object.keys){for(var i=Object.keys(s),c=0;c<i.length;c++)n.push(s[i[c]]);return n}for(var r in s)n.push(s[r]);return n},u.get=function(s,n,i,c){n=n.split(".").slice(i,c);for(var r=0;r<n.length;r+=1)s=s[n[r]];return s},u.set=function(s,n,i,c,r){var f=n.split(".").slice(c,r);return u.get(s,n,0,-1)[f[f.length-1]]=i,i},u.shuffle=function(s){for(var n=s.length-1;n>0;n--){var i=Math.floor(u.random()*(n+1)),c=s[n];s[n]=s[i],s[i]=c}return s},u.choose=function(s){return s[Math.floor(u.random()*s.length)]},u.isElement=function(s){return typeof HTMLElement!="undefined"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},u.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},u.isFunction=function(s){return typeof s=="function"},u.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},u.isString=function(s){return toString.call(s)==="[object String]"},u.clamp=function(s,n,i){return s<n?n:s>i?i:s},u.sign=function(s){return s<0?-1:1},u.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(s,n){return s=typeof s!="undefined"?s:0,n=typeof n!="undefined"?n:1,s+e()*(n-s)};var e=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[s]||(u.warn(s),u._warnedOnce[s]=!0)},u.deprecated=function(s,n,i){s[n]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",i)},s[n])},u.nextId=function(){return u._nextId++},u.indexOf=function(s,n){if(s.indexOf)return s.indexOf(n);for(var i=0;i<s.length;i++)if(s[i]===n)return i;return-1},u.map=function(s,n){if(s.map)return s.map(n);for(var i=[],c=0;c<s.length;c+=1)i.push(n(s[c]));return i},u.topologicalSort=function(s){var n=[],i=[],c=[];for(var r in s)!i[r]&&!c[r]&&u._topologicalSort(r,i,c,s,n);return n},u._topologicalSort=function(s,n,i,c,r){var f=c[s]||[];i[s]=!0;for(var a=0;a<f.length;a+=1){var t=f[a];i[t]||n[t]||u._topologicalSort(t,n,i,c,r)}i[s]=!1,n[s]=!0,r.push(s)},u.chain=function(){for(var s=[],n=0;n<arguments.length;n+=1){var i=arguments[n];i._chained?s.push.apply(s,i._chained):s.push(i)}var c=function(){for(var r,f=new Array(arguments.length),a=0,t=arguments.length;a<t;a++)f[a]=arguments[a];for(a=0;a<s.length;a+=1){var o=s[a].apply(r,f);typeof o!="undefined"&&(r=o)}return r};return c._chained=s,c},u.chainPathBefore=function(s,n,i){return u.set(s,n,u.chain(i,u.get(s,n)))},u.chainPathAfter=function(s,n,i){return u.set(s,n,u.chain(u.get(s,n),i))},u.setDecomp=function(s){u._decomp=s},u.getDecomp=function(){var s=u._decomp;try{!s&&typeof window!="undefined"&&(s=window.decomp),!s&&typeof De!="undefined"&&(s=De.decomp)}catch{s=null}return s}}()},function(p,C){var u={};p.exports=u,function(){u.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&u.update(s,e),s},u.update=function(e,s,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<s.length;i++){var c=s[i];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},u.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},u.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},u.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},u.shift=function(e,s){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+n,e.min.y=s.y,e.max.y=s.y+i}}()},function(p,C){var u={};p.exports=u,function(){u.create=function(e,s){return{x:e||0,y:s||0}},u.clone=function(e){return{x:e.x,y:e.y}},u.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},u.rotate=function(e,s,n){var i=Math.cos(s),c=Math.sin(s);n||(n={});var r=e.x*i-e.y*c;return n.y=e.x*c+e.y*i,n.x=r,n},u.rotateAbout=function(e,s,n,i){var c=Math.cos(s),r=Math.sin(s);i||(i={});var f=n.x+((e.x-n.x)*c-(e.y-n.y)*r);return i.y=n.y+((e.x-n.x)*r+(e.y-n.y)*c),i.x=f,i},u.normalise=function(e){var s=u.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},u.dot=function(e,s){return e.x*s.x+e.y*s.y},u.cross=function(e,s){return e.x*s.y-e.y*s.x},u.cross3=function(e,s,n){return(s.x-e.x)*(n.y-e.y)-(s.y-e.y)*(n.x-e.x)},u.add=function(e,s,n){return n||(n={}),n.x=e.x+s.x,n.y=e.y+s.y,n},u.sub=function(e,s,n){return n||(n={}),n.x=e.x-s.x,n.y=e.y-s.y,n},u.mult=function(e,s){return{x:e.x*s,y:e.y*s}},u.div=function(e,s){return{x:e.x/s,y:e.y/s}},u.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},u.neg=function(e){return{x:-e.x,y:-e.y}},u.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(p,C,u){var e={};p.exports=e;var s=u(2),n=u(0);(function(){e.create=function(i,c){for(var r=[],f=0;f<i.length;f++){var a=i[f],t={x:a.x,y:a.y,index:f,body:c,isInternal:!1};r.push(t)}return r},e.fromPath=function(i,c){var r=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return i.replace(r,function(a,t,o){f.push({x:parseFloat(t),y:parseFloat(o)})}),e.create(f,c)},e.centre=function(i){for(var c=e.area(i,!0),r={x:0,y:0},f,a,t,o=0;o<i.length;o++)t=(o+1)%i.length,f=s.cross(i[o],i[t]),a=s.mult(s.add(i[o],i[t]),f),r=s.add(r,a);return s.div(r,6*c)},e.mean=function(i){for(var c={x:0,y:0},r=0;r<i.length;r++)c.x+=i[r].x,c.y+=i[r].y;return s.div(c,i.length)},e.area=function(i,c){for(var r=0,f=i.length-1,a=0;a<i.length;a++)r+=(i[f].x-i[a].x)*(i[f].y+i[a].y),f=a;return c?r/2:Math.abs(r)/2},e.inertia=function(i,c){for(var r=0,f=0,a=i,t,o,l=0;l<a.length;l++)o=(l+1)%a.length,t=Math.abs(s.cross(a[o],a[l])),r+=t*(s.dot(a[o],a[o])+s.dot(a[o],a[l])+s.dot(a[l],a[l])),f+=t;return c/6*(r/f)},e.translate=function(i,c,r){r=typeof r!="undefined"?r:1;var f=i.length,a=c.x*r,t=c.y*r,o;for(o=0;o<f;o++)i[o].x+=a,i[o].y+=t;return i},e.rotate=function(i,c,r){if(c!==0){var f=Math.cos(c),a=Math.sin(c),t=r.x,o=r.y,l=i.length,g,y,w,S;for(S=0;S<l;S++)g=i[S],y=g.x-t,w=g.y-o,g.x=t+(y*f-w*a),g.y=o+(y*a+w*f);return i}},e.contains=function(i,c){for(var r=c.x,f=c.y,a=i.length,t=i[a-1],o,l=0;l<a;l++){if(o=i[l],(r-t.x)*(o.y-t.y)+(f-t.y)*(t.x-o.x)>0)return!1;t=o}return!0},e.scale=function(i,c,r,f){if(c===1&&r===1)return i;f=f||e.centre(i);for(var a,t,o=0;o<i.length;o++)a=i[o],t=s.sub(a,f),i[o].x=f.x+t.x*c,i[o].y=f.y+t.y*r;return i},e.chamfer=function(i,c,r,f,a){typeof c=="number"?c=[c]:c=c||[8],r=typeof r!="undefined"?r:-1,f=f||2,a=a||14;for(var t=[],o=0;o<i.length;o++){var l=i[o-1>=0?o-1:i.length-1],g=i[o],y=i[(o+1)%i.length],w=c[o<c.length?o:c.length-1];if(w===0){t.push(g);continue}var S=s.normalise({x:g.y-l.y,y:l.x-g.x}),h=s.normalise({x:y.y-g.y,y:g.x-y.x}),m=Math.sqrt(2*Math.pow(w,2)),d=s.mult(n.clone(S),w),x=s.normalise(s.mult(s.add(S,h),.5)),M=s.sub(g,s.mult(x,m)),E=r;r===-1&&(E=Math.pow(w,.32)*1.75),E=n.clamp(E,f,a),E%2===1&&(E+=1);for(var T=Math.acos(s.dot(S,h)),P=T/E,B=0;B<E;B++)t.push(s.add(s.rotate(d,P*B),M))}return t},e.clockwiseSort=function(i){var c=e.mean(i);return i.sort(function(r,f){return s.angle(c,r)-s.angle(c,f)}),i},e.isConvex=function(i){var c=0,r=i.length,f,a,t,o;if(r<3)return null;for(f=0;f<r;f++)if(a=(f+1)%r,t=(f+2)%r,o=(i[a].x-i[f].x)*(i[t].y-i[a].y),o-=(i[a].y-i[f].y)*(i[t].x-i[a].x),o<0?c|=1:o>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(i){var c=[],r=[],f,a;for(i=i.slice(0),i.sort(function(t,o){var l=t.x-o.x;return l!==0?l:t.y-o.y}),a=0;a<i.length;a+=1){for(f=i[a];r.length>=2&&s.cross3(r[r.length-2],r[r.length-1],f)<=0;)r.pop();r.push(f)}for(a=i.length-1;a>=0;a-=1){for(f=i[a];c.length>=2&&s.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),r.pop(),c.concat(r)}})()},function(p,C,u){var e={};p.exports=e;var s=u(0);(function(){e.on=function(n,i,c){for(var r=i.split(" "),f,a=0;a<r.length;a++)f=r[a],n.events=n.events||{},n.events[f]=n.events[f]||[],n.events[f].push(c);return c},e.off=function(n,i,c){if(!i){n.events={};return}typeof i=="function"&&(c=i,i=s.keys(n.events).join(" "));for(var r=i.split(" "),f=0;f<r.length;f++){var a=n.events[r[f]],t=[];if(c&&a)for(var o=0;o<a.length;o++)a[o]!==c&&t.push(a[o]);n.events[r[f]]=t}},e.trigger=function(n,i,c){var r,f,a,t,o=n.events;if(o&&s.keys(o).length>0){c||(c={}),r=i.split(" ");for(var l=0;l<r.length;l++)if(f=r[l],a=o[f],a){t=s.clone(c,!1),t.name=f,t.source=n;for(var g=0;g<a.length;g++)a[g].apply(n,[t])}}}})()},function(p,C,u){var e={};p.exports=e;var s=u(4),n=u(0),i=u(1),c=u(6);(function(){e.create=function(r){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},r)},e.setModified=function(r,f,a,t){if(r.isModified=f,f&&r.cache&&(r.cache.allBodies=null,r.cache.allConstraints=null,r.cache.allComposites=null),a&&r.parent&&e.setModified(r.parent,f,a,t),t)for(var o=0;o<r.composites.length;o++){var l=r.composites[o];e.setModified(l,f,a,t)}},e.add=function(r,f){var a=[].concat(f);s.trigger(r,"beforeAdd",{object:f});for(var t=0;t<a.length;t++){var o=a[t];switch(o.type){case"body":if(o.parent!==o){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(r,o);break;case"constraint":e.addConstraint(r,o);break;case"composite":e.addComposite(r,o);break;case"mouseConstraint":e.addConstraint(r,o.constraint);break}}return s.trigger(r,"afterAdd",{object:f}),r},e.remove=function(r,f,a){var t=[].concat(f);s.trigger(r,"beforeRemove",{object:f});for(var o=0;o<t.length;o++){var l=t[o];switch(l.type){case"body":e.removeBody(r,l,a);break;case"constraint":e.removeConstraint(r,l,a);break;case"composite":e.removeComposite(r,l,a);break;case"mouseConstraint":e.removeConstraint(r,l.constraint);break}}return s.trigger(r,"afterRemove",{object:f}),r},e.addComposite=function(r,f){return r.composites.push(f),f.parent=r,e.setModified(r,!0,!0,!1),r},e.removeComposite=function(r,f,a){var t=n.indexOf(r.composites,f);if(t!==-1&&e.removeCompositeAt(r,t),a)for(var o=0;o<r.composites.length;o++)e.removeComposite(r.composites[o],f,!0);return r},e.removeCompositeAt=function(r,f){return r.composites.splice(f,1),e.setModified(r,!0,!0,!1),r},e.addBody=function(r,f){return r.bodies.push(f),e.setModified(r,!0,!0,!1),r},e.removeBody=function(r,f,a){var t=n.indexOf(r.bodies,f);if(t!==-1&&e.removeBodyAt(r,t),a)for(var o=0;o<r.composites.length;o++)e.removeBody(r.composites[o],f,!0);return r},e.removeBodyAt=function(r,f){return r.bodies.splice(f,1),e.setModified(r,!0,!0,!1),r},e.addConstraint=function(r,f){return r.constraints.push(f),e.setModified(r,!0,!0,!1),r},e.removeConstraint=function(r,f,a){var t=n.indexOf(r.constraints,f);if(t!==-1&&e.removeConstraintAt(r,t),a)for(var o=0;o<r.composites.length;o++)e.removeConstraint(r.composites[o],f,!0);return r},e.removeConstraintAt=function(r,f){return r.constraints.splice(f,1),e.setModified(r,!0,!0,!1),r},e.clear=function(r,f,a){if(a)for(var t=0;t<r.composites.length;t++)e.clear(r.composites[t],f,!0);return f?r.bodies=r.bodies.filter(function(o){return o.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,e.setModified(r,!0,!0,!1),r},e.allBodies=function(r){if(r.cache&&r.cache.allBodies)return r.cache.allBodies;for(var f=[].concat(r.bodies),a=0;a<r.composites.length;a++)f=f.concat(e.allBodies(r.composites[a]));return r.cache&&(r.cache.allBodies=f),f},e.allConstraints=function(r){if(r.cache&&r.cache.allConstraints)return r.cache.allConstraints;for(var f=[].concat(r.constraints),a=0;a<r.composites.length;a++)f=f.concat(e.allConstraints(r.composites[a]));return r.cache&&(r.cache.allConstraints=f),f},e.allComposites=function(r){if(r.cache&&r.cache.allComposites)return r.cache.allComposites;for(var f=[].concat(r.composites),a=0;a<r.composites.length;a++)f=f.concat(e.allComposites(r.composites[a]));return r.cache&&(r.cache.allComposites=f),f},e.get=function(r,f,a){var t,o;switch(a){case"body":t=e.allBodies(r);break;case"constraint":t=e.allConstraints(r);break;case"composite":t=e.allComposites(r).concat(r);break}return t?(o=t.filter(function(l){return l.id.toString()===f.toString()}),o.length===0?null:o[0]):null},e.move=function(r,f,a){return e.remove(r,f),e.add(a,f),r},e.rebase=function(r){for(var f=e.allBodies(r).concat(e.allConstraints(r)).concat(e.allComposites(r)),a=0;a<f.length;a++)f[a].id=n.nextId();return r},e.translate=function(r,f,a){for(var t=a?e.allBodies(r):r.bodies,o=0;o<t.length;o++)c.translate(t[o],f);return r},e.rotate=function(r,f,a,t){for(var o=Math.cos(f),l=Math.sin(f),g=t?e.allBodies(r):r.bodies,y=0;y<g.length;y++){var w=g[y],S=w.position.x-a.x,h=w.position.y-a.y;c.setPosition(w,{x:a.x+(S*o-h*l),y:a.y+(S*l+h*o)}),c.rotate(w,f)}return r},e.scale=function(r,f,a,t,o){for(var l=o?e.allBodies(r):r.bodies,g=0;g<l.length;g++){var y=l[g],w=y.position.x-t.x,S=y.position.y-t.y;c.setPosition(y,{x:t.x+w*f,y:t.y+S*a}),c.scale(y,f,a)}return r},e.bounds=function(r){for(var f=e.allBodies(r),a=[],t=0;t<f.length;t+=1){var o=f[t];a.push(o.bounds.min,o.bounds.max)}return i.create(a)}})()},function(p,C,u){var e={};p.exports=e;var s=u(3),n=u(2),i=u(7);u(16);var c=u(0),r=u(1),f=u(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var o={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},l=c.extend(o,t);return a(l,t),l},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var a=function(t,o){o=o||{},e.set(t,{bounds:t.bounds||r.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),r.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:o.axes||t.axes,area:o.area||t.area,mass:o.mass||t.mass,inertia:o.inertia||t.inertia});var l=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),g=t.isStatic?"#555":"#ccc",y=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||l,t.render.strokeStyle=t.render.strokeStyle||g,t.render.lineWidth=t.render.lineWidth||y,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,o,l){var g;typeof o=="string"&&(g=o,o={},o[g]=l);for(g in o)if(!!Object.prototype.hasOwnProperty.call(o,g))switch(l=o[g],g){case"isStatic":e.setStatic(t,l);break;case"isSleeping":i.set(t,l);break;case"mass":e.setMass(t,l);break;case"density":e.setDensity(t,l);break;case"inertia":e.setInertia(t,l);break;case"vertices":e.setVertices(t,l);break;case"position":e.setPosition(t,l);break;case"angle":e.setAngle(t,l);break;case"velocity":e.setVelocity(t,l);break;case"angularVelocity":e.setAngularVelocity(t,l);break;case"parts":e.setParts(t,l);break;case"centre":e.setCentre(t,l);break;default:t[g]=l}},e.setStatic=function(t,o){for(var l=0;l<t.parts.length;l++){var g=t.parts[l];g.isStatic=o,o?(g._original={restitution:g.restitution,friction:g.friction,mass:g.mass,inertia:g.inertia,density:g.density,inverseMass:g.inverseMass,inverseInertia:g.inverseInertia},g.restitution=0,g.friction=1,g.mass=g.inertia=g.density=1/0,g.inverseMass=g.inverseInertia=0,g.positionPrev.x=g.position.x,g.positionPrev.y=g.position.y,g.anglePrev=g.angle,g.angularVelocity=0,g.speed=0,g.angularSpeed=0,g.motion=0):g._original&&(g.restitution=g._original.restitution,g.friction=g._original.friction,g.mass=g._original.mass,g.inertia=g._original.inertia,g.density=g._original.density,g.inverseMass=g._original.inverseMass,g.inverseInertia=g._original.inverseInertia,g._original=null)}},e.setMass=function(t,o){var l=t.inertia/(t.mass/6);t.inertia=l*(o/6),t.inverseInertia=1/t.inertia,t.mass=o,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,o){e.setMass(t,o*t.area),t.density=o},e.setInertia=function(t,o){t.inertia=o,t.inverseInertia=1/t.inertia},e.setVertices=function(t,o){o[0].body===t?t.vertices=o:t.vertices=s.create(o,t),t.axes=f.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var l=s.centre(t.vertices);s.translate(t.vertices,l,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),r.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,o,l){var g;for(o=o.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,g=0;g<o.length;g++){var y=o[g];y!==t&&(y.parent=t,t.parts.push(y))}if(t.parts.length!==1){if(l=typeof l!="undefined"?l:!0,l){var w=[];for(g=0;g<o.length;g++)w=w.concat(o[g].vertices);s.clockwiseSort(w);var S=s.hull(w),h=s.centre(S);e.setVertices(t,S),s.translate(t.vertices,h)}var m=e._totalProperties(t);t.area=m.area,t.parent=t,t.position.x=m.centre.x,t.position.y=m.centre.y,t.positionPrev.x=m.centre.x,t.positionPrev.y=m.centre.y,e.setMass(t,m.mass),e.setInertia(t,m.inertia),e.setPosition(t,m.centre)}},e.setCentre=function(t,o,l){l?(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y,t.position.x+=o.x,t.position.y+=o.y):(t.positionPrev.x=o.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=o.y-(t.position.y-t.positionPrev.y),t.position.x=o.x,t.position.y=o.y)},e.setPosition=function(t,o){var l=n.sub(o,t.position);t.positionPrev.x+=l.x,t.positionPrev.y+=l.y;for(var g=0;g<t.parts.length;g++){var y=t.parts[g];y.position.x+=l.x,y.position.y+=l.y,s.translate(y.vertices,l),r.update(y.bounds,y.vertices,t.velocity)}},e.setAngle=function(t,o){var l=o-t.angle;t.anglePrev+=l;for(var g=0;g<t.parts.length;g++){var y=t.parts[g];y.angle+=l,s.rotate(y.vertices,l,t.position),f.rotate(y.axes,l),r.update(y.bounds,y.vertices,t.velocity),g>0&&n.rotateAbout(y.position,l,t.position,y.position)}},e.setVelocity=function(t,o){t.positionPrev.x=t.position.x-o.x,t.positionPrev.y=t.position.y-o.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,o){t.anglePrev=t.angle-o,t.angularVelocity=o,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,o){e.setPosition(t,n.add(t.position,o))},e.rotate=function(t,o,l){if(!l)e.setAngle(t,t.angle+o);else{var g=Math.cos(o),y=Math.sin(o),w=t.position.x-l.x,S=t.position.y-l.y;e.setPosition(t,{x:l.x+(w*g-S*y),y:l.y+(w*y+S*g)}),e.setAngle(t,t.angle+o)}},e.scale=function(t,o,l,g){var y=0,w=0;g=g||t.position;for(var S=0;S<t.parts.length;S++){var h=t.parts[S];s.scale(h.vertices,o,l,g),h.axes=f.fromVertices(h.vertices),h.area=s.area(h.vertices),e.setMass(h,t.density*h.area),s.translate(h.vertices,{x:-h.position.x,y:-h.position.y}),e.setInertia(h,e._inertiaScale*s.inertia(h.vertices,h.mass)),s.translate(h.vertices,{x:h.position.x,y:h.position.y}),S>0&&(y+=h.area,w+=h.inertia),h.position.x=g.x+(h.position.x-g.x)*o,h.position.y=g.y+(h.position.y-g.y)*l,r.update(h.bounds,h.vertices,t.velocity)}t.parts.length>1&&(t.area=y,t.isStatic||(e.setMass(t,t.density*y),e.setInertia(t,w))),t.circleRadius&&(o===l?t.circleRadius*=o:t.circleRadius=null)},e.update=function(t,o,l,g){var y=Math.pow(o*l*t.timeScale,2),w=1-t.frictionAir*l*t.timeScale,S=t.position.x-t.positionPrev.x,h=t.position.y-t.positionPrev.y;t.velocity.x=S*w*g+t.force.x/t.mass*y,t.velocity.y=h*w*g+t.force.y/t.mass*y,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*w*g+t.torque/t.inertia*y,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var m=0;m<t.parts.length;m++){var d=t.parts[m];s.translate(d.vertices,t.velocity),m>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(d.vertices,t.angularVelocity,t.position),f.rotate(d.axes,t.angularVelocity),m>0&&n.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),r.update(d.bounds,d.vertices,t.velocity)}},e.applyForce=function(t,o,l){t.force.x+=l.x,t.force.y+=l.y;var g={x:o.x-t.position.x,y:o.y-t.position.y};t.torque+=g.x*l.y-g.y*l.x},e._totalProperties=function(t){for(var o={mass:0,area:0,inertia:0,centre:{x:0,y:0}},l=t.parts.length===1?0:1;l<t.parts.length;l++){var g=t.parts[l],y=g.mass!==1/0?g.mass:1;o.mass+=y,o.area+=g.area,o.inertia+=g.inertia,o.centre=n.add(o.centre,n.mult(g.position,y))}return o.centre=n.div(o.centre,o.mass),o}})()},function(p,C,u){var e={};p.exports=e;var s=u(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,i){for(var c=i*i*i,r=0;r<n.length;r++){var f=n[r],a=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,a),o=Math.max(f.motion,a);f.motion=e._minBias*t+(1-e._minBias)*o,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(n,i){for(var c=i*i*i,r=0;r<n.length;r++){var f=n[r];if(!!f.isActive){var a=f.collision,t=a.bodyA.parent,o=a.bodyB.parent;if(!(t.isSleeping&&o.isSleeping||t.isStatic||o.isStatic)&&(t.isSleeping||o.isSleeping)){var l=t.isSleeping&&!t.isStatic?t:o,g=l===t?o:t;!l.isStatic&&g.motion>e._motionWakeThreshold*c&&e.set(l,!1)}}}},e.set=function(n,i){var c=n.isSleeping;i?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,c||s.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,c&&s.trigger(n,"sleepEnd"))}})()},function(p,C,u){var e={};p.exports=e;var s=u(3),n=u(9);(function(){var i=[],c={overlap:0,axis:null},r={overlap:0,axis:null};e.create=function(f,a){return{pair:null,collided:!1,bodyA:f,bodyB:a,parentA:f.parent,parentB:a.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,a,t){if(e._overlapAxes(c,f.vertices,a.vertices,f.axes),c.overlap<=0||(e._overlapAxes(r,a.vertices,f.vertices,a.axes),r.overlap<=0))return null;var o=t&&t.table[n.id(f,a)],l;o?l=o.collision:(l=e.create(f,a),l.collided=!0,l.bodyA=f.id<a.id?f:a,l.bodyB=f.id<a.id?a:f,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent),f=l.bodyA,a=l.bodyB;var g;c.overlap<r.overlap?g=c:g=r;var y=l.normal,w=l.supports,S=g.axis,h=S.x,m=S.y;h*(a.position.x-f.position.x)+m*(a.position.y-f.position.y)<0?(y.x=h,y.y=m):(y.x=-h,y.y=-m),l.tangent.x=-y.y,l.tangent.y=y.x,l.depth=g.overlap,l.penetration.x=y.x*l.depth,l.penetration.y=y.y*l.depth;var d=e._findSupports(f,a,y,1),x=0;if(s.contains(f.vertices,d[0])&&(w[x++]=d[0]),s.contains(f.vertices,d[1])&&(w[x++]=d[1]),x<2){var M=e._findSupports(a,f,y,-1);s.contains(a.vertices,M[0])&&(w[x++]=M[0]),x<2&&s.contains(a.vertices,M[1])&&(w[x++]=M[1])}return x===0&&(w[x++]=d[0]),w.length=x,l},e._overlapAxes=function(f,a,t,o){var l=a.length,g=t.length,y=a[0].x,w=a[0].y,S=t[0].x,h=t[0].y,m=o.length,d=Number.MAX_VALUE,x=0,M,E,T,P,B,A;for(B=0;B<m;B++){var k=o[B],L=k.x,R=k.y,D=y*L+w*R,z=S*L+h*R,V=D,Z=z;for(A=1;A<l;A+=1)P=a[A].x*L+a[A].y*R,P>V?V=P:P<D&&(D=P);for(A=1;A<g;A+=1)P=t[A].x*L+t[A].y*R,P>Z?Z=P:P<z&&(z=P);if(E=V-z,T=Z-D,M=E<T?E:T,M<d&&(d=M,x=B,M<=0))break}f.axis=o[x],f.overlap=d},e._projectToAxis=function(f,a,t){for(var o=a[0].x*t.x+a[0].y*t.y,l=o,g=1;g<a.length;g+=1){var y=a[g].x*t.x+a[g].y*t.y;y>l?l=y:y<o&&(o=y)}f.min=o,f.max=l},e._findSupports=function(f,a,t,o){var l=a.vertices,g=l.length,y=f.position.x,w=f.position.y,S=t.x*o,h=t.y*o,m=Number.MAX_VALUE,d,x,M,E,T;for(T=0;T<g;T+=1)x=l[T],E=S*(y-x.x)+h*(w-x.y),E<m&&(m=E,d=x);return M=l[(g+d.index-1)%g],m=S*(y-M.x)+h*(w-M.y),x=l[(d.index+1)%g],S*(y-x.x)+h*(w-x.y)<m?(i[0]=d,i[1]=x,i):(i[0]=d,i[1]=M,i)}})()},function(p,C,u){var e={};p.exports=e;var s=u(17);(function(){e.create=function(n,i){var c=n.bodyA,r=n.bodyB,f={id:e.id(c,r),bodyA:c,bodyB:r,collision:n,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||r.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,n,i),f},e.update=function(n,i,c){var r=n.contacts,f=i.supports,a=n.activeContacts,t=i.parentA,o=i.parentB,l=t.vertices.length;n.isActive=!0,n.timeUpdated=c,n.collision=i,n.separation=i.depth,n.inverseMass=t.inverseMass+o.inverseMass,n.friction=t.friction<o.friction?t.friction:o.friction,n.frictionStatic=t.frictionStatic>o.frictionStatic?t.frictionStatic:o.frictionStatic,n.restitution=t.restitution>o.restitution?t.restitution:o.restitution,n.slop=t.slop>o.slop?t.slop:o.slop,i.pair=n,a.length=0;for(var g=0;g<f.length;g++){var y=f[g],w=y.body===t?y.index:l+y.index,S=r[w];S?a.push(S):a.push(r[w]=s.create(y))}},e.setActive=function(n,i,c){i?(n.isActive=!0,n.timeUpdated=c):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,i){return n.id<i.id?"A"+n.id+"B"+i.id:"A"+i.id+"B"+n.id}})()},function(p,C,u){var e={};p.exports=e;var s=u(3),n=u(2),i=u(7),c=u(1),r=u(11),f=u(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(a){var t=a;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var o=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,l=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,g=n.magnitude(n.sub(o,l));t.length=typeof t.length!="undefined"?t.length:g,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(y.type="pin",y.anchors=!1):t.stiffness<.9&&(y.type="spring"),t.render=f.extend(y,t.render),t},e.preSolveAll=function(a){for(var t=0;t<a.length;t+=1){var o=a[t],l=o.constraintImpulse;o.isStatic||l.x===0&&l.y===0&&l.angle===0||(o.position.x+=l.x,o.position.y+=l.y,o.angle+=l.angle)}},e.solveAll=function(a,t){for(var o=0;o<a.length;o+=1){var l=a[o],g=!l.bodyA||l.bodyA&&l.bodyA.isStatic,y=!l.bodyB||l.bodyB&&l.bodyB.isStatic;(g||y)&&e.solve(a[o],t)}for(o=0;o<a.length;o+=1)l=a[o],g=!l.bodyA||l.bodyA&&l.bodyA.isStatic,y=!l.bodyB||l.bodyB&&l.bodyB.isStatic,!g&&!y&&e.solve(a[o],t)},e.solve=function(a,t){var o=a.bodyA,l=a.bodyB,g=a.pointA,y=a.pointB;if(!(!o&&!l)){o&&!o.isStatic&&(n.rotate(g,o.angle-a.angleA,g),a.angleA=o.angle),l&&!l.isStatic&&(n.rotate(y,l.angle-a.angleB,y),a.angleB=l.angle);var w=g,S=y;if(o&&(w=n.add(o.position,g)),l&&(S=n.add(l.position,y)),!(!w||!S)){var h=n.sub(w,S),m=n.magnitude(h);m<e._minLength&&(m=e._minLength);var d=(m-a.length)/m,x=a.stiffness<1?a.stiffness*t:a.stiffness,M=n.mult(h,d*x),E=(o?o.inverseMass:0)+(l?l.inverseMass:0),T=(o?o.inverseInertia:0)+(l?l.inverseInertia:0),P=E+T,B,A,k,L,R;if(a.damping){var D=n.create();k=n.div(h,m),R=n.sub(l&&n.sub(l.position,l.positionPrev)||D,o&&n.sub(o.position,o.positionPrev)||D),L=n.dot(k,R)}o&&!o.isStatic&&(A=o.inverseMass/E,o.constraintImpulse.x-=M.x*A,o.constraintImpulse.y-=M.y*A,o.position.x-=M.x*A,o.position.y-=M.y*A,a.damping&&(o.positionPrev.x-=a.damping*k.x*L*A,o.positionPrev.y-=a.damping*k.y*L*A),B=n.cross(g,M)/P*e._torqueDampen*o.inverseInertia*(1-a.angularStiffness),o.constraintImpulse.angle-=B,o.angle-=B),l&&!l.isStatic&&(A=l.inverseMass/E,l.constraintImpulse.x+=M.x*A,l.constraintImpulse.y+=M.y*A,l.position.x+=M.x*A,l.position.y+=M.y*A,a.damping&&(l.positionPrev.x+=a.damping*k.x*L*A,l.positionPrev.y+=a.damping*k.y*L*A),B=n.cross(y,M)/P*e._torqueDampen*l.inverseInertia*(1-a.angularStiffness),l.constraintImpulse.angle+=B,l.angle+=B)}}},e.postSolveAll=function(a){for(var t=0;t<a.length;t++){var o=a[t],l=o.constraintImpulse;if(!(o.isStatic||l.x===0&&l.y===0&&l.angle===0)){i.set(o,!1);for(var g=0;g<o.parts.length;g++){var y=o.parts[g];s.translate(y.vertices,l),g>0&&(y.position.x+=l.x,y.position.y+=l.y),l.angle!==0&&(s.rotate(y.vertices,l.angle,o.position),r.rotate(y.axes,l.angle),g>0&&n.rotateAbout(y.position,l.angle,o.position,y.position)),c.update(y.bounds,y.vertices,o.velocity)}l.angle*=e._warming,l.x*=e._warming,l.y*=e._warming}}},e.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},e.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}})()},function(p,C,u){var e={};p.exports=e;var s=u(2),n=u(0);(function(){e.fromVertices=function(i){for(var c={},r=0;r<i.length;r++){var f=(r+1)%i.length,a=s.normalise({x:i[f].y-i[r].y,y:i[r].x-i[f].x}),t=a.y===0?1/0:a.x/a.y;t=t.toFixed(3).toString(),c[t]=a}return n.values(c)},e.rotate=function(i,c){if(c!==0)for(var r=Math.cos(c),f=Math.sin(c),a=0;a<i.length;a++){var t=i[a],o;o=t.x*r-t.y*f,t.y=t.x*f+t.y*r,t.x=o}}})()},function(p,C,u){var e={};p.exports=e;var s=u(3),n=u(0),i=u(6),c=u(1),r=u(2);(function(){e.rectangle=function(f,a,t,o,l){l=l||{};var g={label:"Rectangle Body",position:{x:f,y:a},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+o+" L 0 "+o)};if(l.chamfer){var y=l.chamfer;g.vertices=s.chamfer(g.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete l.chamfer}return i.create(n.extend({},g,l))},e.trapezoid=function(f,a,t,o,l,g){g=g||{},l*=.5;var y=(1-l*2)*t,w=t*l,S=w+y,h=S+w,m;l<.5?m="L 0 0 L "+w+" "+-o+" L "+S+" "+-o+" L "+h+" 0":m="L 0 0 L "+S+" "+-o+" L "+h+" 0";var d={label:"Trapezoid Body",position:{x:f,y:a},vertices:s.fromPath(m)};if(g.chamfer){var x=g.chamfer;d.vertices=s.chamfer(d.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete g.chamfer}return i.create(n.extend({},d,g))},e.circle=function(f,a,t,o,l){o=o||{};var g={label:"Circle Body",circleRadius:t};l=l||25;var y=Math.ceil(Math.max(10,Math.min(l,t)));return y%2===1&&(y+=1),e.polygon(f,a,y,t,n.extend({},g,o))},e.polygon=function(f,a,t,o,l){if(l=l||{},t<3)return e.circle(f,a,o,l);for(var g=2*Math.PI/t,y="",w=g*.5,S=0;S<t;S+=1){var h=w+S*g,m=Math.cos(h)*o,d=Math.sin(h)*o;y+="L "+m.toFixed(3)+" "+d.toFixed(3)+" "}var x={label:"Polygon Body",position:{x:f,y:a},vertices:s.fromPath(y)};if(l.chamfer){var M=l.chamfer;x.vertices=s.chamfer(x.vertices,M.radius,M.quality,M.qualityMin,M.qualityMax),delete l.chamfer}return i.create(n.extend({},x,l))},e.fromVertices=function(f,a,t,o,l,g,y,w){var S=n.getDecomp(),h,m,d,x,M,E,T,P,B,A,k;for(h=Boolean(S&&S.quickDecomp),o=o||{},d=[],l=typeof l!="undefined"?l:!1,g=typeof g!="undefined"?g:.01,y=typeof y!="undefined"?y:10,w=typeof w!="undefined"?w:.01,n.isArray(t[0])||(t=[t]),A=0;A<t.length;A+=1)if(E=t[A],x=s.isConvex(E),M=!x,M&&!h&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),x||!h)x?E=s.clockwiseSort(E):E=s.hull(E),d.push({position:{x:f,y:a},vertices:E});else{var L=E.map(function(te){return[te.x,te.y]});S.makeCCW(L),g!==!1&&S.removeCollinearPoints(L,g),w!==!1&&S.removeDuplicatePoints&&S.removeDuplicatePoints(L,w);var R=S.quickDecomp(L);for(T=0;T<R.length;T++){var D=R[T],z=D.map(function(te){return{x:te[0],y:te[1]}});y>0&&s.area(z)<y||d.push({position:s.centre(z),vertices:z})}}for(T=0;T<d.length;T++)d[T]=i.create(n.extend(d[T],o));if(l){var V=5;for(T=0;T<d.length;T++){var Z=d[T];for(P=T+1;P<d.length;P++){var Y=d[P];if(c.overlaps(Z.bounds,Y.bounds)){var _=Z.vertices,J=Y.vertices;for(B=0;B<Z.vertices.length;B++)for(k=0;k<Y.vertices.length;k++){var ue=r.magnitudeSquared(r.sub(_[(B+1)%_.length],J[k])),ee=r.magnitudeSquared(r.sub(_[B],J[(k+1)%J.length]));ue<V&&ee<V&&(_[B].isInternal=!0,J[k].isInternal=!0)}}}}}return d.length>1?(m=i.create(n.extend({parts:d.slice(0)},o)),i.setPosition(m,{x:f,y:a}),m):d[0]}})()},function(p,C,u){var e={};p.exports=e;var s=u(0);(function(){e.create=function(n){var i={};return n||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=n||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(c){var r=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&(i.button=0,c.preventDefault()),i.absolute.x=r.x,i.absolute.y=r.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=c},i.mousedown=function(c){var r=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f?(i.button=0,c.preventDefault()):i.button=c.button,i.absolute.x=r.x,i.absolute.y=r.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=c},i.mouseup=function(c){var r=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),i.button=-1,i.absolute.x=r.x,i.absolute.y=r.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=c},i.mousewheel=function(c){i.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(n,i){n.element=i,i.addEventListener("mousemove",n.mousemove),i.addEventListener("mousedown",n.mousedown),i.addEventListener("mouseup",n.mouseup),i.addEventListener("mousewheel",n.mousewheel),i.addEventListener("DOMMouseScroll",n.mousewheel),i.addEventListener("touchmove",n.mousemove),i.addEventListener("touchstart",n.mousedown),i.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,i){n.offset.x=i.x,n.offset.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,i){n.scale.x=i.x,n.scale.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,i,c){var r=i.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,a=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,o=n.changedTouches,l,g;return o?(l=o[0].pageX-r.left-a,g=o[0].pageY-r.top-t):(l=n.pageX-r.left-a,g=n.pageY-r.top-t),{x:l/(i.clientWidth/(i.width||i.clientWidth)*c),y:g/(i.clientHeight/(i.height||i.clientHeight)*c)}}})()},function(p,C,u){var e={};p.exports=e;var s=u(0),n=u(8);(function(){e.create=function(i){var c={bodies:[],pairs:null};return s.extend(c,i)},e.setBodies=function(i,c){i.bodies=c.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var c=[],r=i.pairs,f=i.bodies,a=f.length,t=e.canCollide,o=n.collides,l,g;for(f.sort(e._compareBoundsX),l=0;l<a;l++){var y=f[l],w=y.bounds,S=y.bounds.max.x,h=y.bounds.max.y,m=y.bounds.min.y,d=y.isStatic||y.isSleeping,x=y.parts.length,M=x===1;for(g=l+1;g<a;g++){var E=f[g],T=E.bounds;if(T.min.x>S)break;if(!(h<T.min.y||m>T.max.y)&&!(d&&(E.isStatic||E.isSleeping))&&!!t(y.collisionFilter,E.collisionFilter)){var P=E.parts.length;if(M&&P===1){var B=o(y,E,r);B&&c.push(B)}else for(var A=x>1?1:0,k=P>1?1:0,L=A;L<x;L++)for(var R=y.parts[L],w=R.bounds,D=k;D<P;D++){var z=E.parts[D],T=z.bounds;if(!(w.min.x>T.max.x||w.max.x<T.min.x||w.max.y<T.min.y||w.min.y>T.max.y)){var B=o(R,z,r);B&&c.push(B)}}}}}return c},e.canCollide=function(i,c){return i.group===c.group&&i.group!==0?i.group>0:(i.mask&c.category)!==0&&(c.mask&i.category)!==0},e._compareBoundsX=function(i,c){return i.bounds.min.x-c.bounds.min.x}})()},function(p,C,u){var e={};p.exports=e;var s=u(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||s.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var i=e._registry[n.name],c=e.versionParse(n.version).number,r=e.versionParse(i.version).number;c>r?(s.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(n)),e._registry[n.name]=n):c<r?s.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(n)):n!==i&&s.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,i){return n.used.indexOf(i)>-1},e.isFor=function(n,i){var c=n.for&&e.dependencyParse(n.for);return!n.for||i.name===c.name&&e.versionSatisfies(i.version,c.range)},e.use=function(n,i){if(n.uses=(n.uses||[]).concat(i||[]),n.uses.length===0){s.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var c=e.dependencies(n),r=s.topologicalSort(c),f=[],a=0;a<r.length;a+=1)if(r[a]!==n.name){var t=e.resolve(r[a]);if(!t){f.push("\u274C "+r[a]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),n.used.push(t.name))}f.length>0&&s.info(f.join("  "))},e.dependencies=function(n,i){var c=e.dependencyParse(n),r=c.name;if(i=i||{},!(r in i)){n=e.resolve(n)||n,i[r]=s.map(n.uses||[],function(a){e.isPlugin(a)&&e.register(a);var t=e.dependencyParse(a),o=e.resolve(a);return o&&!e.versionSatisfies(o.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(o),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),o._warned=!0,n._warned=!0):o||(s.warn("Plugin.dependencies:",e.toString(a),"used by",e.toString(c),"could not be resolved."),n._warned=!0),t.name});for(var f=0;f<i[r].length;f+=1)e.dependencies(i[r][f],i);return i}},e.dependencyParse=function(n){if(s.isString(n)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(n)||s.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(n)||s.warn("Plugin.versionParse:",n,"is not a valid version or range.");var c=i.exec(n),r=Number(c[4]),f=Number(c[5]),a=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:n,operator:c[1]||c[2]||"",major:r,minor:f,patch:a,parts:[r,f,a],prerelease:c[7],number:r*1e8+f*1e4+a}},e.versionSatisfies=function(n,i){i=i||"*";var c=e.versionParse(i),r=e.versionParse(n);if(c.isRange){if(c.operator==="*"||n==="*")return!0;if(c.operator===">")return r.number>c.number;if(c.operator===">=")return r.number>=c.number;if(c.operator==="~")return r.major===c.major&&r.minor===c.minor&&r.patch>=c.patch;if(c.operator==="^")return c.major>0?r.major===c.major&&r.number>=c.number:c.minor>0?r.minor===c.minor&&r.patch>=c.patch:r.patch===c.patch}return n===i||n==="*"}})()},function(p,C,u){var e={};p.exports=e;var s=u(0),n=u(5),i=u(1),c=u(4),r=u(2),f=u(13);(function(){var a,t;typeof window!="undefined"&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(h){window.setTimeout(function(){h(s.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(h){var m={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!h.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},d=s.extend(m,h);return d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height),d.mouse=h.mouse,d.engine=h.engine,d.canvas=d.canvas||g(d.options.width,d.options.height),d.context=d.canvas.getContext("2d"),d.textures={},d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}},d.options.showBroadphase=!1,d.options.pixelRatio!==1&&e.setPixelRatio(d,d.options.pixelRatio),s.isElement(d.element)?d.element.appendChild(d.canvas):d.canvas.parentNode||s.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),d},e.run=function(h){(function m(d){h.frameRequestId=a(m),o(h,d),e.world(h,d),(h.options.showStats||h.options.showDebug)&&e.stats(h,h.context,d),(h.options.showPerformance||h.options.showDebug)&&e.performance(h,h.context,d)})()},e.stop=function(h){t(h.frameRequestId)},e.setPixelRatio=function(h,m){var d=h.options,x=h.canvas;m==="auto"&&(m=y(x)),d.pixelRatio=m,x.setAttribute("data-pixel-ratio",m),x.width=d.width*m,x.height=d.height*m,x.style.width=d.width+"px",x.style.height=d.height+"px"},e.lookAt=function(h,m,d,x){x=typeof x!="undefined"?x:!0,m=s.isArray(m)?m:[m],d=d||{x:0,y:0};for(var M={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},E=0;E<m.length;E+=1){var T=m[E],P=T.bounds?T.bounds.min:T.min||T.position||T,B=T.bounds?T.bounds.max:T.max||T.position||T;P&&B&&(P.x<M.min.x&&(M.min.x=P.x),B.x>M.max.x&&(M.max.x=B.x),P.y<M.min.y&&(M.min.y=P.y),B.y>M.max.y&&(M.max.y=B.y))}var A=M.max.x-M.min.x+2*d.x,k=M.max.y-M.min.y+2*d.y,L=h.canvas.height,R=h.canvas.width,D=R/L,z=A/k,V=1,Z=1;z>D?Z=z/D:V=D/z,h.options.hasBounds=!0,h.bounds.min.x=M.min.x,h.bounds.max.x=M.min.x+A*V,h.bounds.min.y=M.min.y,h.bounds.max.y=M.min.y+k*Z,x&&(h.bounds.min.x+=A*.5-A*V*.5,h.bounds.max.x+=A*.5-A*V*.5,h.bounds.min.y+=k*.5-k*Z*.5,h.bounds.max.y+=k*.5-k*Z*.5),h.bounds.min.x-=d.x,h.bounds.max.x-=d.x,h.bounds.min.y-=d.y,h.bounds.max.y-=d.y,h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.canvas.width,y:(h.bounds.max.y-h.bounds.min.y)/h.canvas.height}),f.setOffset(h.mouse,h.bounds.min))},e.startViewTransform=function(h){var m=h.bounds.max.x-h.bounds.min.x,d=h.bounds.max.y-h.bounds.min.y,x=m/h.options.width,M=d/h.options.height;h.context.setTransform(h.options.pixelRatio/x,0,0,h.options.pixelRatio/M,0,0),h.context.translate(-h.bounds.min.x,-h.bounds.min.y)},e.endViewTransform=function(h){h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0)},e.world=function(h,m){var d=s.now(),x=h.engine,M=x.world,E=h.canvas,T=h.context,P=h.options,B=h.timing,A=n.allBodies(M),k=n.allConstraints(M),L=P.wireframes?P.wireframeBackground:P.background,R=[],D=[],z,V={timestamp:x.timing.timestamp};if(c.trigger(h,"beforeRender",V),h.currentBackground!==L&&S(h,L),T.globalCompositeOperation="source-in",T.fillStyle="transparent",T.fillRect(0,0,E.width,E.height),T.globalCompositeOperation="source-over",P.hasBounds){for(z=0;z<A.length;z++){var Z=A[z];i.overlaps(Z.bounds,h.bounds)&&R.push(Z)}for(z=0;z<k.length;z++){var Y=k[z],_=Y.bodyA,J=Y.bodyB,ue=Y.pointA,ee=Y.pointB;_&&(ue=r.add(_.position,Y.pointA)),J&&(ee=r.add(J.position,Y.pointB)),!(!ue||!ee)&&(i.contains(h.bounds,ue)||i.contains(h.bounds,ee))&&D.push(Y)}e.startViewTransform(h),h.mouse&&(f.setScale(h.mouse,{x:(h.bounds.max.x-h.bounds.min.x)/h.options.width,y:(h.bounds.max.y-h.bounds.min.y)/h.options.height}),f.setOffset(h.mouse,h.bounds.min))}else D=k,R=A,h.options.pixelRatio!==1&&h.context.setTransform(h.options.pixelRatio,0,0,h.options.pixelRatio,0,0);!P.wireframes||x.enableSleeping&&P.showSleeping?e.bodies(h,R,T):(P.showConvexHulls&&e.bodyConvexHulls(h,R,T),e.bodyWireframes(h,R,T)),P.showBounds&&e.bodyBounds(h,R,T),(P.showAxes||P.showAngleIndicator)&&e.bodyAxes(h,R,T),P.showPositions&&e.bodyPositions(h,R,T),P.showVelocity&&e.bodyVelocity(h,R,T),P.showIds&&e.bodyIds(h,R,T),P.showSeparations&&e.separations(h,x.pairs.list,T),P.showCollisions&&e.collisions(h,x.pairs.list,T),P.showVertexNumbers&&e.vertexNumbers(h,R,T),P.showMousePosition&&e.mousePosition(h,h.mouse,T),e.constraints(D,T),P.hasBounds&&e.endViewTransform(h),c.trigger(h,"afterRender",V),B.lastElapsed=s.now()-d},e.stats=function(h,m,d){for(var x=h.engine,M=x.world,E=n.allBodies(M),T=0,P=55,B=44,A=0,k=0,L=0;L<E.length;L+=1)T+=E[L].parts.length;var R={Part:T,Body:E.length,Cons:n.allConstraints(M).length,Comp:n.allComposites(M).length,Pair:x.pairs.list.length};m.fillStyle="#0e0f19",m.fillRect(A,k,P*5.5,B),m.font="12px Arial",m.textBaseline="top",m.textAlign="right";for(var D in R){var z=R[D];m.fillStyle="#aaa",m.fillText(D,A+P,k+8),m.fillStyle="#eee",m.fillText(z,A+P,k+26),A+=P}},e.performance=function(h,m){var d=h.engine,x=h.timing,M=x.deltaHistory,E=x.elapsedHistory,T=x.timestampElapsedHistory,P=x.engineDeltaHistory,B=x.engineElapsedHistory,A=d.timing.lastDelta,k=l(M),L=l(E),R=l(P),D=l(B),z=l(T),V=z/k||0,Z=1e3/k||0,Y=4,_=12,J=60,ue=34,ee=10,te=69;m.fillStyle="#0e0f19",m.fillRect(0,50,_*4+J*5+22,ue),e.status(m,ee,te,J,Y,M.length,Math.round(Z)+" fps",Z/e._goodFps,function(re){return M[re]/k-1}),e.status(m,ee+_+J,te,J,Y,P.length,A.toFixed(2)+" dt",e._goodDelta/A,function(re){return P[re]/R-1}),e.status(m,ee+(_+J)*2,te,J,Y,B.length,D.toFixed(2)+" ut",1-D/e._goodFps,function(re){return B[re]/D-1}),e.status(m,ee+(_+J)*3,te,J,Y,E.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(re){return E[re]/L-1}),e.status(m,ee+(_+J)*4,te,J,Y,T.length,V.toFixed(2)+" x",V*V*V,function(re){return(T[re]/M[re]/V||0)-1})},e.status=function(h,m,d,x,M,E,T,P,B){h.strokeStyle="#888",h.fillStyle="#444",h.lineWidth=1,h.fillRect(m,d+7,x,1),h.beginPath(),h.moveTo(m,d+7-M*s.clamp(.4*B(0),-2,2));for(var A=0;A<x;A+=1)h.lineTo(m+A,d+7-(A<E?M*s.clamp(.4*B(A),-2,2):0));h.stroke(),h.fillStyle="hsl("+s.clamp(25+95*P,0,120)+",100%,60%)",h.fillRect(m,d-7,4,4),h.font="12px Arial",h.textBaseline="middle",h.textAlign="right",h.fillStyle="#eee",h.fillText(T,m+x,d-5)},e.constraints=function(h,m){for(var d=m,x=0;x<h.length;x++){var M=h[x];if(!(!M.render.visible||!M.pointA||!M.pointB)){var E=M.bodyA,T=M.bodyB,P,B;if(E?P=r.add(E.position,M.pointA):P=M.pointA,M.render.type==="pin")d.beginPath(),d.arc(P.x,P.y,3,0,2*Math.PI),d.closePath();else{if(T?B=r.add(T.position,M.pointB):B=M.pointB,d.beginPath(),d.moveTo(P.x,P.y),M.render.type==="spring")for(var A=r.sub(B,P),k=r.perp(r.normalise(A)),L=Math.ceil(s.clamp(M.length/5,12,20)),R,D=1;D<L;D+=1)R=D%2===0?1:-1,d.lineTo(P.x+A.x*(D/L)+k.x*R*4,P.y+A.y*(D/L)+k.y*R*4);d.lineTo(B.x,B.y)}M.render.lineWidth&&(d.lineWidth=M.render.lineWidth,d.strokeStyle=M.render.strokeStyle,d.stroke()),M.render.anchors&&(d.fillStyle=M.render.strokeStyle,d.beginPath(),d.arc(P.x,P.y,3,0,2*Math.PI),d.arc(B.x,B.y,3,0,2*Math.PI),d.closePath(),d.fill())}}},e.bodies=function(h,m,d){var x=d;h.engine;var M=h.options,E=M.showInternalEdges||!M.wireframes,T,P,B,A;for(B=0;B<m.length;B++)if(T=m[B],!!T.render.visible){for(A=T.parts.length>1?1:0;A<T.parts.length;A++)if(P=T.parts[A],!!P.render.visible){if(M.showSleeping&&T.isSleeping?x.globalAlpha=.5*P.render.opacity:P.render.opacity!==1&&(x.globalAlpha=P.render.opacity),P.render.sprite&&P.render.sprite.texture&&!M.wireframes){var k=P.render.sprite,L=w(h,k.texture);x.translate(P.position.x,P.position.y),x.rotate(P.angle),x.drawImage(L,L.width*-k.xOffset*k.xScale,L.height*-k.yOffset*k.yScale,L.width*k.xScale,L.height*k.yScale),x.rotate(-P.angle),x.translate(-P.position.x,-P.position.y)}else{if(P.circleRadius)x.beginPath(),x.arc(P.position.x,P.position.y,P.circleRadius,0,2*Math.PI);else{x.beginPath(),x.moveTo(P.vertices[0].x,P.vertices[0].y);for(var R=1;R<P.vertices.length;R++)!P.vertices[R-1].isInternal||E?x.lineTo(P.vertices[R].x,P.vertices[R].y):x.moveTo(P.vertices[R].x,P.vertices[R].y),P.vertices[R].isInternal&&!E&&x.moveTo(P.vertices[(R+1)%P.vertices.length].x,P.vertices[(R+1)%P.vertices.length].y);x.lineTo(P.vertices[0].x,P.vertices[0].y),x.closePath()}M.wireframes?(x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()):(x.fillStyle=P.render.fillStyle,P.render.lineWidth&&(x.lineWidth=P.render.lineWidth,x.strokeStyle=P.render.strokeStyle,x.stroke()),x.fill())}x.globalAlpha=1}}},e.bodyWireframes=function(h,m,d){var x=d,M=h.options.showInternalEdges,E,T,P,B,A;for(x.beginPath(),P=0;P<m.length;P++)if(E=m[P],!!E.render.visible)for(A=E.parts.length>1?1:0;A<E.parts.length;A++){for(T=E.parts[A],x.moveTo(T.vertices[0].x,T.vertices[0].y),B=1;B<T.vertices.length;B++)!T.vertices[B-1].isInternal||M?x.lineTo(T.vertices[B].x,T.vertices[B].y):x.moveTo(T.vertices[B].x,T.vertices[B].y),T.vertices[B].isInternal&&!M&&x.moveTo(T.vertices[(B+1)%T.vertices.length].x,T.vertices[(B+1)%T.vertices.length].y);x.lineTo(T.vertices[0].x,T.vertices[0].y)}x.lineWidth=1,x.strokeStyle="#bbb",x.stroke()},e.bodyConvexHulls=function(h,m,d){var x=d,M,E,T;for(x.beginPath(),E=0;E<m.length;E++)if(M=m[E],!(!M.render.visible||M.parts.length===1)){for(x.moveTo(M.vertices[0].x,M.vertices[0].y),T=1;T<M.vertices.length;T++)x.lineTo(M.vertices[T].x,M.vertices[T].y);x.lineTo(M.vertices[0].x,M.vertices[0].y)}x.lineWidth=1,x.strokeStyle="rgba(255,255,255,0.2)",x.stroke()},e.vertexNumbers=function(h,m,d){var x=d,M,E,T;for(M=0;M<m.length;M++){var P=m[M].parts;for(T=P.length>1?1:0;T<P.length;T++){var B=P[T];for(E=0;E<B.vertices.length;E++)x.fillStyle="rgba(255,255,255,0.2)",x.fillText(M+"_"+E,B.position.x+(B.vertices[E].x-B.position.x)*.8,B.position.y+(B.vertices[E].y-B.position.y)*.8)}}},e.mousePosition=function(h,m,d){var x=d;x.fillStyle="rgba(255,255,255,0.8)",x.fillText(m.position.x+"  "+m.position.y,m.position.x+5,m.position.y-5)},e.bodyBounds=function(h,m,d){var x=d;h.engine;var M=h.options;x.beginPath();for(var E=0;E<m.length;E++){var T=m[E];if(T.render.visible)for(var P=m[E].parts,B=P.length>1?1:0;B<P.length;B++){var A=P[B];x.rect(A.bounds.min.x,A.bounds.min.y,A.bounds.max.x-A.bounds.min.x,A.bounds.max.y-A.bounds.min.y)}}M.wireframes?x.strokeStyle="rgba(255,255,255,0.08)":x.strokeStyle="rgba(0,0,0,0.1)",x.lineWidth=1,x.stroke()},e.bodyAxes=function(h,m,d){var x=d;h.engine;var M=h.options,E,T,P,B;for(x.beginPath(),T=0;T<m.length;T++){var A=m[T],k=A.parts;if(!!A.render.visible)if(M.showAxes)for(P=k.length>1?1:0;P<k.length;P++)for(E=k[P],B=0;B<E.axes.length;B++){var L=E.axes[B];x.moveTo(E.position.x,E.position.y),x.lineTo(E.position.x+L.x*20,E.position.y+L.y*20)}else for(P=k.length>1?1:0;P<k.length;P++)for(E=k[P],B=0;B<E.axes.length;B++)x.moveTo(E.position.x,E.position.y),x.lineTo((E.vertices[0].x+E.vertices[E.vertices.length-1].x)/2,(E.vertices[0].y+E.vertices[E.vertices.length-1].y)/2)}M.wireframes?(x.strokeStyle="indianred",x.lineWidth=1):(x.strokeStyle="rgba(255, 255, 255, 0.4)",x.globalCompositeOperation="overlay",x.lineWidth=2),x.stroke(),x.globalCompositeOperation="source-over"},e.bodyPositions=function(h,m,d){var x=d;h.engine;var M=h.options,E,T,P,B;for(x.beginPath(),P=0;P<m.length;P++)if(E=m[P],!!E.render.visible)for(B=0;B<E.parts.length;B++)T=E.parts[B],x.arc(T.position.x,T.position.y,3,0,2*Math.PI,!1),x.closePath();for(M.wireframes?x.fillStyle="indianred":x.fillStyle="rgba(0,0,0,0.5)",x.fill(),x.beginPath(),P=0;P<m.length;P++)E=m[P],E.render.visible&&(x.arc(E.positionPrev.x,E.positionPrev.y,2,0,2*Math.PI,!1),x.closePath());x.fillStyle="rgba(255,165,0,0.8)",x.fill()},e.bodyVelocity=function(h,m,d){var x=d;x.beginPath();for(var M=0;M<m.length;M++){var E=m[M];!E.render.visible||(x.moveTo(E.position.x,E.position.y),x.lineTo(E.position.x+(E.position.x-E.positionPrev.x)*2,E.position.y+(E.position.y-E.positionPrev.y)*2))}x.lineWidth=3,x.strokeStyle="cornflowerblue",x.stroke()},e.bodyIds=function(h,m,d){var x=d,M,E;for(M=0;M<m.length;M++)if(!!m[M].render.visible){var T=m[M].parts;for(E=T.length>1?1:0;E<T.length;E++){var P=T[E];x.font="12px Arial",x.fillStyle="rgba(255,255,255,0.5)",x.fillText(P.id,P.position.x+10,P.position.y-10)}}},e.collisions=function(h,m,d){var x=d,M=h.options,E,T,P,B;for(x.beginPath(),P=0;P<m.length;P++)if(E=m[P],!!E.isActive)for(T=E.collision,B=0;B<E.activeContacts.length;B++){var A=E.activeContacts[B],k=A.vertex;x.rect(k.x-1.5,k.y-1.5,3.5,3.5)}for(M.wireframes?x.fillStyle="rgba(255,255,255,0.7)":x.fillStyle="orange",x.fill(),x.beginPath(),P=0;P<m.length;P++)if(E=m[P],!!E.isActive&&(T=E.collision,E.activeContacts.length>0)){var L=E.activeContacts[0].vertex.x,R=E.activeContacts[0].vertex.y;E.activeContacts.length===2&&(L=(E.activeContacts[0].vertex.x+E.activeContacts[1].vertex.x)/2,R=(E.activeContacts[0].vertex.y+E.activeContacts[1].vertex.y)/2),T.bodyB===T.supports[0].body||T.bodyA.isStatic===!0?x.moveTo(L-T.normal.x*8,R-T.normal.y*8):x.moveTo(L+T.normal.x*8,R+T.normal.y*8),x.lineTo(L,R)}M.wireframes?x.strokeStyle="rgba(255,165,0,0.7)":x.strokeStyle="orange",x.lineWidth=1,x.stroke()},e.separations=function(h,m,d){var x=d,M=h.options,E,T,P,B,A;for(x.beginPath(),A=0;A<m.length;A++)if(E=m[A],!!E.isActive){T=E.collision,P=T.bodyA,B=T.bodyB;var k=1;!B.isStatic&&!P.isStatic&&(k=.5),B.isStatic&&(k=0),x.moveTo(B.position.x,B.position.y),x.lineTo(B.position.x-T.penetration.x*k,B.position.y-T.penetration.y*k),k=1,!B.isStatic&&!P.isStatic&&(k=.5),P.isStatic&&(k=0),x.moveTo(P.position.x,P.position.y),x.lineTo(P.position.x+T.penetration.x*k,P.position.y+T.penetration.y*k)}M.wireframes?x.strokeStyle="rgba(255,165,0,0.5)":x.strokeStyle="orange",x.stroke()},e.inspector=function(h,m){h.engine;var d=h.selected,x=h.render,M=x.options,E;if(M.hasBounds){var T=x.bounds.max.x-x.bounds.min.x,P=x.bounds.max.y-x.bounds.min.y,B=T/x.options.width,A=P/x.options.height;m.scale(1/B,1/A),m.translate(-x.bounds.min.x,-x.bounds.min.y)}for(var k=0;k<d.length;k++){var L=d[k].data;switch(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.9)",m.setLineDash([1,2]),L.type){case"body":E=L.bounds,m.beginPath(),m.rect(Math.floor(E.min.x-3),Math.floor(E.min.y-3),Math.floor(E.max.x-E.min.x+6),Math.floor(E.max.y-E.min.y+6)),m.closePath(),m.stroke();break;case"constraint":var R=L.pointA;L.bodyA&&(R=L.pointB),m.beginPath(),m.arc(R.x,R.y,10,0,2*Math.PI),m.closePath(),m.stroke();break}m.setLineDash([]),m.translate(-.5,-.5)}h.selectStart!==null&&(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.6)",m.fillStyle="rgba(255,165,0,0.1)",E=h.selectBounds,m.beginPath(),m.rect(Math.floor(E.min.x),Math.floor(E.min.y),Math.floor(E.max.x-E.min.x),Math.floor(E.max.y-E.min.y)),m.closePath(),m.stroke(),m.fill(),m.translate(-.5,-.5)),M.hasBounds&&m.setTransform(1,0,0,1,0,0)};var o=function(h,m){var d=h.engine,x=h.timing,M=x.historySize,E=d.timing.timestamp;x.delta=m-x.lastTime||e._goodDelta,x.lastTime=m,x.timestampElapsed=E-x.lastTimestamp||0,x.lastTimestamp=E,x.deltaHistory.unshift(x.delta),x.deltaHistory.length=Math.min(x.deltaHistory.length,M),x.engineDeltaHistory.unshift(d.timing.lastDelta),x.engineDeltaHistory.length=Math.min(x.engineDeltaHistory.length,M),x.timestampElapsedHistory.unshift(x.timestampElapsed),x.timestampElapsedHistory.length=Math.min(x.timestampElapsedHistory.length,M),x.engineElapsedHistory.unshift(d.timing.lastElapsed),x.engineElapsedHistory.length=Math.min(x.engineElapsedHistory.length,M),x.elapsedHistory.unshift(x.lastElapsed),x.elapsedHistory.length=Math.min(x.elapsedHistory.length,M)},l=function(h){for(var m=0,d=0;d<h.length;d+=1)m+=h[d];return m/h.length||0},g=function(h,m){var d=document.createElement("canvas");return d.width=h,d.height=m,d.oncontextmenu=function(){return!1},d.onselectstart=function(){return!1},d},y=function(h){var m=h.getContext("2d"),d=window.devicePixelRatio||1,x=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return d/x},w=function(h,m){var d=h.textures[m];return d||(d=h.textures[m]=new Image,d.src=m,d)},S=function(h,m){var d=m;/(jpg|gif|png)$/.test(m)&&(d="url("+m+")"),h.canvas.style.background=d,h.canvas.style.backgroundSize="contain",h.currentBackground=m}})()},function(p,C){var u={};p.exports=u,function(){u.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(p,C,u){var e={};p.exports=e;var s=u(7),n=u(19),i=u(14),c=u(20),r=u(4),f=u(5),a=u(10),t=u(0),o=u(6);(function(){e.create=function(l){l=l||{};var g={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},y=t.extend(g,l);return y.world=l.world||f.create({label:"World"}),y.pairs=l.pairs||c.create(),y.detector=l.detector||i.create(),y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},e.update=function(l,g,y){var w=t.now();g=g||1e3/60,y=y||1;var S=l.world,h=l.detector,m=l.pairs,d=l.timing,x=d.timestamp,M;d.timestamp+=g*d.timeScale,d.lastDelta=g*d.timeScale;var E={timestamp:d.timestamp};r.trigger(l,"beforeUpdate",E);var T=f.allBodies(S),P=f.allConstraints(S);for(S.isModified&&i.setBodies(h,T),S.isModified&&f.setModified(S,!1,!1,!0),l.enableSleeping&&s.update(T,d.timeScale),e._bodiesApplyGravity(T,l.gravity),e._bodiesUpdate(T,g,d.timeScale,y,S.bounds),a.preSolveAll(T),M=0;M<l.constraintIterations;M++)a.solveAll(P,d.timeScale);a.postSolveAll(T),h.pairs=l.pairs;var B=i.collisions(h);for(c.update(m,B,x),l.enableSleeping&&s.afterCollisions(m.list,d.timeScale),m.collisionStart.length>0&&r.trigger(l,"collisionStart",{pairs:m.collisionStart}),n.preSolvePosition(m.list),M=0;M<l.positionIterations;M++)n.solvePosition(m.list,d.timeScale);for(n.postSolvePosition(T),a.preSolveAll(T),M=0;M<l.constraintIterations;M++)a.solveAll(P,d.timeScale);for(a.postSolveAll(T),n.preSolveVelocity(m.list),M=0;M<l.velocityIterations;M++)n.solveVelocity(m.list,d.timeScale);return m.collisionActive.length>0&&r.trigger(l,"collisionActive",{pairs:m.collisionActive}),m.collisionEnd.length>0&&r.trigger(l,"collisionEnd",{pairs:m.collisionEnd}),e._bodiesClearForces(T),r.trigger(l,"afterUpdate",E),l.timing.lastElapsed=t.now()-w,l},e.merge=function(l,g){if(t.extend(l,g),g.world){l.world=g.world,e.clear(l);for(var y=f.allBodies(l.world),w=0;w<y.length;w++){var S=y[w];s.set(S,!1),S.id=t.nextId()}}},e.clear=function(l){c.clear(l.pairs),i.clear(l.detector)},e._bodiesClearForces=function(l){for(var g=0;g<l.length;g++){var y=l[g];y.force.x=0,y.force.y=0,y.torque=0}},e._bodiesApplyGravity=function(l,g){var y=typeof g.scale!="undefined"?g.scale:.001;if(!(g.x===0&&g.y===0||y===0))for(var w=0;w<l.length;w++){var S=l[w];S.isStatic||S.isSleeping||(S.force.y+=S.mass*g.y*y,S.force.x+=S.mass*g.x*y)}},e._bodiesUpdate=function(l,g,y,w,S){for(var h=0;h<l.length;h++){var m=l[h];m.isStatic||m.isSleeping||o.update(m,g,y,w)}}})()},function(p,C,u){var e={};p.exports=e;var s=u(3),n=u(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var c,r,f,a=i.length;for(c=0;c<a;c++)r=i[c],r.isActive&&(f=r.activeContacts.length,r.collision.parentA.totalContacts+=f,r.collision.parentB.totalContacts+=f)},e.solvePosition=function(i,c){var r,f,a,t,o,l,g,y,w=e._positionDampen,S=i.length;for(r=0;r<S;r++)f=i[r],!(!f.isActive||f.isSensor)&&(a=f.collision,t=a.parentA,o=a.parentB,l=a.normal,f.separation=l.x*(o.positionImpulse.x+a.penetration.x-t.positionImpulse.x)+l.y*(o.positionImpulse.y+a.penetration.y-t.positionImpulse.y));for(r=0;r<S;r++)f=i[r],!(!f.isActive||f.isSensor)&&(a=f.collision,t=a.parentA,o=a.parentB,l=a.normal,y=(f.separation-f.slop)*c,(t.isStatic||o.isStatic)&&(y*=2),t.isStatic||t.isSleeping||(g=w/t.totalContacts,t.positionImpulse.x+=l.x*y*g,t.positionImpulse.y+=l.y*y*g),o.isStatic||o.isSleeping||(g=w/o.totalContacts,o.positionImpulse.x-=l.x*y*g,o.positionImpulse.y-=l.y*y*g))},e.postSolvePosition=function(i){for(var c=e._positionWarming,r=i.length,f=s.translate,a=n.update,t=0;t<r;t++){var o=i[t],l=o.positionImpulse,g=l.x,y=l.y,w=o.velocity;if(o.totalContacts=0,g!==0||y!==0){for(var S=0;S<o.parts.length;S++){var h=o.parts[S];f(h.vertices,l),a(h.bounds,h.vertices,w),h.position.x+=g,h.position.y+=y}o.positionPrev.x+=g,o.positionPrev.y+=y,g*w.x+y*w.y<0?(l.x=0,l.y=0):(l.x*=c,l.y*=c)}}},e.preSolveVelocity=function(i){var c=i.length,r,f;for(r=0;r<c;r++){var a=i[r];if(!(!a.isActive||a.isSensor)){var t=a.activeContacts,o=t.length,l=a.collision,g=l.parentA,y=l.parentB,w=l.normal,S=l.tangent;for(f=0;f<o;f++){var h=t[f],m=h.vertex,d=h.normalImpulse,x=h.tangentImpulse;if(d!==0||x!==0){var M=w.x*d+S.x*x,E=w.y*d+S.y*x;g.isStatic||g.isSleeping||(g.positionPrev.x+=M*g.inverseMass,g.positionPrev.y+=E*g.inverseMass,g.anglePrev+=g.inverseInertia*((m.x-g.position.x)*E-(m.y-g.position.y)*M)),y.isStatic||y.isSleeping||(y.positionPrev.x-=M*y.inverseMass,y.positionPrev.y-=E*y.inverseMass,y.anglePrev-=y.inverseInertia*((m.x-y.position.x)*E-(m.y-y.position.y)*M))}}}}},e.solveVelocity=function(i,c){var r=c*c,f=e._restingThresh*r,a=e._frictionNormalMultiplier,t=e._restingThreshTangent*r,o=Number.MAX_VALUE,l=i.length,g,y,w,S;for(w=0;w<l;w++){var h=i[w];if(!(!h.isActive||h.isSensor)){var m=h.collision,d=m.parentA,x=m.parentB,M=d.velocity,E=x.velocity,T=m.normal.x,P=m.normal.y,B=m.tangent.x,A=m.tangent.y,k=h.activeContacts,L=k.length,R=1/L,D=d.inverseMass+x.inverseMass,z=h.friction*h.frictionStatic*a*r;for(M.x=d.position.x-d.positionPrev.x,M.y=d.position.y-d.positionPrev.y,E.x=x.position.x-x.positionPrev.x,E.y=x.position.y-x.positionPrev.y,d.angularVelocity=d.angle-d.anglePrev,x.angularVelocity=x.angle-x.anglePrev,S=0;S<L;S++){var V=k[S],Z=V.vertex,Y=Z.x-d.position.x,_=Z.y-d.position.y,J=Z.x-x.position.x,ue=Z.y-x.position.y,ee=M.x-_*d.angularVelocity,te=M.y+Y*d.angularVelocity,re=E.x-ue*x.angularVelocity,mt=E.y+J*x.angularVelocity,Qe=ee-re,Ze=te-mt,Ie=T*Qe+P*Ze,me=B*Qe+A*Ze,Ke=h.separation+Ie,ze=Math.min(Ke,1);ze=Ke<0?0:ze;var Je=ze*z;me>Je||-me>Je?(y=me>0?me:-me,g=h.friction*(me>0?1:-1)*r,g<-y?g=-y:g>y&&(g=y)):(g=me,y=o);var be=Y*P-_*T,Xe=J*P-ue*T,Ye=R/(D+d.inverseInertia*be*be+x.inverseInertia*Xe*Xe),Le=(1+h.restitution)*Ie*Ye;if(g*=Ye,Ie*Ie>f&&Ie<0)V.normalImpulse=0;else{var dt=V.normalImpulse;V.normalImpulse+=Le,V.normalImpulse=Math.min(V.normalImpulse,0),Le=V.normalImpulse-dt}if(me*me>t)V.tangentImpulse=0;else{var pt=V.tangentImpulse;V.tangentImpulse+=g,V.tangentImpulse<-y&&(V.tangentImpulse=-y),V.tangentImpulse>y&&(V.tangentImpulse=y),g=V.tangentImpulse-pt}var Re=T*Le+B*g,Fe=P*Le+A*g;d.isStatic||d.isSleeping||(d.positionPrev.x+=Re*d.inverseMass,d.positionPrev.y+=Fe*d.inverseMass,d.anglePrev+=(Y*Fe-_*Re)*d.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=Re*x.inverseMass,x.positionPrev.y-=Fe*x.inverseMass,x.anglePrev-=(J*Fe-ue*Re)*x.inverseInertia)}}}}})()},function(p,C,u){var e={};p.exports=e;var s=u(9),n=u(0);(function(){e.create=function(i){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,c,r){var f=i.list,a=f.length,t=i.table,o=c.length,l=i.collisionStart,g=i.collisionEnd,y=i.collisionActive,w,S,h,m;for(l.length=0,g.length=0,y.length=0,m=0;m<a;m++)f[m].confirmedActive=!1;for(m=0;m<o;m++)w=c[m],h=w.pair,h?(h.isActive?y.push(h):l.push(h),s.update(h,w,r),h.confirmedActive=!0):(h=s.create(w,r),t[h.id]=h,l.push(h),f.push(h));var d=[];for(a=f.length,m=0;m<a;m++)h=f[m],h.confirmedActive||(s.setActive(h,!1,r),g.push(h),!h.collision.bodyA.isSleeping&&!h.collision.bodyB.isSleeping&&d.push(m));for(m=0;m<d.length;m++)S=d[m]-m,h=f[S],f.splice(S,1),delete t[h.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(p,C,u){var e=p.exports=u(22);e.Axes=u(11),e.Bodies=u(12),e.Body=u(6),e.Bounds=u(1),e.Collision=u(8),e.Common=u(0),e.Composite=u(5),e.Composites=u(23),e.Constraint=u(10),e.Contact=u(17),e.Detector=u(14),e.Engine=u(18),e.Events=u(4),e.Grid=u(24),e.Mouse=u(13),e.MouseConstraint=u(25),e.Pair=u(9),e.Pairs=u(20),e.Plugin=u(15),e.Query=u(26),e.Render=u(16),e.Resolver=u(19),e.Runner=u(27),e.SAT=u(28),e.Sleeping=u(7),e.Svg=u(29),e.Vector=u(2),e.Vertices=u(3),e.World=u(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(p,C,u){var e={};p.exports=e;var s=u(15),n=u(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,c){return i=i.replace(/^Matter./,""),n.chainPathBefore(e,i,c)},e.after=function(i,c){return i=i.replace(/^Matter./,""),n.chainPathAfter(e,i,c)}})()},function(p,C,u){var e={};p.exports=e;var s=u(5),n=u(10),i=u(0),c=u(6),r=u(12),f=i.deprecated;(function(){e.stack=function(a,t,o,l,g,y,w){for(var S=s.create({label:"Stack"}),h=a,m=t,d,x=0,M=0;M<l;M++){for(var E=0,T=0;T<o;T++){var P=w(h,m,T,M,d,x);if(P){var B=P.bounds.max.y-P.bounds.min.y,A=P.bounds.max.x-P.bounds.min.x;B>E&&(E=B),c.translate(P,{x:A*.5,y:B*.5}),h=P.bounds.max.x+g,s.addBody(S,P),d=P,x+=1}else h+=g}m+=E+y,h=a}return S},e.chain=function(a,t,o,l,g,y){for(var w=a.bodies,S=1;S<w.length;S++){var h=w[S-1],m=w[S],d=h.bounds.max.y-h.bounds.min.y,x=h.bounds.max.x-h.bounds.min.x,M=m.bounds.max.y-m.bounds.min.y,E=m.bounds.max.x-m.bounds.min.x,T={bodyA:h,pointA:{x:x*t,y:d*o},bodyB:m,pointB:{x:E*l,y:M*g}},P=i.extend(T,y);s.addConstraint(a,n.create(P))}return a.label+=" Chain",a},e.mesh=function(a,t,o,l,g){var y=a.bodies,w,S,h,m,d;for(w=0;w<o;w++){for(S=1;S<t;S++)h=y[S-1+w*t],m=y[S+w*t],s.addConstraint(a,n.create(i.extend({bodyA:h,bodyB:m},g)));if(w>0)for(S=0;S<t;S++)h=y[S+(w-1)*t],m=y[S+w*t],s.addConstraint(a,n.create(i.extend({bodyA:h,bodyB:m},g))),l&&S>0&&(d=y[S-1+(w-1)*t],s.addConstraint(a,n.create(i.extend({bodyA:d,bodyB:m},g)))),l&&S<t-1&&(d=y[S+1+(w-1)*t],s.addConstraint(a,n.create(i.extend({bodyA:d,bodyB:m},g))))}return a.label+=" Mesh",a},e.pyramid=function(a,t,o,l,g,y,w){return e.stack(a,t,o,l,g,y,function(S,h,m,d,x,M){var E=Math.min(l,Math.ceil(o/2)),T=x?x.bounds.max.x-x.bounds.min.x:0;if(!(d>E)){d=E-d;var P=d,B=o-1-d;if(!(m<P||m>B)){M===1&&c.translate(x,{x:(m+(o%2===1?1:-1))*T,y:0});var A=x?m*T:0;return w(a+A+m*g,h,m,d,x,M)}}})},e.newtonsCradle=function(a,t,o,l,g){for(var y=s.create({label:"Newtons Cradle"}),w=0;w<o;w++){var S=1.9,h=r.circle(a+w*(l*S),t+g,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=n.create({pointA:{x:a+w*(l*S),y:t},bodyB:h});s.addBody(y,h),s.addConstraint(y,m)}return y},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(a,t,o,l,g){var y=c.nextGroup(!0),w=20,S=-o*.5+w,h=o*.5-w,m=0,d=s.create({label:"Car"}),x=r.rectangle(a,t,o,l,{collisionFilter:{group:y},chamfer:{radius:l*.5},density:2e-4}),M=r.circle(a+S,t+m,g,{collisionFilter:{group:y},friction:.8}),E=r.circle(a+h,t+m,g,{collisionFilter:{group:y},friction:.8}),T=n.create({bodyB:x,pointB:{x:S,y:m},bodyA:M,stiffness:1,length:0}),P=n.create({bodyB:x,pointB:{x:h,y:m},bodyA:E,stiffness:1,length:0});return s.addBody(d,x),s.addBody(d,M),s.addBody(d,E),s.addConstraint(d,T),s.addConstraint(d,P),d},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(a,t,o,l,g,y,w,S,h,m){h=i.extend({inertia:1/0},h),m=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var d=e.stack(a,t,o,l,g,y,function(x,M){return r.circle(x,M,S,h)});return e.mesh(d,o,l,w,m),d.label="Soft Body",d},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(p,C,u){var e={};p.exports=e;var s=u(9),n=u(0),i=n.deprecated;(function(){e.create=function(c){var r={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(r,c)},e.update=function(c,r,f,a){var t,o,l,g=f.world,y=c.buckets,w,S,h=!1;for(t=0;t<r.length;t++){var m=r[t];if(!(m.isSleeping&&!a)&&!(g.bounds&&(m.bounds.max.x<g.bounds.min.x||m.bounds.min.x>g.bounds.max.x||m.bounds.max.y<g.bounds.min.y||m.bounds.min.y>g.bounds.max.y))){var d=e._getRegion(c,m);if(!m.region||d.id!==m.region.id||a){(!m.region||a)&&(m.region=d);var x=e._regionUnion(d,m.region);for(o=x.startCol;o<=x.endCol;o++)for(l=x.startRow;l<=x.endRow;l++){S=e._getBucketId(o,l),w=y[S];var M=o>=d.startCol&&o<=d.endCol&&l>=d.startRow&&l<=d.endRow,E=o>=m.region.startCol&&o<=m.region.endCol&&l>=m.region.startRow&&l<=m.region.endRow;!M&&E&&E&&w&&e._bucketRemoveBody(c,w,m),(m.region===d||M&&!E||a)&&(w||(w=e._createBucket(y,S)),e._bucketAddBody(c,w,m))}m.region=d,h=!0}}}h&&(c.pairsList=e._createActivePairsList(c))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,r){var f=Math.min(c.startCol,r.startCol),a=Math.max(c.endCol,r.endCol),t=Math.min(c.startRow,r.startRow),o=Math.max(c.endRow,r.endRow);return e._createRegion(f,a,t,o)},e._getRegion=function(c,r){var f=r.bounds,a=Math.floor(f.min.x/c.bucketWidth),t=Math.floor(f.max.x/c.bucketWidth),o=Math.floor(f.min.y/c.bucketHeight),l=Math.floor(f.max.y/c.bucketHeight);return e._createRegion(a,t,o,l)},e._createRegion=function(c,r,f,a){return{id:c+","+r+","+f+","+a,startCol:c,endCol:r,startRow:f,endRow:a}},e._getBucketId=function(c,r){return"C"+c+"R"+r},e._createBucket=function(c,r){var f=c[r]=[];return f},e._bucketAddBody=function(c,r,f){var a=c.pairs,t=s.id,o=r.length,l;for(l=0;l<o;l++){var g=r[l];if(!(f.id===g.id||f.isStatic&&g.isStatic)){var y=t(f,g),w=a[y];w?w[2]+=1:a[y]=[f,g,1]}}r.push(f)},e._bucketRemoveBody=function(c,r,f){var a=c.pairs,t=s.id,o;r.splice(n.indexOf(r,f),1);var l=r.length;for(o=0;o<l;o++){var g=a[t(f,r[o])];g&&(g[2]-=1)}},e._createActivePairsList=function(c){var r,f=c.pairs,a=n.keys(f),t=a.length,o=[],l;for(l=0;l<t;l++)r=f[a[l]],r[2]>0?o.push(r):delete f[a[l]];return o}})()},function(p,C,u){var e={};p.exports=e;var s=u(3),n=u(7),i=u(13),c=u(4),r=u(14),f=u(10),a=u(5),t=u(0),o=u(1);(function(){e.create=function(l,g){var y=(l?l.mouse:null)||(g?g.mouse:null);y||(l&&l.render&&l.render.canvas?y=i.create(l.render.canvas):g&&g.element?y=i.create(g.element):(y=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var w=f.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),S={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:w,collisionFilter:{category:1,mask:4294967295,group:0}},h=t.extend(S,g);return c.on(l,"beforeUpdate",function(){var m=a.allBodies(l.world);e.update(h,m),e._triggerEvents(h)}),h},e.update=function(l,g){var y=l.mouse,w=l.constraint,S=l.body;if(y.button===0){if(w.bodyB)n.set(w.bodyB,!1),w.pointA=y.position;else for(var h=0;h<g.length;h++)if(S=g[h],o.contains(S.bounds,y.position)&&r.canCollide(S.collisionFilter,l.collisionFilter))for(var m=S.parts.length>1?1:0;m<S.parts.length;m++){var d=S.parts[m];if(s.contains(d.vertices,y.position)){w.pointA=y.position,w.bodyB=l.body=S,w.pointB={x:y.position.x-S.position.x,y:y.position.y-S.position.y},w.angleB=S.angle,n.set(S,!1),c.trigger(l,"startdrag",{mouse:y,body:S});break}}}else w.bodyB=l.body=null,w.pointB=null,S&&c.trigger(l,"enddrag",{mouse:y,body:S})},e._triggerEvents=function(l){var g=l.mouse,y=g.sourceEvents;y.mousemove&&c.trigger(l,"mousemove",{mouse:g}),y.mousedown&&c.trigger(l,"mousedown",{mouse:g}),y.mouseup&&c.trigger(l,"mouseup",{mouse:g}),i.clearSourceEvents(g)}})()},function(p,C,u){var e={};p.exports=e;var s=u(2),n=u(8),i=u(1),c=u(12),r=u(3);(function(){e.collides=function(f,a){for(var t=[],o=a.length,l=f.bounds,g=n.collides,y=i.overlaps,w=0;w<o;w++){var S=a[w],h=S.parts.length,m=h===1?0:1;if(y(S.bounds,l))for(var d=m;d<h;d++){var x=S.parts[d];if(y(x.bounds,l)){var M=g(x,f);if(M){t.push(M);break}}}}return t},e.ray=function(f,a,t,o){o=o||1e-100;for(var l=s.angle(a,t),g=s.magnitude(s.sub(a,t)),y=(t.x+a.x)*.5,w=(t.y+a.y)*.5,S=c.rectangle(y,w,g,o,{angle:l}),h=e.collides(S,f),m=0;m<h.length;m+=1){var d=h[m];d.body=d.bodyB=d.bodyA}return h},e.region=function(f,a,t){for(var o=[],l=0;l<f.length;l++){var g=f[l],y=i.overlaps(g.bounds,a);(y&&!t||!y&&t)&&o.push(g)}return o},e.point=function(f,a){for(var t=[],o=0;o<f.length;o++){var l=f[o];if(i.contains(l.bounds,a))for(var g=l.parts.length===1?0:1;g<l.parts.length;g++){var y=l.parts[g];if(i.contains(y.bounds,a)&&r.contains(y.vertices,a)){t.push(l);break}}}return t}})()},function(p,C,u){var e={};p.exports=e;var s=u(4),n=u(18),i=u(0);(function(){var c,r;if(typeof window!="undefined"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,r=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(a){f=setTimeout(function(){a(i.now())},1e3/60)},r=function(){clearTimeout(f)}}e.create=function(a){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},o=i.extend(t,a);return o.delta=o.delta||1e3/o.fps,o.deltaMin=o.deltaMin||1e3/o.fps,o.deltaMax=o.deltaMax||1e3/(o.fps*.5),o.fps=1e3/o.delta,o},e.run=function(a,t){return typeof a.positionIterations!="undefined"&&(t=a,a=e.create()),function o(l){a.frameRequestId=c(o),l&&a.enabled&&e.tick(a,t,l)}(),a},e.tick=function(a,t,o){var l=t.timing,g=1,y,w={timestamp:l.timestamp};s.trigger(a,"beforeTick",w),a.isFixed?y=a.delta:(y=o-a.timePrev||a.delta,a.timePrev=o,a.deltaHistory.push(y),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),y=Math.min.apply(null,a.deltaHistory),y=y<a.deltaMin?a.deltaMin:y,y=y>a.deltaMax?a.deltaMax:y,g=y/a.delta,a.delta=y),a.timeScalePrev!==0&&(g*=l.timeScale/a.timeScalePrev),l.timeScale===0&&(g=0),a.timeScalePrev=l.timeScale,a.correction=g,a.frameCounter+=1,o-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((o-a.counterTimestamp)/1e3),a.counterTimestamp=o,a.frameCounter=0),s.trigger(a,"tick",w),s.trigger(a,"beforeUpdate",w),n.update(t,y,g),s.trigger(a,"afterUpdate",w),s.trigger(a,"afterTick",w)},e.stop=function(a){r(a.frameRequestId)},e.start=function(a,t){e.run(a,t)}})()},function(p,C,u){var e={};p.exports=e;var s=u(8),n=u(0),i=n.deprecated;(function(){e.collides=function(c,r){return s.collides(c,r)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(p,C,u){var e={};p.exports=e,u(1);var s=u(0);(function(){e.pathToVertices=function(n,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,r,f,a,t,o,l,g,y,w,S=[],h,m,d=0,x=0,M=0;i=i||15;var E=function(P,B,A){var k=A%2===1&&A>1;if(!y||P!=y.x||B!=y.y){y&&k?(h=y.x,m=y.y):(h=0,m=0);var L={x:h+P,y:m+B};(k||!y)&&(y=L),S.push(L),x=h+P,M=m+B}},T=function(P){var B=P.pathSegTypeAsLetter.toUpperCase();if(B!=="Z"){switch(B){case"M":case"L":case"T":case"C":case"S":case"Q":x=P.x,M=P.y;break;case"H":x=P.x;break;case"V":M=P.y;break}E(x,M,P.pathSegType)}};for(e._svgPathToAbsolute(n),f=n.getTotalLength(),o=[],c=0;c<n.pathSegList.numberOfItems;c+=1)o.push(n.pathSegList.getItem(c));for(l=o.concat();d<f;){if(w=n.getPathSegAtLength(d),t=o[w],t!=g){for(;l.length&&l[0]!=t;)T(l.shift());g=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=n.getPointAtLength(d),E(a.x,a.y,0);break}d+=i}for(c=0,r=l.length;c<r;++c)T(l[c]);return S},e._svgPathToAbsolute=function(n){for(var i,c,r,f,a,t,o=n.pathSegList,l=0,g=0,y=o.numberOfItems,w=0;w<y;++w){var S=o.getItem(w),h=S.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(h))"x"in S&&(l=S.x),"y"in S&&(g=S.y);else switch("x1"in S&&(r=l+S.x1),"x2"in S&&(a=l+S.x2),"y1"in S&&(f=g+S.y1),"y2"in S&&(t=g+S.y2),"x"in S&&(l+=S.x),"y"in S&&(g+=S.y),h){case"m":o.replaceItem(n.createSVGPathSegMovetoAbs(l,g),w);break;case"l":o.replaceItem(n.createSVGPathSegLinetoAbs(l,g),w);break;case"h":o.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(l),w);break;case"v":o.replaceItem(n.createSVGPathSegLinetoVerticalAbs(g),w);break;case"c":o.replaceItem(n.createSVGPathSegCurvetoCubicAbs(l,g,r,f,a,t),w);break;case"s":o.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(l,g,a,t),w);break;case"q":o.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(l,g,r,f),w);break;case"t":o.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(l,g),w);break;case"a":o.replaceItem(n.createSVGPathSegArcAbs(l,g,S.r1,S.r2,S.angle,S.largeArcFlag,S.sweepFlag),w);break;case"z":case"Z":l=i,g=c;break}(h=="M"||h=="m")&&(i=l,c=g)}}})()},function(p,C,u){var e={};p.exports=e;var s=u(5);u(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(Ue);var W=ct(Ue.exports),gt={exports:{}};/*!
 * matter-attractors 0.1.6 by Liam Brummitt 2017-05-15
 * https://github.com/liabru/matter-attractors
 * License MIT
 */(function(I,v){(function(C,u){I.exports=u(Ue.exports)})(De,function(p){return function(C){var u={};function e(s){if(u[s])return u[s].exports;var n=u[s]={i:s,l:!1,exports:{}};return C[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=C,e.c=u,e.i=function(s){return s},e.d=function(s,n,i){e.o(s,n)||Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(s){var n=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(n,"a",n),n},e.o=function(s,n){return Object.prototype.hasOwnProperty.call(s,n)},e.p="/libs",e(e.s=1)}([function(C,u){C.exports=p},function(C,u,e){var s=e(0),n={name:"matter-attractors",version:"0.1.4",for:"matter-js@^0.12.0",install:function(c){c.after("Body.create",function(){n.Body.init(this)}),c.before("Engine.update",function(r){n.Engine.update(r)})},Body:{init:function(c){c.plugin.attractors=c.plugin.attractors||[]}},Engine:{update:function(c){for(var r=c.world,f=s.Composite.allBodies(r),a=0;a<f.length;a+=1){var t=f[a],o=t.plugin.attractors;if(o&&o.length>0)for(var l=0;l<f.length;l+=1){var g=f[l];if(g.id!==t.id)for(var y=0;y<o.length;y+=1){var w=o[y],S=w;s.Common.isFunction(w)&&(S=w(t,g)),S&&s.Body.applyForce(g,g.position,S)}}}}},Attractors:{gravityConstant:.001,gravity:function(c,r){var f=s.Vector.sub(r.position,c.position),a=s.Vector.magnitudeSquared(f)||1e-4,t=s.Vector.normalise(f),o=-n.Attractors.gravityConstant*(c.mass*r.mass/a),l=s.Vector.mult(t,o);s.Body.applyForce(c,c.position,s.Vector.neg(l)),s.Body.applyForce(r,r.position,l)}}};s.Plugin.register(n),C.exports=n}])})})(gt);var tn=ct(gt.exports);W.use(tn);class nn{constructor(v,p,C,u){this.areaWidth=p,this.areaHeight=C,this.thickness=u;const e={isStatic:!0,render:{fillStyle:"transparent"}};this.top=W.Bodies.rectangle(p/2,-u/2,p,u,e),this.right=W.Bodies.rectangle(p+u/2,C/2,u,C,e),this.bottom=W.Bodies.rectangle(p/2,C+u/2,p,u,e),this.left=W.Bodies.rectangle(-u/2,C/2,u,C,e),W.Composite.add(v.world,[this.top,this.right,this.bottom,this.left])}update(v,p){W.Body.setPosition(this.top,{x:v/2,y:this.top.position.y}),W.Body.setPosition(this.right,{x:v+this.thickness/2,y:p/2}),W.Body.setPosition(this.bottom,{x:v/2,y:p+this.thickness/2}),W.Body.setPosition(this.left,{x:this.left.position.x,y:p/2}),W.Body.scale(this.top,v/this.areaWidth,1),W.Body.scale(this.right,1,p/this.areaHeight),W.Body.scale(this.bottom,v/this.areaWidth,1),W.Body.scale(this.left,1,p/this.areaHeight),this.areaWidth=v,this.areaHeight=p}}const sn=(I,v)=>({x:(I.position.x-v.position.x)*2e-4,y:(I.position.y-v.position.y)*2e-4});class rn{constructor(v,p){this.body=W.Bodies.circle(p.clientWidth/2,0,1,{isStatic:!0,plugin:{attractors:[sn]},collisionFilter:{group:-1}}),W.Composite.add(v.world,this.body),this.mouse=W.Mouse.create(p),W.Events.on(v,"afterUpdate",()=>{!this.mouse.position.x||W.Body.translate(this.body,{x:(this.mouse.position.x-this.body.position.x)*.25,y:(this.mouse.position.y-this.body.position.y)*.25})}),this.mouse.element.removeEventListener("mousewheel",this.mouse.mousewheel),this.mouse.element.removeEventListener("DOMMouseScroll",this.mouse.mousewheel)}setAnchor(){this.mouse.position.x=this.mouse.element.clientWidth/2,this.mouse.position.y=0,W.Body.setPosition(this.body,{x:this.mouse.element.clientWidth/2,y:0})}}function an(I){let v,p,C=`${I[2]}px`,u=`${I[0]}ms`,e,s,n;const i=I[9].default,c=ae(i,I,I[8],null);return{c(){v=b("ul"),c&&c.c(),this.h()},l(r){v=X(r,"UL",{class:!0});var f=H(v);c&&c.l(f),f.forEach(F),this.h()},h(){O(v,"class","cpeum-1s5e709"),ot(()=>I[11].call(v)),U(v,"height",C,!1),U(v,"--delay",u,!1)},m(r,f){K(r,v,f),c&&c.m(v,null),I[10](v),p=xt(v,I[11].bind(v)),e=!0,s||(n=[we(Ne.call(null,v,{rootMargin:"0% 0px -30%"})),ce(v,"enter",I[5]),ce(v,"leave",I[6]),ce(v,"mouseenter",un),ce(v,"mouseleave",I[7])],s=!0)},p(r,[f]){c&&c.p&&(!e||f&256)&&oe(c,i,r,r[8],e?fe(i,r[8],f,null):le(r[8]),null),f&4&&C!==(C=`${r[2]}px`)&&U(v,"height",C,!1),f&1&&u!==(u=`${r[0]}ms`)&&U(v,"--delay",u,!1)},i(r){e||(j(c,r),e=!0)},o(r){q(c,r),e=!1},d(r){r&&F(v),c&&c.d(r),I[10](null),p(),s=!1,Oe(n)}}}const on=200,rt=400,ln=500,fn=3;function un(){}function cn(I,v,p){let C,{$$slots:u={},$$scope:e}=v,{staggerDelay:s=120}=v,n,i,c=500;const r=yt(!1);ft(I,r,d=>p(15,C=d));let f=0,a=[];Ge("bodies",{getEngine:()=>t,getIndex:()=>f++,addBodyRef:d=>{a.push(d)},visible:r,staggerDelay:s});const t=W.Engine.create();t.gravity.y=0,t.gravity.scale=0,t.positionIterations=5,t.velocityIterations=3,t.enableSleeping=!0;const o=W.Runner.create(),l=new nn(t,rt,rt,on);let g;function y(){C?t.enabled=!0:(r.set(!0),W.Runner.run(o,t))}function w(){t.enabled=!1}function S(){g.setAnchor()}We(()=>{g=new rn(t,n)}),lt(()=>{W.Runner.stop(o),W.World.clear(t.world,!1),W.Engine.clear(t)});function h(d){ut[d?"unshift":"push"](()=>{n=d,p(3,n)})}function m(){i=this.clientWidth,p(1,i)}return I.$$set=d=>{"staggerDelay"in d&&p(0,s=d.staggerDelay),"$$scope"in d&&p(8,e=d.$$scope)},I.$$.update=()=>{I.$$.dirty&6&&i&&(p(2,c=Math.max(Math.ceil((ln+fn*a.map(d=>d.area).reduce((d,x)=>d+x,0))/i),400)),l.update(i,c))},[s,i,c,n,r,y,w,S,e,u,h,m]}class Vn extends ne{constructor(v){super(),ie(this,v,cn,an,se,{staggerDelay:0})}}function vn(I){let v,p,C=`rotate(${-1*I[4]}rad)`,u=`${I[2]}px`,e=`${I[0]}px`,s=`${I[1]}px`,n=`-${I[1]*.5}px`,i=`-${I[0]*.5}px`,c=`translate(${I[6]}px, ${I[5]}px) rotate(${I[4]}rad)`,r=`${I[10]*I[8].staggerDelay}ms`,f;const a=I[13].default,t=ae(a,I,I[12],null);return{c(){v=b("li"),p=b("span"),t&&t.c(),this.h()},l(o){v=X(o,"LI",{class:!0});var l=H(v);p=X(l,"SPAN",{});var g=H(p);t&&t.l(g),g.forEach(F),l.forEach(F),this.h()},h(){U(p,"transform",C,!1),O(v,"class","cpeum-8i4nnb"),N(v,"hidden",!I[7]),U(v,"border-radius",u,!1),U(v,"width",e,!1),U(v,"height",s,!1),U(v,"top",n,!1),U(v,"left",i,!1),U(v,"transform",c,!1),U(v,"--delay",r,!1)},m(o,l){K(o,v,l),G(v,p),t&&t.m(p,null),I[14](v),f=!0},p(o,[l]){t&&t.p&&(!f||l&4096)&&oe(t,a,o,o[12],f?fe(a,o[12],l,null):le(o[12]),null),l&16&&C!==(C=`rotate(${-1*o[4]}rad)`)&&U(p,"transform",C,!1),l&128&&N(v,"hidden",!o[7]),l&4&&u!==(u=`${o[2]}px`)&&U(v,"border-radius",u,!1),l&1&&e!==(e=`${o[0]}px`)&&U(v,"width",e,!1),l&2&&s!==(s=`${o[1]}px`)&&U(v,"height",s,!1),l&2&&n!==(n=`-${o[1]*.5}px`)&&U(v,"top",n,!1),l&1&&i!==(i=`-${o[0]*.5}px`)&&U(v,"left",i,!1),l&112&&c!==(c=`translate(${o[6]}px, ${o[5]}px) rotate(${o[4]}rad)`)&&U(v,"transform",c,!1)},i(o){f||(j(t,o),f=!0)},o(o){q(t,o),f=!1},d(o){o&&F(v),t&&t.d(o),I[14](null)}}}const hn=150,gn=12;function mn(I,v,p){let C,{$$slots:u={},$$scope:e}=v,{size:s=void 0}=v,{width:n=void 0}=v,{height:i=void 0}=v,{radius:c=void 0}=v,r,f=(Math.random()-.5)/180,a=0,t=0;const o=at("bodies"),l=o.visible;ft(I,l,h=>p(7,C=h));const g=o.getIndex(),y=o.getEngine();let w;We(()=>{s||p(11,s=hn+Math.sqrt(r.textContent.length)*gn),n||p(0,n=s),i||p(1,i=n),c||p(2,c=Math.round(Math.random()*.5*n)),w=W.Bodies.rectangle(W.Common.random(0,r.parentElement.clientWidth),W.Common.random(0,r.parentElement.clientHeight),n,i,{angle:f,friction:.1,frictionStatic:12,density:5e-4,chamfer:{radius:c}}),o.addBodyRef(w),W.Composite.add(y.world,w),W.Events.on(y,"afterUpdate",()=>{p(4,f=w.angle),p(5,a=w.position.y),p(6,t=w.position.x)})});function S(h){ut[h?"unshift":"push"](()=>{r=h,p(3,r)})}return I.$$set=h=>{"size"in h&&p(11,s=h.size),"width"in h&&p(0,n=h.width),"height"in h&&p(1,i=h.height),"radius"in h&&p(2,c=h.radius),"$$scope"in h&&p(12,e=h.$$scope)},[n,i,c,r,f,a,t,C,o,l,g,s,e,u,S]}class On extends ne{constructor(v){super(),ie(this,v,mn,vn,se,{size:11,width:0,height:1,radius:2})}}export{Vn as B,In as C,Dn as E,kn as F,Bn as I,An as L,Ln as P,Zt as S,Rn as a,Tn as b,On as c,Fn as d};
