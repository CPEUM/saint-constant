import{S as ee,i as te,s as ie,N as ge,ac as xe,a5 as Ye,_ as oe,C as q,e as Q,c as Z,a as O,d as F,b as U,a1 as ve,I as V,g as N,J as _,W as Ee,X as fe,Y as ue,Z as ce,z as ye,q as X,o as j,a2 as me,a3 as We,w as Te,k as Ce,x as Ae,m as Me,y as Be,B as He,t as Se,h as Pe,j as Re,f as b,E as Ue,G as Fe,Q as ne,r as we,K as Qe,af as yt,l as Ke,O as Le,P as De,T as de,R as Et,n as Tt,p as At,v as je,a6 as qe,a4 as _e,L as ot}from"./index-8814b013.js";import{m as Bt,a as le}from"./getData-6073a5bf.js";import{i as $e}from"./intersect-eda3c074.js";import{a as pt,r as xt}from"./revealText-510b6fa3.js";import{b as ft}from"./paths-396f020f.js";import"./scroll-15239bd9.js";/* empty css                                            */import{m as Xe,a as ut,b as ke,f as Ht,d as Lt,h as Ge,i as St}from"./Map.svelte_svelte_type_style_lang-ad9468b4.js";import{w as Ne}from"./index-ff6a0fc0.js";import{e as Dt,f as Rt,a as ct}from"./index-b9ab12a0.js";import{g as ht}from"./themeColors-35fcc233.js";function Ft(p,l,g){let C,u;ge(p,Bt,r=>g(6,u=r));let{id:e}=l,{url:s}=l,{coordinates:i}=l,{opacity:n=1}=l;const c=xe("figuremap"),a=c?c.active:null;ge(p,a,r=>g(5,C=r));const f=e+"-raster-layer";return Ye(()=>{le&&(le.removeSource(e),le.removeLayer(f))}),p.$$set=r=>{"id"in r&&g(1,e=r.id),"url"in r&&g(2,s=r.url),"coordinates"in r&&g(3,i=r.coordinates),"opacity"in r&&g(4,n=r.opacity)},p.$$.update=()=>{if(p.$$.dirty&94&&u&&(console.log("adding image overlay"),le.getSource(e)||le.addSource(e,{type:"image",url:s,coordinates:i}),le.getLayer(f)||le.addLayer({id:f,source:e,type:"raster",paint:{"raster-opacity":n,"raster-fade-duration":.75}})),p.$$.dirty&96&&a&&u){const r=C?"visible":"none";le.getLayer(f)&&le.setLayoutProperty(f,"visibility",r)}},[a,e,s,i,n,C,u]}class Ji extends ee{constructor(l){super(),te(this,l,Ft,null,ie,{id:1,url:2,coordinates:3,opacity:4})}}function zt(p){let l,g,C,u,e;const s=p[2].default,i=oe(s,p,p[1],null);let n=[p[0]],c={};for(let a=0;a<n.length;a+=1)c=q(c,n[a]);return{c(){l=Q("h2"),g=Q("span"),i&&i.c(),this.h()},l(a){l=Z(a,"H2",{});var f=O(l);g=Z(f,"SPAN",{class:!0});var r=O(g);i&&i.l(r),r.forEach(F),f.forEach(F),this.h()},h(){U(g,"class","cpeum-1uh9iq8"),ve(l,c),V(l,"cpeum-1uh9iq8",!0)},m(a,f){N(a,l,f),_(l,g),i&&i.m(g,null),C=!0,u||(e=Ee(pt.call(null,l,xt)),u=!0)},p(a,[f]){i&&i.p&&(!C||f&2)&&fe(i,s,a,a[1],C?ce(s,a[1],f,null):ue(a[1]),null),ve(l,c=ye(n,[f&1&&a[0]])),V(l,"cpeum-1uh9iq8",!0)},i(a){C||(X(i,a),C=!0)},o(a){j(i,a),C=!1},d(a){a&&F(l),i&&i.d(a),u=!1,e()}}}function Wt(p,l,g){const C=[];let u=me(l,C),{$$slots:e={},$$scope:s}=l;return p.$$set=i=>{l=q(q({},l),We(i)),g(0,u=me(l,C)),"$$scope"in i&&g(1,s=i.$$scope)},[u,s,e]}class Ze extends ee{constructor(l){super(),te(this,l,Wt,zt,ie,{})}}function Vt(p){let l;return{c(){l=Se(p[0])},l(g){l=Pe(g,p[0])},m(g,C){N(g,l,C)},p(g,C){C&1&&Re(l,g[0])},d(g){g&&F(l)}}}function Ot(p){let l,g,C,u;g=new Ze({props:{$$slots:{default:[Vt]},$$scope:{ctx:p}}});const e=p[1].default,s=oe(e,p,p[2],null);return{c(){l=Q("section"),Te(g.$$.fragment),C=Ce(),s&&s.c()},l(i){l=Z(i,"SECTION",{});var n=O(l);Ae(g.$$.fragment,n),C=Me(n),s&&s.l(n),n.forEach(F)},m(i,n){N(i,l,n),Be(g,l,null),_(l,C),s&&s.m(l,null),u=!0},p(i,[n]){const c={};n&5&&(c.$$scope={dirty:n,ctx:i}),g.$set(c),s&&s.p&&(!u||n&4)&&fe(s,e,i,i[2],u?ce(e,i[2],n,null):ue(i[2]),null)},i(i){u||(X(g.$$.fragment,i),X(s,i),u=!0)},o(i){j(g.$$.fragment,i),j(s,i),u=!1},d(i){i&&F(l),He(g),s&&s.d(i)}}}function bt(p,l,g){let{$$slots:C={},$$scope:u}=l,{heading:e}=l;return p.$$set=s=>{"heading"in s&&g(0,e=s.heading),"$$scope"in s&&g(2,u=s.$$scope)},[e,C,u]}class _i extends ee{constructor(l){super(),te(this,l,bt,Ot,ie,{heading:0})}}function Pt(p,{scrollParent:l=document.body,factor:g=.8}={}){let C=0;function u(){const e=p.getBoundingClientRect();C=(Math.min(window.innerHeight,Math.max(-e.height,e.top-C))+e.height/2-window.innerHeight/2)*(g-1),p.style.transform=`translateY(${C}px)`}return u(),l.addEventListener("scroll",u),{destroy(){l.removeEventListener("scroll",u)}}}function gt(p){let l,g,C,u;return{c(){l=Q("div"),this.h()},l(e){l=Z(e,"DIV",{class:!0}),O(l).forEach(F),this.h()},h(){U(l,"class","image cpeum-g8o4pc"),b(l,"background-image",p[2]?`url(${ft+p[2]})`:"",!1)},m(e,s){N(e,l,s),C||(u=Ee(g=Pt.call(null,l,{factor:.8})),C=!0)},p(e,s){s&4&&b(l,"background-image",e[2]?`url(${ft+e[2]})`:"",!1)},d(e){e&&F(l),C=!1,u()}}}function Gt(p){let l,g,C,u,e,s,i,n,c,a,f=p[2]&&gt(p);return{c(){l=Q("header"),g=Q("hgroup"),C=Q("span"),u=Se(p[0]),e=Ce(),s=Q("h3"),i=Se(p[1]),n=Ce(),f&&f.c(),this.h()},l(r){l=Z(r,"HEADER",{class:!0});var t=O(l);g=Z(t,"HGROUP",{class:!0});var o=O(g);C=Z(o,"SPAN",{class:!0});var h=O(C);u=Pe(h,p[0]),h.forEach(F),e=Me(o),s=Z(o,"H3",{class:!0});var m=O(s);i=Pe(m,p[1]),m.forEach(F),o.forEach(F),n=Me(t),f&&f.l(t),t.forEach(F),this.h()},h(){U(C,"class","cpeum-g8o4pc"),U(s,"class","cpeum-g8o4pc"),U(g,"class","cpeum-g8o4pc"),U(l,"class","cpeum-g8o4pc")},m(r,t){N(r,l,t),_(l,g),_(g,C),_(C,u),_(g,e),_(g,s),_(s,i),_(l,n),f&&f.m(l,null),c||(a=[Ee(pt.call(null,s,xt)),Ee(Pt.call(null,g,{factor:.6}))],c=!0)},p(r,[t]){t&1&&Re(u,r[0]),t&2&&Re(i,r[1]),r[2]?f?f.p(r,t):(f=gt(r),f.c(),f.m(l,null)):f&&(f.d(1),f=null)},i:Ue,o:Ue,d(r){r&&F(l),f&&f.d(),c=!1,Fe(a)}}}function Nt(p,l,g){let{label:C}=l,{title:u}=l,{src:e=""}=l;return p.$$set=s=>{"label"in s&&g(0,C=s.label),"title"in s&&g(1,u=s.title),"src"in s&&g(2,e=s.src)},[C,u,e]}class Ut extends ee{constructor(l){super(),te(this,l,Nt,Gt,ie,{label:0,title:1,src:2})}}function Kt(p){let l,g,C,u,e,s;g=new Ut({props:{label:p[0],title:p[1],src:p[2]}});const i=p[5].default,n=oe(i,p,p[4],null);return{c(){l=Q("section"),Te(g.$$.fragment),C=Ce(),n&&n.c(),this.h()},l(c){l=Z(c,"SECTION",{class:!0});var a=O(l);Ae(g.$$.fragment,a),C=Me(a),n&&n.l(a),a.forEach(F),this.h()},h(){U(l,"class","cpeum-194x174")},m(c,a){N(c,l,a),Be(g,l,null),_(l,C),n&&n.m(l,null),u=!0,e||(s=[Ee($e.call(null,l)),ne(l,"enter",Qt),ne(l,"leave",Zt)],e=!0)},p(c,[a]){const f={};a&1&&(f.label=c[0]),a&2&&(f.title=c[1]),a&4&&(f.src=c[2]),g.$set(f),n&&n.p&&(!u||a&16)&&fe(n,i,c,c[4],u?ce(i,c[4],a,null):ue(c[4]),null)},i(c){u||(X(g.$$.fragment,c),X(n,c),u=!0)},o(c){j(g.$$.fragment,c),j(n,c),u=!1},d(c){c&&F(l),He(g),n&&n.d(c),e=!1,Fe(s)}}}function Qt(){}function Zt(){}function Jt(p,l,g){let{$$slots:C={},$$scope:u}=l,{label:e}=l,{title:s}=l,{key:i}=l,{src:n=""}=l;return xe("exercice"),p.$$set=c=>{"label"in c&&g(0,e=c.label),"title"in c&&g(1,s=c.title),"key"in c&&g(3,i=c.key),"src"in c&&g(2,n=c.src),"$$scope"in c&&g(4,u=c.$$scope)},[e,s,n,i,u,C]}class Xi extends ee{constructor(l){super(),te(this,l,Jt,Kt,ie,{label:0,title:1,key:3,src:2})}}function _t(p){let l;return{c(){l=Se(p[0])},l(g){l=Pe(g,p[0])},m(g,C){N(g,l,C)},p(g,C){C&1&&Re(l,g[0])},d(g){g&&F(l)}}}function Xt(p){let l,g,C,u;g=new Ze({props:{$$slots:{default:[_t]},$$scope:{ctx:p}}});const e=p[1].default,s=oe(e,p,p[2],null);return{c(){l=Q("section"),Te(g.$$.fragment),C=Ce(),s&&s.c()},l(i){l=Z(i,"SECTION",{});var n=O(l);Ae(g.$$.fragment,n),C=Me(n),s&&s.l(n),n.forEach(F)},m(i,n){N(i,l,n),Be(g,l,null),_(l,C),s&&s.m(l,null),u=!0},p(i,[n]){const c={};n&5&&(c.$$scope={dirty:n,ctx:i}),g.$set(c),s&&s.p&&(!u||n&4)&&fe(s,e,i,i[2],u?ce(e,i[2],n,null):ue(i[2]),null)},i(i){u||(X(g.$$.fragment,i),X(s,i),u=!0)},o(i){j(g.$$.fragment,i),j(s,i),u=!1},d(i){i&&F(l),He(g),s&&s.d(i)}}}function Yt(p,l,g){let{$$slots:C={},$$scope:u}=l,{heading:e}=l;return p.$$set=s=>{"heading"in s&&g(0,e=s.heading),"$$scope"in s&&g(2,u=s.$$scope)},[e,C,u]}class Yi extends ee{constructor(l){super(),te(this,l,Yt,Xt,ie,{heading:0})}}function jt(p){let l,g;const C=p[3].default,u=oe(C,p,p[2],null);let e=[p[0]],s={};for(let i=0;i<e.length;i+=1)s=q(s,e[i]);return{c(){l=Q("dl"),u&&u.c(),this.h()},l(i){l=Z(i,"DL",{});var n=O(l);u&&u.l(n),n.forEach(F),this.h()},h(){ve(l,s),b(l,"font-size","13px",!1),V(l,"cpeum-1ltqruj",!0)},m(i,n){N(i,l,n),u&&u.m(l,null),g=!0},p(i,[n]){u&&u.p&&(!g||n&4)&&fe(u,C,i,i[2],g?ce(C,i[2],n,null):ue(i[2]),null),ve(l,s=ye(e,[n&1&&i[0]])),b(l,"font-size","13px",!1),V(l,"cpeum-1ltqruj",!0)},i(i){g||(X(u,i),g=!0)},o(i){j(u,i),g=!1},d(i){i&&F(l),u&&u.d(i)}}}function qt(p,l,g){const C=["size"];let u=me(l,C),{$$slots:e={},$$scope:s}=l,{size:i="medium"}=l;return we("legend",{}),p.$$set=n=>{l=q(q({},l),We(n)),g(0,u=me(l,C)),"size"in n&&g(1,i=n.size),"$$scope"in n&&g(2,s=n.$$scope)},[u,i,s,e]}class ji extends ee{constructor(l){super(),te(this,l,qt,jt,ie,{size:1})}}function $t(p){let l,g,C,u=`${p[0]}px`,e,s,i;const n=p[15].default,c=oe(n,p,p[14],null);let a=[{class:"trigger"},p[6]],f={};for(let r=0;r<a.length;r+=1)f=q(f,a[r]);return{c(){l=Q("div"),g=Q("div"),c&&c.c(),this.h()},l(r){l=Z(r,"DIV",{class:!0});var t=O(l);g=Z(t,"DIV",{class:!0});var o=O(g);c&&c.l(o),o.forEach(F),t.forEach(F),this.h()},h(){U(g,"class","content cpeum-nnyai4"),Qe(()=>p[16].call(g)),b(g,"--h",u,!1),ve(l,f),V(l,"cpeum-nnyai4",!0)},m(r,t){N(r,l,t),_(l,g),c&&c.m(g,null),C=yt(g,p[16].bind(g)),e=!0,s||(i=[Ee($e.call(null,l,{rootMargin:"-50% -50% -50% -50%"})),ne(l,"enter",p[4]),ne(l,"leave",p[5])],s=!0)},p(r,[t]){c&&c.p&&(!e||t&16384)&&fe(c,n,r,r[14],e?ce(n,r[14],t,null):ue(r[14]),null),t&1&&u!==(u=`${r[0]}px`)&&b(g,"--h",u,!1),ve(l,f=ye(a,[{class:"trigger"},t&64&&r[6]])),V(l,"cpeum-nnyai4",!0)},i(r){e||(X(c,r),e=!0)},o(r){j(c,r),e=!1},d(r){r&&F(l),c&&c.d(r),C(),s=!1,Fe(i)}}}function ei(p,l,g){const C=["bounds","pitch"];let u=me(l,C),e,s,i,n;ge(p,Xe,d=>g(11,s=d));let{$$slots:c={},$$scope:a}=l,{bounds:f=Ht.fallback}=l,{pitch:r=void 0}=l,t=0,o=Ne(!1);ge(p,o,d=>g(10,e=d));let h=!1,m=Ne(null);ge(p,m,d=>g(13,n=d));let x=Ne(null);ge(p,x,d=>g(12,i=d));let k=0;const w=["-lines","-circles","-fills"].map(d=>"propositions"+d);function v(){g(9,h=!0),Xe.setClass("figure"),o.set(!0),f&&ke.set({bounds:f,pitch:r})}function y(){g(9,h=!1),Xe.setClass(""),ke.set(null),o.set(!1)}we("figuremap",{active:o}),we("currentKey",m),we("currentView",x),we("markers",{getIndex:()=>t++});function S(){k=this.clientHeight,g(0,k)}return p.$$set=d=>{l=q(q({},l),We(d)),g(6,u=me(l,C)),"bounds"in d&&g(7,f=d.bounds),"pitch"in d&&g(8,r=d.pitch),"$$scope"in d&&g(14,a=d.$$scope)},p.$$.update=()=>{if(p.$$.dirty&8576&&(n?(ut.set({key:n}),ke.set({filter:{key:n}})):n||(ut.set(null),ke.set({bounds:f,pitch:r}))),p.$$.dirty&4480&&(i?ke.set({center:{point:i.lnglat,zoom:i.zoom}}):i||ke.set({bounds:f,pitch:r})),p.$$.dirty&2560&&(s.full&&h?o.set(!1):!s.full&&h&&o.set(!0)),p.$$.dirty&1024){if(e)for(const d of w)le.setLayoutProperty(d,"visibility","none");else if(!e)for(const d of w)le.setLayoutProperty(d,"visibility","visible")}},[k,o,m,x,v,y,u,f,r,h,e,s,i,n,a,c,S]}class qi extends ee{constructor(l){super(),te(this,l,ei,$t,ie,{bounds:7,pitch:8})}}function ti(p){let l,g=`url(${p[1]})`,C=[p[10]],u={};for(let e=0;e<C.length;e+=1)u=q(u,C[e]);return{c(){l=Q("div"),this.h()},l(e){l=Z(e,"DIV",{}),O(l).forEach(F),this.h()},h(){ve(l,u),b(l,"background-image",g,!1),V(l,"cpeum-vz5i1k",!0)},m(e,s){N(e,l,s)},p(e,s){ve(l,u=ye(C,[s&1024&&e[10]])),b(l,"background-image",g,!1),V(l,"cpeum-vz5i1k",!0)},d(e){e&&F(l)}}}function ii(p){let l,g,C,u,e;function s(r,t){if(t&1&&(g=null),t&2&&(C=null),r[0]==="square")return li;if(r[0]==="circle")return ai;if(r[0]==="triangle")return ri;if(g==null&&(g=["line","dotted","dashed"].indexOf(r[0])>-1),g)return si;if(C==null&&(C=!!Boolean(r[1])),C)return ni}let i=s(p,-1),n=i&&i(p),c=p[4]&&vt(p),a=[{width:K},{height:K},{viewBox:e="0 0 "+K+" "+K},p[10]],f={};for(let r=0;r<a.length;r+=1)f=q(f,a[r]);return{c(){l=Le("svg"),n&&n.c(),u=Ke(),c&&c.c(),this.h()},l(r){l=De(r,"svg",{width:!0,height:!0,viewBox:!0});var t=O(l);n&&n.l(t),u=Ke(),c&&c.l(t),t.forEach(F),this.h()},h(){de(l,f),b(l,"opacity",p[5],!1),V(l,"cpeum-vz5i1k",!0)},m(r,t){N(r,l,t),n&&n.m(l,null),_(l,u),c&&c.m(l,null)},p(r,t){i===(i=s(r,t))&&n?n.p(r,t):(n&&n.d(1),n=i&&i(r),n&&(n.c(),n.m(l,u))),r[4]?c?c.p(r,t):(c=vt(r),c.c(),c.m(l,null)):c&&(c.d(1),c=null),de(l,f=ye(a,[{width:K},{height:K},{viewBox:e},t&1024&&r[10]])),b(l,"opacity",r[5],!1),V(l,"cpeum-vz5i1k",!0)},d(r){r&&F(l),n&&n.d(),c&&c.d()}}}function ni(p){let l,g,C;return{c(){l=Le("text"),g=Se("Source: "),C=Se(p[1]),this.h()},l(u){l=De(u,"text",{class:!0});var e=O(l);g=Pe(e,"Source: "),C=Pe(e,p[1]),e.forEach(F),this.h()},h(){U(l,"class","cpeum-vz5i1k")},m(u,e){N(u,l,e),_(l,g),_(l,C)},p(u,e){e&2&&Re(C,u[1])},d(u){u&&F(l)}}}function si(p){let l,g,C=[{d:g="M"+Ie+","+K/2+" Q"+K/4+","+K/3+" "+K/2+","+K/2+" T"+(K-Ie)+","+K/2},{"vector-effect":"non-scaling-stroke"},p[7]],u={};for(let e=0;e<C.length;e+=1)u=q(u,C[e]);return{c(){l=Le("path"),this.h()},l(e){l=De(e,"path",{d:!0,"vector-effect":!0}),O(l).forEach(F),this.h()},h(){de(l,u),V(l,"highlight",p[6]),V(l,"cpeum-vz5i1k",!0)},m(e,s){N(e,l,s)},p(e,s){de(l,u=ye(C,[{d:g},{"vector-effect":"non-scaling-stroke"},s&128&&e[7]])),V(l,"highlight",e[6]),V(l,"cpeum-vz5i1k",!0)},d(e){e&&F(l)}}}function ri(p){let l,g,C=[{points:g=K/2+" "+Ie+", "+Ie+" "+(K-p[8])+", "+(K-Ie)+" "+(K-p[8])},p[7]],u={};for(let e=0;e<C.length;e+=1)u=q(u,C[e]);return{c(){l=Le("polygon"),this.h()},l(e){l=De(e,"polygon",{points:!0}),O(l).forEach(F),this.h()},h(){de(l,u),V(l,"highlight",p[6]),V(l,"cpeum-vz5i1k",!0)},m(e,s){N(e,l,s)},p(e,s){de(l,u=ye(C,[{points:g},s&128&&e[7]])),V(l,"highlight",e[6]),V(l,"cpeum-vz5i1k",!0)},d(e){e&&F(l)}}}function ai(p){let l,g,C,u,e=[{cx:g=K/2},{cy:C=K/2},{r:u=K/2-Ie},p[7]],s={};for(let i=0;i<e.length;i+=1)s=q(s,e[i]);return{c(){l=Le("circle"),this.h()},l(i){l=De(i,"circle",{cx:!0,cy:!0,r:!0}),O(l).forEach(F),this.h()},h(){de(l,s),V(l,"highlight",p[6]),V(l,"cpeum-vz5i1k",!0)},m(i,n){N(i,l,n)},p(i,n){de(l,s=ye(e,[{cx:g},{cy:C},{r:u},n&128&&i[7]])),V(l,"highlight",i[6]),V(l,"cpeum-vz5i1k",!0)},d(i){i&&F(l)}}}function li(p){let l,g,C,u,e,s=[{rx:g=K/20},{ry:C=K/20},{x:p[8]},{y:p[8]},{width:u=K-2*p[8]},{height:e=K-2*p[8]},p[7]],i={};for(let n=0;n<s.length;n+=1)i=q(i,s[n]);return{c(){l=Le("rect"),this.h()},l(n){l=De(n,"rect",{rx:!0,ry:!0,x:!0,y:!0,width:!0,height:!0}),O(l).forEach(F),this.h()},h(){de(l,i),V(l,"highlight",p[6]),V(l,"cpeum-vz5i1k",!0)},m(n,c){N(n,l,c)},p(n,c){de(l,i=ye(s,[{rx:g},{ry:C},{x:n[8]},{y:n[8]},{width:u},{height:e},c&128&&n[7]])),V(l,"highlight",n[6]),V(l,"cpeum-vz5i1k",!0)},d(n){n&&F(l)}}}function vt(p){let l,g,C;return{c(){l=Le("text"),g=Se(p[4]),this.h()},l(u){l=De(u,"text",{"font-size":!0,"font-family":!0,"font-weight":!0,dy:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,class:!0});var e=O(l);g=Pe(e,p[4]),e.forEach(F),this.h()},h(){U(l,"font-size",p[9]),U(l,"font-family","var(--font-display)"),U(l,"font-weight","600"),U(l,"dy",".3em"),U(l,"x","50%"),U(l,"y","50%"),U(l,"text-anchor","middle"),U(l,"fill",C=p[6]?p[3]:p[2]),U(l,"class","cpeum-vz5i1k")},m(u,e){N(u,l,e),_(l,g)},p(u,e){e&16&&Re(g,u[4]),e&76&&C!==(C=u[6]?u[3]:u[2])&&U(l,"fill",C)},d(u){u&&F(l)}}}function oi(p){let l;function g(e,s){return e[1]?ti:ii}let C=g(p),u=C(p);return{c(){u.c(),l=Ke()},l(e){u.l(e),l=Ke()},m(e,s){u.m(e,s),N(e,l,s)},p(e,[s]){C===(C=g(e))&&u?u.p(e,s):(u.d(1),u=C(e),u&&(u.c(),u.m(l.parentNode,l)))},i:Ue,o:Ue,d(e){u.d(e),e&&F(l)}}}const K=50,Ie=5;function fi(p,l,g){const C=["shape","src","color","colorHighlight","label","opacity","fill","fillHighlight","stroke","strokeHighlight","strokeWidth","strokeWidthHighlight","strokeType","strokeDashArray","highlight"];let u=me(l,C),{shape:e="circle"}=l,{src:s=null}=l,{color:i="var(--dark1)"}=l,{colorHighlight:n=i}=l,{label:c=null}=l,{opacity:a=1}=l,{fill:f="none"}=l,{fillHighlight:r=f}=l,{stroke:t="none"}=l,{strokeHighlight:o=t}=l,{strokeWidth:h=1}=l,{strokeWidthHighlight:m=h}=l,{strokeType:x="solid"}=l,{strokeDashArray:k=void 0}=l,{highlight:w=!1}=l;const v=Ie*1.5,y=K/2.2,S=x==="dashed"?`${3*h}, ${1.5*h}`:x==="dotted"?`0, ${2*h}`:null;let d;return p.$$set=P=>{l=q(q({},l),We(P)),g(10,u=me(l,C)),"shape"in P&&g(0,e=P.shape),"src"in P&&g(1,s=P.src),"color"in P&&g(2,i=P.color),"colorHighlight"in P&&g(3,n=P.colorHighlight),"label"in P&&g(4,c=P.label),"opacity"in P&&g(5,a=P.opacity),"fill"in P&&g(11,f=P.fill),"fillHighlight"in P&&g(12,r=P.fillHighlight),"stroke"in P&&g(13,t=P.stroke),"strokeHighlight"in P&&g(14,o=P.strokeHighlight),"strokeWidth"in P&&g(15,h=P.strokeWidth),"strokeWidthHighlight"in P&&g(16,m=P.strokeWidthHighlight),"strokeType"in P&&g(17,x=P.strokeType),"strokeDashArray"in P&&g(18,k=P.strokeDashArray),"highlight"in P&&g(6,w=P.highlight)},p.$$.update=()=>{p.$$.dirty&391233&&g(7,d={fill:w?r:f,stroke:w?o:t,"stroke-width":w?m:h,"stroke-linecap":e==="dashed"?"butt":"round","stroke-dasharray":k||S||""})},[e,s,i,n,c,a,w,d,v,y,u,f,r,t,o,h,m,x,k]}class Ct extends ee{constructor(l){super(),te(this,l,fi,oi,ie,{shape:0,src:1,color:2,colorHighlight:3,label:4,opacity:5,fill:11,fillHighlight:12,stroke:13,strokeHighlight:14,strokeWidth:15,strokeWidthHighlight:16,strokeType:17,strokeDashArray:18,highlight:6})}}function mt(p){let l,g,C,u,e,s;return g=new Ct({props:{src:p[1],label:p[0],color:p[3],fill:p[4],colorHighlight:p[6],fillHighlight:p[7],shape:p[2],stroke:p[5],strokeWidth:p[8],strokeType:p[9],interactive:p[10],highlight:p[11]||p[13]==p[17]}}),{c(){l=Q("div"),Te(g.$$.fragment),this.h()},l(i){l=Z(i,"DIV",{class:!0});var n=O(l);Ae(g.$$.fragment,n),n.forEach(F),this.h()},h(){U(l,"class","inner cpeum-myx435")},m(i,n){N(i,l,n),Be(g,l,null),u=!0,e||(s=[ne(l,"mouseenter",p[23]),ne(l,"mouseleave",p[24])],e=!0)},p(i,n){p=i;const c={};n[0]&2&&(c.src=p[1]),n[0]&1&&(c.label=p[0]),n[0]&8&&(c.color=p[3]),n[0]&16&&(c.fill=p[4]),n[0]&64&&(c.colorHighlight=p[6]),n[0]&128&&(c.fillHighlight=p[7]),n[0]&4&&(c.shape=p[2]),n[0]&32&&(c.stroke=p[5]),n[0]&256&&(c.strokeWidth=p[8]),n[0]&512&&(c.strokeType=p[9]),n[0]&1024&&(c.interactive=p[10]),n[0]&141312&&(c.highlight=p[11]||p[13]==p[17]),g.$set(c)},i(i){u||(X(g.$$.fragment,i),C||Qe(()=>{C=Et(l,Rt,{y:15,duration:1e3,easing:Dt,delay:p[20]*150+500}),C.start()}),u=!0)},o(i){j(g.$$.fragment,i),u=!1},d(i){i&&F(l),He(g),e=!1,Fe(s)}}}function ui(p){let l,g,C=`${p[14]}px`,u,e=(p[12]&&!p[22]||p[22]&&p[19])&&mt(p),s=[{class:"outer"},p[25],{style:g=(p[15]?`left: ${p[15]}%;`:"")+" "+(p[16]?`top: ${p[16]}%;`:"")}],i={};for(let n=0;n<s.length;n+=1)i=q(i,s[n]);return{c(){l=Q("div"),e&&e.c(),this.h()},l(n){l=Z(n,"DIV",{class:!0,style:!0});var c=O(l);e&&e.l(c),c.forEach(F),this.h()},h(){ve(l,i),V(l,"highlight",p[11]||p[13]==p[17]),b(l,"font-size",C,!1),V(l,"cpeum-myx435",!0)},m(n,c){N(n,l,c),e&&e.m(l,null),p[29](l),u=!0},p(n,c){n[12]&&!n[22]||n[22]&&n[19]?e?(e.p(n,c),c[0]&528384&&X(e,1)):(e=mt(n),e.c(),X(e,1),e.m(l,null)):e&&(Tt(),j(e,1,1,()=>{e=null}),At()),ve(l,i=ye(s,[{class:"outer"},c[0]&33554432&&n[25],(!u||c[0]&98304&&g!==(g=(n[15]?`left: ${n[15]}%;`:"")+" "+(n[16]?`top: ${n[16]}%;`:"")))&&{style:g}])),V(l,"highlight",n[11]||n[13]==n[17]),b(l,"font-size",C,!1),V(l,"cpeum-myx435",!0)},i(n){u||(X(e),u=!0)},o(n){j(e),u=!1},d(n){n&&F(l),e&&e.d(),p[29](null)}}}function ci(p,l,g){const C=["label","src","shape","color","fill","stroke","colorHighlight","fillHighlight","strokeHighlight","strokeWidth","strokeType","interactive","highlight","active","key","size","lnglat","zoom","x","y"];let u=me(l,C),e,s,{label:i}=l,{src:n=null}=l,{shape:c="circle"}=l,{color:a="var(--accent3)"}=l,{fill:f="var(--light1)"}=l,{stroke:r="none"}=l,{colorHighlight:t=void 0}=l,{fillHighlight:o=void 0}=l,{strokeHighlight:h=void 0}=l,{strokeWidth:m=1}=l,{strokeType:x="solid"}=l,{interactive:k=!0}=l,{highlight:w=!1}=l,{active:v=!0}=l,{key:y=i}=l,{size:S=40}=l,{lnglat:d=null}=l,{zoom:P=16}=l,{x:I=null}=l,{y:E=null}=l,M;xe("figure");const T=xe("figuremap"),A=xe("markers"),H=A?A.getIndex():0,D=xe("currentKey");ge(p,D,L=>g(17,e=L));const R=T?T.active:null;ge(p,R,L=>g(19,s=L));function z(){D.set(y)}function B(){D.set(null)}je(()=>{T&&new Lt.exports.Marker({element:M,anchor:"center"}).setLngLat(d).addTo(le)}),Ye(()=>{});function W(L){qe[L?"unshift":"push"](()=>{M=L,g(18,M)})}return p.$$set=L=>{l=q(q({},l),We(L)),g(25,u=me(l,C)),"label"in L&&g(0,i=L.label),"src"in L&&g(1,n=L.src),"shape"in L&&g(2,c=L.shape),"color"in L&&g(3,a=L.color),"fill"in L&&g(4,f=L.fill),"stroke"in L&&g(5,r=L.stroke),"colorHighlight"in L&&g(6,t=L.colorHighlight),"fillHighlight"in L&&g(7,o=L.fillHighlight),"strokeHighlight"in L&&g(26,h=L.strokeHighlight),"strokeWidth"in L&&g(8,m=L.strokeWidth),"strokeType"in L&&g(9,x=L.strokeType),"interactive"in L&&g(10,k=L.interactive),"highlight"in L&&g(11,w=L.highlight),"active"in L&&g(12,v=L.active),"key"in L&&g(13,y=L.key),"size"in L&&g(14,S=L.size),"lnglat"in L&&g(27,d=L.lnglat),"zoom"in L&&g(28,P=L.zoom),"x"in L&&g(15,I=L.x),"y"in L&&g(16,E=L.y)},p.$$.update=()=>{p.$$.dirty[0]&402792448&&T&&d&&D&&e===y&&ke.set({center:{point:d,zoom:P}})},[i,n,c,a,f,r,t,o,m,x,k,w,v,y,S,I,E,e,M,s,H,D,R,z,B,u,h,d,P,W]}class $i extends ee{constructor(l){super(),te(this,l,ci,ui,ie,{label:0,src:1,shape:2,color:3,fill:4,stroke:5,colorHighlight:6,fillHighlight:7,strokeHighlight:26,strokeWidth:8,strokeType:9,interactive:10,highlight:11,active:12,key:13,size:14,lnglat:27,zoom:28,x:15,y:16},null,[-1,-1])}}function hi(p){let l;return{c(){l=Se("Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},l(g){l=Pe(g,"Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},m(g,C){N(g,l,C)},d(g){g&&F(l)}}}function gi(p){let l,g,C,u;g=new Ze({props:{$$slots:{default:[hi]},$$scope:{ctx:p}}});const e=p[0].default,s=oe(e,p,p[1],null);return{c(){l=Q("section"),Te(g.$$.fragment),C=Ce(),s&&s.c()},l(i){l=Z(i,"SECTION",{});var n=O(l);Ae(g.$$.fragment,n),C=Me(n),s&&s.l(n),n.forEach(F)},m(i,n){N(i,l,n),Be(g,l,null),_(l,C),s&&s.m(l,null),u=!0},p(i,[n]){const c={};n&2&&(c.$$scope={dirty:n,ctx:i}),g.$set(c),s&&s.p&&(!u||n&2)&&fe(s,e,i,i[1],u?ce(e,i[1],n,null):ue(i[1]),null)},i(i){u||(X(g.$$.fragment,i),X(s,i),u=!0)},o(i){j(g.$$.fragment,i),j(s,i),u=!1},d(i){i&&F(l),He(g),s&&s.d(i)}}}function vi(p,l,g){let{$$slots:C={},$$scope:u}=l;return p.$$set=e=>{"$$scope"in e&&g(1,u=e.$$scope)},[C,u]}class en extends ee{constructor(l){super(),te(this,l,vi,gi,ie,{})}}function mi(p){let l;return{c(){l=Se("Propositions d'am\xE9nagement")},l(g){l=Pe(g,"Propositions d'am\xE9nagement")},m(g,C){N(g,l,C)},d(g){g&&F(l)}}}function di(p){let l,g,C,u;g=new Ze({props:{$$slots:{default:[mi]},$$scope:{ctx:p}}});const e=p[0].default,s=oe(e,p,p[1],null);return{c(){l=Q("section"),Te(g.$$.fragment),C=Ce(),s&&s.c()},l(i){l=Z(i,"SECTION",{});var n=O(l);Ae(g.$$.fragment,n),C=Me(n),s&&s.l(n),n.forEach(F)},m(i,n){N(i,l,n),Be(g,l,null),_(l,C),s&&s.m(l,null),u=!0},p(i,[n]){const c={};n&2&&(c.$$scope={dirty:n,ctx:i}),g.$set(c),s&&s.p&&(!u||n&2)&&fe(s,e,i,i[1],u?ce(e,i[1],n,null):ue(i[1]),null)},i(i){u||(X(g.$$.fragment,i),X(s,i),u=!0)},o(i){j(g.$$.fragment,i),j(s,i),u=!1},d(i){i&&F(l),He(g),s&&s.d(i)}}}function yi(p,l,g){let{$$slots:C={},$$scope:u}=l;return p.$$set=e=>{"$$scope"in e&&g(1,u=e.$$scope)},[C,u]}class tn extends ee{constructor(l){super(),te(this,l,yi,di,ie,{})}}function pi(p){let l,g,C,u,e,s,i,n;C=new Ct({props:{style:"transform: scale("+p[5]+")",label:p[1],color:p[6],fill:p[8],stroke:p[9],opacity:p[7],strokeWidth:p[10],colorHighlight:p[12],fillHighlight:p[13],strokeHighlight:p[14],strokeWidthHighlight:p[15],src:p[16],shape:p[4],interactive:p[0],highlight:p[3],strokeDashArray:p[11]}});const c=p[26].default,a=oe(c,p,p[25],null);return{c(){l=Q("div"),g=Q("dt"),Te(C.$$.fragment),u=Ce(),e=Q("dd"),a&&a.c(),this.h()},l(f){l=Z(f,"DIV",{class:!0});var r=O(l);g=Z(r,"DT",{class:!0});var t=O(g);Ae(C.$$.fragment,t),t.forEach(F),u=Me(r),e=Z(r,"DD",{class:!0});var o=O(e);a&&a.l(o),o.forEach(F),r.forEach(F),this.h()},h(){U(g,"class","cpeum-char8z"),U(e,"class","cpeum-char8z"),U(l,"class","cpeum-char8z"),V(l,"interactive",p[0]),V(l,"highlight",p[3]||p[18]&&p[17]&&p[17]===p[2])},m(f,r){N(f,l,r),_(l,g),Be(C,g,null),_(l,u),_(l,e),a&&a.m(e,null),s=!0,i||(n=[ne(l,"mouseover",p[27]),ne(l,"mouseleave",p[28]),ne(l,"mouseover",p[19]),ne(l,"mouseleave",p[20]),ne(l,"focus",p[29])],i=!0)},p(f,[r]){const t={};r&32&&(t.style="transform: scale("+f[5]+")"),r&2&&(t.label=f[1]),r&64&&(t.color=f[6]),r&256&&(t.fill=f[8]),r&512&&(t.stroke=f[9]),r&128&&(t.opacity=f[7]),r&1024&&(t.strokeWidth=f[10]),r&4096&&(t.colorHighlight=f[12]),r&8192&&(t.fillHighlight=f[13]),r&16384&&(t.strokeHighlight=f[14]),r&32768&&(t.strokeWidthHighlight=f[15]),r&65536&&(t.src=f[16]),r&16&&(t.shape=f[4]),r&1&&(t.interactive=f[0]),r&8&&(t.highlight=f[3]),r&2048&&(t.strokeDashArray=f[11]),C.$set(t),a&&a.p&&(!s||r&33554432)&&fe(a,c,f,f[25],s?ce(c,f[25],r,null):ue(f[25]),null),r&1&&V(l,"interactive",f[0]),r&393228&&V(l,"highlight",f[3]||f[18]&&f[17]&&f[17]===f[2])},i(f){s||(X(C.$$.fragment,f),X(a,f),s=!0)},o(f){j(C.$$.fragment,f),j(a,f),s=!1},d(f){f&&F(l),He(C),a&&a.d(f),i=!1,Fe(n)}}}function xi(p,l,g){let C,{$$slots:u={},$$scope:e}=l,{label:s=null}=l,{key:i=null}=l,{interactive:n=void 0}=l,{highlight:c=!1}=l,{shape:a="circle"}=l,{symbolScale:f=1}=l,{color:r="var(--light1)"}=l,{opacity:t=1}=l,{fill:o="var(--accent2)"}=l,{stroke:h=null}=l,{strokeWidth:m=0}=l,{strokeDashArray:x=void 0}=l,{colorHighlight:k=void 0}=l,{fillHighlight:w=void 0}=l,{strokeHighlight:v=void 0}=l,{strokeWidthHighlight:y=void 0}=l,{arrowEnd:S=!1}=l,{arrowStart:d=!1}=l,{src:P=null}=l,{lnglat:I=void 0}=l,{zoom:E=void 0}=l;const M=xe("currentKey");ge(p,M,B=>g(17,C=B));const T=xe("currentView");function A(){M&&i?M.set(i):T&&I&&T.set({lnglat:I,zoom:E})}function H(){M&&i?M.set(null):T&&I&&T.set(null)}function D(B){_e.call(this,p,B)}function R(B){_e.call(this,p,B)}function z(B){_e.call(this,p,B)}return p.$$set=B=>{"label"in B&&g(1,s=B.label),"key"in B&&g(2,i=B.key),"interactive"in B&&g(0,n=B.interactive),"highlight"in B&&g(3,c=B.highlight),"shape"in B&&g(4,a=B.shape),"symbolScale"in B&&g(5,f=B.symbolScale),"color"in B&&g(6,r=B.color),"opacity"in B&&g(7,t=B.opacity),"fill"in B&&g(8,o=B.fill),"stroke"in B&&g(9,h=B.stroke),"strokeWidth"in B&&g(10,m=B.strokeWidth),"strokeDashArray"in B&&g(11,x=B.strokeDashArray),"colorHighlight"in B&&g(12,k=B.colorHighlight),"fillHighlight"in B&&g(13,w=B.fillHighlight),"strokeHighlight"in B&&g(14,v=B.strokeHighlight),"strokeWidthHighlight"in B&&g(15,y=B.strokeWidthHighlight),"arrowEnd"in B&&g(21,S=B.arrowEnd),"arrowStart"in B&&g(22,d=B.arrowStart),"src"in B&&g(16,P=B.src),"lnglat"in B&&g(23,I=B.lnglat),"zoom"in B&&g(24,E=B.zoom),"$$scope"in B&&g(25,e=B.$$scope)},p.$$.update=()=>{p.$$.dirty&8388612&&(i||I)&&g(0,n=!0)},[n,s,i,c,a,f,r,t,o,h,m,x,k,w,v,y,P,C,M,A,H,S,d,I,E,e,u,D,R,z]}class nn extends ee{constructor(l){super(),te(this,l,xi,pi,ie,{label:1,key:2,interactive:0,highlight:3,shape:4,symbolScale:5,color:6,opacity:7,fill:8,stroke:9,strokeWidth:10,strokeDashArray:11,colorHighlight:12,fillHighlight:13,strokeHighlight:14,strokeWidthHighlight:15,arrowEnd:21,arrowStart:22,src:16,lnglat:23,zoom:24})}}function Si(p){let l,g,C,u;const e=p[2].default,s=oe(e,p,p[1],null);return{c(){l=Q("div"),s&&s.c(),this.h()},l(i){l=Z(i,"DIV",{style:!0,class:!0});var n=O(l);s&&s.l(n),n.forEach(F),this.h()},h(){U(l,"style",g=ht(p[0])),U(l,"class","cpeum-1sqjp0y")},m(i,n){N(i,l,n),s&&s.m(l,null),u=!0},p(i,[n]){s&&s.p&&(!u||n&2)&&fe(s,e,i,i[1],u?ce(e,i[1],n,null):ue(i[1]),null),(!u||n&1&&g!==(g=ht(i[0])))&&U(l,"style",g)},i(i){u||(X(s,i),Qe(()=>{C||(C=ot(l,ct,{},!0)),C.run(1)}),u=!0)},o(i){j(s,i),C||(C=ot(l,ct,{},!1)),C.run(0),u=!1},d(i){i&&F(l),s&&s.d(i),i&&C&&C.end()}}}function Pi(p,l,g){let{$$slots:C={},$$scope:u}=l,{key:e}=l;return we("exercice",e),p.$$set=s=>{"key"in s&&g(0,e=s.key),"$$scope"in s&&g(1,u=s.$$scope)},[e,u,C]}class sn extends ee{constructor(l){super(),te(this,l,Pi,Si,ie,{key:0})}}var et={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(p,l){(function(C,u){p.exports=u()})(Ge,function(){return function(g){var C={};function u(e){if(C[e])return C[e].exports;var s=C[e]={i:e,l:!1,exports:{}};return g[e].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return u.m=g,u.c=C,u.d=function(e,s,i){u.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:i})},u.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,s){if(s&1&&(e=u(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var i=Object.create(null);if(u.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var n in e)u.d(i,n,function(c){return e[c]}.bind(null,n));return i},u.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(s,"a",s),s},u.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},u.p="",u(u.s=21)}([function(g,C){var u={};g.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(s,i){var n,c;typeof i=="boolean"?(n=2,c=i):(n=1,c=!0);for(var a=n;a<arguments.length;a++){var f=arguments[a];if(f)for(var r in f)c&&f[r]&&f[r].constructor===Object&&(!s[r]||s[r].constructor===Object)?(s[r]=s[r]||{},u.extend(s[r],c,f[r])):s[r]=f[r]}return s},u.clone=function(s,i){return u.extend({},i,s)},u.keys=function(s){if(Object.keys)return Object.keys(s);var i=[];for(var n in s)i.push(n);return i},u.values=function(s){var i=[];if(Object.keys){for(var n=Object.keys(s),c=0;c<n.length;c++)i.push(s[n[c]]);return i}for(var a in s)i.push(s[a]);return i},u.get=function(s,i,n,c){i=i.split(".").slice(n,c);for(var a=0;a<i.length;a+=1)s=s[i[a]];return s},u.set=function(s,i,n,c,a){var f=i.split(".").slice(c,a);return u.get(s,i,0,-1)[f[f.length-1]]=n,n},u.shuffle=function(s){for(var i=s.length-1;i>0;i--){var n=Math.floor(u.random()*(i+1)),c=s[i];s[i]=s[n],s[n]=c}return s},u.choose=function(s){return s[Math.floor(u.random()*s.length)]},u.isElement=function(s){return typeof HTMLElement!="undefined"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},u.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},u.isFunction=function(s){return typeof s=="function"},u.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},u.isString=function(s){return toString.call(s)==="[object String]"},u.clamp=function(s,i,n){return s<i?i:s>n?n:s},u.sign=function(s){return s<0?-1:1},u.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(s,i){return s=typeof s!="undefined"?s:0,i=typeof i!="undefined"?i:1,s+e()*(i-s)};var e=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[s]||(u.warn(s),u._warnedOnce[s]=!0)},u.deprecated=function(s,i,n){s[i]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",n)},s[i])},u.nextId=function(){return u._nextId++},u.indexOf=function(s,i){if(s.indexOf)return s.indexOf(i);for(var n=0;n<s.length;n++)if(s[n]===i)return n;return-1},u.map=function(s,i){if(s.map)return s.map(i);for(var n=[],c=0;c<s.length;c+=1)n.push(i(s[c]));return n},u.topologicalSort=function(s){var i=[],n=[],c=[];for(var a in s)!n[a]&&!c[a]&&u._topologicalSort(a,n,c,s,i);return i},u._topologicalSort=function(s,i,n,c,a){var f=c[s]||[];n[s]=!0;for(var r=0;r<f.length;r+=1){var t=f[r];n[t]||i[t]||u._topologicalSort(t,i,n,c,a)}n[s]=!1,i[s]=!0,a.push(s)},u.chain=function(){for(var s=[],i=0;i<arguments.length;i+=1){var n=arguments[i];n._chained?s.push.apply(s,n._chained):s.push(n)}var c=function(){for(var a,f=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)f[r]=arguments[r];for(r=0;r<s.length;r+=1){var o=s[r].apply(a,f);typeof o!="undefined"&&(a=o)}return a};return c._chained=s,c},u.chainPathBefore=function(s,i,n){return u.set(s,i,u.chain(n,u.get(s,i)))},u.chainPathAfter=function(s,i,n){return u.set(s,i,u.chain(u.get(s,i),n))},u.setDecomp=function(s){u._decomp=s},u.getDecomp=function(){var s=u._decomp;try{!s&&typeof window!="undefined"&&(s=window.decomp),!s&&typeof Ge!="undefined"&&(s=Ge.decomp)}catch{s=null}return s}}()},function(g,C){var u={};g.exports=u,function(){u.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&u.update(s,e),s},u.update=function(e,s,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var n=0;n<s.length;n++){var c=s[n];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},u.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},u.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},u.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},u.shift=function(e,s){var i=e.max.x-e.min.x,n=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+i,e.min.y=s.y,e.max.y=s.y+n}}()},function(g,C){var u={};g.exports=u,function(){u.create=function(e,s){return{x:e||0,y:s||0}},u.clone=function(e){return{x:e.x,y:e.y}},u.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},u.rotate=function(e,s,i){var n=Math.cos(s),c=Math.sin(s);i||(i={});var a=e.x*n-e.y*c;return i.y=e.x*c+e.y*n,i.x=a,i},u.rotateAbout=function(e,s,i,n){var c=Math.cos(s),a=Math.sin(s);n||(n={});var f=i.x+((e.x-i.x)*c-(e.y-i.y)*a);return n.y=i.y+((e.x-i.x)*a+(e.y-i.y)*c),n.x=f,n},u.normalise=function(e){var s=u.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},u.dot=function(e,s){return e.x*s.x+e.y*s.y},u.cross=function(e,s){return e.x*s.y-e.y*s.x},u.cross3=function(e,s,i){return(s.x-e.x)*(i.y-e.y)-(s.y-e.y)*(i.x-e.x)},u.add=function(e,s,i){return i||(i={}),i.x=e.x+s.x,i.y=e.y+s.y,i},u.sub=function(e,s,i){return i||(i={}),i.x=e.x-s.x,i.y=e.y-s.y,i},u.mult=function(e,s){return{x:e.x*s,y:e.y*s}},u.div=function(e,s){return{x:e.x/s,y:e.y/s}},u.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},u.neg=function(e){return{x:-e.x,y:-e.y}},u.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(g,C,u){var e={};g.exports=e;var s=u(2),i=u(0);(function(){e.create=function(n,c){for(var a=[],f=0;f<n.length;f++){var r=n[f],t={x:r.x,y:r.y,index:f,body:c,isInternal:!1};a.push(t)}return a},e.fromPath=function(n,c){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return n.replace(a,function(r,t,o){f.push({x:parseFloat(t),y:parseFloat(o)})}),e.create(f,c)},e.centre=function(n){for(var c=e.area(n,!0),a={x:0,y:0},f,r,t,o=0;o<n.length;o++)t=(o+1)%n.length,f=s.cross(n[o],n[t]),r=s.mult(s.add(n[o],n[t]),f),a=s.add(a,r);return s.div(a,6*c)},e.mean=function(n){for(var c={x:0,y:0},a=0;a<n.length;a++)c.x+=n[a].x,c.y+=n[a].y;return s.div(c,n.length)},e.area=function(n,c){for(var a=0,f=n.length-1,r=0;r<n.length;r++)a+=(n[f].x-n[r].x)*(n[f].y+n[r].y),f=r;return c?a/2:Math.abs(a)/2},e.inertia=function(n,c){for(var a=0,f=0,r=n,t,o,h=0;h<r.length;h++)o=(h+1)%r.length,t=Math.abs(s.cross(r[o],r[h])),a+=t*(s.dot(r[o],r[o])+s.dot(r[o],r[h])+s.dot(r[h],r[h])),f+=t;return c/6*(a/f)},e.translate=function(n,c,a){a=typeof a!="undefined"?a:1;var f=n.length,r=c.x*a,t=c.y*a,o;for(o=0;o<f;o++)n[o].x+=r,n[o].y+=t;return n},e.rotate=function(n,c,a){if(c!==0){var f=Math.cos(c),r=Math.sin(c),t=a.x,o=a.y,h=n.length,m,x,k,w;for(w=0;w<h;w++)m=n[w],x=m.x-t,k=m.y-o,m.x=t+(x*f-k*r),m.y=o+(x*r+k*f);return n}},e.contains=function(n,c){for(var a=c.x,f=c.y,r=n.length,t=n[r-1],o,h=0;h<r;h++){if(o=n[h],(a-t.x)*(o.y-t.y)+(f-t.y)*(t.x-o.x)>0)return!1;t=o}return!0},e.scale=function(n,c,a,f){if(c===1&&a===1)return n;f=f||e.centre(n);for(var r,t,o=0;o<n.length;o++)r=n[o],t=s.sub(r,f),n[o].x=f.x+t.x*c,n[o].y=f.y+t.y*a;return n},e.chamfer=function(n,c,a,f,r){typeof c=="number"?c=[c]:c=c||[8],a=typeof a!="undefined"?a:-1,f=f||2,r=r||14;for(var t=[],o=0;o<n.length;o++){var h=n[o-1>=0?o-1:n.length-1],m=n[o],x=n[(o+1)%n.length],k=c[o<c.length?o:c.length-1];if(k===0){t.push(m);continue}var w=s.normalise({x:m.y-h.y,y:h.x-m.x}),v=s.normalise({x:x.y-m.y,y:m.x-x.x}),y=Math.sqrt(2*Math.pow(k,2)),S=s.mult(i.clone(w),k),d=s.normalise(s.mult(s.add(w,v),.5)),P=s.sub(m,s.mult(d,y)),I=a;a===-1&&(I=Math.pow(k,.32)*1.75),I=i.clamp(I,f,r),I%2===1&&(I+=1);for(var E=Math.acos(s.dot(w,v)),M=E/I,T=0;T<I;T++)t.push(s.add(s.rotate(S,M*T),P))}return t},e.clockwiseSort=function(n){var c=e.mean(n);return n.sort(function(a,f){return s.angle(c,a)-s.angle(c,f)}),n},e.isConvex=function(n){var c=0,a=n.length,f,r,t,o;if(a<3)return null;for(f=0;f<a;f++)if(r=(f+1)%a,t=(f+2)%a,o=(n[r].x-n[f].x)*(n[t].y-n[r].y),o-=(n[r].y-n[f].y)*(n[t].x-n[r].x),o<0?c|=1:o>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(n){var c=[],a=[],f,r;for(n=n.slice(0),n.sort(function(t,o){var h=t.x-o.x;return h!==0?h:t.y-o.y}),r=0;r<n.length;r+=1){for(f=n[r];a.length>=2&&s.cross3(a[a.length-2],a[a.length-1],f)<=0;)a.pop();a.push(f)}for(r=n.length-1;r>=0;r-=1){for(f=n[r];c.length>=2&&s.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),a.pop(),c.concat(a)}})()},function(g,C,u){var e={};g.exports=e;var s=u(0);(function(){e.on=function(i,n,c){for(var a=n.split(" "),f,r=0;r<a.length;r++)f=a[r],i.events=i.events||{},i.events[f]=i.events[f]||[],i.events[f].push(c);return c},e.off=function(i,n,c){if(!n){i.events={};return}typeof n=="function"&&(c=n,n=s.keys(i.events).join(" "));for(var a=n.split(" "),f=0;f<a.length;f++){var r=i.events[a[f]],t=[];if(c&&r)for(var o=0;o<r.length;o++)r[o]!==c&&t.push(r[o]);i.events[a[f]]=t}},e.trigger=function(i,n,c){var a,f,r,t,o=i.events;if(o&&s.keys(o).length>0){c||(c={}),a=n.split(" ");for(var h=0;h<a.length;h++)if(f=a[h],r=o[f],r){t=s.clone(c,!1),t.name=f,t.source=i;for(var m=0;m<r.length;m++)r[m].apply(i,[t])}}}})()},function(g,C,u){var e={};g.exports=e;var s=u(4),i=u(0),n=u(1),c=u(6);(function(){e.create=function(a){return i.extend({id:i.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},e.setModified=function(a,f,r,t){if(a.isModified=f,f&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),r&&a.parent&&e.setModified(a.parent,f,r,t),t)for(var o=0;o<a.composites.length;o++){var h=a.composites[o];e.setModified(h,f,r,t)}},e.add=function(a,f){var r=[].concat(f);s.trigger(a,"beforeAdd",{object:f});for(var t=0;t<r.length;t++){var o=r[t];switch(o.type){case"body":if(o.parent!==o){i.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(a,o);break;case"constraint":e.addConstraint(a,o);break;case"composite":e.addComposite(a,o);break;case"mouseConstraint":e.addConstraint(a,o.constraint);break}}return s.trigger(a,"afterAdd",{object:f}),a},e.remove=function(a,f,r){var t=[].concat(f);s.trigger(a,"beforeRemove",{object:f});for(var o=0;o<t.length;o++){var h=t[o];switch(h.type){case"body":e.removeBody(a,h,r);break;case"constraint":e.removeConstraint(a,h,r);break;case"composite":e.removeComposite(a,h,r);break;case"mouseConstraint":e.removeConstraint(a,h.constraint);break}}return s.trigger(a,"afterRemove",{object:f}),a},e.addComposite=function(a,f){return a.composites.push(f),f.parent=a,e.setModified(a,!0,!0,!1),a},e.removeComposite=function(a,f,r){var t=i.indexOf(a.composites,f);if(t!==-1&&e.removeCompositeAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeComposite(a.composites[o],f,!0);return a},e.removeCompositeAt=function(a,f){return a.composites.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addBody=function(a,f){return a.bodies.push(f),e.setModified(a,!0,!0,!1),a},e.removeBody=function(a,f,r){var t=i.indexOf(a.bodies,f);if(t!==-1&&e.removeBodyAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeBody(a.composites[o],f,!0);return a},e.removeBodyAt=function(a,f){return a.bodies.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addConstraint=function(a,f){return a.constraints.push(f),e.setModified(a,!0,!0,!1),a},e.removeConstraint=function(a,f,r){var t=i.indexOf(a.constraints,f);if(t!==-1&&e.removeConstraintAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeConstraint(a.composites[o],f,!0);return a},e.removeConstraintAt=function(a,f){return a.constraints.splice(f,1),e.setModified(a,!0,!0,!1),a},e.clear=function(a,f,r){if(r)for(var t=0;t<a.composites.length;t++)e.clear(a.composites[t],f,!0);return f?a.bodies=a.bodies.filter(function(o){return o.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,e.setModified(a,!0,!0,!1),a},e.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var f=[].concat(a.bodies),r=0;r<a.composites.length;r++)f=f.concat(e.allBodies(a.composites[r]));return a.cache&&(a.cache.allBodies=f),f},e.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var f=[].concat(a.constraints),r=0;r<a.composites.length;r++)f=f.concat(e.allConstraints(a.composites[r]));return a.cache&&(a.cache.allConstraints=f),f},e.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var f=[].concat(a.composites),r=0;r<a.composites.length;r++)f=f.concat(e.allComposites(a.composites[r]));return a.cache&&(a.cache.allComposites=f),f},e.get=function(a,f,r){var t,o;switch(r){case"body":t=e.allBodies(a);break;case"constraint":t=e.allConstraints(a);break;case"composite":t=e.allComposites(a).concat(a);break}return t?(o=t.filter(function(h){return h.id.toString()===f.toString()}),o.length===0?null:o[0]):null},e.move=function(a,f,r){return e.remove(a,f),e.add(r,f),a},e.rebase=function(a){for(var f=e.allBodies(a).concat(e.allConstraints(a)).concat(e.allComposites(a)),r=0;r<f.length;r++)f[r].id=i.nextId();return a},e.translate=function(a,f,r){for(var t=r?e.allBodies(a):a.bodies,o=0;o<t.length;o++)c.translate(t[o],f);return a},e.rotate=function(a,f,r,t){for(var o=Math.cos(f),h=Math.sin(f),m=t?e.allBodies(a):a.bodies,x=0;x<m.length;x++){var k=m[x],w=k.position.x-r.x,v=k.position.y-r.y;c.setPosition(k,{x:r.x+(w*o-v*h),y:r.y+(w*h+v*o)}),c.rotate(k,f)}return a},e.scale=function(a,f,r,t,o){for(var h=o?e.allBodies(a):a.bodies,m=0;m<h.length;m++){var x=h[m],k=x.position.x-t.x,w=x.position.y-t.y;c.setPosition(x,{x:t.x+k*f,y:t.y+w*r}),c.scale(x,f,r)}return a},e.bounds=function(a){for(var f=e.allBodies(a),r=[],t=0;t<f.length;t+=1){var o=f[t];r.push(o.bounds.min,o.bounds.max)}return n.create(r)}})()},function(g,C,u){var e={};g.exports=e;var s=u(3),i=u(2),n=u(7);u(16);var c=u(0),a=u(1),f=u(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var o={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},h=c.extend(o,t);return r(h,t),h},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,o){o=o||{},e.set(t,{bounds:t.bounds||a.create(t.vertices),positionPrev:t.positionPrev||i.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),a.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:o.axes||t.axes,area:o.area||t.area,mass:o.mass||t.mass,inertia:o.inertia||t.inertia});var h=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),m=t.isStatic?"#555":"#ccc",x=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||h,t.render.strokeStyle=t.render.strokeStyle||m,t.render.lineWidth=t.render.lineWidth||x,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,o,h){var m;typeof o=="string"&&(m=o,o={},o[m]=h);for(m in o)if(!!Object.prototype.hasOwnProperty.call(o,m))switch(h=o[m],m){case"isStatic":e.setStatic(t,h);break;case"isSleeping":n.set(t,h);break;case"mass":e.setMass(t,h);break;case"density":e.setDensity(t,h);break;case"inertia":e.setInertia(t,h);break;case"vertices":e.setVertices(t,h);break;case"position":e.setPosition(t,h);break;case"angle":e.setAngle(t,h);break;case"velocity":e.setVelocity(t,h);break;case"angularVelocity":e.setAngularVelocity(t,h);break;case"parts":e.setParts(t,h);break;case"centre":e.setCentre(t,h);break;default:t[m]=h}},e.setStatic=function(t,o){for(var h=0;h<t.parts.length;h++){var m=t.parts[h];m.isStatic=o,o?(m._original={restitution:m.restitution,friction:m.friction,mass:m.mass,inertia:m.inertia,density:m.density,inverseMass:m.inverseMass,inverseInertia:m.inverseInertia},m.restitution=0,m.friction=1,m.mass=m.inertia=m.density=1/0,m.inverseMass=m.inverseInertia=0,m.positionPrev.x=m.position.x,m.positionPrev.y=m.position.y,m.anglePrev=m.angle,m.angularVelocity=0,m.speed=0,m.angularSpeed=0,m.motion=0):m._original&&(m.restitution=m._original.restitution,m.friction=m._original.friction,m.mass=m._original.mass,m.inertia=m._original.inertia,m.density=m._original.density,m.inverseMass=m._original.inverseMass,m.inverseInertia=m._original.inverseInertia,m._original=null)}},e.setMass=function(t,o){var h=t.inertia/(t.mass/6);t.inertia=h*(o/6),t.inverseInertia=1/t.inertia,t.mass=o,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,o){e.setMass(t,o*t.area),t.density=o},e.setInertia=function(t,o){t.inertia=o,t.inverseInertia=1/t.inertia},e.setVertices=function(t,o){o[0].body===t?t.vertices=o:t.vertices=s.create(o,t),t.axes=f.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var h=s.centre(t.vertices);s.translate(t.vertices,h,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),a.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,o,h){var m;for(o=o.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,m=0;m<o.length;m++){var x=o[m];x!==t&&(x.parent=t,t.parts.push(x))}if(t.parts.length!==1){if(h=typeof h!="undefined"?h:!0,h){var k=[];for(m=0;m<o.length;m++)k=k.concat(o[m].vertices);s.clockwiseSort(k);var w=s.hull(k),v=s.centre(w);e.setVertices(t,w),s.translate(t.vertices,v)}var y=e._totalProperties(t);t.area=y.area,t.parent=t,t.position.x=y.centre.x,t.position.y=y.centre.y,t.positionPrev.x=y.centre.x,t.positionPrev.y=y.centre.y,e.setMass(t,y.mass),e.setInertia(t,y.inertia),e.setPosition(t,y.centre)}},e.setCentre=function(t,o,h){h?(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y,t.position.x+=o.x,t.position.y+=o.y):(t.positionPrev.x=o.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=o.y-(t.position.y-t.positionPrev.y),t.position.x=o.x,t.position.y=o.y)},e.setPosition=function(t,o){var h=i.sub(o,t.position);t.positionPrev.x+=h.x,t.positionPrev.y+=h.y;for(var m=0;m<t.parts.length;m++){var x=t.parts[m];x.position.x+=h.x,x.position.y+=h.y,s.translate(x.vertices,h),a.update(x.bounds,x.vertices,t.velocity)}},e.setAngle=function(t,o){var h=o-t.angle;t.anglePrev+=h;for(var m=0;m<t.parts.length;m++){var x=t.parts[m];x.angle+=h,s.rotate(x.vertices,h,t.position),f.rotate(x.axes,h),a.update(x.bounds,x.vertices,t.velocity),m>0&&i.rotateAbout(x.position,h,t.position,x.position)}},e.setVelocity=function(t,o){t.positionPrev.x=t.position.x-o.x,t.positionPrev.y=t.position.y-o.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=i.magnitude(t.velocity)},e.setAngularVelocity=function(t,o){t.anglePrev=t.angle-o,t.angularVelocity=o,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,o){e.setPosition(t,i.add(t.position,o))},e.rotate=function(t,o,h){if(!h)e.setAngle(t,t.angle+o);else{var m=Math.cos(o),x=Math.sin(o),k=t.position.x-h.x,w=t.position.y-h.y;e.setPosition(t,{x:h.x+(k*m-w*x),y:h.y+(k*x+w*m)}),e.setAngle(t,t.angle+o)}},e.scale=function(t,o,h,m){var x=0,k=0;m=m||t.position;for(var w=0;w<t.parts.length;w++){var v=t.parts[w];s.scale(v.vertices,o,h,m),v.axes=f.fromVertices(v.vertices),v.area=s.area(v.vertices),e.setMass(v,t.density*v.area),s.translate(v.vertices,{x:-v.position.x,y:-v.position.y}),e.setInertia(v,e._inertiaScale*s.inertia(v.vertices,v.mass)),s.translate(v.vertices,{x:v.position.x,y:v.position.y}),w>0&&(x+=v.area,k+=v.inertia),v.position.x=m.x+(v.position.x-m.x)*o,v.position.y=m.y+(v.position.y-m.y)*h,a.update(v.bounds,v.vertices,t.velocity)}t.parts.length>1&&(t.area=x,t.isStatic||(e.setMass(t,t.density*x),e.setInertia(t,k))),t.circleRadius&&(o===h?t.circleRadius*=o:t.circleRadius=null)},e.update=function(t,o,h,m){var x=Math.pow(o*h*t.timeScale,2),k=1-t.frictionAir*h*t.timeScale,w=t.position.x-t.positionPrev.x,v=t.position.y-t.positionPrev.y;t.velocity.x=w*k*m+t.force.x/t.mass*x,t.velocity.y=v*k*m+t.force.y/t.mass*x,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*k*m+t.torque/t.inertia*x,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=i.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var y=0;y<t.parts.length;y++){var S=t.parts[y];s.translate(S.vertices,t.velocity),y>0&&(S.position.x+=t.velocity.x,S.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(S.vertices,t.angularVelocity,t.position),f.rotate(S.axes,t.angularVelocity),y>0&&i.rotateAbout(S.position,t.angularVelocity,t.position,S.position)),a.update(S.bounds,S.vertices,t.velocity)}},e.applyForce=function(t,o,h){t.force.x+=h.x,t.force.y+=h.y;var m={x:o.x-t.position.x,y:o.y-t.position.y};t.torque+=m.x*h.y-m.y*h.x},e._totalProperties=function(t){for(var o={mass:0,area:0,inertia:0,centre:{x:0,y:0}},h=t.parts.length===1?0:1;h<t.parts.length;h++){var m=t.parts[h],x=m.mass!==1/0?m.mass:1;o.mass+=x,o.area+=m.area,o.inertia+=m.inertia,o.centre=i.add(o.centre,i.mult(m.position,x))}return o.centre=i.div(o.centre,o.mass),o}})()},function(g,C,u){var e={};g.exports=e;var s=u(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(i,n){for(var c=n*n*n,a=0;a<i.length;a++){var f=i[a],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,r),o=Math.max(f.motion,r);f.motion=e._minBias*t+(1-e._minBias)*o,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(i,n){for(var c=n*n*n,a=0;a<i.length;a++){var f=i[a];if(!!f.isActive){var r=f.collision,t=r.bodyA.parent,o=r.bodyB.parent;if(!(t.isSleeping&&o.isSleeping||t.isStatic||o.isStatic)&&(t.isSleeping||o.isSleeping)){var h=t.isSleeping&&!t.isStatic?t:o,m=h===t?o:t;!h.isStatic&&m.motion>e._motionWakeThreshold*c&&e.set(h,!1)}}}},e.set=function(i,n){var c=i.isSleeping;n?(i.isSleeping=!0,i.sleepCounter=i.sleepThreshold,i.positionImpulse.x=0,i.positionImpulse.y=0,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.anglePrev=i.angle,i.speed=0,i.angularSpeed=0,i.motion=0,c||s.trigger(i,"sleepStart")):(i.isSleeping=!1,i.sleepCounter=0,c&&s.trigger(i,"sleepEnd"))}})()},function(g,C,u){var e={};g.exports=e;var s=u(3),i=u(9);(function(){var n=[],c={overlap:0,axis:null},a={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,t){if(e._overlapAxes(c,f.vertices,r.vertices,f.axes),c.overlap<=0||(e._overlapAxes(a,r.vertices,f.vertices,r.axes),a.overlap<=0))return null;var o=t&&t.table[i.id(f,r)],h;o?h=o.collision:(h=e.create(f,r),h.collided=!0,h.bodyA=f.id<r.id?f:r,h.bodyB=f.id<r.id?r:f,h.parentA=h.bodyA.parent,h.parentB=h.bodyB.parent),f=h.bodyA,r=h.bodyB;var m;c.overlap<a.overlap?m=c:m=a;var x=h.normal,k=h.supports,w=m.axis,v=w.x,y=w.y;v*(r.position.x-f.position.x)+y*(r.position.y-f.position.y)<0?(x.x=v,x.y=y):(x.x=-v,x.y=-y),h.tangent.x=-x.y,h.tangent.y=x.x,h.depth=m.overlap,h.penetration.x=x.x*h.depth,h.penetration.y=x.y*h.depth;var S=e._findSupports(f,r,x,1),d=0;if(s.contains(f.vertices,S[0])&&(k[d++]=S[0]),s.contains(f.vertices,S[1])&&(k[d++]=S[1]),d<2){var P=e._findSupports(r,f,x,-1);s.contains(r.vertices,P[0])&&(k[d++]=P[0]),d<2&&s.contains(r.vertices,P[1])&&(k[d++]=P[1])}return d===0&&(k[d++]=S[0]),k.length=d,h},e._overlapAxes=function(f,r,t,o){var h=r.length,m=t.length,x=r[0].x,k=r[0].y,w=t[0].x,v=t[0].y,y=o.length,S=Number.MAX_VALUE,d=0,P,I,E,M,T,A;for(T=0;T<y;T++){var H=o[T],D=H.x,R=H.y,z=x*D+k*R,B=w*D+v*R,W=z,L=B;for(A=1;A<h;A+=1)M=r[A].x*D+r[A].y*R,M>W?W=M:M<z&&(z=M);for(A=1;A<m;A+=1)M=t[A].x*D+t[A].y*R,M>L?L=M:M<B&&(B=M);if(I=W-B,E=L-z,P=I<E?I:E,P<S&&(S=P,d=T,P<=0))break}f.axis=o[d],f.overlap=S},e._projectToAxis=function(f,r,t){for(var o=r[0].x*t.x+r[0].y*t.y,h=o,m=1;m<r.length;m+=1){var x=r[m].x*t.x+r[m].y*t.y;x>h?h=x:x<o&&(o=x)}f.min=o,f.max=h},e._findSupports=function(f,r,t,o){var h=r.vertices,m=h.length,x=f.position.x,k=f.position.y,w=t.x*o,v=t.y*o,y=Number.MAX_VALUE,S,d,P,I,E;for(E=0;E<m;E+=1)d=h[E],I=w*(x-d.x)+v*(k-d.y),I<y&&(y=I,S=d);return P=h[(m+S.index-1)%m],y=w*(x-P.x)+v*(k-P.y),d=h[(S.index+1)%m],w*(x-d.x)+v*(k-d.y)<y?(n[0]=S,n[1]=d,n):(n[0]=S,n[1]=P,n)}})()},function(g,C,u){var e={};g.exports=e;var s=u(17);(function(){e.create=function(i,n){var c=i.bodyA,a=i.bodyB,f={id:e.id(c,a),bodyA:c,bodyB:a,collision:i,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||a.isSensor,timeCreated:n,timeUpdated:n,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,i,n),f},e.update=function(i,n,c){var a=i.contacts,f=n.supports,r=i.activeContacts,t=n.parentA,o=n.parentB,h=t.vertices.length;i.isActive=!0,i.timeUpdated=c,i.collision=n,i.separation=n.depth,i.inverseMass=t.inverseMass+o.inverseMass,i.friction=t.friction<o.friction?t.friction:o.friction,i.frictionStatic=t.frictionStatic>o.frictionStatic?t.frictionStatic:o.frictionStatic,i.restitution=t.restitution>o.restitution?t.restitution:o.restitution,i.slop=t.slop>o.slop?t.slop:o.slop,n.pair=i,r.length=0;for(var m=0;m<f.length;m++){var x=f[m],k=x.body===t?x.index:h+x.index,w=a[k];w?r.push(w):r.push(a[k]=s.create(x))}},e.setActive=function(i,n,c){n?(i.isActive=!0,i.timeUpdated=c):(i.isActive=!1,i.activeContacts.length=0)},e.id=function(i,n){return i.id<n.id?"A"+i.id+"B"+n.id:"A"+n.id+"B"+i.id}})()},function(g,C,u){var e={};g.exports=e;var s=u(3),i=u(2),n=u(7),c=u(1),a=u(11),f=u(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var o=t.bodyA?i.add(t.bodyA.position,t.pointA):t.pointA,h=t.bodyB?i.add(t.bodyB.position,t.pointB):t.pointB,m=i.magnitude(i.sub(o,h));t.length=typeof t.length!="undefined"?t.length:m,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var x={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(x.type="pin",x.anchors=!1):t.stiffness<.9&&(x.type="spring"),t.render=f.extend(x,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var o=r[t],h=o.constraintImpulse;o.isStatic||h.x===0&&h.y===0&&h.angle===0||(o.position.x+=h.x,o.position.y+=h.y,o.angle+=h.angle)}},e.solveAll=function(r,t){for(var o=0;o<r.length;o+=1){var h=r[o],m=!h.bodyA||h.bodyA&&h.bodyA.isStatic,x=!h.bodyB||h.bodyB&&h.bodyB.isStatic;(m||x)&&e.solve(r[o],t)}for(o=0;o<r.length;o+=1)h=r[o],m=!h.bodyA||h.bodyA&&h.bodyA.isStatic,x=!h.bodyB||h.bodyB&&h.bodyB.isStatic,!m&&!x&&e.solve(r[o],t)},e.solve=function(r,t){var o=r.bodyA,h=r.bodyB,m=r.pointA,x=r.pointB;if(!(!o&&!h)){o&&!o.isStatic&&(i.rotate(m,o.angle-r.angleA,m),r.angleA=o.angle),h&&!h.isStatic&&(i.rotate(x,h.angle-r.angleB,x),r.angleB=h.angle);var k=m,w=x;if(o&&(k=i.add(o.position,m)),h&&(w=i.add(h.position,x)),!(!k||!w)){var v=i.sub(k,w),y=i.magnitude(v);y<e._minLength&&(y=e._minLength);var S=(y-r.length)/y,d=r.stiffness<1?r.stiffness*t:r.stiffness,P=i.mult(v,S*d),I=(o?o.inverseMass:0)+(h?h.inverseMass:0),E=(o?o.inverseInertia:0)+(h?h.inverseInertia:0),M=I+E,T,A,H,D,R;if(r.damping){var z=i.create();H=i.div(v,y),R=i.sub(h&&i.sub(h.position,h.positionPrev)||z,o&&i.sub(o.position,o.positionPrev)||z),D=i.dot(H,R)}o&&!o.isStatic&&(A=o.inverseMass/I,o.constraintImpulse.x-=P.x*A,o.constraintImpulse.y-=P.y*A,o.position.x-=P.x*A,o.position.y-=P.y*A,r.damping&&(o.positionPrev.x-=r.damping*H.x*D*A,o.positionPrev.y-=r.damping*H.y*D*A),T=i.cross(m,P)/M*e._torqueDampen*o.inverseInertia*(1-r.angularStiffness),o.constraintImpulse.angle-=T,o.angle-=T),h&&!h.isStatic&&(A=h.inverseMass/I,h.constraintImpulse.x+=P.x*A,h.constraintImpulse.y+=P.y*A,h.position.x+=P.x*A,h.position.y+=P.y*A,r.damping&&(h.positionPrev.x+=r.damping*H.x*D*A,h.positionPrev.y+=r.damping*H.y*D*A),T=i.cross(x,P)/M*e._torqueDampen*h.inverseInertia*(1-r.angularStiffness),h.constraintImpulse.angle+=T,h.angle+=T)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var o=r[t],h=o.constraintImpulse;if(!(o.isStatic||h.x===0&&h.y===0&&h.angle===0)){n.set(o,!1);for(var m=0;m<o.parts.length;m++){var x=o.parts[m];s.translate(x.vertices,h),m>0&&(x.position.x+=h.x,x.position.y+=h.y),h.angle!==0&&(s.rotate(x.vertices,h.angle,o.position),a.rotate(x.axes,h.angle),m>0&&i.rotateAbout(x.position,h.angle,o.position,x.position)),c.update(x.bounds,x.vertices,o.velocity)}h.angle*=e._warming,h.x*=e._warming,h.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(g,C,u){var e={};g.exports=e;var s=u(2),i=u(0);(function(){e.fromVertices=function(n){for(var c={},a=0;a<n.length;a++){var f=(a+1)%n.length,r=s.normalise({x:n[f].y-n[a].y,y:n[a].x-n[f].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),c[t]=r}return i.values(c)},e.rotate=function(n,c){if(c!==0)for(var a=Math.cos(c),f=Math.sin(c),r=0;r<n.length;r++){var t=n[r],o;o=t.x*a-t.y*f,t.y=t.x*f+t.y*a,t.x=o}}})()},function(g,C,u){var e={};g.exports=e;var s=u(3),i=u(0),n=u(6),c=u(1),a=u(2);(function(){e.rectangle=function(f,r,t,o,h){h=h||{};var m={label:"Rectangle Body",position:{x:f,y:r},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+o+" L 0 "+o)};if(h.chamfer){var x=h.chamfer;m.vertices=s.chamfer(m.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete h.chamfer}return n.create(i.extend({},m,h))},e.trapezoid=function(f,r,t,o,h,m){m=m||{},h*=.5;var x=(1-h*2)*t,k=t*h,w=k+x,v=w+k,y;h<.5?y="L 0 0 L "+k+" "+-o+" L "+w+" "+-o+" L "+v+" 0":y="L 0 0 L "+w+" "+-o+" L "+v+" 0";var S={label:"Trapezoid Body",position:{x:f,y:r},vertices:s.fromPath(y)};if(m.chamfer){var d=m.chamfer;S.vertices=s.chamfer(S.vertices,d.radius,d.quality,d.qualityMin,d.qualityMax),delete m.chamfer}return n.create(i.extend({},S,m))},e.circle=function(f,r,t,o,h){o=o||{};var m={label:"Circle Body",circleRadius:t};h=h||25;var x=Math.ceil(Math.max(10,Math.min(h,t)));return x%2===1&&(x+=1),e.polygon(f,r,x,t,i.extend({},m,o))},e.polygon=function(f,r,t,o,h){if(h=h||{},t<3)return e.circle(f,r,o,h);for(var m=2*Math.PI/t,x="",k=m*.5,w=0;w<t;w+=1){var v=k+w*m,y=Math.cos(v)*o,S=Math.sin(v)*o;x+="L "+y.toFixed(3)+" "+S.toFixed(3)+" "}var d={label:"Polygon Body",position:{x:f,y:r},vertices:s.fromPath(x)};if(h.chamfer){var P=h.chamfer;d.vertices=s.chamfer(d.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete h.chamfer}return n.create(i.extend({},d,h))},e.fromVertices=function(f,r,t,o,h,m,x,k){var w=i.getDecomp(),v,y,S,d,P,I,E,M,T,A,H;for(v=Boolean(w&&w.quickDecomp),o=o||{},S=[],h=typeof h!="undefined"?h:!1,m=typeof m!="undefined"?m:.01,x=typeof x!="undefined"?x:10,k=typeof k!="undefined"?k:.01,i.isArray(t[0])||(t=[t]),A=0;A<t.length;A+=1)if(I=t[A],d=s.isConvex(I),P=!d,P&&!v&&i.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),d||!v)d?I=s.clockwiseSort(I):I=s.hull(I),S.push({position:{x:f,y:r},vertices:I});else{var D=I.map(function(re){return[re.x,re.y]});w.makeCCW(D),m!==!1&&w.removeCollinearPoints(D,m),k!==!1&&w.removeDuplicatePoints&&w.removeDuplicatePoints(D,k);var R=w.quickDecomp(D);for(E=0;E<R.length;E++){var z=R[E],B=z.map(function(re){return{x:re[0],y:re[1]}});x>0&&s.area(B)<x||S.push({position:s.centre(B),vertices:B})}}for(E=0;E<S.length;E++)S[E]=n.create(i.extend(S[E],o));if(h){var W=5;for(E=0;E<S.length;E++){var L=S[E];for(M=E+1;M<S.length;M++){var Y=S[M];if(c.overlaps(L.bounds,Y.bounds)){var $=L.vertices,J=Y.vertices;for(T=0;T<L.vertices.length;T++)for(H=0;H<Y.vertices.length;H++){var he=a.magnitudeSquared(a.sub($[(T+1)%$.length],J[H])),se=a.magnitudeSquared(a.sub($[T],J[(H+1)%J.length]));he<W&&se<W&&($[T].isInternal=!0,J[H].isInternal=!0)}}}}}return S.length>1?(y=n.create(i.extend({parts:S.slice(0)},o)),n.setPosition(y,{x:f,y:r}),y):S[0]}})()},function(g,C,u){var e={};g.exports=e;var s=u(0);(function(){e.create=function(i){var n={};return i||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),n.element=i||document.body,n.absolute={x:0,y:0},n.position={x:0,y:0},n.mousedownPosition={x:0,y:0},n.mouseupPosition={x:0,y:0},n.offset={x:0,y:0},n.scale={x:1,y:1},n.wheelDelta=0,n.button=-1,n.pixelRatio=parseInt(n.element.getAttribute("data-pixel-ratio"),10)||1,n.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},n.mousemove=function(c){var a=e._getRelativeMousePosition(c,n.element,n.pixelRatio),f=c.changedTouches;f&&(n.button=0,c.preventDefault()),n.absolute.x=a.x,n.absolute.y=a.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.sourceEvents.mousemove=c},n.mousedown=function(c){var a=e._getRelativeMousePosition(c,n.element,n.pixelRatio),f=c.changedTouches;f?(n.button=0,c.preventDefault()):n.button=c.button,n.absolute.x=a.x,n.absolute.y=a.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mousedownPosition.x=n.position.x,n.mousedownPosition.y=n.position.y,n.sourceEvents.mousedown=c},n.mouseup=function(c){var a=e._getRelativeMousePosition(c,n.element,n.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),n.button=-1,n.absolute.x=a.x,n.absolute.y=a.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y,n.mouseupPosition.x=n.position.x,n.mouseupPosition.y=n.position.y,n.sourceEvents.mouseup=c},n.mousewheel=function(c){n.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(n,n.element),n},e.setElement=function(i,n){i.element=n,n.addEventListener("mousemove",i.mousemove),n.addEventListener("mousedown",i.mousedown),n.addEventListener("mouseup",i.mouseup),n.addEventListener("mousewheel",i.mousewheel),n.addEventListener("DOMMouseScroll",i.mousewheel),n.addEventListener("touchmove",i.mousemove),n.addEventListener("touchstart",i.mousedown),n.addEventListener("touchend",i.mouseup)},e.clearSourceEvents=function(i){i.sourceEvents.mousemove=null,i.sourceEvents.mousedown=null,i.sourceEvents.mouseup=null,i.sourceEvents.mousewheel=null,i.wheelDelta=0},e.setOffset=function(i,n){i.offset.x=n.x,i.offset.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e.setScale=function(i,n){i.scale.x=n.x,i.scale.y=n.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y},e._getRelativeMousePosition=function(i,n,c){var a=n.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,o=i.changedTouches,h,m;return o?(h=o[0].pageX-a.left-r,m=o[0].pageY-a.top-t):(h=i.pageX-a.left-r,m=i.pageY-a.top-t),{x:h/(n.clientWidth/(n.width||n.clientWidth)*c),y:m/(n.clientHeight/(n.height||n.clientHeight)*c)}}})()},function(g,C,u){var e={};g.exports=e;var s=u(0),i=u(8);(function(){e.create=function(n){var c={bodies:[],pairs:null};return s.extend(c,n)},e.setBodies=function(n,c){n.bodies=c.slice(0)},e.clear=function(n){n.bodies=[]},e.collisions=function(n){var c=[],a=n.pairs,f=n.bodies,r=f.length,t=e.canCollide,o=i.collides,h,m;for(f.sort(e._compareBoundsX),h=0;h<r;h++){var x=f[h],k=x.bounds,w=x.bounds.max.x,v=x.bounds.max.y,y=x.bounds.min.y,S=x.isStatic||x.isSleeping,d=x.parts.length,P=d===1;for(m=h+1;m<r;m++){var I=f[m],E=I.bounds;if(E.min.x>w)break;if(!(v<E.min.y||y>E.max.y)&&!(S&&(I.isStatic||I.isSleeping))&&!!t(x.collisionFilter,I.collisionFilter)){var M=I.parts.length;if(P&&M===1){var T=o(x,I,a);T&&c.push(T)}else for(var A=d>1?1:0,H=M>1?1:0,D=A;D<d;D++)for(var R=x.parts[D],k=R.bounds,z=H;z<M;z++){var B=I.parts[z],E=B.bounds;if(!(k.min.x>E.max.x||k.max.x<E.min.x||k.max.y<E.min.y||k.min.y>E.max.y)){var T=o(R,B,a);T&&c.push(T)}}}}}return c},e.canCollide=function(n,c){return n.group===c.group&&n.group!==0?n.group>0:(n.mask&c.category)!==0&&(c.mask&n.category)!==0},e._compareBoundsX=function(n,c){return n.bounds.min.x-c.bounds.min.x}})()},function(g,C,u){var e={};g.exports=e;var s=u(0);(function(){e._registry={},e.register=function(i){if(e.isPlugin(i)||s.warn("Plugin.register:",e.toString(i),"does not implement all required fields."),i.name in e._registry){var n=e._registry[i.name],c=e.versionParse(i.version).number,a=e.versionParse(n.version).number;c>a?(s.warn("Plugin.register:",e.toString(n),"was upgraded to",e.toString(i)),e._registry[i.name]=i):c<a?s.warn("Plugin.register:",e.toString(n),"can not be downgraded to",e.toString(i)):i!==n&&s.warn("Plugin.register:",e.toString(i),"is already registered to different plugin object")}else e._registry[i.name]=i;return i},e.resolve=function(i){return e._registry[e.dependencyParse(i).name]},e.toString=function(i){return typeof i=="string"?i:(i.name||"anonymous")+"@"+(i.version||i.range||"0.0.0")},e.isPlugin=function(i){return i&&i.name&&i.version&&i.install},e.isUsed=function(i,n){return i.used.indexOf(n)>-1},e.isFor=function(i,n){var c=i.for&&e.dependencyParse(i.for);return!i.for||n.name===c.name&&e.versionSatisfies(n.version,c.range)},e.use=function(i,n){if(i.uses=(i.uses||[]).concat(n||[]),i.uses.length===0){s.warn("Plugin.use:",e.toString(i),"does not specify any dependencies to install.");return}for(var c=e.dependencies(i),a=s.topologicalSort(c),f=[],r=0;r<a.length;r+=1)if(a[r]!==i.name){var t=e.resolve(a[r]);if(!t){f.push("\u274C "+a[r]);continue}e.isUsed(i,t.name)||(e.isFor(t,i)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(i)+"."),t._warned=!0),t.install?t.install(i):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),i.used.push(t.name))}f.length>0&&s.info(f.join("  "))},e.dependencies=function(i,n){var c=e.dependencyParse(i),a=c.name;if(n=n||{},!(a in n)){i=e.resolve(i)||i,n[a]=s.map(i.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),o=e.resolve(r);return o&&!e.versionSatisfies(o.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(o),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),o._warned=!0,i._warned=!0):o||(s.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(c),"could not be resolved."),i._warned=!0),t.name});for(var f=0;f<n[a].length;f+=1)e.dependencies(n[a][f],n);return n}},e.dependencyParse=function(i){if(s.isString(i)){var n=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return n.test(i)||s.warn("Plugin.dependencyParse:",i,"is not a valid dependency string."),{name:i.split("@")[0],range:i.split("@")[1]||"*"}}return{name:i.name,range:i.range||i.version}},e.versionParse=function(i){var n=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;n.test(i)||s.warn("Plugin.versionParse:",i,"is not a valid version or range.");var c=n.exec(i),a=Number(c[4]),f=Number(c[5]),r=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:i,operator:c[1]||c[2]||"",major:a,minor:f,patch:r,parts:[a,f,r],prerelease:c[7],number:a*1e8+f*1e4+r}},e.versionSatisfies=function(i,n){n=n||"*";var c=e.versionParse(n),a=e.versionParse(i);if(c.isRange){if(c.operator==="*"||i==="*")return!0;if(c.operator===">")return a.number>c.number;if(c.operator===">=")return a.number>=c.number;if(c.operator==="~")return a.major===c.major&&a.minor===c.minor&&a.patch>=c.patch;if(c.operator==="^")return c.major>0?a.major===c.major&&a.number>=c.number:c.minor>0?a.minor===c.minor&&a.patch>=c.patch:a.patch===c.patch}return i===n||i==="*"}})()},function(g,C,u){var e={};g.exports=e;var s=u(0),i=u(5),n=u(1),c=u(4),a=u(2),f=u(13);(function(){var r,t;typeof window!="undefined"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(s.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(v){var y={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},S=s.extend(y,v);return S.canvas&&(S.canvas.width=S.options.width||S.canvas.width,S.canvas.height=S.options.height||S.canvas.height),S.mouse=v.mouse,S.engine=v.engine,S.canvas=S.canvas||m(S.options.width,S.options.height),S.context=S.canvas.getContext("2d"),S.textures={},S.bounds=S.bounds||{min:{x:0,y:0},max:{x:S.canvas.width,y:S.canvas.height}},S.options.showBroadphase=!1,S.options.pixelRatio!==1&&e.setPixelRatio(S,S.options.pixelRatio),s.isElement(S.element)?S.element.appendChild(S.canvas):S.canvas.parentNode||s.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),S},e.run=function(v){(function y(S){v.frameRequestId=r(y),o(v,S),e.world(v,S),(v.options.showStats||v.options.showDebug)&&e.stats(v,v.context,S),(v.options.showPerformance||v.options.showDebug)&&e.performance(v,v.context,S)})()},e.stop=function(v){t(v.frameRequestId)},e.setPixelRatio=function(v,y){var S=v.options,d=v.canvas;y==="auto"&&(y=x(d)),S.pixelRatio=y,d.setAttribute("data-pixel-ratio",y),d.width=S.width*y,d.height=S.height*y,d.style.width=S.width+"px",d.style.height=S.height+"px"},e.lookAt=function(v,y,S,d){d=typeof d!="undefined"?d:!0,y=s.isArray(y)?y:[y],S=S||{x:0,y:0};for(var P={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},I=0;I<y.length;I+=1){var E=y[I],M=E.bounds?E.bounds.min:E.min||E.position||E,T=E.bounds?E.bounds.max:E.max||E.position||E;M&&T&&(M.x<P.min.x&&(P.min.x=M.x),T.x>P.max.x&&(P.max.x=T.x),M.y<P.min.y&&(P.min.y=M.y),T.y>P.max.y&&(P.max.y=T.y))}var A=P.max.x-P.min.x+2*S.x,H=P.max.y-P.min.y+2*S.y,D=v.canvas.height,R=v.canvas.width,z=R/D,B=A/H,W=1,L=1;B>z?L=B/z:W=z/B,v.options.hasBounds=!0,v.bounds.min.x=P.min.x,v.bounds.max.x=P.min.x+A*W,v.bounds.min.y=P.min.y,v.bounds.max.y=P.min.y+H*L,d&&(v.bounds.min.x+=A*.5-A*W*.5,v.bounds.max.x+=A*.5-A*W*.5,v.bounds.min.y+=H*.5-H*L*.5,v.bounds.max.y+=H*.5-H*L*.5),v.bounds.min.x-=S.x,v.bounds.max.x-=S.x,v.bounds.min.y-=S.y,v.bounds.max.y-=S.y,v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),f.setOffset(v.mouse,v.bounds.min))},e.startViewTransform=function(v){var y=v.bounds.max.x-v.bounds.min.x,S=v.bounds.max.y-v.bounds.min.y,d=y/v.options.width,P=S/v.options.height;v.context.setTransform(v.options.pixelRatio/d,0,0,v.options.pixelRatio/P,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},e.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},e.world=function(v,y){var S=s.now(),d=v.engine,P=d.world,I=v.canvas,E=v.context,M=v.options,T=v.timing,A=i.allBodies(P),H=i.allConstraints(P),D=M.wireframes?M.wireframeBackground:M.background,R=[],z=[],B,W={timestamp:d.timing.timestamp};if(c.trigger(v,"beforeRender",W),v.currentBackground!==D&&w(v,D),E.globalCompositeOperation="source-in",E.fillStyle="transparent",E.fillRect(0,0,I.width,I.height),E.globalCompositeOperation="source-over",M.hasBounds){for(B=0;B<A.length;B++){var L=A[B];n.overlaps(L.bounds,v.bounds)&&R.push(L)}for(B=0;B<H.length;B++){var Y=H[B],$=Y.bodyA,J=Y.bodyB,he=Y.pointA,se=Y.pointB;$&&(he=a.add($.position,Y.pointA)),J&&(se=a.add(J.position,Y.pointB)),!(!he||!se)&&(n.contains(v.bounds,he)||n.contains(v.bounds,se))&&z.push(Y)}e.startViewTransform(v),v.mouse&&(f.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),f.setOffset(v.mouse,v.bounds.min))}else z=H,R=A,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!M.wireframes||d.enableSleeping&&M.showSleeping?e.bodies(v,R,E):(M.showConvexHulls&&e.bodyConvexHulls(v,R,E),e.bodyWireframes(v,R,E)),M.showBounds&&e.bodyBounds(v,R,E),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(v,R,E),M.showPositions&&e.bodyPositions(v,R,E),M.showVelocity&&e.bodyVelocity(v,R,E),M.showIds&&e.bodyIds(v,R,E),M.showSeparations&&e.separations(v,d.pairs.list,E),M.showCollisions&&e.collisions(v,d.pairs.list,E),M.showVertexNumbers&&e.vertexNumbers(v,R,E),M.showMousePosition&&e.mousePosition(v,v.mouse,E),e.constraints(z,E),M.hasBounds&&e.endViewTransform(v),c.trigger(v,"afterRender",W),T.lastElapsed=s.now()-S},e.stats=function(v,y,S){for(var d=v.engine,P=d.world,I=i.allBodies(P),E=0,M=55,T=44,A=0,H=0,D=0;D<I.length;D+=1)E+=I[D].parts.length;var R={Part:E,Body:I.length,Cons:i.allConstraints(P).length,Comp:i.allComposites(P).length,Pair:d.pairs.list.length};y.fillStyle="#0e0f19",y.fillRect(A,H,M*5.5,T),y.font="12px Arial",y.textBaseline="top",y.textAlign="right";for(var z in R){var B=R[z];y.fillStyle="#aaa",y.fillText(z,A+M,H+8),y.fillStyle="#eee",y.fillText(B,A+M,H+26),A+=M}},e.performance=function(v,y){var S=v.engine,d=v.timing,P=d.deltaHistory,I=d.elapsedHistory,E=d.timestampElapsedHistory,M=d.engineDeltaHistory,T=d.engineElapsedHistory,A=S.timing.lastDelta,H=h(P),D=h(I),R=h(M),z=h(T),B=h(E),W=B/H||0,L=1e3/H||0,Y=4,$=12,J=60,he=34,se=10,re=69;y.fillStyle="#0e0f19",y.fillRect(0,50,$*4+J*5+22,he),e.status(y,se,re,J,Y,P.length,Math.round(L)+" fps",L/e._goodFps,function(ae){return P[ae]/H-1}),e.status(y,se+$+J,re,J,Y,M.length,A.toFixed(2)+" dt",e._goodDelta/A,function(ae){return M[ae]/R-1}),e.status(y,se+($+J)*2,re,J,Y,T.length,z.toFixed(2)+" ut",1-z/e._goodFps,function(ae){return T[ae]/z-1}),e.status(y,se+($+J)*3,re,J,Y,I.length,D.toFixed(2)+" rt",1-D/e._goodFps,function(ae){return I[ae]/D-1}),e.status(y,se+($+J)*4,re,J,Y,E.length,W.toFixed(2)+" x",W*W*W,function(ae){return(E[ae]/P[ae]/W||0)-1})},e.status=function(v,y,S,d,P,I,E,M,T){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(y,S+7,d,1),v.beginPath(),v.moveTo(y,S+7-P*s.clamp(.4*T(0),-2,2));for(var A=0;A<d;A+=1)v.lineTo(y+A,S+7-(A<I?P*s.clamp(.4*T(A),-2,2):0));v.stroke(),v.fillStyle="hsl("+s.clamp(25+95*M,0,120)+",100%,60%)",v.fillRect(y,S-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(E,y+d,S-5)},e.constraints=function(v,y){for(var S=y,d=0;d<v.length;d++){var P=v[d];if(!(!P.render.visible||!P.pointA||!P.pointB)){var I=P.bodyA,E=P.bodyB,M,T;if(I?M=a.add(I.position,P.pointA):M=P.pointA,P.render.type==="pin")S.beginPath(),S.arc(M.x,M.y,3,0,2*Math.PI),S.closePath();else{if(E?T=a.add(E.position,P.pointB):T=P.pointB,S.beginPath(),S.moveTo(M.x,M.y),P.render.type==="spring")for(var A=a.sub(T,M),H=a.perp(a.normalise(A)),D=Math.ceil(s.clamp(P.length/5,12,20)),R,z=1;z<D;z+=1)R=z%2===0?1:-1,S.lineTo(M.x+A.x*(z/D)+H.x*R*4,M.y+A.y*(z/D)+H.y*R*4);S.lineTo(T.x,T.y)}P.render.lineWidth&&(S.lineWidth=P.render.lineWidth,S.strokeStyle=P.render.strokeStyle,S.stroke()),P.render.anchors&&(S.fillStyle=P.render.strokeStyle,S.beginPath(),S.arc(M.x,M.y,3,0,2*Math.PI),S.arc(T.x,T.y,3,0,2*Math.PI),S.closePath(),S.fill())}}},e.bodies=function(v,y,S){var d=S;v.engine;var P=v.options,I=P.showInternalEdges||!P.wireframes,E,M,T,A;for(T=0;T<y.length;T++)if(E=y[T],!!E.render.visible){for(A=E.parts.length>1?1:0;A<E.parts.length;A++)if(M=E.parts[A],!!M.render.visible){if(P.showSleeping&&E.isSleeping?d.globalAlpha=.5*M.render.opacity:M.render.opacity!==1&&(d.globalAlpha=M.render.opacity),M.render.sprite&&M.render.sprite.texture&&!P.wireframes){var H=M.render.sprite,D=k(v,H.texture);d.translate(M.position.x,M.position.y),d.rotate(M.angle),d.drawImage(D,D.width*-H.xOffset*H.xScale,D.height*-H.yOffset*H.yScale,D.width*H.xScale,D.height*H.yScale),d.rotate(-M.angle),d.translate(-M.position.x,-M.position.y)}else{if(M.circleRadius)d.beginPath(),d.arc(M.position.x,M.position.y,M.circleRadius,0,2*Math.PI);else{d.beginPath(),d.moveTo(M.vertices[0].x,M.vertices[0].y);for(var R=1;R<M.vertices.length;R++)!M.vertices[R-1].isInternal||I?d.lineTo(M.vertices[R].x,M.vertices[R].y):d.moveTo(M.vertices[R].x,M.vertices[R].y),M.vertices[R].isInternal&&!I&&d.moveTo(M.vertices[(R+1)%M.vertices.length].x,M.vertices[(R+1)%M.vertices.length].y);d.lineTo(M.vertices[0].x,M.vertices[0].y),d.closePath()}P.wireframes?(d.lineWidth=1,d.strokeStyle="#bbb",d.stroke()):(d.fillStyle=M.render.fillStyle,M.render.lineWidth&&(d.lineWidth=M.render.lineWidth,d.strokeStyle=M.render.strokeStyle,d.stroke()),d.fill())}d.globalAlpha=1}}},e.bodyWireframes=function(v,y,S){var d=S,P=v.options.showInternalEdges,I,E,M,T,A;for(d.beginPath(),M=0;M<y.length;M++)if(I=y[M],!!I.render.visible)for(A=I.parts.length>1?1:0;A<I.parts.length;A++){for(E=I.parts[A],d.moveTo(E.vertices[0].x,E.vertices[0].y),T=1;T<E.vertices.length;T++)!E.vertices[T-1].isInternal||P?d.lineTo(E.vertices[T].x,E.vertices[T].y):d.moveTo(E.vertices[T].x,E.vertices[T].y),E.vertices[T].isInternal&&!P&&d.moveTo(E.vertices[(T+1)%E.vertices.length].x,E.vertices[(T+1)%E.vertices.length].y);d.lineTo(E.vertices[0].x,E.vertices[0].y)}d.lineWidth=1,d.strokeStyle="#bbb",d.stroke()},e.bodyConvexHulls=function(v,y,S){var d=S,P,I,E;for(d.beginPath(),I=0;I<y.length;I++)if(P=y[I],!(!P.render.visible||P.parts.length===1)){for(d.moveTo(P.vertices[0].x,P.vertices[0].y),E=1;E<P.vertices.length;E++)d.lineTo(P.vertices[E].x,P.vertices[E].y);d.lineTo(P.vertices[0].x,P.vertices[0].y)}d.lineWidth=1,d.strokeStyle="rgba(255,255,255,0.2)",d.stroke()},e.vertexNumbers=function(v,y,S){var d=S,P,I,E;for(P=0;P<y.length;P++){var M=y[P].parts;for(E=M.length>1?1:0;E<M.length;E++){var T=M[E];for(I=0;I<T.vertices.length;I++)d.fillStyle="rgba(255,255,255,0.2)",d.fillText(P+"_"+I,T.position.x+(T.vertices[I].x-T.position.x)*.8,T.position.y+(T.vertices[I].y-T.position.y)*.8)}}},e.mousePosition=function(v,y,S){var d=S;d.fillStyle="rgba(255,255,255,0.8)",d.fillText(y.position.x+"  "+y.position.y,y.position.x+5,y.position.y-5)},e.bodyBounds=function(v,y,S){var d=S;v.engine;var P=v.options;d.beginPath();for(var I=0;I<y.length;I++){var E=y[I];if(E.render.visible)for(var M=y[I].parts,T=M.length>1?1:0;T<M.length;T++){var A=M[T];d.rect(A.bounds.min.x,A.bounds.min.y,A.bounds.max.x-A.bounds.min.x,A.bounds.max.y-A.bounds.min.y)}}P.wireframes?d.strokeStyle="rgba(255,255,255,0.08)":d.strokeStyle="rgba(0,0,0,0.1)",d.lineWidth=1,d.stroke()},e.bodyAxes=function(v,y,S){var d=S;v.engine;var P=v.options,I,E,M,T;for(d.beginPath(),E=0;E<y.length;E++){var A=y[E],H=A.parts;if(!!A.render.visible)if(P.showAxes)for(M=H.length>1?1:0;M<H.length;M++)for(I=H[M],T=0;T<I.axes.length;T++){var D=I.axes[T];d.moveTo(I.position.x,I.position.y),d.lineTo(I.position.x+D.x*20,I.position.y+D.y*20)}else for(M=H.length>1?1:0;M<H.length;M++)for(I=H[M],T=0;T<I.axes.length;T++)d.moveTo(I.position.x,I.position.y),d.lineTo((I.vertices[0].x+I.vertices[I.vertices.length-1].x)/2,(I.vertices[0].y+I.vertices[I.vertices.length-1].y)/2)}P.wireframes?(d.strokeStyle="indianred",d.lineWidth=1):(d.strokeStyle="rgba(255, 255, 255, 0.4)",d.globalCompositeOperation="overlay",d.lineWidth=2),d.stroke(),d.globalCompositeOperation="source-over"},e.bodyPositions=function(v,y,S){var d=S;v.engine;var P=v.options,I,E,M,T;for(d.beginPath(),M=0;M<y.length;M++)if(I=y[M],!!I.render.visible)for(T=0;T<I.parts.length;T++)E=I.parts[T],d.arc(E.position.x,E.position.y,3,0,2*Math.PI,!1),d.closePath();for(P.wireframes?d.fillStyle="indianred":d.fillStyle="rgba(0,0,0,0.5)",d.fill(),d.beginPath(),M=0;M<y.length;M++)I=y[M],I.render.visible&&(d.arc(I.positionPrev.x,I.positionPrev.y,2,0,2*Math.PI,!1),d.closePath());d.fillStyle="rgba(255,165,0,0.8)",d.fill()},e.bodyVelocity=function(v,y,S){var d=S;d.beginPath();for(var P=0;P<y.length;P++){var I=y[P];!I.render.visible||(d.moveTo(I.position.x,I.position.y),d.lineTo(I.position.x+(I.position.x-I.positionPrev.x)*2,I.position.y+(I.position.y-I.positionPrev.y)*2))}d.lineWidth=3,d.strokeStyle="cornflowerblue",d.stroke()},e.bodyIds=function(v,y,S){var d=S,P,I;for(P=0;P<y.length;P++)if(!!y[P].render.visible){var E=y[P].parts;for(I=E.length>1?1:0;I<E.length;I++){var M=E[I];d.font="12px Arial",d.fillStyle="rgba(255,255,255,0.5)",d.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(v,y,S){var d=S,P=v.options,I,E,M,T;for(d.beginPath(),M=0;M<y.length;M++)if(I=y[M],!!I.isActive)for(E=I.collision,T=0;T<I.activeContacts.length;T++){var A=I.activeContacts[T],H=A.vertex;d.rect(H.x-1.5,H.y-1.5,3.5,3.5)}for(P.wireframes?d.fillStyle="rgba(255,255,255,0.7)":d.fillStyle="orange",d.fill(),d.beginPath(),M=0;M<y.length;M++)if(I=y[M],!!I.isActive&&(E=I.collision,I.activeContacts.length>0)){var D=I.activeContacts[0].vertex.x,R=I.activeContacts[0].vertex.y;I.activeContacts.length===2&&(D=(I.activeContacts[0].vertex.x+I.activeContacts[1].vertex.x)/2,R=(I.activeContacts[0].vertex.y+I.activeContacts[1].vertex.y)/2),E.bodyB===E.supports[0].body||E.bodyA.isStatic===!0?d.moveTo(D-E.normal.x*8,R-E.normal.y*8):d.moveTo(D+E.normal.x*8,R+E.normal.y*8),d.lineTo(D,R)}P.wireframes?d.strokeStyle="rgba(255,165,0,0.7)":d.strokeStyle="orange",d.lineWidth=1,d.stroke()},e.separations=function(v,y,S){var d=S,P=v.options,I,E,M,T,A;for(d.beginPath(),A=0;A<y.length;A++)if(I=y[A],!!I.isActive){E=I.collision,M=E.bodyA,T=E.bodyB;var H=1;!T.isStatic&&!M.isStatic&&(H=.5),T.isStatic&&(H=0),d.moveTo(T.position.x,T.position.y),d.lineTo(T.position.x-E.penetration.x*H,T.position.y-E.penetration.y*H),H=1,!T.isStatic&&!M.isStatic&&(H=.5),M.isStatic&&(H=0),d.moveTo(M.position.x,M.position.y),d.lineTo(M.position.x+E.penetration.x*H,M.position.y+E.penetration.y*H)}P.wireframes?d.strokeStyle="rgba(255,165,0,0.5)":d.strokeStyle="orange",d.stroke()},e.inspector=function(v,y){v.engine;var S=v.selected,d=v.render,P=d.options,I;if(P.hasBounds){var E=d.bounds.max.x-d.bounds.min.x,M=d.bounds.max.y-d.bounds.min.y,T=E/d.options.width,A=M/d.options.height;y.scale(1/T,1/A),y.translate(-d.bounds.min.x,-d.bounds.min.y)}for(var H=0;H<S.length;H++){var D=S[H].data;switch(y.translate(.5,.5),y.lineWidth=1,y.strokeStyle="rgba(255,165,0,0.9)",y.setLineDash([1,2]),D.type){case"body":I=D.bounds,y.beginPath(),y.rect(Math.floor(I.min.x-3),Math.floor(I.min.y-3),Math.floor(I.max.x-I.min.x+6),Math.floor(I.max.y-I.min.y+6)),y.closePath(),y.stroke();break;case"constraint":var R=D.pointA;D.bodyA&&(R=D.pointB),y.beginPath(),y.arc(R.x,R.y,10,0,2*Math.PI),y.closePath(),y.stroke();break}y.setLineDash([]),y.translate(-.5,-.5)}v.selectStart!==null&&(y.translate(.5,.5),y.lineWidth=1,y.strokeStyle="rgba(255,165,0,0.6)",y.fillStyle="rgba(255,165,0,0.1)",I=v.selectBounds,y.beginPath(),y.rect(Math.floor(I.min.x),Math.floor(I.min.y),Math.floor(I.max.x-I.min.x),Math.floor(I.max.y-I.min.y)),y.closePath(),y.stroke(),y.fill(),y.translate(-.5,-.5)),P.hasBounds&&y.setTransform(1,0,0,1,0,0)};var o=function(v,y){var S=v.engine,d=v.timing,P=d.historySize,I=S.timing.timestamp;d.delta=y-d.lastTime||e._goodDelta,d.lastTime=y,d.timestampElapsed=I-d.lastTimestamp||0,d.lastTimestamp=I,d.deltaHistory.unshift(d.delta),d.deltaHistory.length=Math.min(d.deltaHistory.length,P),d.engineDeltaHistory.unshift(S.timing.lastDelta),d.engineDeltaHistory.length=Math.min(d.engineDeltaHistory.length,P),d.timestampElapsedHistory.unshift(d.timestampElapsed),d.timestampElapsedHistory.length=Math.min(d.timestampElapsedHistory.length,P),d.engineElapsedHistory.unshift(S.timing.lastElapsed),d.engineElapsedHistory.length=Math.min(d.engineElapsedHistory.length,P),d.elapsedHistory.unshift(d.lastElapsed),d.elapsedHistory.length=Math.min(d.elapsedHistory.length,P)},h=function(v){for(var y=0,S=0;S<v.length;S+=1)y+=v[S];return y/v.length||0},m=function(v,y){var S=document.createElement("canvas");return S.width=v,S.height=y,S.oncontextmenu=function(){return!1},S.onselectstart=function(){return!1},S},x=function(v){var y=v.getContext("2d"),S=window.devicePixelRatio||1,d=y.webkitBackingStorePixelRatio||y.mozBackingStorePixelRatio||y.msBackingStorePixelRatio||y.oBackingStorePixelRatio||y.backingStorePixelRatio||1;return S/d},k=function(v,y){var S=v.textures[y];return S||(S=v.textures[y]=new Image,S.src=y,S)},w=function(v,y){var S=y;/(jpg|gif|png)$/.test(y)&&(S="url("+y+")"),v.canvas.style.background=S,v.canvas.style.backgroundSize="contain",v.currentBackground=y}})()},function(g,C){var u={};g.exports=u,function(){u.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(g,C,u){var e={};g.exports=e;var s=u(7),i=u(19),n=u(14),c=u(20),a=u(4),f=u(5),r=u(10),t=u(0),o=u(6);(function(){e.create=function(h){h=h||{};var m={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},x=t.extend(m,h);return x.world=h.world||f.create({label:"World"}),x.pairs=h.pairs||c.create(),x.detector=h.detector||n.create(),x.grid={buckets:[]},x.world.gravity=x.gravity,x.broadphase=x.grid,x.metrics={},x},e.update=function(h,m,x){var k=t.now();m=m||1e3/60,x=x||1;var w=h.world,v=h.detector,y=h.pairs,S=h.timing,d=S.timestamp,P;S.timestamp+=m*S.timeScale,S.lastDelta=m*S.timeScale;var I={timestamp:S.timestamp};a.trigger(h,"beforeUpdate",I);var E=f.allBodies(w),M=f.allConstraints(w);for(w.isModified&&n.setBodies(v,E),w.isModified&&f.setModified(w,!1,!1,!0),h.enableSleeping&&s.update(E,S.timeScale),e._bodiesApplyGravity(E,h.gravity),e._bodiesUpdate(E,m,S.timeScale,x,w.bounds),r.preSolveAll(E),P=0;P<h.constraintIterations;P++)r.solveAll(M,S.timeScale);r.postSolveAll(E),v.pairs=h.pairs;var T=n.collisions(v);for(c.update(y,T,d),h.enableSleeping&&s.afterCollisions(y.list,S.timeScale),y.collisionStart.length>0&&a.trigger(h,"collisionStart",{pairs:y.collisionStart}),i.preSolvePosition(y.list),P=0;P<h.positionIterations;P++)i.solvePosition(y.list,S.timeScale);for(i.postSolvePosition(E),r.preSolveAll(E),P=0;P<h.constraintIterations;P++)r.solveAll(M,S.timeScale);for(r.postSolveAll(E),i.preSolveVelocity(y.list),P=0;P<h.velocityIterations;P++)i.solveVelocity(y.list,S.timeScale);return y.collisionActive.length>0&&a.trigger(h,"collisionActive",{pairs:y.collisionActive}),y.collisionEnd.length>0&&a.trigger(h,"collisionEnd",{pairs:y.collisionEnd}),e._bodiesClearForces(E),a.trigger(h,"afterUpdate",I),h.timing.lastElapsed=t.now()-k,h},e.merge=function(h,m){if(t.extend(h,m),m.world){h.world=m.world,e.clear(h);for(var x=f.allBodies(h.world),k=0;k<x.length;k++){var w=x[k];s.set(w,!1),w.id=t.nextId()}}},e.clear=function(h){c.clear(h.pairs),n.clear(h.detector)},e._bodiesClearForces=function(h){for(var m=0;m<h.length;m++){var x=h[m];x.force.x=0,x.force.y=0,x.torque=0}},e._bodiesApplyGravity=function(h,m){var x=typeof m.scale!="undefined"?m.scale:.001;if(!(m.x===0&&m.y===0||x===0))for(var k=0;k<h.length;k++){var w=h[k];w.isStatic||w.isSleeping||(w.force.y+=w.mass*m.y*x,w.force.x+=w.mass*m.x*x)}},e._bodiesUpdate=function(h,m,x,k,w){for(var v=0;v<h.length;v++){var y=h[v];y.isStatic||y.isSleeping||o.update(y,m,x,k)}}})()},function(g,C,u){var e={};g.exports=e;var s=u(3),i=u(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(n){var c,a,f,r=n.length;for(c=0;c<r;c++)a=n[c],a.isActive&&(f=a.activeContacts.length,a.collision.parentA.totalContacts+=f,a.collision.parentB.totalContacts+=f)},e.solvePosition=function(n,c){var a,f,r,t,o,h,m,x,k=e._positionDampen,w=n.length;for(a=0;a<w;a++)f=n[a],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,h=r.normal,f.separation=h.x*(o.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+h.y*(o.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(a=0;a<w;a++)f=n[a],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,h=r.normal,x=(f.separation-f.slop)*c,(t.isStatic||o.isStatic)&&(x*=2),t.isStatic||t.isSleeping||(m=k/t.totalContacts,t.positionImpulse.x+=h.x*x*m,t.positionImpulse.y+=h.y*x*m),o.isStatic||o.isSleeping||(m=k/o.totalContacts,o.positionImpulse.x-=h.x*x*m,o.positionImpulse.y-=h.y*x*m))},e.postSolvePosition=function(n){for(var c=e._positionWarming,a=n.length,f=s.translate,r=i.update,t=0;t<a;t++){var o=n[t],h=o.positionImpulse,m=h.x,x=h.y,k=o.velocity;if(o.totalContacts=0,m!==0||x!==0){for(var w=0;w<o.parts.length;w++){var v=o.parts[w];f(v.vertices,h),r(v.bounds,v.vertices,k),v.position.x+=m,v.position.y+=x}o.positionPrev.x+=m,o.positionPrev.y+=x,m*k.x+x*k.y<0?(h.x=0,h.y=0):(h.x*=c,h.y*=c)}}},e.preSolveVelocity=function(n){var c=n.length,a,f;for(a=0;a<c;a++){var r=n[a];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,o=t.length,h=r.collision,m=h.parentA,x=h.parentB,k=h.normal,w=h.tangent;for(f=0;f<o;f++){var v=t[f],y=v.vertex,S=v.normalImpulse,d=v.tangentImpulse;if(S!==0||d!==0){var P=k.x*S+w.x*d,I=k.y*S+w.y*d;m.isStatic||m.isSleeping||(m.positionPrev.x+=P*m.inverseMass,m.positionPrev.y+=I*m.inverseMass,m.anglePrev+=m.inverseInertia*((y.x-m.position.x)*I-(y.y-m.position.y)*P)),x.isStatic||x.isSleeping||(x.positionPrev.x-=P*x.inverseMass,x.positionPrev.y-=I*x.inverseMass,x.anglePrev-=x.inverseInertia*((y.x-x.position.x)*I-(y.y-x.position.y)*P))}}}}},e.solveVelocity=function(n,c){var a=c*c,f=e._restingThresh*a,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*a,o=Number.MAX_VALUE,h=n.length,m,x,k,w;for(k=0;k<h;k++){var v=n[k];if(!(!v.isActive||v.isSensor)){var y=v.collision,S=y.parentA,d=y.parentB,P=S.velocity,I=d.velocity,E=y.normal.x,M=y.normal.y,T=y.tangent.x,A=y.tangent.y,H=v.activeContacts,D=H.length,R=1/D,z=S.inverseMass+d.inverseMass,B=v.friction*v.frictionStatic*r*a;for(P.x=S.position.x-S.positionPrev.x,P.y=S.position.y-S.positionPrev.y,I.x=d.position.x-d.positionPrev.x,I.y=d.position.y-d.positionPrev.y,S.angularVelocity=S.angle-S.anglePrev,d.angularVelocity=d.angle-d.anglePrev,w=0;w<D;w++){var W=H[w],L=W.vertex,Y=L.x-S.position.x,$=L.y-S.position.y,J=L.x-d.position.x,he=L.y-d.position.y,se=P.x-$*S.angularVelocity,re=P.y+Y*S.angularVelocity,ae=I.x-he*d.angularVelocity,kt=I.y+J*d.angularVelocity,tt=se-ae,it=re-kt,ze=E*tt+M*it,pe=T*tt+A*it,nt=v.separation+ze,Je=Math.min(nt,1);Je=nt<0?0:Je;var st=Je*B;pe>st||-pe>st?(x=pe>0?pe:-pe,m=v.friction*(pe>0?1:-1)*a,m<-x?m=-x:m>x&&(m=x)):(m=pe,x=o);var rt=Y*M-$*E,at=J*M-he*E,lt=R/(z+S.inverseInertia*rt*rt+d.inverseInertia*at*at),Ve=(1+v.restitution)*ze*lt;if(m*=lt,ze*ze>f&&ze<0)W.normalImpulse=0;else{var wt=W.normalImpulse;W.normalImpulse+=Ve,W.normalImpulse=Math.min(W.normalImpulse,0),Ve=W.normalImpulse-wt}if(pe*pe>t)W.tangentImpulse=0;else{var It=W.tangentImpulse;W.tangentImpulse+=m,W.tangentImpulse<-x&&(W.tangentImpulse=-x),W.tangentImpulse>x&&(W.tangentImpulse=x),m=W.tangentImpulse-It}var Oe=E*Ve+T*m,be=M*Ve+A*m;S.isStatic||S.isSleeping||(S.positionPrev.x+=Oe*S.inverseMass,S.positionPrev.y+=be*S.inverseMass,S.anglePrev+=(Y*be-$*Oe)*S.inverseInertia),d.isStatic||d.isSleeping||(d.positionPrev.x-=Oe*d.inverseMass,d.positionPrev.y-=be*d.inverseMass,d.anglePrev-=(J*be-he*Oe)*d.inverseInertia)}}}}})()},function(g,C,u){var e={};g.exports=e;var s=u(9),i=u(0);(function(){e.create=function(n){return i.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},n)},e.update=function(n,c,a){var f=n.list,r=f.length,t=n.table,o=c.length,h=n.collisionStart,m=n.collisionEnd,x=n.collisionActive,k,w,v,y;for(h.length=0,m.length=0,x.length=0,y=0;y<r;y++)f[y].confirmedActive=!1;for(y=0;y<o;y++)k=c[y],v=k.pair,v?(v.isActive?x.push(v):h.push(v),s.update(v,k,a),v.confirmedActive=!0):(v=s.create(k,a),t[v.id]=v,h.push(v),f.push(v));var S=[];for(r=f.length,y=0;y<r;y++)v=f[y],v.confirmedActive||(s.setActive(v,!1,a),m.push(v),!v.collision.bodyA.isSleeping&&!v.collision.bodyB.isSleeping&&S.push(y));for(y=0;y<S.length;y++)w=S[y]-y,v=f[w],f.splice(w,1),delete t[v.id]},e.clear=function(n){return n.table={},n.list.length=0,n.collisionStart.length=0,n.collisionActive.length=0,n.collisionEnd.length=0,n}})()},function(g,C,u){var e=g.exports=u(22);e.Axes=u(11),e.Bodies=u(12),e.Body=u(6),e.Bounds=u(1),e.Collision=u(8),e.Common=u(0),e.Composite=u(5),e.Composites=u(23),e.Constraint=u(10),e.Contact=u(17),e.Detector=u(14),e.Engine=u(18),e.Events=u(4),e.Grid=u(24),e.Mouse=u(13),e.MouseConstraint=u(25),e.Pair=u(9),e.Pairs=u(20),e.Plugin=u(15),e.Query=u(26),e.Render=u(16),e.Resolver=u(19),e.Runner=u(27),e.SAT=u(28),e.Sleeping=u(7),e.Svg=u(29),e.Vector=u(2),e.Vertices=u(3),e.World=u(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(g,C,u){var e={};g.exports=e;var s=u(15),i=u(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(n,c){return n=n.replace(/^Matter./,""),i.chainPathBefore(e,n,c)},e.after=function(n,c){return n=n.replace(/^Matter./,""),i.chainPathAfter(e,n,c)}})()},function(g,C,u){var e={};g.exports=e;var s=u(5),i=u(10),n=u(0),c=u(6),a=u(12),f=n.deprecated;(function(){e.stack=function(r,t,o,h,m,x,k){for(var w=s.create({label:"Stack"}),v=r,y=t,S,d=0,P=0;P<h;P++){for(var I=0,E=0;E<o;E++){var M=k(v,y,E,P,S,d);if(M){var T=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x;T>I&&(I=T),c.translate(M,{x:A*.5,y:T*.5}),v=M.bounds.max.x+m,s.addBody(w,M),S=M,d+=1}else v+=m}y+=I+x,v=r}return w},e.chain=function(r,t,o,h,m,x){for(var k=r.bodies,w=1;w<k.length;w++){var v=k[w-1],y=k[w],S=v.bounds.max.y-v.bounds.min.y,d=v.bounds.max.x-v.bounds.min.x,P=y.bounds.max.y-y.bounds.min.y,I=y.bounds.max.x-y.bounds.min.x,E={bodyA:v,pointA:{x:d*t,y:S*o},bodyB:y,pointB:{x:I*h,y:P*m}},M=n.extend(E,x);s.addConstraint(r,i.create(M))}return r.label+=" Chain",r},e.mesh=function(r,t,o,h,m){var x=r.bodies,k,w,v,y,S;for(k=0;k<o;k++){for(w=1;w<t;w++)v=x[w-1+k*t],y=x[w+k*t],s.addConstraint(r,i.create(n.extend({bodyA:v,bodyB:y},m)));if(k>0)for(w=0;w<t;w++)v=x[w+(k-1)*t],y=x[w+k*t],s.addConstraint(r,i.create(n.extend({bodyA:v,bodyB:y},m))),h&&w>0&&(S=x[w-1+(k-1)*t],s.addConstraint(r,i.create(n.extend({bodyA:S,bodyB:y},m)))),h&&w<t-1&&(S=x[w+1+(k-1)*t],s.addConstraint(r,i.create(n.extend({bodyA:S,bodyB:y},m))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,o,h,m,x,k){return e.stack(r,t,o,h,m,x,function(w,v,y,S,d,P){var I=Math.min(h,Math.ceil(o/2)),E=d?d.bounds.max.x-d.bounds.min.x:0;if(!(S>I)){S=I-S;var M=S,T=o-1-S;if(!(y<M||y>T)){P===1&&c.translate(d,{x:(y+(o%2===1?1:-1))*E,y:0});var A=d?y*E:0;return k(r+A+y*m,v,y,S,d,P)}}})},e.newtonsCradle=function(r,t,o,h,m){for(var x=s.create({label:"Newtons Cradle"}),k=0;k<o;k++){var w=1.9,v=a.circle(r+k*(h*w),t+m,h,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),y=i.create({pointA:{x:r+k*(h*w),y:t},bodyB:v});s.addBody(x,v),s.addConstraint(x,y)}return x},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,o,h,m){var x=c.nextGroup(!0),k=20,w=-o*.5+k,v=o*.5-k,y=0,S=s.create({label:"Car"}),d=a.rectangle(r,t,o,h,{collisionFilter:{group:x},chamfer:{radius:h*.5},density:2e-4}),P=a.circle(r+w,t+y,m,{collisionFilter:{group:x},friction:.8}),I=a.circle(r+v,t+y,m,{collisionFilter:{group:x},friction:.8}),E=i.create({bodyB:d,pointB:{x:w,y},bodyA:P,stiffness:1,length:0}),M=i.create({bodyB:d,pointB:{x:v,y},bodyA:I,stiffness:1,length:0});return s.addBody(S,d),s.addBody(S,P),s.addBody(S,I),s.addConstraint(S,E),s.addConstraint(S,M),S},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,o,h,m,x,k,w,v,y){v=n.extend({inertia:1/0},v),y=n.extend({stiffness:.2,render:{type:"line",anchors:!1}},y);var S=e.stack(r,t,o,h,m,x,function(d,P){return a.circle(d,P,w,v)});return e.mesh(S,o,h,k,y),S.label="Soft Body",S},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(g,C,u){var e={};g.exports=e;var s=u(9),i=u(0),n=i.deprecated;(function(){e.create=function(c){var a={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return i.extend(a,c)},e.update=function(c,a,f,r){var t,o,h,m=f.world,x=c.buckets,k,w,v=!1;for(t=0;t<a.length;t++){var y=a[t];if(!(y.isSleeping&&!r)&&!(m.bounds&&(y.bounds.max.x<m.bounds.min.x||y.bounds.min.x>m.bounds.max.x||y.bounds.max.y<m.bounds.min.y||y.bounds.min.y>m.bounds.max.y))){var S=e._getRegion(c,y);if(!y.region||S.id!==y.region.id||r){(!y.region||r)&&(y.region=S);var d=e._regionUnion(S,y.region);for(o=d.startCol;o<=d.endCol;o++)for(h=d.startRow;h<=d.endRow;h++){w=e._getBucketId(o,h),k=x[w];var P=o>=S.startCol&&o<=S.endCol&&h>=S.startRow&&h<=S.endRow,I=o>=y.region.startCol&&o<=y.region.endCol&&h>=y.region.startRow&&h<=y.region.endRow;!P&&I&&I&&k&&e._bucketRemoveBody(c,k,y),(y.region===S||P&&!I||r)&&(k||(k=e._createBucket(x,w)),e._bucketAddBody(c,k,y))}y.region=S,v=!0}}}v&&(c.pairsList=e._createActivePairsList(c))},n(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},n(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,a){var f=Math.min(c.startCol,a.startCol),r=Math.max(c.endCol,a.endCol),t=Math.min(c.startRow,a.startRow),o=Math.max(c.endRow,a.endRow);return e._createRegion(f,r,t,o)},e._getRegion=function(c,a){var f=a.bounds,r=Math.floor(f.min.x/c.bucketWidth),t=Math.floor(f.max.x/c.bucketWidth),o=Math.floor(f.min.y/c.bucketHeight),h=Math.floor(f.max.y/c.bucketHeight);return e._createRegion(r,t,o,h)},e._createRegion=function(c,a,f,r){return{id:c+","+a+","+f+","+r,startCol:c,endCol:a,startRow:f,endRow:r}},e._getBucketId=function(c,a){return"C"+c+"R"+a},e._createBucket=function(c,a){var f=c[a]=[];return f},e._bucketAddBody=function(c,a,f){var r=c.pairs,t=s.id,o=a.length,h;for(h=0;h<o;h++){var m=a[h];if(!(f.id===m.id||f.isStatic&&m.isStatic)){var x=t(f,m),k=r[x];k?k[2]+=1:r[x]=[f,m,1]}}a.push(f)},e._bucketRemoveBody=function(c,a,f){var r=c.pairs,t=s.id,o;a.splice(i.indexOf(a,f),1);var h=a.length;for(o=0;o<h;o++){var m=r[t(f,a[o])];m&&(m[2]-=1)}},e._createActivePairsList=function(c){var a,f=c.pairs,r=i.keys(f),t=r.length,o=[],h;for(h=0;h<t;h++)a=f[r[h]],a[2]>0?o.push(a):delete f[r[h]];return o}})()},function(g,C,u){var e={};g.exports=e;var s=u(3),i=u(7),n=u(13),c=u(4),a=u(14),f=u(10),r=u(5),t=u(0),o=u(1);(function(){e.create=function(h,m){var x=(h?h.mouse:null)||(m?m.mouse:null);x||(h&&h.render&&h.render.canvas?x=n.create(h.render.canvas):m&&m.element?x=n.create(m.element):(x=n.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var k=f.create({label:"Mouse Constraint",pointA:x.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),w={type:"mouseConstraint",mouse:x,element:null,body:null,constraint:k,collisionFilter:{category:1,mask:4294967295,group:0}},v=t.extend(w,m);return c.on(h,"beforeUpdate",function(){var y=r.allBodies(h.world);e.update(v,y),e._triggerEvents(v)}),v},e.update=function(h,m){var x=h.mouse,k=h.constraint,w=h.body;if(x.button===0){if(k.bodyB)i.set(k.bodyB,!1),k.pointA=x.position;else for(var v=0;v<m.length;v++)if(w=m[v],o.contains(w.bounds,x.position)&&a.canCollide(w.collisionFilter,h.collisionFilter))for(var y=w.parts.length>1?1:0;y<w.parts.length;y++){var S=w.parts[y];if(s.contains(S.vertices,x.position)){k.pointA=x.position,k.bodyB=h.body=w,k.pointB={x:x.position.x-w.position.x,y:x.position.y-w.position.y},k.angleB=w.angle,i.set(w,!1),c.trigger(h,"startdrag",{mouse:x,body:w});break}}}else k.bodyB=h.body=null,k.pointB=null,w&&c.trigger(h,"enddrag",{mouse:x,body:w})},e._triggerEvents=function(h){var m=h.mouse,x=m.sourceEvents;x.mousemove&&c.trigger(h,"mousemove",{mouse:m}),x.mousedown&&c.trigger(h,"mousedown",{mouse:m}),x.mouseup&&c.trigger(h,"mouseup",{mouse:m}),n.clearSourceEvents(m)}})()},function(g,C,u){var e={};g.exports=e;var s=u(2),i=u(8),n=u(1),c=u(12),a=u(3);(function(){e.collides=function(f,r){for(var t=[],o=r.length,h=f.bounds,m=i.collides,x=n.overlaps,k=0;k<o;k++){var w=r[k],v=w.parts.length,y=v===1?0:1;if(x(w.bounds,h))for(var S=y;S<v;S++){var d=w.parts[S];if(x(d.bounds,h)){var P=m(d,f);if(P){t.push(P);break}}}}return t},e.ray=function(f,r,t,o){o=o||1e-100;for(var h=s.angle(r,t),m=s.magnitude(s.sub(r,t)),x=(t.x+r.x)*.5,k=(t.y+r.y)*.5,w=c.rectangle(x,k,m,o,{angle:h}),v=e.collides(w,f),y=0;y<v.length;y+=1){var S=v[y];S.body=S.bodyB=S.bodyA}return v},e.region=function(f,r,t){for(var o=[],h=0;h<f.length;h++){var m=f[h],x=n.overlaps(m.bounds,r);(x&&!t||!x&&t)&&o.push(m)}return o},e.point=function(f,r){for(var t=[],o=0;o<f.length;o++){var h=f[o];if(n.contains(h.bounds,r))for(var m=h.parts.length===1?0:1;m<h.parts.length;m++){var x=h.parts[m];if(n.contains(x.bounds,r)&&a.contains(x.vertices,r)){t.push(h);break}}}return t}})()},function(g,C,u){var e={};g.exports=e;var s=u(4),i=u(18),n=u(0);(function(){var c,a;if(typeof window!="undefined"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(r){f=setTimeout(function(){r(n.now())},1e3/60)},a=function(){clearTimeout(f)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},o=n.extend(t,r);return o.delta=o.delta||1e3/o.fps,o.deltaMin=o.deltaMin||1e3/o.fps,o.deltaMax=o.deltaMax||1e3/(o.fps*.5),o.fps=1e3/o.delta,o},e.run=function(r,t){return typeof r.positionIterations!="undefined"&&(t=r,r=e.create()),function o(h){r.frameRequestId=c(o),h&&r.enabled&&e.tick(r,t,h)}(),r},e.tick=function(r,t,o){var h=t.timing,m=1,x,k={timestamp:h.timestamp};s.trigger(r,"beforeTick",k),r.isFixed?x=r.delta:(x=o-r.timePrev||r.delta,r.timePrev=o,r.deltaHistory.push(x),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),x=Math.min.apply(null,r.deltaHistory),x=x<r.deltaMin?r.deltaMin:x,x=x>r.deltaMax?r.deltaMax:x,m=x/r.delta,r.delta=x),r.timeScalePrev!==0&&(m*=h.timeScale/r.timeScalePrev),h.timeScale===0&&(m=0),r.timeScalePrev=h.timeScale,r.correction=m,r.frameCounter+=1,o-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((o-r.counterTimestamp)/1e3),r.counterTimestamp=o,r.frameCounter=0),s.trigger(r,"tick",k),s.trigger(r,"beforeUpdate",k),i.update(t,x,m),s.trigger(r,"afterUpdate",k),s.trigger(r,"afterTick",k)},e.stop=function(r){a(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(g,C,u){var e={};g.exports=e;var s=u(8),i=u(0),n=i.deprecated;(function(){e.collides=function(c,a){return s.collides(c,a)},n(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(g,C,u){var e={};g.exports=e,u(1);var s=u(0);(function(){e.pathToVertices=function(i,n){typeof window!="undefined"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,a,f,r,t,o,h,m,x,k,w=[],v,y,S=0,d=0,P=0;n=n||15;var I=function(M,T,A){var H=A%2===1&&A>1;if(!x||M!=x.x||T!=x.y){x&&H?(v=x.x,y=x.y):(v=0,y=0);var D={x:v+M,y:y+T};(H||!x)&&(x=D),w.push(D),d=v+M,P=y+T}},E=function(M){var T=M.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":d=M.x,P=M.y;break;case"H":d=M.x;break;case"V":P=M.y;break}I(d,P,M.pathSegType)}};for(e._svgPathToAbsolute(i),f=i.getTotalLength(),o=[],c=0;c<i.pathSegList.numberOfItems;c+=1)o.push(i.pathSegList.getItem(c));for(h=o.concat();S<f;){if(k=i.getPathSegAtLength(S),t=o[k],t!=m){for(;h.length&&h[0]!=t;)E(h.shift());m=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=i.getPointAtLength(S),I(r.x,r.y,0);break}S+=n}for(c=0,a=h.length;c<a;++c)E(h[c]);return w},e._svgPathToAbsolute=function(i){for(var n,c,a,f,r,t,o=i.pathSegList,h=0,m=0,x=o.numberOfItems,k=0;k<x;++k){var w=o.getItem(k),v=w.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in w&&(h=w.x),"y"in w&&(m=w.y);else switch("x1"in w&&(a=h+w.x1),"x2"in w&&(r=h+w.x2),"y1"in w&&(f=m+w.y1),"y2"in w&&(t=m+w.y2),"x"in w&&(h+=w.x),"y"in w&&(m+=w.y),v){case"m":o.replaceItem(i.createSVGPathSegMovetoAbs(h,m),k);break;case"l":o.replaceItem(i.createSVGPathSegLinetoAbs(h,m),k);break;case"h":o.replaceItem(i.createSVGPathSegLinetoHorizontalAbs(h),k);break;case"v":o.replaceItem(i.createSVGPathSegLinetoVerticalAbs(m),k);break;case"c":o.replaceItem(i.createSVGPathSegCurvetoCubicAbs(h,m,a,f,r,t),k);break;case"s":o.replaceItem(i.createSVGPathSegCurvetoCubicSmoothAbs(h,m,r,t),k);break;case"q":o.replaceItem(i.createSVGPathSegCurvetoQuadraticAbs(h,m,a,f),k);break;case"t":o.replaceItem(i.createSVGPathSegCurvetoQuadraticSmoothAbs(h,m),k);break;case"a":o.replaceItem(i.createSVGPathSegArcAbs(h,m,w.r1,w.r2,w.angle,w.largeArcFlag,w.sweepFlag),k);break;case"z":case"Z":h=n,m=c;break}(v=="M"||v=="m")&&(n=h,c=m)}}})()},function(g,C,u){var e={};g.exports=e;var s=u(5);u(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(et);var G=St(et.exports),Mt={exports:{}};/*!
 * matter-attractors 0.1.6 by Liam Brummitt 2017-05-15
 * https://github.com/liabru/matter-attractors
 * License MIT
 */(function(p,l){(function(C,u){p.exports=u(et.exports)})(Ge,function(g){return function(C){var u={};function e(s){if(u[s])return u[s].exports;var i=u[s]={i:s,l:!1,exports:{}};return C[s].call(i.exports,i,i.exports,e),i.l=!0,i.exports}return e.m=C,e.c=u,e.i=function(s){return s},e.d=function(s,i,n){e.o(s,i)||Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(s){var i=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(i,"a",i),i},e.o=function(s,i){return Object.prototype.hasOwnProperty.call(s,i)},e.p="/libs",e(e.s=1)}([function(C,u){C.exports=g},function(C,u,e){var s=e(0),i={name:"matter-attractors",version:"0.1.4",for:"matter-js@^0.12.0",install:function(c){c.after("Body.create",function(){i.Body.init(this)}),c.before("Engine.update",function(a){i.Engine.update(a)})},Body:{init:function(c){c.plugin.attractors=c.plugin.attractors||[]}},Engine:{update:function(c){for(var a=c.world,f=s.Composite.allBodies(a),r=0;r<f.length;r+=1){var t=f[r],o=t.plugin.attractors;if(o&&o.length>0)for(var h=0;h<f.length;h+=1){var m=f[h];if(m.id!==t.id)for(var x=0;x<o.length;x+=1){var k=o[x],w=k;s.Common.isFunction(k)&&(w=k(t,m)),w&&s.Body.applyForce(m,m.position,w)}}}}},Attractors:{gravityConstant:.001,gravity:function(c,a){var f=s.Vector.sub(a.position,c.position),r=s.Vector.magnitudeSquared(f)||1e-4,t=s.Vector.normalise(f),o=-i.Attractors.gravityConstant*(c.mass*a.mass/r),h=s.Vector.mult(t,o);s.Body.applyForce(c,c.position,s.Vector.neg(h)),s.Body.applyForce(a,a.position,h)}}};s.Plugin.register(i),C.exports=i}])})})(Mt);var Ci=St(Mt.exports);G.use(Ci);class Mi{constructor(l,g,C,u){this.areaWidth=g,this.areaHeight=C,this.thickness=u;const e={isStatic:!0,render:{fillStyle:"transparent"}};this.top=G.Bodies.rectangle(g/2,-u/2,g,u,e),this.right=G.Bodies.rectangle(g+u/2,C/2,u,C,e),this.bottom=G.Bodies.rectangle(g/2,C+u/2,g,u,e),this.left=G.Bodies.rectangle(-u/2,C/2,u,C,e),G.Composite.add(l.world,[this.top,this.right,this.bottom,this.left])}update(l,g){G.Body.setPosition(this.top,{x:l/2,y:this.top.position.y}),G.Body.setPosition(this.right,{x:l+this.thickness/2,y:g/2}),G.Body.setPosition(this.bottom,{x:l/2,y:g+this.thickness/2}),G.Body.setPosition(this.left,{x:this.left.position.x,y:g/2}),G.Body.scale(this.top,l/this.areaWidth,1),G.Body.scale(this.right,1,g/this.areaHeight),G.Body.scale(this.bottom,l/this.areaWidth,1),G.Body.scale(this.left,1,g/this.areaHeight),this.areaWidth=l,this.areaHeight=g}}const ki=(p,l)=>({x:(p.position.x-l.position.x)*2e-4,y:(p.position.y-l.position.y)*2e-4});class wi{constructor(l,g){this.body=G.Bodies.circle(g.clientWidth/2,0,1,{isStatic:!0,plugin:{attractors:[ki]},collisionFilter:{group:-1}}),G.Composite.add(l.world,this.body),this.mouse=G.Mouse.create(g),G.Events.on(l,"afterUpdate",()=>{!this.mouse.position.x||G.Body.translate(this.body,{x:(this.mouse.position.x-this.body.position.x)*.25,y:(this.mouse.position.y-this.body.position.y)*.25})}),this.mouse.element.removeEventListener("mousewheel",this.mouse.mousewheel),this.mouse.element.removeEventListener("DOMMouseScroll",this.mouse.mousewheel)}setAnchor(){this.mouse.position.x=this.mouse.element.clientWidth/2,this.mouse.position.y=0,G.Body.setPosition(this.body,{x:this.mouse.element.clientWidth/2,y:0})}}function Ii(p){let l,g,C=`${p[2]}px`,u=`${p[0]}ms`,e,s,i;const n=p[9].default,c=oe(n,p,p[8],null);return{c(){l=Q("ul"),c&&c.c(),this.h()},l(a){l=Z(a,"UL",{class:!0});var f=O(l);c&&c.l(f),f.forEach(F),this.h()},h(){U(l,"class","cpeum-1s5e709"),Qe(()=>p[11].call(l)),b(l,"height",C,!1),b(l,"--delay",u,!1)},m(a,f){N(a,l,f),c&&c.m(l,null),p[10](l),g=yt(l,p[11].bind(l)),e=!0,s||(i=[Ee($e.call(null,l,{rootMargin:"0% 0px -30%"})),ne(l,"enter",p[5]),ne(l,"leave",p[6]),ne(l,"mouseenter",Bi),ne(l,"mouseleave",p[7])],s=!0)},p(a,[f]){c&&c.p&&(!e||f&256)&&fe(c,n,a,a[8],e?ce(n,a[8],f,null):ue(a[8]),null),f&4&&C!==(C=`${a[2]}px`)&&b(l,"height",C,!1),f&1&&u!==(u=`${a[0]}ms`)&&b(l,"--delay",u,!1)},i(a){e||(X(c,a),e=!0)},o(a){j(c,a),e=!1},d(a){a&&F(l),c&&c.d(a),p[10](null),g(),s=!1,Fe(i)}}}const Ei=200,dt=400,Ti=500,Ai=3;function Bi(){}function Hi(p,l,g){let C,{$$slots:u={},$$scope:e}=l,{staggerDelay:s=120}=l,i,n,c=500;const a=Ne(!1);ge(p,a,S=>g(15,C=S));let f=0,r=[];we("bodies",{getEngine:()=>t,getIndex:()=>f++,addBodyRef:S=>{r.push(S)},visible:a,staggerDelay:s});const t=G.Engine.create();t.gravity.y=0,t.gravity.scale=0,t.positionIterations=5,t.velocityIterations=3,t.enableSleeping=!0;const o=G.Runner.create(),h=new Mi(t,dt,dt,Ei);let m;function x(){C?t.enabled=!0:(a.set(!0),G.Runner.run(o,t))}function k(){t.enabled=!1}function w(){m.setAnchor()}je(()=>{m=new wi(t,i)}),Ye(()=>{G.Runner.stop(o),G.World.clear(t.world,!1),G.Engine.clear(t)});function v(S){qe[S?"unshift":"push"](()=>{i=S,g(3,i)})}function y(){n=this.clientWidth,g(1,n)}return p.$$set=S=>{"staggerDelay"in S&&g(0,s=S.staggerDelay),"$$scope"in S&&g(8,e=S.$$scope)},p.$$.update=()=>{p.$$.dirty&6&&n&&(g(2,c=Math.max(Math.ceil((Ti+Ai*r.map(S=>S.area).reduce((S,d)=>S+d,0))/n),400)),h.update(n,c))},[s,n,c,i,a,x,k,w,e,u,v,y]}class rn extends ee{constructor(l){super(),te(this,l,Hi,Ii,ie,{staggerDelay:0})}}function Li(p){let l,g,C=`rotate(${-1*p[4]}rad)`,u=`${p[2]}px`,e=`${p[0]}px`,s=`${p[1]}px`,i=`-${p[1]*.5}px`,n=`-${p[0]*.5}px`,c=`translate(${p[6]}px, ${p[5]}px) rotate(${p[4]}rad)`,a=`${p[10]*p[8].staggerDelay}ms`,f;const r=p[13].default,t=oe(r,p,p[12],null);return{c(){l=Q("li"),g=Q("span"),t&&t.c(),this.h()},l(o){l=Z(o,"LI",{class:!0});var h=O(l);g=Z(h,"SPAN",{});var m=O(g);t&&t.l(m),m.forEach(F),h.forEach(F),this.h()},h(){b(g,"transform",C,!1),U(l,"class","cpeum-38i3u2"),V(l,"hidden",!p[7]),b(l,"border-radius",u,!1),b(l,"width",e,!1),b(l,"height",s,!1),b(l,"top",i,!1),b(l,"left",n,!1),b(l,"transform",c,!1),b(l,"--delay",a,!1)},m(o,h){N(o,l,h),_(l,g),t&&t.m(g,null),p[14](l),f=!0},p(o,[h]){t&&t.p&&(!f||h&4096)&&fe(t,r,o,o[12],f?ce(r,o[12],h,null):ue(o[12]),null),h&16&&C!==(C=`rotate(${-1*o[4]}rad)`)&&b(g,"transform",C,!1),h&128&&V(l,"hidden",!o[7]),h&4&&u!==(u=`${o[2]}px`)&&b(l,"border-radius",u,!1),h&1&&e!==(e=`${o[0]}px`)&&b(l,"width",e,!1),h&2&&s!==(s=`${o[1]}px`)&&b(l,"height",s,!1),h&2&&i!==(i=`-${o[1]*.5}px`)&&b(l,"top",i,!1),h&1&&n!==(n=`-${o[0]*.5}px`)&&b(l,"left",n,!1),h&112&&c!==(c=`translate(${o[6]}px, ${o[5]}px) rotate(${o[4]}rad)`)&&b(l,"transform",c,!1)},i(o){f||(X(t,o),f=!0)},o(o){j(t,o),f=!1},d(o){o&&F(l),t&&t.d(o),p[14](null)}}}const Di=150,Ri=12;function Fi(p,l,g){let C,{$$slots:u={},$$scope:e}=l,{size:s=void 0}=l,{width:i=void 0}=l,{height:n=void 0}=l,{radius:c=void 0}=l,a,f=(Math.random()-.5)/180,r=0,t=0;const o=xe("bodies"),h=o.visible;ge(p,h,v=>g(7,C=v));const m=o.getIndex(),x=o.getEngine();let k;je(()=>{s||g(11,s=Di+Math.sqrt(a.textContent.length)*Ri),i||g(0,i=s),n||g(1,n=i),c||g(2,c=Math.round(Math.random()*.5*i)),k=G.Bodies.rectangle(G.Common.random(0,a.parentElement.clientWidth),G.Common.random(0,a.parentElement.clientHeight),i,n,{angle:f,friction:.1,frictionStatic:12,density:5e-4,chamfer:{radius:c}}),o.addBodyRef(k),G.Composite.add(x.world,k),G.Events.on(x,"afterUpdate",()=>{g(4,f=k.angle),g(5,r=k.position.y),g(6,t=k.position.x)})});function w(v){qe[v?"unshift":"push"](()=>{a=v,g(3,a)})}return p.$$set=v=>{"size"in v&&g(11,s=v.size),"width"in v&&g(0,i=v.width),"height"in v&&g(1,n=v.height),"radius"in v&&g(2,c=v.radius),"$$scope"in v&&g(12,e=v.$$scope)},[i,n,c,a,f,r,t,C,o,h,m,s,e,u,w]}class an extends ee{constructor(l){super(),te(this,l,Fi,Li,ie,{size:11,width:0,height:1,radius:2})}}export{rn as B,_i as C,sn as E,qi as F,Yi as I,ji as L,Ji as M,en as P,tn as a,Xi as b,an as c,nn as d,$i as e};
