import{S as w,i as x,s as $,N as Q,ac as P,a5 as Le,C as W,e as L,c as z,a1 as U,I as _,g as k,W as ze,Q as T,z as Ie,V as Se,E as S,d as m,G as ee,a2 as Y,a9 as qe,a3 as Ee,w as te,a as I,x as le,b as E,y as ie,q as v,K as Ae,R as Be,o as C,B as re,f as y,n as Ce,p as De,v as Pe,a6 as Fe,$ as Ge,a0 as Ne,t as F,h as G,J as K,j as Re,k as X,m as Z,l as p,M as ae}from"./index-8814b013.js";import{m as je,a as b}from"./Map-861cc6bb.js";import{i as Me}from"./intersect-eda3c074.js";import{b as oe}from"./paths-396f020f.js";/* empty css                                            */import{e as Je,L as Oe,d as Qe}from"./BodiesItem-c7e6e33a.js";import{d as Ue,b as Ye}from"./Map.svelte_svelte_type_style_lang-ad9468b4.js";import{e as Xe,f as Ze}from"./index-b9ab12a0.js";import{L as pe}from"./getData-bc4ff00b.js";function we(t,e,l){let a,s;Q(t,je,c=>l(6,s=c));let{id:o}=e,{url:n}=e,{coordinates:i}=e,{opacity:r=1}=e;const f=P("figuremap"),h=f?f.active:null;Q(t,h,c=>l(5,a=c));const g=o+"-layer";return Le(()=>{b&&(b.removeSource(o),b.removeLayer(g))}),t.$$set=c=>{"id"in c&&l(1,o=c.id),"url"in c&&l(2,n=c.url),"coordinates"in c&&l(3,i=c.coordinates),"opacity"in c&&l(4,r=c.opacity)},t.$$.update=()=>{if(t.$$.dirty&94&&s&&(console.log("adding image overlay"),b.getSource(o)||b.addSource(o,{type:"image",url:n,coordinates:i}),b.getLayer(g)||b.addLayer({id:g,source:o,type:"raster",paint:{"raster-opacity":r,"raster-fade-duration":.75}})),t.$$.dirty&96&&h&&s){const c=a?"visible":"none";b.getLayer(g)&&b.setLayoutProperty(g,"visibility",c)}},[h,o,n,i,r,a,s]}class bt extends w{constructor(e){super(),x(this,e,we,null,$,{id:1,url:2,coordinates:3,opacity:4})}}function xe(t){let e,l,a,s,o=[{loading:"lazy"},{decoding:"async"},{src:l=oe+t[2]},{alt:t[0]},t[5]],n={};for(let i=0;i<o.length;i+=1)n=W(n,o[i]);return{c(){e=L("img"),this.h()},l(i){e=z(i,"IMG",{loading:!0,decoding:!0,src:!0,alt:!0}),this.h()},h(){U(e,n),_(e,"hidden",!t[1]),_(e,"cpeum-swqxe7",!0)},m(i,r){k(i,e,r),a||(s=[ze(Me.call(null,e,{rootMargin:"200px 200px 200px 200px"})),T(e,"enter",t[3],{once:!0}),T(e,"load",t[4])],a=!0)},p(i,[r]){U(e,n=Ie(o,[{loading:"lazy"},{decoding:"async"},r&4&&!Se(e.src,l=oe+i[2])&&{src:l},r&1&&{alt:i[0]},r&32&&i[5]])),_(e,"hidden",!i[1]),_(e,"cpeum-swqxe7",!0)},i:S,o:S,d(i){i&&m(e),a=!1,ee(s)}}}function $e(t,e,l){const a=["src","alt"];let s=Y(e,a),{src:o}=e,{alt:n}=e,i=!1,r="";const f=qe();async function h(){l(2,r=o)}function g(){l(1,i=!0),f("load")}return t.$$set=c=>{e=W(W({},e),Ee(c)),l(5,s=Y(e,a)),"src"in c&&l(6,o=c.src),"alt"in c&&l(0,n=c.alt)},[n,i,r,h,g,s,o]}class yt extends w{constructor(e){super(),x(this,e,$e,xe,$,{src:6,alt:0})}}function me(t){let e,l,a,s,o,n;return l=new Je({props:{src:t[1],label:t[0],color:t[3],fill:t[4],colorHighlight:t[6],fillHighlight:t[7],shape:t[2],stroke:t[5],strokeWidth:t[8],strokeType:t[9],interactive:t[10],highlight:t[11]||t[13]==t[17]}}),{c(){e=L("div"),te(l.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var r=I(e);le(l.$$.fragment,r),r.forEach(m),this.h()},h(){E(e,"class","inner cpeum-myx435")},m(i,r){k(i,e,r),ie(l,e,null),s=!0,o||(n=[T(e,"mouseenter",t[23]),T(e,"mouseleave",t[24])],o=!0)},p(i,r){t=i;const f={};r[0]&2&&(f.src=t[1]),r[0]&1&&(f.label=t[0]),r[0]&8&&(f.color=t[3]),r[0]&16&&(f.fill=t[4]),r[0]&64&&(f.colorHighlight=t[6]),r[0]&128&&(f.fillHighlight=t[7]),r[0]&4&&(f.shape=t[2]),r[0]&32&&(f.stroke=t[5]),r[0]&256&&(f.strokeWidth=t[8]),r[0]&512&&(f.strokeType=t[9]),r[0]&1024&&(f.interactive=t[10]),r[0]&141312&&(f.highlight=t[11]||t[13]==t[17]),l.$set(f)},i(i){s||(v(l.$$.fragment,i),a||Ae(()=>{a=Be(e,Ze,{y:15,duration:1e3,easing:Xe,delay:t[20]*150+500}),a.start()}),s=!0)},o(i){C(l.$$.fragment,i),s=!1},d(i){i&&m(e),re(l),o=!1,ee(n)}}}function et(t){let e,l,a=`${t[14]}px`,s,o=(t[12]&&!t[22]||t[22]&&t[19])&&me(t),n=[{class:"outer"},t[25],{style:l=(t[15]?`left: ${t[15]}%;`:"")+" "+(t[16]?`top: ${t[16]}%;`:"")}],i={};for(let r=0;r<n.length;r+=1)i=W(i,n[r]);return{c(){e=L("div"),o&&o.c(),this.h()},l(r){e=z(r,"DIV",{class:!0,style:!0});var f=I(e);o&&o.l(f),f.forEach(m),this.h()},h(){U(e,i),_(e,"highlight",t[11]||t[13]==t[17]),y(e,"font-size",a,!1),_(e,"cpeum-myx435",!0)},m(r,f){k(r,e,f),o&&o.m(e,null),t[29](e),s=!0},p(r,f){r[12]&&!r[22]||r[22]&&r[19]?o?(o.p(r,f),f[0]&528384&&v(o,1)):(o=me(r),o.c(),v(o,1),o.m(e,null)):o&&(Ce(),C(o,1,1,()=>{o=null}),De()),U(e,i=Ie(n,[{class:"outer"},f[0]&33554432&&r[25],(!s||f[0]&98304&&l!==(l=(r[15]?`left: ${r[15]}%;`:"")+" "+(r[16]?`top: ${r[16]}%;`:"")))&&{style:l}])),_(e,"highlight",r[11]||r[13]==r[17]),y(e,"font-size",a,!1),_(e,"cpeum-myx435",!0)},i(r){s||(v(o),s=!0)},o(r){C(o),s=!1},d(r){r&&m(e),o&&o.d(),t[29](null)}}}function tt(t,e,l){const a=["label","src","shape","color","fill","stroke","colorHighlight","fillHighlight","strokeHighlight","strokeWidth","strokeType","interactive","highlight","active","key","size","lnglat","zoom","x","y"];let s=Y(e,a),o,n,{label:i}=e,{src:r=null}=e,{shape:f="circle"}=e,{color:h="var(--accent3)"}=e,{fill:g="var(--light1)"}=e,{stroke:c="none"}=e,{colorHighlight:H=void 0}=e,{fillHighlight:D=void 0}=e,{strokeHighlight:N=void 0}=e,{strokeWidth:d=1}=e,{strokeType:M="solid"}=e,{interactive:V=!0}=e,{highlight:R=!1}=e,{active:j=!0}=e,{key:J=i}=e,{size:fe=40}=e,{lnglat:q=null}=e,{zoom:ne=16}=e,{x:ue=null}=e,{y:ce=null}=e,se,O;P("figure");const A=P("figuremap"),he=P("markers"),Ke=he?he.getIndex():0,B=P("currentKey");Q(t,B,u=>l(17,o=u));const ge=A?A.active:null;Q(t,ge,u=>l(19,n=u));function Te(){B.set(J)}function Ve(){B.set(null)}Pe(()=>{A&&(se=new Ue.exports.Marker({element:O,anchor:"center"}).setLngLat(q).addTo(b))}),Le(()=>{A&&se&&b&&se.remove()});function We(u){Fe[u?"unshift":"push"](()=>{O=u,l(18,O)})}return t.$$set=u=>{e=W(W({},e),Ee(u)),l(25,s=Y(e,a)),"label"in u&&l(0,i=u.label),"src"in u&&l(1,r=u.src),"shape"in u&&l(2,f=u.shape),"color"in u&&l(3,h=u.color),"fill"in u&&l(4,g=u.fill),"stroke"in u&&l(5,c=u.stroke),"colorHighlight"in u&&l(6,H=u.colorHighlight),"fillHighlight"in u&&l(7,D=u.fillHighlight),"strokeHighlight"in u&&l(26,N=u.strokeHighlight),"strokeWidth"in u&&l(8,d=u.strokeWidth),"strokeType"in u&&l(9,M=u.strokeType),"interactive"in u&&l(10,V=u.interactive),"highlight"in u&&l(11,R=u.highlight),"active"in u&&l(12,j=u.active),"key"in u&&l(13,J=u.key),"size"in u&&l(14,fe=u.size),"lnglat"in u&&l(27,q=u.lnglat),"zoom"in u&&l(28,ne=u.zoom),"x"in u&&l(15,ue=u.x),"y"in u&&l(16,ce=u.y)},t.$$.update=()=>{t.$$.dirty[0]&402792448&&A&&q&&B&&o===J&&Ye.set({center:{point:q,zoom:ne}})},[i,r,f,h,g,c,H,D,d,M,V,R,j,J,fe,ue,ce,o,O,n,Ke,B,ge,Te,Ve,s,N,q,ne,We]}class vt extends w{constructor(e){super(),x(this,e,tt,et,$,{label:0,src:1,shape:2,color:3,fill:4,stroke:5,colorHighlight:6,fillHighlight:7,strokeHighlight:26,strokeWidth:8,strokeType:9,interactive:10,highlight:11,active:12,key:13,size:14,lnglat:27,zoom:28,x:15,y:16},null,[-1,-1])}}function de(t,e,l){const a=t.slice();return a[15]=e[l],a}function _e(t,e,l){const a=t.slice();return a[18]=e[l],a[20]=l,a}function ke(t,e,l){const a=t.slice();return a[21]=e[l],a[23]=l,a}function lt(t){let e,l,a,s;return{c(){e=L("p"),l=F("Le chargement du fichier de donn\xE9es "),a=F(t[1]),s=F(" a encontr\xE9 une erreur"),this.h()},l(o){e=z(o,"P",{style:!0});var n=I(e);l=G(n,"Le chargement du fichier de donn\xE9es "),a=G(n,t[1]),s=G(n," a encontr\xE9 une erreur"),n.forEach(m),this.h()},h(){y(e,"color","red"),y(e,"font-style","italic")},m(o,n){k(o,e,n),K(e,l),K(e,a),K(e,s)},p(o,n){n&2&&Re(a,o[1])},i:S,o:S,d(o){o&&m(e)}}}function it(t){let e,l,a,s,o=t[14].columns,n=[];for(let i=0;i<o.length;i+=1)n[i]=ve(_e(t,o,i));return a=new Oe({props:{size:"small",style:"position:sticky; top: 10rem",$$slots:{default:[nt]},$$scope:{ctx:t}}}),{c(){e=L("div");for(let i=0;i<n.length;i+=1)n[i].c();l=X(),te(a.$$.fragment),this.h()},l(i){e=z(i,"DIV",{class:!0});var r=I(e);for(let f=0;f<n.length;f+=1)n[f].l(r);r.forEach(m),l=Z(i),le(a.$$.fragment,i),this.h()},h(){E(e,"class","bars cpeum-1kmhhl3"),y(e,"--max",t[3],!1),y(e,"--center",t[4],!1)},m(i,r){k(i,e,r);for(let f=0;f<n.length;f+=1)n[f].m(e,null);k(i,l,r),ie(a,i,r),s=!0},p(i,r){if(r&389){o=i[14].columns;let h;for(h=0;h<o.length;h+=1){const g=_e(i,o,h);n[h]?n[h].p(g,r):(n[h]=ve(g),n[h].c(),n[h].m(e,null))}for(;h<n.length;h+=1)n[h].d(1);n.length=o.length}r&8&&y(e,"--max",i[3],!1),r&16&&y(e,"--center",i[4],!1);const f={};r&33554433&&(f.$$scope={dirty:r,ctx:i}),a.$set(f)},i(i){s||(v(a.$$.fragment,i),s=!0)},o(i){C(a.$$.fragment,i),s=!1},d(i){i&&m(e),ae(n,i),i&&m(l),re(a,i)}}}function be(t){let e,l,a;function s(){return t[9](t[14],t[23])}return{c(){e=L("div"),this.h()},l(o){e=z(o,"DIV",{class:!0}),I(e).forEach(m),this.h()},h(){E(e,"class","segment cpeum-1kmhhl3"),_(e,"center",t[2]),_(e,"highlight",t[0]===t[14].groups[t[23]].title),y(e,"--value",t[21],!1),y(e,"--color",t[14].groups[t[23]].color,!1)},m(o,n){k(o,e,n),l||(a=[T(e,"mouseover",s),T(e,"mouseleave",t[8])],l=!0)},p(o,n){t=o,n&4&&_(e,"center",t[2]),n&129&&_(e,"highlight",t[0]===t[14].groups[t[23]].title)},d(o){o&&m(e),l=!1,ee(a)}}}function ye(t){let e,l=(t[21]>0||t[2])&&be(t);return{c(){l&&l.c(),e=p()},l(a){l&&l.l(a),e=p()},m(a,s){l&&l.m(a,s),k(a,e,s)},p(a,s){a[21]>0||a[2]?l?l.p(a,s):(l=be(a),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(a){l&&l.d(a),a&&m(e)}}}function ve(t){let e,l,a=t[18].title+"",s,o,n,i,r=t[18].rows,f=[];for(let h=0;h<r.length;h+=1)f[h]=ye(ke(t,r,h));return{c(){e=L("div"),l=L("div"),s=F(a),o=X(),n=L("div");for(let h=0;h<f.length;h+=1)f[h].c();i=X(),this.h()},l(h){e=z(h,"DIV",{class:!0});var g=I(e);l=z(g,"DIV",{class:!0});var c=I(l);s=G(c,a),c.forEach(m),o=Z(g),n=z(g,"DIV",{class:!0,style:!0});var H=I(n);for(let D=0;D<f.length;D+=1)f[D].l(H);H.forEach(m),i=Z(g),g.forEach(m),this.h()},h(){E(l,"class","col-title cpeum-1kmhhl3"),_(l,"centered",t[2]),E(n,"class","bar cpeum-1kmhhl3"),y(n,"transition-delay",t[20]*150+"ms"),E(e,"class","bar-wrapper")},m(h,g){k(h,e,g),K(e,l),K(l,s),K(e,o),K(e,n);for(let c=0;c<f.length;c+=1)f[c].m(n,null);K(e,i)},p(h,g){if(g&4&&_(l,"centered",h[2]),g&389){r=h[18].rows;let c;for(c=0;c<r.length;c+=1){const H=ke(h,r,c);f[c]?f[c].p(H,g):(f[c]=ye(H),f[c].c(),f[c].m(n,null))}for(;c<f.length;c+=1)f[c].d(1);f.length=r.length}},d(h){h&&m(e),ae(f,h)}}}function rt(t){let e=t[15].title+"",l,a;return{c(){l=F(e),a=X()},l(s){l=G(s,e),a=Z(s)},m(s,o){k(s,l,o),k(s,a,o)},p:S,d(s){s&&m(l),s&&m(a)}}}function He(t){let e,l;function a(){return t[10](t[15])}return e=new Qe({props:{highlight:t[0]===t[15].title,fill:t[15].color,$$slots:{default:[rt]},$$scope:{ctx:t}}}),e.$on("mouseover",a),e.$on("mouseleave",t[11]),{c(){te(e.$$.fragment)},l(s){le(e.$$.fragment,s)},m(s,o){ie(e,s,o),l=!0},p(s,o){t=s;const n={};o&1&&(n.highlight=t[0]===t[15].title),o&33554432&&(n.$$scope={dirty:o,ctx:t}),e.$set(n)},i(s){l||(v(e.$$.fragment,s),l=!0)},o(s){C(e.$$.fragment,s),l=!1},d(s){re(e,s)}}}function nt(t){let e,l,a=t[14].groups,s=[];for(let n=0;n<a.length;n+=1)s[n]=He(de(t,a,n));const o=n=>C(s[n],1,1,()=>{s[n]=null});return{c(){for(let n=0;n<s.length;n+=1)s[n].c();e=p()},l(n){for(let i=0;i<s.length;i+=1)s[i].l(n);e=p()},m(n,i){for(let r=0;r<s.length;r+=1)s[r].m(n,i);k(n,e,i),l=!0},p(n,i){if(i&129){a=n[14].groups;let r;for(r=0;r<a.length;r+=1){const f=de(n,a,r);s[r]?(s[r].p(f,i),v(s[r],1)):(s[r]=He(f),s[r].c(),v(s[r],1),s[r].m(e.parentNode,e))}for(Ce(),r=a.length;r<s.length;r+=1)o(r);De()}},i(n){if(!l){for(let i=0;i<a.length;i+=1)v(s[i]);l=!0}},o(n){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)C(s[i]);l=!1},d(n){ae(s,n),n&&m(e)}}}function st(t){let e,l;return e=new pe({}),{c(){te(e.$$.fragment)},l(a){le(e.$$.fragment,a)},m(a,s){ie(e,a,s),l=!0},p:S,i(a){l||(v(e.$$.fragment,a),l=!0)},o(a){C(e.$$.fragment,a),l=!1},d(a){re(e,a)}}}function ot(t){let e,l,a,s,o={ctx:t,current:null,token:null,hasCatch:!0,pending:st,then:it,catch:lt,value:14,error:24,blocks:[,,,]};return Ge(t[7],o),{c(){e=L("figure"),o.block.c(),this.h()},l(n){e=z(n,"FIGURE",{visible:!0,class:!0});var i=I(e);o.block.l(i),i.forEach(m),this.h()},h(){E(e,"visible",t[5]),E(e,"class","cpeum-1kmhhl3")},m(n,i){k(n,e,i),o.block.m(e,o.anchor=null),o.mount=()=>e,o.anchor=null,l=!0,a||(s=[ze(Me.call(null,e)),T(e,"enter",t[6],{once:!0})],a=!0)},p(n,[i]){t=n,Ne(o,t,i),(!l||i&32)&&E(e,"visible",t[5])},i(n){l||(v(o.block),l=!0)},o(n){for(let i=0;i<3;i+=1){const r=o.blocks[i];C(r)}l=!1},d(n){n&&m(e),o.block.d(),o.token=null,o=null,a=!1,ee(s)}}}function at(t,e,l){let{src:a}=e,{highlightKey:s=null}=e,{centered:o=!1}=e,n,i,r=!1;function f(){l(5,r=!0)}async function h(){const d=await fetch(oe+a);if(d.ok){const M=await d.json();return l(3,n=Math.max(...M.columns.map(V=>V.rows.reduce((R,j)=>R+j,0)))),l(4,i=Math.max(...M.columns.map(V=>V.rows[0]))),M}else throw new Error(`Le chargement du fichier de donn\xE9es ${a} a encontr\xE9 une erreur`)}let g=h();function c(){l(0,s=null)}const H=(d,M)=>l(0,s=d.groups[M].title),D=d=>l(0,s=d.title),N=()=>l(0,s=null);return t.$$set=d=>{"src"in d&&l(1,a=d.src),"highlightKey"in d&&l(0,s=d.highlightKey),"centered"in d&&l(2,o=d.centered)},[s,a,o,n,i,r,f,g,c,H,D,N]}class Ht extends w{constructor(e){super(),x(this,e,at,ot,$,{src:1,highlightKey:0,centered:2})}}export{Ht as B,vt as F,yt as I,bt as M};
