import{S as w,i as _,s as B,N as R,ac as j,a9 as q,a5 as z}from"./index-bbca5c05.js";import{m as K,a as i}from"./Map-124020e9.js";import{g as E}from"./Map.svelte_svelte_type_style_lang-00527014.js";import{b as T}from"./paths-396f020f.js";function Y(s,t,o){let g,M;R(s,K,e=>o(20,g=e));let{data:r}=t,{fillColor:n="none"}=t,{fillColorHover:y=n}=t,{fillColorHighlight:d=n}=t,{fillOpacity:c=1}=t,{fillOpacityHover:m=c}=t,{fillOpacityHighlight:k=c}=t,{strokeWidth:v=6}=t,{strokeWidthHover:H=12}=t,{strokeWidthHighlight:C=10}=t,{strokeColor:h="none"}=t,{strokeColorHover:b=h}=t,{strokeColorHighlight:L=h}=t,{strokeOpacity:u=1}=t,{strokeOpacityHover:S=u}=t,{strokeOpacityHighlight:O=u}=t,{strokeDashArray:W=[1,0]}=t,{radius:I=10}=t,{id:l}=t;const x=j("figuremap");j("currentKey");const F=x?x.active:null;R(s,F,e=>o(21,M=e));const a={LINES:l+"-lines",CIRCLES:l+"-circles",FILLS:l+"-fills"};let f=null;const N=q();function D(e){e.features.length>0&&(f!==e.features[0].id&&(N("hover",e),f!==null&&i.setFeatureState({source:l,id:f},{hover:!1})),f=e.features[0].id,i.setFeatureState({source:l,id:f},{hover:!0}))}function A(e){f!==null&&(i.setFeatureState({source:l,id:f},{hover:!1}),f=null),f=null,N("leave",e)}return r.features?(r.features.forEach((e,P)=>{e.id||(e.id=Math.floor((P+Math.random())*1e3))}),E.add(...r.features)):(r.id||(r.id=Math.floor(Math.random()*1e3)),E.add(r)),z(()=>{i.getSource(l)&&i.removeSource(l);for(const e of Object.values(a))i.getLayer(e)&&i.removeLayer(e);r.features?r.features.forEach(e=>E.removeById(e.id)):E.removeById(r.id)}),s.$$set=e=>{"data"in e&&o(1,r=e.data),"fillColor"in e&&o(2,n=e.fillColor),"fillColorHover"in e&&o(3,y=e.fillColorHover),"fillColorHighlight"in e&&o(4,d=e.fillColorHighlight),"fillOpacity"in e&&o(5,c=e.fillOpacity),"fillOpacityHover"in e&&o(6,m=e.fillOpacityHover),"fillOpacityHighlight"in e&&o(7,k=e.fillOpacityHighlight),"strokeWidth"in e&&o(8,v=e.strokeWidth),"strokeWidthHover"in e&&o(9,H=e.strokeWidthHover),"strokeWidthHighlight"in e&&o(10,C=e.strokeWidthHighlight),"strokeColor"in e&&o(11,h=e.strokeColor),"strokeColorHover"in e&&o(12,b=e.strokeColorHover),"strokeColorHighlight"in e&&o(13,L=e.strokeColorHighlight),"strokeOpacity"in e&&o(14,u=e.strokeOpacity),"strokeOpacityHover"in e&&o(15,S=e.strokeOpacityHover),"strokeOpacityHighlight"in e&&o(16,O=e.strokeOpacityHighlight),"strokeDashArray"in e&&o(17,W=e.strokeDashArray),"radius"in e&&o(18,I=e.radius),"id"in e&&o(19,l=e.id)},s.$$.update=()=>{if(s.$$.dirty&3145728&&F&&g){const e=M?"visible":"none";for(const P of Object.values(a))i.setLayoutProperty(P,"visibility",e)}s.$$.dirty&2097150&&g&&!i.getSource(l)&&(i.addSource(l,{type:"geojson",data:r}),i.addLayer({id:a.LINES,type:"line",source:l,filter:["any",["==",["geometry-type"],"LineString"],["==",["geometry-type"],"MultiLineString"],["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"line-width":["case",["boolean",["feature-state","hover"],!1],H,["boolean",["feature-state","highlight"],!1],C,v],"line-color":["case",["boolean",["feature-state","hover"],!1],b,["boolean",["feature-state","highlight"],!1],L,h],"line-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],O,u],"line-dasharray":W},layout:{visibility:"visible","line-cap":"round","line-join":"round"}}),i.on("mouseenter",a.LINES,function(e){}),i.on("mousemove",a.LINES,function(e){D(e)}),i.on("mouseleave",a.LINES,function(e){A(e)}),i.addLayer({id:a.CIRCLES,type:"circle",source:l,filter:["any",["==",["geometry-type"],"Point"],["==",["geometry-type"],"MultiPoint"]],paint:{"circle-pitch-alignment":"map","circle-pitch-scale":"map","circle-radius":["interpolate",["exponential",2],["zoom"],10,["/",["coalesce",["get","radius"],I],58.554],20,["/",["coalesce",["get","radius"],I],.014]],"circle-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],d,n],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],m,["boolean",["feature-state","highlight"],!1],k,c],"circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],H,["boolean",["feature-state","highlight"],!1],C,v],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],b,["boolean",["feature-state","highlight"],!1],L,h],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],O,u]},layout:{visibility:"visible"}}),i.on("mouseenter",a.CIRCLES,function(e){}),i.on("mousemove",a.CIRCLES,function(e){D(e)}),i.on("mouseleave",a.CIRCLES,function(e){A(e)}),i.addLayer({id:a.FILLS,type:"fill",source:l,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],d,n],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],m,["boolean",["feature-state","highlight"],!1],k,c],"fill-antialias":!0},layout:{visibility:"visible"}}),i.on("mouseenter",a.FILLS,function(e){}),i.on("mousemove",a.FILLS,function(e){D(e)}),i.on("mouseleave",a.FILLS,function(e){A(e)}))},[F,r,n,y,d,c,m,k,v,H,C,h,b,L,u,S,O,W,I,l,g,M]}class V extends w{constructor(t){super(),_(this,t,Y,null,B,{data:1,fillColor:2,fillColorHover:3,fillColorHighlight:4,fillOpacity:5,fillOpacityHover:6,fillOpacityHighlight:7,strokeWidth:8,strokeWidthHover:9,strokeWidthHighlight:10,strokeColor:11,strokeColorHover:12,strokeColorHighlight:13,strokeOpacity:14,strokeOpacityHover:15,strokeOpacityHighlight:16,strokeDashArray:17,radius:18,id:19})}}async function X(s){const t=await fetch(T+s);if(t.ok)return t.json();throw Error(t.status+": "+t.statusText)}export{V as M,X as g};
