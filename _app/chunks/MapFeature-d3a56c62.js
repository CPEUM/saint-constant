import{S as Q,i as T,s as X,C as R,e as Z,O as B,c as p,a as N,P as w,d as W,b as g,a1 as q,I as J,g as $,J as K,z as ee,U as te,a2 as U,a3 as ie,N as Y,ac as G,a9 as oe,a5 as le}from"./index-8814b013.js";import{a as ae}from"./index-b9ab12a0.js";import{m as re,a as o}from"./getData-6073a5bf.js";import{g as F}from"./Map.svelte_svelte_type_style_lang-ad9468b4.js";function se(u){let t,i,a,y,r,f,d=[{class:"loading-wrapper"},{style:y="font-size: "+u[0]+"px; background-color: "+u[2]},u[3]],s={};for(let l=0;l<d.length;l+=1)s=R(s,d[l]);return{c(){t=Z("div"),i=B("svg"),a=B("circle"),this.h()},l(l){t=p(l,"DIV",{class:!0,style:!0});var h=N(t);i=w(h,"svg",{class:!0,viewBox:!0});var k=N(i);a=w(k,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"vector-effect":!0,class:!0});var m=N(a);m.forEach(W),k.forEach(W),h.forEach(W),this.h()},h(){g(a,"cx","50"),g(a,"cy","50"),g(a,"r","50"),g(a,"fill","none"),g(a,"stroke",u[1]),g(a,"stroke-width","4"),g(a,"stroke-linecap","round"),g(a,"vector-effect","non-scaling-stroke"),g(a,"class","cpeum-13to7g7"),g(i,"class","loading cpeum-13to7g7"),g(i,"viewBox","0 0 100 100"),q(t,s),J(t,"cpeum-13to7g7",!0)},m(l,h){$(l,t,h),K(t,i),K(i,a),f=!0},p(l,[h]){(!f||h&2)&&g(a,"stroke",l[1]),q(t,s=ee(d,[{class:"loading-wrapper"},(!f||h&5&&y!==(y="font-size: "+l[0]+"px; background-color: "+l[2]))&&{style:y},h&8&&l[3]])),J(t,"cpeum-13to7g7",!0)},i(l){f||(r&&r.end(1),f=!0)},o(l){r=te(t,ae,{duration:250}),f=!1},d(l){l&&W(t),l&&r&&r.end()}}}function ne(u,t,i){const a=["size","color","background"];let y=U(t,a),{size:r=40}=t,{color:f="var(--dark1)"}=t,{background:d="transparent"}=t;return u.$$set=s=>{t=R(R({},t),ie(s)),i(3,y=U(t,a)),"size"in s&&i(0,r=s.size),"color"in s&&i(1,f=s.color),"background"in s&&i(2,d=s.background)},[r,f,d,y]}class ye extends Q{constructor(t){super(),T(this,t,ne,se,X,{size:0,color:1,background:2})}}function ce(u,t,i){let a,y;Y(u,re,e=>i(21,a=e));let{data:r}=t,{fillColor:f="none"}=t,{fillColorHover:d=f}=t,{fillColorHighlight:s=f}=t,{fillOpacity:l=1}=t,{fillOpacityHover:h=l}=t,{fillOpacityHighlight:k=l}=t,{strokeWidth:m=6}=t,{strokeWidthHover:C=m}=t,{strokeWidthHighlight:S=m}=t,{strokeColor:b="none"}=t,{strokeColorHover:_=b}=t,{strokeColorHighlight:O=b}=t,{strokeOpacity:L=1}=t,{strokeOpacityHover:I=L}=t,{strokeOpacityHighlight:E=L}=t,{strokeDashArray:z=[1,0]}=t,{radius:M=10}=t,{id:n}=t,{initialVisibility:H="none"}=t;const V=G("figuremap");G("currentKey");const P=V?V.active:null;Y(u,P,e=>i(22,y=e));const c={LINES:n+"-lines",CIRCLES:n+"-circles",FILLS:n+"-fills"};let v=null;const j=oe();function D(e){e.features.length>0&&(v!==e.features[0].id&&(j("hover",e),v!==null&&o.setFeatureState({source:n,id:v},{hover:!1})),v=e.features[0].id,o.setFeatureState({source:n,id:v},{hover:!0}))}function x(e){v!==null&&(o.setFeatureState({source:n,id:v},{hover:!1}),v=null),v=null,j("leave",e)}return r.features?(r.features.forEach((e,A)=>{e.id=Math.floor((A+Math.random())*1e3),e.properties.source=n}),F.add(...r.features)):(r.id=Math.floor(Math.random()*1e3),r.properties.source=n,F.add(r)),le(()=>{o.getSource(n)&&o.removeSource(n);for(const e of Object.values(c))o.getLayer(e)&&o.removeLayer(e);r.features?r.features.forEach(e=>F.removeById(e.id)):F.removeById(r.id)}),u.$$set=e=>{"data"in e&&i(1,r=e.data),"fillColor"in e&&i(2,f=e.fillColor),"fillColorHover"in e&&i(3,d=e.fillColorHover),"fillColorHighlight"in e&&i(4,s=e.fillColorHighlight),"fillOpacity"in e&&i(5,l=e.fillOpacity),"fillOpacityHover"in e&&i(6,h=e.fillOpacityHover),"fillOpacityHighlight"in e&&i(7,k=e.fillOpacityHighlight),"strokeWidth"in e&&i(8,m=e.strokeWidth),"strokeWidthHover"in e&&i(9,C=e.strokeWidthHover),"strokeWidthHighlight"in e&&i(10,S=e.strokeWidthHighlight),"strokeColor"in e&&i(11,b=e.strokeColor),"strokeColorHover"in e&&i(12,_=e.strokeColorHover),"strokeColorHighlight"in e&&i(13,O=e.strokeColorHighlight),"strokeOpacity"in e&&i(14,L=e.strokeOpacity),"strokeOpacityHover"in e&&i(15,I=e.strokeOpacityHover),"strokeOpacityHighlight"in e&&i(16,E=e.strokeOpacityHighlight),"strokeDashArray"in e&&i(17,z=e.strokeDashArray),"radius"in e&&i(18,M=e.radius),"id"in e&&i(19,n=e.id),"initialVisibility"in e&&i(20,H=e.initialVisibility)},u.$$.update=()=>{if(u.$$.dirty&6291456&&a&&P){const e=y?"visible":"none";for(const A of Object.values(c))o.setLayoutProperty(A,"visibility",e)}u.$$.dirty&4194302&&a&&(o.getSource(n)||o.addSource(n,{type:"geojson",data:r}),o.getLayer(c.LINES)||(o.addLayer({id:c.LINES,type:"line",source:n,filter:["any",["==",["geometry-type"],"LineString"],["==",["geometry-type"],"MultiLineString"],["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"line-width":["case",["boolean",["feature-state","hover"],!1],C,["boolean",["feature-state","highlight"],!1],S,m],"line-color":["case",["boolean",["feature-state","hover"],!1],_,["boolean",["feature-state","highlight"],!1],O,b],"line-opacity":["case",["boolean",["feature-state","hover"],!1],I,["boolean",["feature-state","highlight"],!1],E,L],"line-dasharray":z},layout:{visibility:H,"line-cap":"round","line-join":"round"}}),o.on("mouseenter",c.LINES,function(e){}),o.on("mousemove",c.LINES,function(e){D(e)}),o.on("mouseleave",c.LINES,function(e){x(e)})),o.getLayer(c.CIRCLES)||(o.addLayer({id:c.CIRCLES,type:"circle",source:n,filter:["any",["==",["geometry-type"],"Point"],["==",["geometry-type"],"MultiPoint"]],paint:{"circle-pitch-alignment":"map","circle-pitch-scale":"map","circle-radius":["interpolate",["exponential",2],["zoom"],10,["/",["coalesce",["get","radius"],M],58.554],20,["/",["coalesce",["get","radius"],M],.014]],"circle-color":["case",["boolean",["feature-state","hover"],!1],d,["boolean",["feature-state","highlight"],!1],s,f],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],h,["boolean",["feature-state","highlight"],!1],k,l],"circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],C,["boolean",["feature-state","highlight"],!1],S,m],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],_,["boolean",["feature-state","highlight"],!1],O,b],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],I,["boolean",["feature-state","highlight"],!1],E,L]},layout:{visibility:H}}),o.on("mouseenter",c.CIRCLES,function(e){}),o.on("mousemove",c.CIRCLES,function(e){D(e)}),o.on("mouseleave",c.CIRCLES,function(e){x(e)})),o.getLayer(c.FILLS)||(o.addLayer({id:c.FILLS,type:"fill",source:n,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],d,["boolean",["feature-state","highlight"],!1],s,f],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],h,["boolean",["feature-state","highlight"],!1],k,l],"fill-antialias":!0},layout:{visibility:H}}),o.on("mouseenter",c.FILLS,function(e){}),o.on("mousemove",c.FILLS,function(e){D(e)}),o.on("mouseleave",c.FILLS,function(e){x(e)})))},[P,r,f,d,s,l,h,k,m,C,S,b,_,O,L,I,E,z,M,n,H,a,y]}class de extends Q{constructor(t){super(),T(this,t,ce,null,X,{data:1,fillColor:2,fillColorHover:3,fillColorHighlight:4,fillOpacity:5,fillOpacityHover:6,fillOpacityHighlight:7,strokeWidth:8,strokeWidthHover:9,strokeWidthHighlight:10,strokeColor:11,strokeColorHover:12,strokeColorHighlight:13,strokeOpacity:14,strokeOpacityHover:15,strokeOpacityHighlight:16,strokeDashArray:17,radius:18,id:19,initialVisibility:20})}}export{ye as L,de as M};
