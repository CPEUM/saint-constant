import{S as G,i as Q,s as T,C as N,e as X,O as B,c as Z,a as A,P as w,d as M,b as g,a1 as q,I as J,g as p,J as K,z as $,U as ee,a2 as U,a3 as te,N as V,ac as Y,a9 as ie,a5 as oe}from"./index-8814b013.js";import{a as le}from"./index-b9ab12a0.js";import{m as ae,a}from"./getData-ef8f77e9.js";import{g as W}from"./Map.svelte_svelte_type_style_lang-ad9468b4.js";function re(f){let t,i,l,d,r,c,y=[{class:"loading-wrapper"},{style:d="font-size: "+f[0]+"px; background-color: "+f[2]},f[3]],s={};for(let o=0;o<y.length;o+=1)s=N(s,y[o]);return{c(){t=X("div"),i=B("svg"),l=B("circle"),this.h()},l(o){t=Z(o,"DIV",{class:!0,style:!0});var h=A(t);i=w(h,"svg",{class:!0,viewBox:!0});var k=A(i);l=w(k,"circle",{cx:!0,cy:!0,r:!0,fill:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"vector-effect":!0,class:!0});var m=A(l);m.forEach(M),k.forEach(M),h.forEach(M),this.h()},h(){g(l,"cx","50"),g(l,"cy","50"),g(l,"r","50"),g(l,"fill","none"),g(l,"stroke",f[1]),g(l,"stroke-width","4"),g(l,"stroke-linecap","round"),g(l,"vector-effect","non-scaling-stroke"),g(l,"class","cpeum-13to7g7"),g(i,"class","loading cpeum-13to7g7"),g(i,"viewBox","0 0 100 100"),q(t,s),J(t,"cpeum-13to7g7",!0)},m(o,h){p(o,t,h),K(t,i),K(i,l),c=!0},p(o,[h]){(!c||h&2)&&g(l,"stroke",o[1]),q(t,s=$(y,[{class:"loading-wrapper"},(!c||h&5&&d!==(d="font-size: "+o[0]+"px; background-color: "+o[2]))&&{style:d},h&8&&o[3]])),J(t,"cpeum-13to7g7",!0)},i(o){c||(r&&r.end(1),c=!0)},o(o){r=ee(t,le,{duration:250}),c=!1},d(o){o&&M(t),o&&r&&r.end()}}}function se(f,t,i){const l=["size","color","background"];let d=U(t,l),{size:r=40}=t,{color:c="var(--dark1)"}=t,{background:y="transparent"}=t;return f.$$set=s=>{t=N(N({},t),te(s)),i(3,d=U(t,l)),"size"in s&&i(0,r=s.size),"color"in s&&i(1,c=s.color),"background"in s&&i(2,y=s.background)},[r,c,y,d]}class ge extends G{constructor(t){super(),Q(this,t,se,re,T,{size:0,color:1,background:2})}}function ne(f,t,i){let l,d;V(f,ae,e=>i(20,l=e));let{data:r}=t,{fillColor:c="none"}=t,{fillColorHover:y=c}=t,{fillColorHighlight:s=c}=t,{fillOpacity:o=1}=t,{fillOpacityHover:h=o}=t,{fillOpacityHighlight:k=o}=t,{strokeWidth:m=6}=t,{strokeWidthHover:C=m}=t,{strokeWidthHighlight:L=m}=t,{strokeColor:b="none"}=t,{strokeColorHover:_=b}=t,{strokeColorHighlight:O=b}=t,{strokeOpacity:H=1}=t,{strokeOpacityHover:S=H}=t,{strokeOpacityHighlight:I=H}=t,{strokeDashArray:F=[1,0]}=t,{radius:E=10}=t,{id:n}=t;const R=Y("figuremap");Y("currentKey");const z=R?R.active:null;V(f,z,e=>i(21,d=e));const u={LINES:n+"-lines",CIRCLES:n+"-circles",FILLS:n+"-fills"};let v=null;const j=ie();function P(e){e.features.length>0&&(v!==e.features[0].id&&(j("hover",e),v!==null&&a.setFeatureState({source:n,id:v},{hover:!1})),v=e.features[0].id,a.setFeatureState({source:n,id:v},{hover:!0}))}function D(e){v!==null&&(a.setFeatureState({source:n,id:v},{hover:!1}),v=null),v=null,j("leave",e)}return r.features?(r.features.forEach((e,x)=>{e.id=Math.floor((x+Math.random())*1e3),e.properties.source=n}),W.add(...r.features)):(r.id=Math.floor(Math.random()*1e3),r.properties.source=n,W.add(r)),oe(()=>{a.getSource(n)&&a.removeSource(n);for(const e of Object.values(u))a.getLayer(e)&&a.removeLayer(e);r.features?r.features.forEach(e=>W.removeById(e.id)):W.removeById(r.id)}),f.$$set=e=>{"data"in e&&i(1,r=e.data),"fillColor"in e&&i(2,c=e.fillColor),"fillColorHover"in e&&i(3,y=e.fillColorHover),"fillColorHighlight"in e&&i(4,s=e.fillColorHighlight),"fillOpacity"in e&&i(5,o=e.fillOpacity),"fillOpacityHover"in e&&i(6,h=e.fillOpacityHover),"fillOpacityHighlight"in e&&i(7,k=e.fillOpacityHighlight),"strokeWidth"in e&&i(8,m=e.strokeWidth),"strokeWidthHover"in e&&i(9,C=e.strokeWidthHover),"strokeWidthHighlight"in e&&i(10,L=e.strokeWidthHighlight),"strokeColor"in e&&i(11,b=e.strokeColor),"strokeColorHover"in e&&i(12,_=e.strokeColorHover),"strokeColorHighlight"in e&&i(13,O=e.strokeColorHighlight),"strokeOpacity"in e&&i(14,H=e.strokeOpacity),"strokeOpacityHover"in e&&i(15,S=e.strokeOpacityHover),"strokeOpacityHighlight"in e&&i(16,I=e.strokeOpacityHighlight),"strokeDashArray"in e&&i(17,F=e.strokeDashArray),"radius"in e&&i(18,E=e.radius),"id"in e&&i(19,n=e.id)},f.$$.update=()=>{if(f.$$.dirty&3145728&&z&&l){const e=d?"visible":"none";for(const x of Object.values(u))a.setLayoutProperty(x,"visibility",e)}f.$$.dirty&2097150&&l&&!a.getSource(n)&&(a.addSource(n,{type:"geojson",data:r}),a.addLayer({id:u.LINES,type:"line",source:n,filter:["any",["==",["geometry-type"],"LineString"],["==",["geometry-type"],"MultiLineString"],["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"line-width":["case",["boolean",["feature-state","hover"],!1],C,["boolean",["feature-state","highlight"],!1],L,m],"line-color":["case",["boolean",["feature-state","hover"],!1],_,["boolean",["feature-state","highlight"],!1],O,b],"line-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],I,H],"line-dasharray":F},layout:{visibility:"visible","line-cap":"round","line-join":"round"}}),a.on("mouseenter",u.LINES,function(e){}),a.on("mousemove",u.LINES,function(e){P(e)}),a.on("mouseleave",u.LINES,function(e){D(e)}),a.addLayer({id:u.CIRCLES,type:"circle",source:n,filter:["any",["==",["geometry-type"],"Point"],["==",["geometry-type"],"MultiPoint"]],paint:{"circle-pitch-alignment":"map","circle-pitch-scale":"map","circle-radius":["interpolate",["exponential",2],["zoom"],10,["/",["coalesce",["get","radius"],E],58.554],20,["/",["coalesce",["get","radius"],E],.014]],"circle-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],s,c],"circle-opacity":["case",["boolean",["feature-state","hover"],!1],h,["boolean",["feature-state","highlight"],!1],k,o],"circle-stroke-width":["case",["boolean",["feature-state","hover"],!1],C,["boolean",["feature-state","highlight"],!1],L,m],"circle-stroke-color":["case",["boolean",["feature-state","hover"],!1],_,["boolean",["feature-state","highlight"],!1],O,b],"circle-stroke-opacity":["case",["boolean",["feature-state","hover"],!1],S,["boolean",["feature-state","highlight"],!1],I,H]},layout:{visibility:"visible"}}),a.on("mouseenter",u.CIRCLES,function(e){}),a.on("mousemove",u.CIRCLES,function(e){P(e)}),a.on("mouseleave",u.CIRCLES,function(e){D(e)}),a.addLayer({id:u.FILLS,type:"fill",source:n,filter:["any",["==",["geometry-type"],"Polygon"],["==",["geometry-type"],"MultiPolygon"]],paint:{"fill-color":["case",["boolean",["feature-state","hover"],!1],y,["boolean",["feature-state","highlight"],!1],s,c],"fill-opacity":["case",["boolean",["feature-state","hover"],!1],h,["boolean",["feature-state","highlight"],!1],k,o],"fill-antialias":!0},layout:{visibility:"visible"}}),a.on("mouseenter",u.FILLS,function(e){}),a.on("mousemove",u.FILLS,function(e){P(e)}),a.on("mouseleave",u.FILLS,function(e){D(e)}))},[z,r,c,y,s,o,h,k,m,C,L,b,_,O,H,S,I,F,E,n,l,d]}class de extends G{constructor(t){super(),Q(this,t,ne,null,T,{data:1,fillColor:2,fillColorHover:3,fillColorHighlight:4,fillOpacity:5,fillOpacityHover:6,fillOpacityHighlight:7,strokeWidth:8,strokeWidthHover:9,strokeWidthHighlight:10,strokeColor:11,strokeColorHover:12,strokeColorHighlight:13,strokeOpacity:14,strokeOpacityHover:15,strokeOpacityHighlight:16,strokeDashArray:17,radius:18,id:19})}}export{ge as L,de as M};
