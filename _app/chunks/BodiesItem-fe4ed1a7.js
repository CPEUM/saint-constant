import{S as ee,i as te,s as ne,_ as oe,C as $,e as K,c as Z,a as z,d as R,b as N,a1 as pe,I as V,g as G,J as _,W as ke,X as le,Y as fe,Z as ue,z as de,q as Y,o as j,a2 as xe,a3 as Ue,w as Be,k as ye,x as Ae,m as Se,y as He,B as Le,t as ve,h as me,j as Te,f as b,E as be,G as Fe,Q as re,ac as Ne,r as Pe,K as Je,af as ht,N as Ce,l as Ge,O as we,P as Me,T as he,a4 as Ke,L as st,v as gt,a5 as Ct,a6 as vt}from"./index-bbca5c05.js";import{i as Xe}from"./intersect-eda3c074.js";import{a as mt,r as dt}from"./revealText-510b6fa3.js";import{b as rt}from"./paths-396f020f.js";import"./scroll-701ec54a.js";/* empty css                                            */import{a as at}from"./Map-124020e9.js";import{m as Ze,a as ot,b as Ee,h as Oe,i as pt}from"./Map.svelte_svelte_type_style_lang-00527014.js";import{w as ze}from"./index-236d7f9e.js";import{g as lt}from"./themeColors-35fcc233.js";import{a as ft}from"./index-d82f60b1.js";function wt(S){let h,m,P,u,e;const s=S[2].default,n=oe(s,S,S[1],null);let i=[S[0]],c={};for(let a=0;a<i.length;a+=1)c=$(c,i[a]);return{c(){h=K("h2"),m=K("span"),n&&n.c(),this.h()},l(a){h=Z(a,"H2",{});var f=z(h);m=Z(f,"SPAN",{class:!0});var r=z(m);n&&n.l(r),r.forEach(R),f.forEach(R),this.h()},h(){N(m,"class","cpeum-1uh9iq8"),pe(h,c),V(h,"cpeum-1uh9iq8",!0)},m(a,f){G(a,h,f),_(h,m),n&&n.m(m,null),P=!0,u||(e=ke(mt.call(null,h,dt)),u=!0)},p(a,[f]){n&&n.p&&(!P||f&2)&&le(n,s,a,a[1],P?ue(s,a[1],f,null):fe(a[1]),null),pe(h,c=de(i,[f&1&&a[0]])),V(h,"cpeum-1uh9iq8",!0)},i(a){P||(Y(n,a),P=!0)},o(a){j(n,a),P=!1},d(a){a&&R(h),n&&n.d(a),u=!1,e()}}}function Mt(S,h,m){const P=[];let u=xe(h,P),{$$slots:e={},$$scope:s}=h;return S.$$set=n=>{h=$($({},h),Ue(n)),m(0,u=xe(h,P)),"$$scope"in n&&m(1,s=n.$$scope)},[u,s,e]}class Qe extends ee{constructor(h){super(),te(this,h,Mt,wt,ne,{})}}function Et(S){let h;return{c(){h=ve(S[0])},l(m){h=me(m,S[0])},m(m,P){G(m,h,P)},p(m,P){P&1&&Te(h,m[0])},d(m){m&&R(h)}}}function It(S){let h,m,P,u;m=new Qe({props:{$$slots:{default:[Et]},$$scope:{ctx:S}}});const e=S[1].default,s=oe(e,S,S[2],null);return{c(){h=K("section"),Be(m.$$.fragment),P=ye(),s&&s.c()},l(n){h=Z(n,"SECTION",{});var i=z(h);Ae(m.$$.fragment,i),P=Se(i),s&&s.l(i),i.forEach(R)},m(n,i){G(n,h,i),He(m,h,null),_(h,P),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&5&&(c.$$scope={dirty:i,ctx:n}),m.$set(c),s&&s.p&&(!u||i&4)&&le(s,e,n,n[2],u?ue(e,n[2],i,null):fe(n[2]),null)},i(n){u||(Y(m.$$.fragment,n),Y(s,n),u=!0)},o(n){j(m.$$.fragment,n),j(s,n),u=!1},d(n){n&&R(h),Le(m),s&&s.d(n)}}}function kt(S,h,m){let{$$slots:P={},$$scope:u}=h,{heading:e}=h;return S.$$set=s=>{"heading"in s&&m(0,e=s.heading),"$$scope"in s&&m(2,u=s.$$scope)},[e,P,u]}class Dn extends ee{constructor(h){super(),te(this,h,kt,It,ne,{heading:0})}}function Tt(S,{scrollParent:h=document.body,factor:m=.8}={}){let P=0;function u(){const e=S.getBoundingClientRect();P=(Math.min(window.innerHeight,Math.max(-e.height,e.top-P))+e.height/2-window.innerHeight/2)*(m-1),S.style.transform=`translateY(${P}px)`}return u(),h.addEventListener("scroll",u),{destroy(){h.removeEventListener("scroll",u)}}}function Bt(S){let h,m,P,u,e,s,n,i,c,a,f;return{c(){h=K("header"),m=K("hgroup"),P=K("span"),u=ve(S[0]),e=ye(),s=K("h3"),n=ve(S[1]),i=ye(),c=K("div"),this.h()},l(r){h=Z(r,"HEADER",{class:!0});var t=z(h);m=Z(t,"HGROUP",{class:!0});var o=z(m);P=Z(o,"SPAN",{class:!0});var l=z(P);u=me(l,S[0]),l.forEach(R),e=Se(o),s=Z(o,"H3",{class:!0});var v=z(s);n=me(v,S[1]),v.forEach(R),o.forEach(R),i=Se(t),c=Z(t,"DIV",{class:!0}),z(c).forEach(R),t.forEach(R),this.h()},h(){N(P,"class","cpeum-6wpbyu"),N(s,"class","cpeum-6wpbyu"),N(m,"class","cpeum-6wpbyu"),N(c,"class","image cpeum-6wpbyu"),b(c,"background-image",S[2]?`url(${rt+S[2]})`:"",!1),N(h,"class","cpeum-6wpbyu")},m(r,t){G(r,h,t),_(h,m),_(m,P),_(P,u),_(m,e),_(m,s),_(s,n),_(h,i),_(h,c),a||(f=[ke(mt.call(null,s,dt)),ke(Tt.call(null,m,{factor:.7}))],a=!0)},p(r,[t]){t&1&&Te(u,r[0]),t&2&&Te(n,r[1]),t&4&&b(c,"background-image",r[2]?`url(${rt+r[2]})`:"",!1)},i:be,o:be,d(r){r&&R(h),a=!1,Fe(f)}}}function At(S,h,m){let{label:P}=h,{title:u}=h,{src:e=""}=h;return S.$$set=s=>{"label"in s&&m(0,P=s.label),"title"in s&&m(1,u=s.title),"src"in s&&m(2,e=s.src)},[P,u,e]}class Ht extends ee{constructor(h){super(),te(this,h,At,Bt,ne,{label:0,title:1,src:2})}}function Lt(S){let h,m,P,u,e,s;m=new Ht({props:{label:S[0],title:S[1],src:S[2]}});const n=S[5].default,i=oe(n,S,S[4],null);return{c(){h=K("section"),Be(m.$$.fragment),P=ye(),i&&i.c(),this.h()},l(c){h=Z(c,"SECTION",{class:!0});var a=z(h);Ae(m.$$.fragment,a),P=Se(a),i&&i.l(a),a.forEach(R),this.h()},h(){N(h,"class","cpeum-194x174")},m(c,a){G(c,h,a),He(m,h,null),_(h,P),i&&i.m(h,null),u=!0,e||(s=[ke(Xe.call(null,h)),re(h,"enter",Rt),re(h,"leave",Ft)],e=!0)},p(c,[a]){const f={};a&1&&(f.label=c[0]),a&2&&(f.title=c[1]),a&4&&(f.src=c[2]),m.$set(f),i&&i.p&&(!u||a&16)&&le(i,n,c,c[4],u?ue(n,c[4],a,null):fe(c[4]),null)},i(c){u||(Y(m.$$.fragment,c),Y(i,c),u=!0)},o(c){j(m.$$.fragment,c),j(i,c),u=!1},d(c){c&&R(h),Le(m),i&&i.d(c),e=!1,Fe(s)}}}function Rt(){}function Ft(){}function Dt(S,h,m){let{$$slots:P={},$$scope:u}=h,{label:e}=h,{title:s}=h,{key:n}=h,{src:i=""}=h;return Ne("exercice"),S.$$set=c=>{"label"in c&&m(0,e=c.label),"title"in c&&m(1,s=c.title),"key"in c&&m(3,n=c.key),"src"in c&&m(2,i=c.src),"$$scope"in c&&m(4,u=c.$$scope)},[e,s,i,n,u,P]}class Vn extends ee{constructor(h){super(),te(this,h,Dt,Lt,ne,{label:0,title:1,key:3,src:2})}}function Vt(S){let h;return{c(){h=ve(S[0])},l(m){h=me(m,S[0])},m(m,P){G(m,h,P)},p(m,P){P&1&&Te(h,m[0])},d(m){m&&R(h)}}}function Wt(S){let h,m,P,u;m=new Qe({props:{$$slots:{default:[Vt]},$$scope:{ctx:S}}});const e=S[1].default,s=oe(e,S,S[2],null);return{c(){h=K("section"),Be(m.$$.fragment),P=ye(),s&&s.c()},l(n){h=Z(n,"SECTION",{});var i=z(h);Ae(m.$$.fragment,i),P=Se(i),s&&s.l(i),i.forEach(R)},m(n,i){G(n,h,i),He(m,h,null),_(h,P),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&5&&(c.$$scope={dirty:i,ctx:n}),m.$set(c),s&&s.p&&(!u||i&4)&&le(s,e,n,n[2],u?ue(e,n[2],i,null):fe(n[2]),null)},i(n){u||(Y(m.$$.fragment,n),Y(s,n),u=!0)},o(n){j(m.$$.fragment,n),j(s,n),u=!1},d(n){n&&R(h),Le(m),s&&s.d(n)}}}function Ot(S,h,m){let{$$slots:P={},$$scope:u}=h,{heading:e}=h;return S.$$set=s=>{"heading"in s&&m(0,e=s.heading),"$$scope"in s&&m(2,u=s.$$scope)},[e,P,u]}class Wn extends ee{constructor(h){super(),te(this,h,Ot,Wt,ne,{heading:0})}}function zt(S){let h,m;const P=S[3].default,u=oe(P,S,S[2],null);let e=[S[0]],s={};for(let n=0;n<e.length;n+=1)s=$(s,e[n]);return{c(){h=K("dl"),u&&u.c(),this.h()},l(n){h=Z(n,"DL",{});var i=z(h);u&&u.l(i),i.forEach(R),this.h()},h(){pe(h,s),b(h,"font-size","13px",!1),V(h,"cpeum-vbn81h",!0)},m(n,i){G(n,h,i),u&&u.m(h,null),m=!0},p(n,[i]){u&&u.p&&(!m||i&4)&&le(u,P,n,n[2],m?ue(P,n[2],i,null):fe(n[2]),null),pe(h,s=de(e,[i&1&&n[0]])),b(h,"font-size","13px",!1),V(h,"cpeum-vbn81h",!0)},i(n){m||(Y(u,n),m=!0)},o(n){j(u,n),m=!1},d(n){n&&R(h),u&&u.d(n)}}}function bt(S,h,m){const P=["size"];let u=xe(h,P),{$$slots:e={},$$scope:s}=h,{size:n="medium"}=h;return Pe("legend",{}),S.$$set=i=>{h=$($({},h),Ue(i)),m(0,u=xe(h,P)),"size"in i&&m(1,n=i.size),"$$scope"in i&&m(2,s=i.$$scope)},[u,n,s,e]}class On extends ee{constructor(h){super(),te(this,h,bt,zt,ne,{size:1})}}function Nt(S){let h,m,P,u=`${S[0]}px`,e,s,n;const i=S[15].default,c=oe(i,S,S[14],null);let a=[{class:"trigger"},S[6]],f={};for(let r=0;r<a.length;r+=1)f=$(f,a[r]);return{c(){h=K("div"),m=K("div"),c&&c.c(),this.h()},l(r){h=Z(r,"DIV",{class:!0});var t=z(h);m=Z(t,"DIV",{class:!0});var o=z(m);c&&c.l(o),o.forEach(R),t.forEach(R),this.h()},h(){N(m,"class","content cpeum-1ngz0xy"),Je(()=>S[16].call(m)),b(m,"--h",u,!1),pe(h,f),V(h,"cpeum-1ngz0xy",!0)},m(r,t){G(r,h,t),_(h,m),c&&c.m(m,null),P=ht(m,S[16].bind(m)),e=!0,s||(n=[ke(Xe.call(null,h,{rootMargin:"-50% 0% -50%"})),re(h,"enter",S[4]),re(h,"leave",S[5])],s=!0)},p(r,[t]){c&&c.p&&(!e||t&16384)&&le(c,i,r,r[14],e?ue(i,r[14],t,null):fe(r[14]),null),t&1&&u!==(u=`${r[0]}px`)&&b(m,"--h",u,!1),pe(h,f=de(a,[{class:"trigger"},t&64&&r[6]])),V(h,"cpeum-1ngz0xy",!0)},i(r){e||(Y(c,r),e=!0)},o(r){j(c,r),e=!1},d(r){r&&R(h),c&&c.d(r),P(),s=!1,Fe(n)}}}function Gt(S,h,m){const P=["bounds","pitch"];let u=xe(h,P),e,s,n,i;Ce(S,Ze,p=>m(11,s=p));let{$$slots:c={},$$scope:a}=h,{bounds:f=null}=h,{pitch:r=void 0}=h,t=0,o=ze(!1);Ce(S,o,p=>m(10,e=p));let l=!1,v=ze(null);Ce(S,v,p=>m(13,i=p));let y=ze(null);Ce(S,y,p=>m(12,n=p));let C=0;const E=["-lines","-circles","-fills"].map(p=>"propositions"+p);function g(){m(9,l=!0),Ze.setClass("figure"),o.set(!0),f&&Ee.set({bounds:f,pitch:r})}function x(){m(9,l=!1),Ze.setClass(""),Ee.set(null),o.set(!1)}Pe("figuremap",{active:o}),Pe("currentKey",v),Pe("currentView",y),Pe("markers",{getIndex:()=>t++});function d(){C=this.clientHeight,m(0,C)}return S.$$set=p=>{h=$($({},h),Ue(p)),m(6,u=xe(h,P)),"bounds"in p&&m(7,f=p.bounds),"pitch"in p&&m(8,r=p.pitch),"$$scope"in p&&m(14,a=p.$$scope)},S.$$.update=()=>{if(S.$$.dirty&8576&&(i?(ot.set({key:i}),Ee.set({filter:{key:i}})):i||(ot.set(null),Ee.set({bounds:f,pitch:r}))),S.$$.dirty&4480&&(n?Ee.set({center:{point:n.lnglat,zoom:n.zoom}}):n||Ee.set({bounds:f,pitch:r})),S.$$.dirty&2560&&(s.full&&l?o.set(!1):!s.full&&l&&o.set(!0)),S.$$.dirty&1024){if(e)for(const p of E)at.setLayoutProperty(p,"visibility","none");else if(!e)for(const p of E)at.setLayoutProperty(p,"visibility","visible")}},[C,o,v,y,g,x,u,f,r,l,e,s,n,i,a,c,d]}class zn extends ee{constructor(h){super(),te(this,h,Gt,Nt,ne,{bounds:7,pitch:8})}}function Ut(S){let h,m=`url(${S[1]})`,P=[S[9]],u={};for(let e=0;e<P.length;e+=1)u=$(u,P[e]);return{c(){h=K("div"),this.h()},l(e){h=Z(e,"DIV",{}),z(h).forEach(R),this.h()},h(){pe(h,u),b(h,"background-image",m,!1),V(h,"cpeum-1mpbdet",!0)},m(e,s){G(e,h,s)},p(e,s){pe(h,u=de(P,[s&512&&e[9]])),b(h,"background-image",m,!1),V(h,"cpeum-1mpbdet",!0)},d(e){e&&R(h)}}}function Qt(S){let h,m,P,u,e;function s(r,t){if(t&1&&(m=null),t&2&&(P=null),r[0]==="square")return Xt;if(r[0]==="circle")return Jt;if(r[0]==="triangle")return Zt;if(m==null&&(m=["line","dotted","dashed"].indexOf(r[0])>-1),m)return Kt;if(P==null&&(P=!!Boolean(r[1])),P)return _t}let n=s(S,-1),i=n&&n(S),c=S[4]&&ut(S),a=[{width:U},{height:U},{viewBox:e="0 0 "+U+" "+U},S[9]],f={};for(let r=0;r<a.length;r+=1)f=$(f,a[r]);return{c(){h=we("svg"),i&&i.c(),u=Ge(),c&&c.c(),this.h()},l(r){h=Me(r,"svg",{width:!0,height:!0,viewBox:!0});var t=z(h);i&&i.l(t),u=Ge(),c&&c.l(t),t.forEach(R),this.h()},h(){he(h,f),V(h,"cpeum-1mpbdet",!0)},m(r,t){G(r,h,t),i&&i.m(h,null),_(h,u),c&&c.m(h,null)},p(r,t){n===(n=s(r,t))&&i?i.p(r,t):(i&&i.d(1),i=n&&n(r),i&&(i.c(),i.m(h,u))),r[4]?c?c.p(r,t):(c=ut(r),c.c(),c.m(h,null)):c&&(c.d(1),c=null),he(h,f=de(a,[{width:U},{height:U},{viewBox:e},t&512&&r[9]])),V(h,"cpeum-1mpbdet",!0)},d(r){r&&R(h),i&&i.d(),c&&c.d()}}}function _t(S){let h,m,P;return{c(){h=we("text"),m=ve("Source: "),P=ve(S[1]),this.h()},l(u){h=Me(u,"text",{class:!0});var e=z(h);m=me(e,"Source: "),P=me(e,S[1]),e.forEach(R),this.h()},h(){N(h,"class","cpeum-1mpbdet")},m(u,e){G(u,h,e),_(h,m),_(h,P)},p(u,e){e&2&&Te(P,u[1])},d(u){u&&R(h)}}}function Kt(S){let h,m,P=[{d:m="M"+0+","+2*U/3+" Q"+U/4+","+Ie+" "+U/2+","+U/2+" T"+U+","+U/3},S[6]],u={};for(let e=0;e<P.length;e+=1)u=$(u,P[e]);return{c(){h=we("path"),this.h()},l(e){h=Me(e,"path",{d:!0}),z(h).forEach(R),this.h()},h(){he(h,u),V(h,"highlight",S[5]),V(h,"cpeum-1mpbdet",!0)},m(e,s){G(e,h,s)},p(e,s){he(h,u=de(P,[{d:m},s&64&&e[6]])),V(h,"highlight",e[5]),V(h,"cpeum-1mpbdet",!0)},d(e){e&&R(h)}}}function Zt(S){let h,m,P=[{points:m=U/2+" "+Ie+", "+Ie+" "+(U-S[7])+", "+(U-Ie)+" "+(U-S[7])},S[6]],u={};for(let e=0;e<P.length;e+=1)u=$(u,P[e]);return{c(){h=we("polygon"),this.h()},l(e){h=Me(e,"polygon",{points:!0}),z(h).forEach(R),this.h()},h(){he(h,u),V(h,"highlight",S[5]),V(h,"cpeum-1mpbdet",!0)},m(e,s){G(e,h,s)},p(e,s){he(h,u=de(P,[{points:m},s&64&&e[6]])),V(h,"highlight",e[5]),V(h,"cpeum-1mpbdet",!0)},d(e){e&&R(h)}}}function Jt(S){let h,m,P,u,e=[{cx:m=U/2},{cy:P=U/2},{r:u=U/2-Ie},S[6]],s={};for(let n=0;n<e.length;n+=1)s=$(s,e[n]);return{c(){h=we("circle"),this.h()},l(n){h=Me(n,"circle",{cx:!0,cy:!0,r:!0}),z(h).forEach(R),this.h()},h(){he(h,s),V(h,"highlight",S[5]),V(h,"cpeum-1mpbdet",!0)},m(n,i){G(n,h,i)},p(n,i){he(h,s=de(e,[{cx:m},{cy:P},{r:u},i&64&&n[6]])),V(h,"highlight",n[5]),V(h,"cpeum-1mpbdet",!0)},d(n){n&&R(h)}}}function Xt(S){let h,m,P,u,e,s=[{rx:m=U/20},{ry:P=U/20},{x:S[7]},{y:S[7]},{width:u=U-2*S[7]},{height:e=U-2*S[7]},S[6]],n={};for(let i=0;i<s.length;i+=1)n=$(n,s[i]);return{c(){h=we("rect"),this.h()},l(i){h=Me(i,"rect",{rx:!0,ry:!0,x:!0,y:!0,width:!0,height:!0}),z(h).forEach(R),this.h()},h(){he(h,n),V(h,"highlight",S[5]),V(h,"cpeum-1mpbdet",!0)},m(i,c){G(i,h,c)},p(i,c){he(h,n=de(s,[{rx:m},{ry:P},{x:i[7]},{y:i[7]},{width:u},{height:e},c&64&&i[6]])),V(h,"highlight",i[5]),V(h,"cpeum-1mpbdet",!0)},d(i){i&&R(h)}}}function ut(S){let h,m,P;return{c(){h=we("text"),m=ve(S[4]),this.h()},l(u){h=Me(u,"text",{"font-size":!0,"font-family":!0,"font-weight":!0,dy:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,class:!0});var e=z(h);m=me(e,S[4]),e.forEach(R),this.h()},h(){N(h,"font-size",S[8]),N(h,"font-family","var(--font-display)"),N(h,"font-weight","600"),N(h,"dy",".3em"),N(h,"x","50%"),N(h,"y","50%"),N(h,"text-anchor","middle"),N(h,"fill",P=S[5]?S[3]:S[2]),N(h,"class","cpeum-1mpbdet")},m(u,e){G(u,h,e),_(h,m)},p(u,e){e&16&&Te(m,u[4]),e&44&&P!==(P=u[5]?u[3]:u[2])&&N(h,"fill",P)},d(u){u&&R(h)}}}function Yt(S){let h;function m(e,s){return e[1]?Ut:Qt}let P=m(S),u=P(S);return{c(){u.c(),h=Ge()},l(e){u.l(e),h=Ge()},m(e,s){u.m(e,s),G(e,h,s)},p(e,[s]){P===(P=m(e))&&u?u.p(e,s):(u.d(1),u=P(e),u&&(u.c(),u.m(h.parentNode,h)))},i:be,o:be,d(e){u.d(e),e&&R(h)}}}const U=50,Ie=5;function jt(S,h,m){const P=["shape","src","color","colorHighlight","label","fill","fillHighlight","stroke","strokeHighlight","strokeWidth","strokeWidthHighlight","strokeType","highlight"];let u=xe(h,P),{shape:e="circle"}=h,{src:s=null}=h,{color:n="var(--dark1)"}=h,{colorHighlight:i=n}=h,{label:c=null}=h,{fill:a="none"}=h,{fillHighlight:f=a}=h,{stroke:r="none"}=h,{strokeHighlight:t=r}=h,{strokeWidth:o=1}=h,{strokeWidthHighlight:l=o}=h,{strokeType:v="solid"}=h,{highlight:y=!1}=h;const C=Ie*1.5,E=U/2.2,g=v==="dashed"?`${3*o}, ${1.5*o}`:v==="dotted"?`0, ${2*o}`:null;let x;return S.$$set=d=>{h=$($({},h),Ue(d)),m(9,u=xe(h,P)),"shape"in d&&m(0,e=d.shape),"src"in d&&m(1,s=d.src),"color"in d&&m(2,n=d.color),"colorHighlight"in d&&m(3,i=d.colorHighlight),"label"in d&&m(4,c=d.label),"fill"in d&&m(10,a=d.fill),"fillHighlight"in d&&m(11,f=d.fillHighlight),"stroke"in d&&m(12,r=d.stroke),"strokeHighlight"in d&&m(13,t=d.strokeHighlight),"strokeWidth"in d&&m(14,o=d.strokeWidth),"strokeWidthHighlight"in d&&m(15,l=d.strokeWidthHighlight),"strokeType"in d&&m(16,v=d.strokeType),"highlight"in d&&m(5,y=d.highlight)},S.$$.update=()=>{S.$$.dirty&64545&&m(6,x={fill:y?f:a,stroke:y?t:r,"stroke-width":y?l:o,"stroke-linecap":e==="dashed"?"butt":"round","stroke-dasharray":g||""})},[e,s,n,i,c,y,x,C,E,u,a,f,r,t,o,l,v]}class qt extends ee{constructor(h){super(),te(this,h,jt,Yt,ne,{shape:0,src:1,color:2,colorHighlight:3,label:4,fill:10,fillHighlight:11,stroke:12,strokeHighlight:13,strokeWidth:14,strokeWidthHighlight:15,strokeType:16,highlight:5})}}function $t(S){let h;return{c(){h=ve("Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},l(m){h=me(m,"Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},m(m,P){G(m,h,P)},d(m){m&&R(h)}}}function en(S){let h,m,P,u;m=new Qe({props:{$$slots:{default:[$t]},$$scope:{ctx:S}}});const e=S[0].default,s=oe(e,S,S[1],null);return{c(){h=K("section"),Be(m.$$.fragment),P=ye(),s&&s.c()},l(n){h=Z(n,"SECTION",{});var i=z(h);Ae(m.$$.fragment,i),P=Se(i),s&&s.l(i),i.forEach(R)},m(n,i){G(n,h,i),He(m,h,null),_(h,P),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&2&&(c.$$scope={dirty:i,ctx:n}),m.$set(c),s&&s.p&&(!u||i&2)&&le(s,e,n,n[1],u?ue(e,n[1],i,null):fe(n[1]),null)},i(n){u||(Y(m.$$.fragment,n),Y(s,n),u=!0)},o(n){j(m.$$.fragment,n),j(s,n),u=!1},d(n){n&&R(h),Le(m),s&&s.d(n)}}}function tn(S,h,m){let{$$slots:P={},$$scope:u}=h;return S.$$set=e=>{"$$scope"in e&&m(1,u=e.$$scope)},[P,u]}class bn extends ee{constructor(h){super(),te(this,h,tn,en,ne,{})}}function nn(S){let h;return{c(){h=ve("Propositions d'am\xE9nagement")},l(m){h=me(m,"Propositions d'am\xE9nagement")},m(m,P){G(m,h,P)},d(m){m&&R(h)}}}function sn(S){let h,m,P,u;m=new Qe({props:{$$slots:{default:[nn]},$$scope:{ctx:S}}});const e=S[0].default,s=oe(e,S,S[1],null);return{c(){h=K("section"),Be(m.$$.fragment),P=ye(),s&&s.c()},l(n){h=Z(n,"SECTION",{});var i=z(h);Ae(m.$$.fragment,i),P=Se(i),s&&s.l(i),i.forEach(R)},m(n,i){G(n,h,i),He(m,h,null),_(h,P),s&&s.m(h,null),u=!0},p(n,[i]){const c={};i&2&&(c.$$scope={dirty:i,ctx:n}),m.$set(c),s&&s.p&&(!u||i&2)&&le(s,e,n,n[1],u?ue(e,n[1],i,null):fe(n[1]),null)},i(n){u||(Y(m.$$.fragment,n),Y(s,n),u=!0)},o(n){j(m.$$.fragment,n),j(s,n),u=!1},d(n){n&&R(h),Le(m),s&&s.d(n)}}}function rn(S,h,m){let{$$slots:P={},$$scope:u}=h;return S.$$set=e=>{"$$scope"in e&&m(1,u=e.$$scope)},[P,u]}class Nn extends ee{constructor(h){super(),te(this,h,rn,sn,ne,{})}}function an(S){let h,m,P,u,e,s,n,i;P=new qt({props:{style:"transform: scale("+S[5]+")",label:S[0],color:S[6],fill:S[7],stroke:S[8],strokeWidth:S[9],colorHighlight:S[10],fillHighlight:S[11],strokeHighlight:S[12],strokeWidthHighlight:S[13],src:S[14],shape:S[4],interactive:S[2],highlight:S[3]}});const c=S[24].default,a=oe(c,S,S[23],null);return{c(){h=K("div"),m=K("dt"),Be(P.$$.fragment),u=ye(),e=K("dd"),a&&a.c(),this.h()},l(f){h=Z(f,"DIV",{class:!0});var r=z(h);m=Z(r,"DT",{class:!0});var t=z(m);Ae(P.$$.fragment,t),t.forEach(R),u=Se(r),e=Z(r,"DD",{class:!0});var o=z(e);a&&a.l(o),o.forEach(R),r.forEach(R),this.h()},h(){N(m,"class","cpeum-1il5ly"),N(e,"class","cpeum-1il5ly"),N(h,"class","cpeum-1il5ly"),V(h,"interactive",S[2]),V(h,"highlight",S[3]||S[16]&&S[15]&&S[15]===S[1])},m(f,r){G(f,h,r),_(h,m),He(P,m,null),_(h,u),_(h,e),a&&a.m(e,null),s=!0,n||(i=[re(h,"mouseover",S[25]),re(h,"mouseleave",S[26]),re(h,"mouseover",S[17]),re(h,"mouseleave",S[18]),re(h,"focus",S[27])],n=!0)},p(f,[r]){const t={};r&32&&(t.style="transform: scale("+f[5]+")"),r&1&&(t.label=f[0]),r&64&&(t.color=f[6]),r&128&&(t.fill=f[7]),r&256&&(t.stroke=f[8]),r&512&&(t.strokeWidth=f[9]),r&1024&&(t.colorHighlight=f[10]),r&2048&&(t.fillHighlight=f[11]),r&4096&&(t.strokeHighlight=f[12]),r&8192&&(t.strokeWidthHighlight=f[13]),r&16384&&(t.src=f[14]),r&16&&(t.shape=f[4]),r&4&&(t.interactive=f[2]),r&8&&(t.highlight=f[3]),P.$set(t),a&&a.p&&(!s||r&8388608)&&le(a,c,f,f[23],s?ue(c,f[23],r,null):fe(f[23]),null),r&4&&V(h,"interactive",f[2]),r&98314&&V(h,"highlight",f[3]||f[16]&&f[15]&&f[15]===f[1])},i(f){s||(Y(P.$$.fragment,f),Y(a,f),s=!0)},o(f){j(P.$$.fragment,f),j(a,f),s=!1},d(f){f&&R(h),Le(P),a&&a.d(f),n=!1,Fe(i)}}}function on(S,h,m){let P,{$$slots:u={},$$scope:e}=h,{label:s=null}=h,{key:n=null}=h,{interactive:i=n!==null}=h,{highlight:c=!1}=h,{shape:a="circle"}=h,{symbolScale:f=1}=h,{color:r="var(--light1)"}=h,{fill:t="var(--accent2)"}=h,{stroke:o=null}=h,{strokeWidth:l=0}=h,{colorHighlight:v=void 0}=h,{fillHighlight:y=void 0}=h,{strokeHighlight:C=void 0}=h,{strokeWidthHighlight:E=void 0}=h,{arrowEnd:g=!1}=h,{arrowStart:x=!1}=h,{src:d=null}=h,{lnglat:p=void 0}=h,{zoom:I=void 0}=h;const w=Ne("currentKey");Ce(S,w,B=>m(15,P=B));const k=Ne("currentView");function M(){w&&n?w.set(n):k&&p&&k.set({lnglat:p,zoom:I})}function T(){w&&n?w.set(null):k&&p&&k.set(null)}function A(B){Ke.call(this,S,B)}function H(B){Ke.call(this,S,B)}function L(B){Ke.call(this,S,B)}return S.$$set=B=>{"label"in B&&m(0,s=B.label),"key"in B&&m(1,n=B.key),"interactive"in B&&m(2,i=B.interactive),"highlight"in B&&m(3,c=B.highlight),"shape"in B&&m(4,a=B.shape),"symbolScale"in B&&m(5,f=B.symbolScale),"color"in B&&m(6,r=B.color),"fill"in B&&m(7,t=B.fill),"stroke"in B&&m(8,o=B.stroke),"strokeWidth"in B&&m(9,l=B.strokeWidth),"colorHighlight"in B&&m(10,v=B.colorHighlight),"fillHighlight"in B&&m(11,y=B.fillHighlight),"strokeHighlight"in B&&m(12,C=B.strokeHighlight),"strokeWidthHighlight"in B&&m(13,E=B.strokeWidthHighlight),"arrowEnd"in B&&m(19,g=B.arrowEnd),"arrowStart"in B&&m(20,x=B.arrowStart),"src"in B&&m(14,d=B.src),"lnglat"in B&&m(21,p=B.lnglat),"zoom"in B&&m(22,I=B.zoom),"$$scope"in B&&m(23,e=B.$$scope)},[s,n,i,c,a,f,r,t,o,l,v,y,C,E,d,P,w,M,T,g,x,p,I,e,u,A,H,L]}class Gn extends ee{constructor(h){super(),te(this,h,on,an,ne,{label:0,key:1,interactive:2,highlight:3,shape:4,symbolScale:5,color:6,fill:7,stroke:8,strokeWidth:9,colorHighlight:10,fillHighlight:11,strokeHighlight:12,strokeWidthHighlight:13,arrowEnd:19,arrowStart:20,src:14,lnglat:21,zoom:22})}}function ln(S){let h,m,P,u;const e=S[2].default,s=oe(e,S,S[1],null);return{c(){h=K("div"),s&&s.c(),this.h()},l(n){h=Z(n,"DIV",{style:!0,class:!0});var i=z(h);s&&s.l(i),i.forEach(R),this.h()},h(){N(h,"style",m=lt(S[0])),N(h,"class","cpeum-1sqjp0y")},m(n,i){G(n,h,i),s&&s.m(h,null),u=!0},p(n,[i]){s&&s.p&&(!u||i&2)&&le(s,e,n,n[1],u?ue(e,n[1],i,null):fe(n[1]),null),(!u||i&1&&m!==(m=lt(n[0])))&&N(h,"style",m)},i(n){u||(Y(s,n),Je(()=>{P||(P=st(h,ft,{},!0)),P.run(1)}),u=!0)},o(n){j(s,n),P||(P=st(h,ft,{},!1)),P.run(0),u=!1},d(n){n&&R(h),s&&s.d(n),n&&P&&P.end()}}}function fn(S,h,m){let{$$slots:P={},$$scope:u}=h,{key:e}=h;return Pe("exercice",e),S.$$set=s=>{"key"in s&&m(0,e=s.key),"$$scope"in s&&m(1,u=s.$$scope)},[e,u,P]}class Un extends ee{constructor(h){super(),te(this,h,fn,ln,ne,{key:0})}}var Ye={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(S,h){(function(P,u){S.exports=u()})(Oe,function(){return function(m){var P={};function u(e){if(P[e])return P[e].exports;var s=P[e]={i:e,l:!1,exports:{}};return m[e].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return u.m=m,u.c=P,u.d=function(e,s,n){u.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:n})},u.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,s){if(s&1&&(e=u(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var i in e)u.d(n,i,function(c){return e[c]}.bind(null,i));return n},u.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return u.d(s,"a",s),s},u.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},u.p="",u(u.s=21)}([function(m,P){var u={};m.exports=u,function(){u._nextId=0,u._seed=0,u._nowStartTime=+new Date,u._warnedOnce={},u._decomp=null,u.extend=function(s,n){var i,c;typeof n=="boolean"?(i=2,c=n):(i=1,c=!0);for(var a=i;a<arguments.length;a++){var f=arguments[a];if(f)for(var r in f)c&&f[r]&&f[r].constructor===Object&&(!s[r]||s[r].constructor===Object)?(s[r]=s[r]||{},u.extend(s[r],c,f[r])):s[r]=f[r]}return s},u.clone=function(s,n){return u.extend({},n,s)},u.keys=function(s){if(Object.keys)return Object.keys(s);var n=[];for(var i in s)n.push(i);return n},u.values=function(s){var n=[];if(Object.keys){for(var i=Object.keys(s),c=0;c<i.length;c++)n.push(s[i[c]]);return n}for(var a in s)n.push(s[a]);return n},u.get=function(s,n,i,c){n=n.split(".").slice(i,c);for(var a=0;a<n.length;a+=1)s=s[n[a]];return s},u.set=function(s,n,i,c,a){var f=n.split(".").slice(c,a);return u.get(s,n,0,-1)[f[f.length-1]]=i,i},u.shuffle=function(s){for(var n=s.length-1;n>0;n--){var i=Math.floor(u.random()*(n+1)),c=s[n];s[n]=s[i],s[i]=c}return s},u.choose=function(s){return s[Math.floor(u.random()*s.length)]},u.isElement=function(s){return typeof HTMLElement!="undefined"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},u.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},u.isFunction=function(s){return typeof s=="function"},u.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},u.isString=function(s){return toString.call(s)==="[object String]"},u.clamp=function(s,n,i){return s<n?n:s>i?i:s},u.sign=function(s){return s<0?-1:1},u.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-u._nowStartTime},u.random=function(s,n){return s=typeof s!="undefined"?s:0,n=typeof n!="undefined"?n:1,s+e()*(n-s)};var e=function(){return u._seed=(u._seed*9301+49297)%233280,u._seed/233280};u.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},u.logLevel=1,u.log=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.info=function(){console&&u.logLevel>0&&u.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warn=function(){console&&u.logLevel>0&&u.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},u.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");u._warnedOnce[s]||(u.warn(s),u._warnedOnce[s]=!0)},u.deprecated=function(s,n,i){s[n]=u.chain(function(){u.warnOnce("\u{1F505} deprecated \u{1F505}",i)},s[n])},u.nextId=function(){return u._nextId++},u.indexOf=function(s,n){if(s.indexOf)return s.indexOf(n);for(var i=0;i<s.length;i++)if(s[i]===n)return i;return-1},u.map=function(s,n){if(s.map)return s.map(n);for(var i=[],c=0;c<s.length;c+=1)i.push(n(s[c]));return i},u.topologicalSort=function(s){var n=[],i=[],c=[];for(var a in s)!i[a]&&!c[a]&&u._topologicalSort(a,i,c,s,n);return n},u._topologicalSort=function(s,n,i,c,a){var f=c[s]||[];i[s]=!0;for(var r=0;r<f.length;r+=1){var t=f[r];i[t]||n[t]||u._topologicalSort(t,n,i,c,a)}i[s]=!1,n[s]=!0,a.push(s)},u.chain=function(){for(var s=[],n=0;n<arguments.length;n+=1){var i=arguments[n];i._chained?s.push.apply(s,i._chained):s.push(i)}var c=function(){for(var a,f=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)f[r]=arguments[r];for(r=0;r<s.length;r+=1){var o=s[r].apply(a,f);typeof o!="undefined"&&(a=o)}return a};return c._chained=s,c},u.chainPathBefore=function(s,n,i){return u.set(s,n,u.chain(i,u.get(s,n)))},u.chainPathAfter=function(s,n,i){return u.set(s,n,u.chain(u.get(s,n),i))},u.setDecomp=function(s){u._decomp=s},u.getDecomp=function(){var s=u._decomp;try{!s&&typeof window!="undefined"&&(s=window.decomp),!s&&typeof Oe!="undefined"&&(s=Oe.decomp)}catch{s=null}return s}}()},function(m,P){var u={};m.exports=u,function(){u.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&u.update(s,e),s},u.update=function(e,s,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<s.length;i++){var c=s[i];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},u.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},u.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},u.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},u.shift=function(e,s){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+n,e.min.y=s.y,e.max.y=s.y+i}}()},function(m,P){var u={};m.exports=u,function(){u.create=function(e,s){return{x:e||0,y:s||0}},u.clone=function(e){return{x:e.x,y:e.y}},u.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},u.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},u.rotate=function(e,s,n){var i=Math.cos(s),c=Math.sin(s);n||(n={});var a=e.x*i-e.y*c;return n.y=e.x*c+e.y*i,n.x=a,n},u.rotateAbout=function(e,s,n,i){var c=Math.cos(s),a=Math.sin(s);i||(i={});var f=n.x+((e.x-n.x)*c-(e.y-n.y)*a);return i.y=n.y+((e.x-n.x)*a+(e.y-n.y)*c),i.x=f,i},u.normalise=function(e){var s=u.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},u.dot=function(e,s){return e.x*s.x+e.y*s.y},u.cross=function(e,s){return e.x*s.y-e.y*s.x},u.cross3=function(e,s,n){return(s.x-e.x)*(n.y-e.y)-(s.y-e.y)*(n.x-e.x)},u.add=function(e,s,n){return n||(n={}),n.x=e.x+s.x,n.y=e.y+s.y,n},u.sub=function(e,s,n){return n||(n={}),n.x=e.x-s.x,n.y=e.y-s.y,n},u.mult=function(e,s){return{x:e.x*s,y:e.y*s}},u.div=function(e,s){return{x:e.x/s,y:e.y/s}},u.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},u.neg=function(e){return{x:-e.x,y:-e.y}},u.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},u._temp=[u.create(),u.create(),u.create(),u.create(),u.create(),u.create()]}()},function(m,P,u){var e={};m.exports=e;var s=u(2),n=u(0);(function(){e.create=function(i,c){for(var a=[],f=0;f<i.length;f++){var r=i[f],t={x:r.x,y:r.y,index:f,body:c,isInternal:!1};a.push(t)}return a},e.fromPath=function(i,c){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,f=[];return i.replace(a,function(r,t,o){f.push({x:parseFloat(t),y:parseFloat(o)})}),e.create(f,c)},e.centre=function(i){for(var c=e.area(i,!0),a={x:0,y:0},f,r,t,o=0;o<i.length;o++)t=(o+1)%i.length,f=s.cross(i[o],i[t]),r=s.mult(s.add(i[o],i[t]),f),a=s.add(a,r);return s.div(a,6*c)},e.mean=function(i){for(var c={x:0,y:0},a=0;a<i.length;a++)c.x+=i[a].x,c.y+=i[a].y;return s.div(c,i.length)},e.area=function(i,c){for(var a=0,f=i.length-1,r=0;r<i.length;r++)a+=(i[f].x-i[r].x)*(i[f].y+i[r].y),f=r;return c?a/2:Math.abs(a)/2},e.inertia=function(i,c){for(var a=0,f=0,r=i,t,o,l=0;l<r.length;l++)o=(l+1)%r.length,t=Math.abs(s.cross(r[o],r[l])),a+=t*(s.dot(r[o],r[o])+s.dot(r[o],r[l])+s.dot(r[l],r[l])),f+=t;return c/6*(a/f)},e.translate=function(i,c,a){a=typeof a!="undefined"?a:1;var f=i.length,r=c.x*a,t=c.y*a,o;for(o=0;o<f;o++)i[o].x+=r,i[o].y+=t;return i},e.rotate=function(i,c,a){if(c!==0){var f=Math.cos(c),r=Math.sin(c),t=a.x,o=a.y,l=i.length,v,y,C,E;for(E=0;E<l;E++)v=i[E],y=v.x-t,C=v.y-o,v.x=t+(y*f-C*r),v.y=o+(y*r+C*f);return i}},e.contains=function(i,c){for(var a=c.x,f=c.y,r=i.length,t=i[r-1],o,l=0;l<r;l++){if(o=i[l],(a-t.x)*(o.y-t.y)+(f-t.y)*(t.x-o.x)>0)return!1;t=o}return!0},e.scale=function(i,c,a,f){if(c===1&&a===1)return i;f=f||e.centre(i);for(var r,t,o=0;o<i.length;o++)r=i[o],t=s.sub(r,f),i[o].x=f.x+t.x*c,i[o].y=f.y+t.y*a;return i},e.chamfer=function(i,c,a,f,r){typeof c=="number"?c=[c]:c=c||[8],a=typeof a!="undefined"?a:-1,f=f||2,r=r||14;for(var t=[],o=0;o<i.length;o++){var l=i[o-1>=0?o-1:i.length-1],v=i[o],y=i[(o+1)%i.length],C=c[o<c.length?o:c.length-1];if(C===0){t.push(v);continue}var E=s.normalise({x:v.y-l.y,y:l.x-v.x}),g=s.normalise({x:y.y-v.y,y:v.x-y.x}),x=Math.sqrt(2*Math.pow(C,2)),d=s.mult(n.clone(E),C),p=s.normalise(s.mult(s.add(E,g),.5)),I=s.sub(v,s.mult(p,x)),w=a;a===-1&&(w=Math.pow(C,.32)*1.75),w=n.clamp(w,f,r),w%2===1&&(w+=1);for(var k=Math.acos(s.dot(E,g)),M=k/w,T=0;T<w;T++)t.push(s.add(s.rotate(d,M*T),I))}return t},e.clockwiseSort=function(i){var c=e.mean(i);return i.sort(function(a,f){return s.angle(c,a)-s.angle(c,f)}),i},e.isConvex=function(i){var c=0,a=i.length,f,r,t,o;if(a<3)return null;for(f=0;f<a;f++)if(r=(f+1)%a,t=(f+2)%a,o=(i[r].x-i[f].x)*(i[t].y-i[r].y),o-=(i[r].y-i[f].y)*(i[t].x-i[r].x),o<0?c|=1:o>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(i){var c=[],a=[],f,r;for(i=i.slice(0),i.sort(function(t,o){var l=t.x-o.x;return l!==0?l:t.y-o.y}),r=0;r<i.length;r+=1){for(f=i[r];a.length>=2&&s.cross3(a[a.length-2],a[a.length-1],f)<=0;)a.pop();a.push(f)}for(r=i.length-1;r>=0;r-=1){for(f=i[r];c.length>=2&&s.cross3(c[c.length-2],c[c.length-1],f)<=0;)c.pop();c.push(f)}return c.pop(),a.pop(),c.concat(a)}})()},function(m,P,u){var e={};m.exports=e;var s=u(0);(function(){e.on=function(n,i,c){for(var a=i.split(" "),f,r=0;r<a.length;r++)f=a[r],n.events=n.events||{},n.events[f]=n.events[f]||[],n.events[f].push(c);return c},e.off=function(n,i,c){if(!i){n.events={};return}typeof i=="function"&&(c=i,i=s.keys(n.events).join(" "));for(var a=i.split(" "),f=0;f<a.length;f++){var r=n.events[a[f]],t=[];if(c&&r)for(var o=0;o<r.length;o++)r[o]!==c&&t.push(r[o]);n.events[a[f]]=t}},e.trigger=function(n,i,c){var a,f,r,t,o=n.events;if(o&&s.keys(o).length>0){c||(c={}),a=i.split(" ");for(var l=0;l<a.length;l++)if(f=a[l],r=o[f],r){t=s.clone(c,!1),t.name=f,t.source=n;for(var v=0;v<r.length;v++)r[v].apply(n,[t])}}}})()},function(m,P,u){var e={};m.exports=e;var s=u(4),n=u(0),i=u(1),c=u(6);(function(){e.create=function(a){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},e.setModified=function(a,f,r,t){if(a.isModified=f,f&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),r&&a.parent&&e.setModified(a.parent,f,r,t),t)for(var o=0;o<a.composites.length;o++){var l=a.composites[o];e.setModified(l,f,r,t)}},e.add=function(a,f){var r=[].concat(f);s.trigger(a,"beforeAdd",{object:f});for(var t=0;t<r.length;t++){var o=r[t];switch(o.type){case"body":if(o.parent!==o){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(a,o);break;case"constraint":e.addConstraint(a,o);break;case"composite":e.addComposite(a,o);break;case"mouseConstraint":e.addConstraint(a,o.constraint);break}}return s.trigger(a,"afterAdd",{object:f}),a},e.remove=function(a,f,r){var t=[].concat(f);s.trigger(a,"beforeRemove",{object:f});for(var o=0;o<t.length;o++){var l=t[o];switch(l.type){case"body":e.removeBody(a,l,r);break;case"constraint":e.removeConstraint(a,l,r);break;case"composite":e.removeComposite(a,l,r);break;case"mouseConstraint":e.removeConstraint(a,l.constraint);break}}return s.trigger(a,"afterRemove",{object:f}),a},e.addComposite=function(a,f){return a.composites.push(f),f.parent=a,e.setModified(a,!0,!0,!1),a},e.removeComposite=function(a,f,r){var t=n.indexOf(a.composites,f);if(t!==-1&&e.removeCompositeAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeComposite(a.composites[o],f,!0);return a},e.removeCompositeAt=function(a,f){return a.composites.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addBody=function(a,f){return a.bodies.push(f),e.setModified(a,!0,!0,!1),a},e.removeBody=function(a,f,r){var t=n.indexOf(a.bodies,f);if(t!==-1&&e.removeBodyAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeBody(a.composites[o],f,!0);return a},e.removeBodyAt=function(a,f){return a.bodies.splice(f,1),e.setModified(a,!0,!0,!1),a},e.addConstraint=function(a,f){return a.constraints.push(f),e.setModified(a,!0,!0,!1),a},e.removeConstraint=function(a,f,r){var t=n.indexOf(a.constraints,f);if(t!==-1&&e.removeConstraintAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeConstraint(a.composites[o],f,!0);return a},e.removeConstraintAt=function(a,f){return a.constraints.splice(f,1),e.setModified(a,!0,!0,!1),a},e.clear=function(a,f,r){if(r)for(var t=0;t<a.composites.length;t++)e.clear(a.composites[t],f,!0);return f?a.bodies=a.bodies.filter(function(o){return o.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,e.setModified(a,!0,!0,!1),a},e.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var f=[].concat(a.bodies),r=0;r<a.composites.length;r++)f=f.concat(e.allBodies(a.composites[r]));return a.cache&&(a.cache.allBodies=f),f},e.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var f=[].concat(a.constraints),r=0;r<a.composites.length;r++)f=f.concat(e.allConstraints(a.composites[r]));return a.cache&&(a.cache.allConstraints=f),f},e.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var f=[].concat(a.composites),r=0;r<a.composites.length;r++)f=f.concat(e.allComposites(a.composites[r]));return a.cache&&(a.cache.allComposites=f),f},e.get=function(a,f,r){var t,o;switch(r){case"body":t=e.allBodies(a);break;case"constraint":t=e.allConstraints(a);break;case"composite":t=e.allComposites(a).concat(a);break}return t?(o=t.filter(function(l){return l.id.toString()===f.toString()}),o.length===0?null:o[0]):null},e.move=function(a,f,r){return e.remove(a,f),e.add(r,f),a},e.rebase=function(a){for(var f=e.allBodies(a).concat(e.allConstraints(a)).concat(e.allComposites(a)),r=0;r<f.length;r++)f[r].id=n.nextId();return a},e.translate=function(a,f,r){for(var t=r?e.allBodies(a):a.bodies,o=0;o<t.length;o++)c.translate(t[o],f);return a},e.rotate=function(a,f,r,t){for(var o=Math.cos(f),l=Math.sin(f),v=t?e.allBodies(a):a.bodies,y=0;y<v.length;y++){var C=v[y],E=C.position.x-r.x,g=C.position.y-r.y;c.setPosition(C,{x:r.x+(E*o-g*l),y:r.y+(E*l+g*o)}),c.rotate(C,f)}return a},e.scale=function(a,f,r,t,o){for(var l=o?e.allBodies(a):a.bodies,v=0;v<l.length;v++){var y=l[v],C=y.position.x-t.x,E=y.position.y-t.y;c.setPosition(y,{x:t.x+C*f,y:t.y+E*r}),c.scale(y,f,r)}return a},e.bounds=function(a){for(var f=e.allBodies(a),r=[],t=0;t<f.length;t+=1){var o=f[t];r.push(o.bounds.min,o.bounds.max)}return i.create(r)}})()},function(m,P,u){var e={};m.exports=e;var s=u(3),n=u(2),i=u(7);u(16);var c=u(0),a=u(1),f=u(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var o={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},l=c.extend(o,t);return r(l,t),l},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,o){o=o||{},e.set(t,{bounds:t.bounds||a.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),f.rotate(t.axes,t.angle),a.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:o.axes||t.axes,area:o.area||t.area,mass:o.mass||t.mass,inertia:o.inertia||t.inertia});var l=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",y=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||l,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||y,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,o,l){var v;typeof o=="string"&&(v=o,o={},o[v]=l);for(v in o)if(!!Object.prototype.hasOwnProperty.call(o,v))switch(l=o[v],v){case"isStatic":e.setStatic(t,l);break;case"isSleeping":i.set(t,l);break;case"mass":e.setMass(t,l);break;case"density":e.setDensity(t,l);break;case"inertia":e.setInertia(t,l);break;case"vertices":e.setVertices(t,l);break;case"position":e.setPosition(t,l);break;case"angle":e.setAngle(t,l);break;case"velocity":e.setVelocity(t,l);break;case"angularVelocity":e.setAngularVelocity(t,l);break;case"parts":e.setParts(t,l);break;case"centre":e.setCentre(t,l);break;default:t[v]=l}},e.setStatic=function(t,o){for(var l=0;l<t.parts.length;l++){var v=t.parts[l];v.isStatic=o,o?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,o){var l=t.inertia/(t.mass/6);t.inertia=l*(o/6),t.inverseInertia=1/t.inertia,t.mass=o,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,o){e.setMass(t,o*t.area),t.density=o},e.setInertia=function(t,o){t.inertia=o,t.inverseInertia=1/t.inertia},e.setVertices=function(t,o){o[0].body===t?t.vertices=o:t.vertices=s.create(o,t),t.axes=f.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var l=s.centre(t.vertices);s.translate(t.vertices,l,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),a.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,o,l){var v;for(o=o.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<o.length;v++){var y=o[v];y!==t&&(y.parent=t,t.parts.push(y))}if(t.parts.length!==1){if(l=typeof l!="undefined"?l:!0,l){var C=[];for(v=0;v<o.length;v++)C=C.concat(o[v].vertices);s.clockwiseSort(C);var E=s.hull(C),g=s.centre(E);e.setVertices(t,E),s.translate(t.vertices,g)}var x=e._totalProperties(t);t.area=x.area,t.parent=t,t.position.x=x.centre.x,t.position.y=x.centre.y,t.positionPrev.x=x.centre.x,t.positionPrev.y=x.centre.y,e.setMass(t,x.mass),e.setInertia(t,x.inertia),e.setPosition(t,x.centre)}},e.setCentre=function(t,o,l){l?(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y,t.position.x+=o.x,t.position.y+=o.y):(t.positionPrev.x=o.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=o.y-(t.position.y-t.positionPrev.y),t.position.x=o.x,t.position.y=o.y)},e.setPosition=function(t,o){var l=n.sub(o,t.position);t.positionPrev.x+=l.x,t.positionPrev.y+=l.y;for(var v=0;v<t.parts.length;v++){var y=t.parts[v];y.position.x+=l.x,y.position.y+=l.y,s.translate(y.vertices,l),a.update(y.bounds,y.vertices,t.velocity)}},e.setAngle=function(t,o){var l=o-t.angle;t.anglePrev+=l;for(var v=0;v<t.parts.length;v++){var y=t.parts[v];y.angle+=l,s.rotate(y.vertices,l,t.position),f.rotate(y.axes,l),a.update(y.bounds,y.vertices,t.velocity),v>0&&n.rotateAbout(y.position,l,t.position,y.position)}},e.setVelocity=function(t,o){t.positionPrev.x=t.position.x-o.x,t.positionPrev.y=t.position.y-o.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,o){t.anglePrev=t.angle-o,t.angularVelocity=o,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,o){e.setPosition(t,n.add(t.position,o))},e.rotate=function(t,o,l){if(!l)e.setAngle(t,t.angle+o);else{var v=Math.cos(o),y=Math.sin(o),C=t.position.x-l.x,E=t.position.y-l.y;e.setPosition(t,{x:l.x+(C*v-E*y),y:l.y+(C*y+E*v)}),e.setAngle(t,t.angle+o)}},e.scale=function(t,o,l,v){var y=0,C=0;v=v||t.position;for(var E=0;E<t.parts.length;E++){var g=t.parts[E];s.scale(g.vertices,o,l,v),g.axes=f.fromVertices(g.vertices),g.area=s.area(g.vertices),e.setMass(g,t.density*g.area),s.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),e.setInertia(g,e._inertiaScale*s.inertia(g.vertices,g.mass)),s.translate(g.vertices,{x:g.position.x,y:g.position.y}),E>0&&(y+=g.area,C+=g.inertia),g.position.x=v.x+(g.position.x-v.x)*o,g.position.y=v.y+(g.position.y-v.y)*l,a.update(g.bounds,g.vertices,t.velocity)}t.parts.length>1&&(t.area=y,t.isStatic||(e.setMass(t,t.density*y),e.setInertia(t,C))),t.circleRadius&&(o===l?t.circleRadius*=o:t.circleRadius=null)},e.update=function(t,o,l,v){var y=Math.pow(o*l*t.timeScale,2),C=1-t.frictionAir*l*t.timeScale,E=t.position.x-t.positionPrev.x,g=t.position.y-t.positionPrev.y;t.velocity.x=E*C*v+t.force.x/t.mass*y,t.velocity.y=g*C*v+t.force.y/t.mass*y,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*C*v+t.torque/t.inertia*y,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var x=0;x<t.parts.length;x++){var d=t.parts[x];s.translate(d.vertices,t.velocity),x>0&&(d.position.x+=t.velocity.x,d.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(d.vertices,t.angularVelocity,t.position),f.rotate(d.axes,t.angularVelocity),x>0&&n.rotateAbout(d.position,t.angularVelocity,t.position,d.position)),a.update(d.bounds,d.vertices,t.velocity)}},e.applyForce=function(t,o,l){t.force.x+=l.x,t.force.y+=l.y;var v={x:o.x-t.position.x,y:o.y-t.position.y};t.torque+=v.x*l.y-v.y*l.x},e._totalProperties=function(t){for(var o={mass:0,area:0,inertia:0,centre:{x:0,y:0}},l=t.parts.length===1?0:1;l<t.parts.length;l++){var v=t.parts[l],y=v.mass!==1/0?v.mass:1;o.mass+=y,o.area+=v.area,o.inertia+=v.inertia,o.centre=n.add(o.centre,n.mult(v.position,y))}return o.centre=n.div(o.centre,o.mass),o}})()},function(m,P,u){var e={};m.exports=e;var s=u(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,i){for(var c=i*i*i,a=0;a<n.length;a++){var f=n[a],r=f.speed*f.speed+f.angularSpeed*f.angularSpeed;if(f.force.x!==0||f.force.y!==0){e.set(f,!1);continue}var t=Math.min(f.motion,r),o=Math.max(f.motion,r);f.motion=e._minBias*t+(1-e._minBias)*o,f.sleepThreshold>0&&f.motion<e._motionSleepThreshold*c?(f.sleepCounter+=1,f.sleepCounter>=f.sleepThreshold&&e.set(f,!0)):f.sleepCounter>0&&(f.sleepCounter-=1)}},e.afterCollisions=function(n,i){for(var c=i*i*i,a=0;a<n.length;a++){var f=n[a];if(!!f.isActive){var r=f.collision,t=r.bodyA.parent,o=r.bodyB.parent;if(!(t.isSleeping&&o.isSleeping||t.isStatic||o.isStatic)&&(t.isSleeping||o.isSleeping)){var l=t.isSleeping&&!t.isStatic?t:o,v=l===t?o:t;!l.isStatic&&v.motion>e._motionWakeThreshold*c&&e.set(l,!1)}}}},e.set=function(n,i){var c=n.isSleeping;i?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,c||s.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,c&&s.trigger(n,"sleepEnd"))}})()},function(m,P,u){var e={};m.exports=e;var s=u(3),n=u(9);(function(){var i=[],c={overlap:0,axis:null},a={overlap:0,axis:null};e.create=function(f,r){return{pair:null,collided:!1,bodyA:f,bodyB:r,parentA:f.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(f,r,t){if(e._overlapAxes(c,f.vertices,r.vertices,f.axes),c.overlap<=0||(e._overlapAxes(a,r.vertices,f.vertices,r.axes),a.overlap<=0))return null;var o=t&&t.table[n.id(f,r)],l;o?l=o.collision:(l=e.create(f,r),l.collided=!0,l.bodyA=f.id<r.id?f:r,l.bodyB=f.id<r.id?r:f,l.parentA=l.bodyA.parent,l.parentB=l.bodyB.parent),f=l.bodyA,r=l.bodyB;var v;c.overlap<a.overlap?v=c:v=a;var y=l.normal,C=l.supports,E=v.axis,g=E.x,x=E.y;g*(r.position.x-f.position.x)+x*(r.position.y-f.position.y)<0?(y.x=g,y.y=x):(y.x=-g,y.y=-x),l.tangent.x=-y.y,l.tangent.y=y.x,l.depth=v.overlap,l.penetration.x=y.x*l.depth,l.penetration.y=y.y*l.depth;var d=e._findSupports(f,r,y,1),p=0;if(s.contains(f.vertices,d[0])&&(C[p++]=d[0]),s.contains(f.vertices,d[1])&&(C[p++]=d[1]),p<2){var I=e._findSupports(r,f,y,-1);s.contains(r.vertices,I[0])&&(C[p++]=I[0]),p<2&&s.contains(r.vertices,I[1])&&(C[p++]=I[1])}return p===0&&(C[p++]=d[0]),C.length=p,l},e._overlapAxes=function(f,r,t,o){var l=r.length,v=t.length,y=r[0].x,C=r[0].y,E=t[0].x,g=t[0].y,x=o.length,d=Number.MAX_VALUE,p=0,I,w,k,M,T,A;for(T=0;T<x;T++){var H=o[T],L=H.x,B=H.y,F=y*L+C*B,O=E*L+g*B,D=F,Q=O;for(A=1;A<l;A+=1)M=r[A].x*L+r[A].y*B,M>D?D=M:M<F&&(F=M);for(A=1;A<v;A+=1)M=t[A].x*L+t[A].y*B,M>Q?Q=M:M<O&&(O=M);if(w=D-O,k=Q-F,I=w<k?w:k,I<d&&(d=I,p=T,I<=0))break}f.axis=o[p],f.overlap=d},e._projectToAxis=function(f,r,t){for(var o=r[0].x*t.x+r[0].y*t.y,l=o,v=1;v<r.length;v+=1){var y=r[v].x*t.x+r[v].y*t.y;y>l?l=y:y<o&&(o=y)}f.min=o,f.max=l},e._findSupports=function(f,r,t,o){var l=r.vertices,v=l.length,y=f.position.x,C=f.position.y,E=t.x*o,g=t.y*o,x=Number.MAX_VALUE,d,p,I,w,k;for(k=0;k<v;k+=1)p=l[k],w=E*(y-p.x)+g*(C-p.y),w<x&&(x=w,d=p);return I=l[(v+d.index-1)%v],x=E*(y-I.x)+g*(C-I.y),p=l[(d.index+1)%v],E*(y-p.x)+g*(C-p.y)<x?(i[0]=d,i[1]=p,i):(i[0]=d,i[1]=I,i)}})()},function(m,P,u){var e={};m.exports=e;var s=u(17);(function(){e.create=function(n,i){var c=n.bodyA,a=n.bodyB,f={id:e.id(c,a),bodyA:c,bodyB:a,collision:n,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||a.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(f,n,i),f},e.update=function(n,i,c){var a=n.contacts,f=i.supports,r=n.activeContacts,t=i.parentA,o=i.parentB,l=t.vertices.length;n.isActive=!0,n.timeUpdated=c,n.collision=i,n.separation=i.depth,n.inverseMass=t.inverseMass+o.inverseMass,n.friction=t.friction<o.friction?t.friction:o.friction,n.frictionStatic=t.frictionStatic>o.frictionStatic?t.frictionStatic:o.frictionStatic,n.restitution=t.restitution>o.restitution?t.restitution:o.restitution,n.slop=t.slop>o.slop?t.slop:o.slop,i.pair=n,r.length=0;for(var v=0;v<f.length;v++){var y=f[v],C=y.body===t?y.index:l+y.index,E=a[C];E?r.push(E):r.push(a[C]=s.create(y))}},e.setActive=function(n,i,c){i?(n.isActive=!0,n.timeUpdated=c):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,i){return n.id<i.id?"A"+n.id+"B"+i.id:"A"+i.id+"B"+n.id}})()},function(m,P,u){var e={};m.exports=e;var s=u(3),n=u(2),i=u(7),c=u(1),a=u(11),f=u(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var o=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,l=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,v=n.magnitude(n.sub(o,l));t.length=typeof t.length!="undefined"?t.length:v,t.id=t.id||f.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var y={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(y.type="pin",y.anchors=!1):t.stiffness<.9&&(y.type="spring"),t.render=f.extend(y,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var o=r[t],l=o.constraintImpulse;o.isStatic||l.x===0&&l.y===0&&l.angle===0||(o.position.x+=l.x,o.position.y+=l.y,o.angle+=l.angle)}},e.solveAll=function(r,t){for(var o=0;o<r.length;o+=1){var l=r[o],v=!l.bodyA||l.bodyA&&l.bodyA.isStatic,y=!l.bodyB||l.bodyB&&l.bodyB.isStatic;(v||y)&&e.solve(r[o],t)}for(o=0;o<r.length;o+=1)l=r[o],v=!l.bodyA||l.bodyA&&l.bodyA.isStatic,y=!l.bodyB||l.bodyB&&l.bodyB.isStatic,!v&&!y&&e.solve(r[o],t)},e.solve=function(r,t){var o=r.bodyA,l=r.bodyB,v=r.pointA,y=r.pointB;if(!(!o&&!l)){o&&!o.isStatic&&(n.rotate(v,o.angle-r.angleA,v),r.angleA=o.angle),l&&!l.isStatic&&(n.rotate(y,l.angle-r.angleB,y),r.angleB=l.angle);var C=v,E=y;if(o&&(C=n.add(o.position,v)),l&&(E=n.add(l.position,y)),!(!C||!E)){var g=n.sub(C,E),x=n.magnitude(g);x<e._minLength&&(x=e._minLength);var d=(x-r.length)/x,p=r.stiffness<1?r.stiffness*t:r.stiffness,I=n.mult(g,d*p),w=(o?o.inverseMass:0)+(l?l.inverseMass:0),k=(o?o.inverseInertia:0)+(l?l.inverseInertia:0),M=w+k,T,A,H,L,B;if(r.damping){var F=n.create();H=n.div(g,x),B=n.sub(l&&n.sub(l.position,l.positionPrev)||F,o&&n.sub(o.position,o.positionPrev)||F),L=n.dot(H,B)}o&&!o.isStatic&&(A=o.inverseMass/w,o.constraintImpulse.x-=I.x*A,o.constraintImpulse.y-=I.y*A,o.position.x-=I.x*A,o.position.y-=I.y*A,r.damping&&(o.positionPrev.x-=r.damping*H.x*L*A,o.positionPrev.y-=r.damping*H.y*L*A),T=n.cross(v,I)/M*e._torqueDampen*o.inverseInertia*(1-r.angularStiffness),o.constraintImpulse.angle-=T,o.angle-=T),l&&!l.isStatic&&(A=l.inverseMass/w,l.constraintImpulse.x+=I.x*A,l.constraintImpulse.y+=I.y*A,l.position.x+=I.x*A,l.position.y+=I.y*A,r.damping&&(l.positionPrev.x+=r.damping*H.x*L*A,l.positionPrev.y+=r.damping*H.y*L*A),T=n.cross(y,I)/M*e._torqueDampen*l.inverseInertia*(1-r.angularStiffness),l.constraintImpulse.angle+=T,l.angle+=T)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var o=r[t],l=o.constraintImpulse;if(!(o.isStatic||l.x===0&&l.y===0&&l.angle===0)){i.set(o,!1);for(var v=0;v<o.parts.length;v++){var y=o.parts[v];s.translate(y.vertices,l),v>0&&(y.position.x+=l.x,y.position.y+=l.y),l.angle!==0&&(s.rotate(y.vertices,l.angle,o.position),a.rotate(y.axes,l.angle),v>0&&n.rotateAbout(y.position,l.angle,o.position,y.position)),c.update(y.bounds,y.vertices,o.velocity)}l.angle*=e._warming,l.x*=e._warming,l.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(m,P,u){var e={};m.exports=e;var s=u(2),n=u(0);(function(){e.fromVertices=function(i){for(var c={},a=0;a<i.length;a++){var f=(a+1)%i.length,r=s.normalise({x:i[f].y-i[a].y,y:i[a].x-i[f].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),c[t]=r}return n.values(c)},e.rotate=function(i,c){if(c!==0)for(var a=Math.cos(c),f=Math.sin(c),r=0;r<i.length;r++){var t=i[r],o;o=t.x*a-t.y*f,t.y=t.x*f+t.y*a,t.x=o}}})()},function(m,P,u){var e={};m.exports=e;var s=u(3),n=u(0),i=u(6),c=u(1),a=u(2);(function(){e.rectangle=function(f,r,t,o,l){l=l||{};var v={label:"Rectangle Body",position:{x:f,y:r},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+o+" L 0 "+o)};if(l.chamfer){var y=l.chamfer;v.vertices=s.chamfer(v.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete l.chamfer}return i.create(n.extend({},v,l))},e.trapezoid=function(f,r,t,o,l,v){v=v||{},l*=.5;var y=(1-l*2)*t,C=t*l,E=C+y,g=E+C,x;l<.5?x="L 0 0 L "+C+" "+-o+" L "+E+" "+-o+" L "+g+" 0":x="L 0 0 L "+E+" "+-o+" L "+g+" 0";var d={label:"Trapezoid Body",position:{x:f,y:r},vertices:s.fromPath(x)};if(v.chamfer){var p=v.chamfer;d.vertices=s.chamfer(d.vertices,p.radius,p.quality,p.qualityMin,p.qualityMax),delete v.chamfer}return i.create(n.extend({},d,v))},e.circle=function(f,r,t,o,l){o=o||{};var v={label:"Circle Body",circleRadius:t};l=l||25;var y=Math.ceil(Math.max(10,Math.min(l,t)));return y%2===1&&(y+=1),e.polygon(f,r,y,t,n.extend({},v,o))},e.polygon=function(f,r,t,o,l){if(l=l||{},t<3)return e.circle(f,r,o,l);for(var v=2*Math.PI/t,y="",C=v*.5,E=0;E<t;E+=1){var g=C+E*v,x=Math.cos(g)*o,d=Math.sin(g)*o;y+="L "+x.toFixed(3)+" "+d.toFixed(3)+" "}var p={label:"Polygon Body",position:{x:f,y:r},vertices:s.fromPath(y)};if(l.chamfer){var I=l.chamfer;p.vertices=s.chamfer(p.vertices,I.radius,I.quality,I.qualityMin,I.qualityMax),delete l.chamfer}return i.create(n.extend({},p,l))},e.fromVertices=function(f,r,t,o,l,v,y,C){var E=n.getDecomp(),g,x,d,p,I,w,k,M,T,A,H;for(g=Boolean(E&&E.quickDecomp),o=o||{},d=[],l=typeof l!="undefined"?l:!1,v=typeof v!="undefined"?v:.01,y=typeof y!="undefined"?y:10,C=typeof C!="undefined"?C:.01,n.isArray(t[0])||(t=[t]),A=0;A<t.length;A+=1)if(w=t[A],p=s.isConvex(w),I=!p,I&&!g&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),p||!g)p?w=s.clockwiseSort(w):w=s.hull(w),d.push({position:{x:f,y:r},vertices:w});else{var L=w.map(function(se){return[se.x,se.y]});E.makeCCW(L),v!==!1&&E.removeCollinearPoints(L,v),C!==!1&&E.removeDuplicatePoints&&E.removeDuplicatePoints(L,C);var B=E.quickDecomp(L);for(k=0;k<B.length;k++){var F=B[k],O=F.map(function(se){return{x:se[0],y:se[1]}});y>0&&s.area(O)<y||d.push({position:s.centre(O),vertices:O})}}for(k=0;k<d.length;k++)d[k]=i.create(n.extend(d[k],o));if(l){var D=5;for(k=0;k<d.length;k++){var Q=d[k];for(M=k+1;M<d.length;M++){var X=d[M];if(c.overlaps(Q.bounds,X.bounds)){var q=Q.vertices,J=X.vertices;for(T=0;T<Q.vertices.length;T++)for(H=0;H<X.vertices.length;H++){var ce=a.magnitudeSquared(a.sub(q[(T+1)%q.length],J[H])),ie=a.magnitudeSquared(a.sub(q[T],J[(H+1)%J.length]));ce<D&&ie<D&&(q[T].isInternal=!0,J[H].isInternal=!0)}}}}}return d.length>1?(x=i.create(n.extend({parts:d.slice(0)},o)),i.setPosition(x,{x:f,y:r}),x):d[0]}})()},function(m,P,u){var e={};m.exports=e;var s=u(0);(function(){e.create=function(n){var i={};return n||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=n||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(c){var a=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&(i.button=0,c.preventDefault()),i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=c},i.mousedown=function(c){var a=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f?(i.button=0,c.preventDefault()):i.button=c.button,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=c},i.mouseup=function(c){var a=e._getRelativeMousePosition(c,i.element,i.pixelRatio),f=c.changedTouches;f&&c.preventDefault(),i.button=-1,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=c},i.mousewheel=function(c){i.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(n,i){n.element=i,i.addEventListener("mousemove",n.mousemove),i.addEventListener("mousedown",n.mousedown),i.addEventListener("mouseup",n.mouseup),i.addEventListener("mousewheel",n.mousewheel),i.addEventListener("DOMMouseScroll",n.mousewheel),i.addEventListener("touchmove",n.mousemove),i.addEventListener("touchstart",n.mousedown),i.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,i){n.offset.x=i.x,n.offset.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,i){n.scale.x=i.x,n.scale.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,i,c){var a=i.getBoundingClientRect(),f=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:f.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:f.scrollTop,o=n.changedTouches,l,v;return o?(l=o[0].pageX-a.left-r,v=o[0].pageY-a.top-t):(l=n.pageX-a.left-r,v=n.pageY-a.top-t),{x:l/(i.clientWidth/(i.width||i.clientWidth)*c),y:v/(i.clientHeight/(i.height||i.clientHeight)*c)}}})()},function(m,P,u){var e={};m.exports=e;var s=u(0),n=u(8);(function(){e.create=function(i){var c={bodies:[],pairs:null};return s.extend(c,i)},e.setBodies=function(i,c){i.bodies=c.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var c=[],a=i.pairs,f=i.bodies,r=f.length,t=e.canCollide,o=n.collides,l,v;for(f.sort(e._compareBoundsX),l=0;l<r;l++){var y=f[l],C=y.bounds,E=y.bounds.max.x,g=y.bounds.max.y,x=y.bounds.min.y,d=y.isStatic||y.isSleeping,p=y.parts.length,I=p===1;for(v=l+1;v<r;v++){var w=f[v],k=w.bounds;if(k.min.x>E)break;if(!(g<k.min.y||x>k.max.y)&&!(d&&(w.isStatic||w.isSleeping))&&!!t(y.collisionFilter,w.collisionFilter)){var M=w.parts.length;if(I&&M===1){var T=o(y,w,a);T&&c.push(T)}else for(var A=p>1?1:0,H=M>1?1:0,L=A;L<p;L++)for(var B=y.parts[L],C=B.bounds,F=H;F<M;F++){var O=w.parts[F],k=O.bounds;if(!(C.min.x>k.max.x||C.max.x<k.min.x||C.max.y<k.min.y||C.min.y>k.max.y)){var T=o(B,O,a);T&&c.push(T)}}}}}return c},e.canCollide=function(i,c){return i.group===c.group&&i.group!==0?i.group>0:(i.mask&c.category)!==0&&(c.mask&i.category)!==0},e._compareBoundsX=function(i,c){return i.bounds.min.x-c.bounds.min.x}})()},function(m,P,u){var e={};m.exports=e;var s=u(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||s.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var i=e._registry[n.name],c=e.versionParse(n.version).number,a=e.versionParse(i.version).number;c>a?(s.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(n)),e._registry[n.name]=n):c<a?s.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(n)):n!==i&&s.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,i){return n.used.indexOf(i)>-1},e.isFor=function(n,i){var c=n.for&&e.dependencyParse(n.for);return!n.for||i.name===c.name&&e.versionSatisfies(i.version,c.range)},e.use=function(n,i){if(n.uses=(n.uses||[]).concat(i||[]),n.uses.length===0){s.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var c=e.dependencies(n),a=s.topologicalSort(c),f=[],r=0;r<a.length;r+=1)if(a[r]!==n.name){var t=e.resolve(a[r]);if(!t){f.push("\u274C "+a[r]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(f.push("\u{1F536} "+e.toString(t)),delete t._warned):f.push("\u2705 "+e.toString(t)),n.used.push(t.name))}f.length>0&&s.info(f.join("  "))},e.dependencies=function(n,i){var c=e.dependencyParse(n),a=c.name;if(i=i||{},!(a in i)){n=e.resolve(n)||n,i[a]=s.map(n.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),o=e.resolve(r);return o&&!e.versionSatisfies(o.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(o),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),o._warned=!0,n._warned=!0):o||(s.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(c),"could not be resolved."),n._warned=!0),t.name});for(var f=0;f<i[a].length;f+=1)e.dependencies(i[a][f],i);return i}},e.dependencyParse=function(n){if(s.isString(n)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(n)||s.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(n)||s.warn("Plugin.versionParse:",n,"is not a valid version or range.");var c=i.exec(n),a=Number(c[4]),f=Number(c[5]),r=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:n,operator:c[1]||c[2]||"",major:a,minor:f,patch:r,parts:[a,f,r],prerelease:c[7],number:a*1e8+f*1e4+r}},e.versionSatisfies=function(n,i){i=i||"*";var c=e.versionParse(i),a=e.versionParse(n);if(c.isRange){if(c.operator==="*"||n==="*")return!0;if(c.operator===">")return a.number>c.number;if(c.operator===">=")return a.number>=c.number;if(c.operator==="~")return a.major===c.major&&a.minor===c.minor&&a.patch>=c.patch;if(c.operator==="^")return c.major>0?a.major===c.major&&a.number>=c.number:c.minor>0?a.minor===c.minor&&a.patch>=c.patch:a.patch===c.patch}return n===i||n==="*"}})()},function(m,P,u){var e={};m.exports=e;var s=u(0),n=u(5),i=u(1),c=u(4),a=u(2),f=u(13);(function(){var r,t;typeof window!="undefined"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(s.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(g){var x={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},d=s.extend(x,g);return d.canvas&&(d.canvas.width=d.options.width||d.canvas.width,d.canvas.height=d.options.height||d.canvas.height),d.mouse=g.mouse,d.engine=g.engine,d.canvas=d.canvas||v(d.options.width,d.options.height),d.context=d.canvas.getContext("2d"),d.textures={},d.bounds=d.bounds||{min:{x:0,y:0},max:{x:d.canvas.width,y:d.canvas.height}},d.options.showBroadphase=!1,d.options.pixelRatio!==1&&e.setPixelRatio(d,d.options.pixelRatio),s.isElement(d.element)?d.element.appendChild(d.canvas):d.canvas.parentNode||s.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),d},e.run=function(g){(function x(d){g.frameRequestId=r(x),o(g,d),e.world(g,d),(g.options.showStats||g.options.showDebug)&&e.stats(g,g.context,d),(g.options.showPerformance||g.options.showDebug)&&e.performance(g,g.context,d)})()},e.stop=function(g){t(g.frameRequestId)},e.setPixelRatio=function(g,x){var d=g.options,p=g.canvas;x==="auto"&&(x=y(p)),d.pixelRatio=x,p.setAttribute("data-pixel-ratio",x),p.width=d.width*x,p.height=d.height*x,p.style.width=d.width+"px",p.style.height=d.height+"px"},e.lookAt=function(g,x,d,p){p=typeof p!="undefined"?p:!0,x=s.isArray(x)?x:[x],d=d||{x:0,y:0};for(var I={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},w=0;w<x.length;w+=1){var k=x[w],M=k.bounds?k.bounds.min:k.min||k.position||k,T=k.bounds?k.bounds.max:k.max||k.position||k;M&&T&&(M.x<I.min.x&&(I.min.x=M.x),T.x>I.max.x&&(I.max.x=T.x),M.y<I.min.y&&(I.min.y=M.y),T.y>I.max.y&&(I.max.y=T.y))}var A=I.max.x-I.min.x+2*d.x,H=I.max.y-I.min.y+2*d.y,L=g.canvas.height,B=g.canvas.width,F=B/L,O=A/H,D=1,Q=1;O>F?Q=O/F:D=F/O,g.options.hasBounds=!0,g.bounds.min.x=I.min.x,g.bounds.max.x=I.min.x+A*D,g.bounds.min.y=I.min.y,g.bounds.max.y=I.min.y+H*Q,p&&(g.bounds.min.x+=A*.5-A*D*.5,g.bounds.max.x+=A*.5-A*D*.5,g.bounds.min.y+=H*.5-H*Q*.5,g.bounds.max.y+=H*.5-H*Q*.5),g.bounds.min.x-=d.x,g.bounds.max.x-=d.x,g.bounds.min.y-=d.y,g.bounds.max.y-=d.y,g.mouse&&(f.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),f.setOffset(g.mouse,g.bounds.min))},e.startViewTransform=function(g){var x=g.bounds.max.x-g.bounds.min.x,d=g.bounds.max.y-g.bounds.min.y,p=x/g.options.width,I=d/g.options.height;g.context.setTransform(g.options.pixelRatio/p,0,0,g.options.pixelRatio/I,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},e.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},e.world=function(g,x){var d=s.now(),p=g.engine,I=p.world,w=g.canvas,k=g.context,M=g.options,T=g.timing,A=n.allBodies(I),H=n.allConstraints(I),L=M.wireframes?M.wireframeBackground:M.background,B=[],F=[],O,D={timestamp:p.timing.timestamp};if(c.trigger(g,"beforeRender",D),g.currentBackground!==L&&E(g,L),k.globalCompositeOperation="source-in",k.fillStyle="transparent",k.fillRect(0,0,w.width,w.height),k.globalCompositeOperation="source-over",M.hasBounds){for(O=0;O<A.length;O++){var Q=A[O];i.overlaps(Q.bounds,g.bounds)&&B.push(Q)}for(O=0;O<H.length;O++){var X=H[O],q=X.bodyA,J=X.bodyB,ce=X.pointA,ie=X.pointB;q&&(ce=a.add(q.position,X.pointA)),J&&(ie=a.add(J.position,X.pointB)),!(!ce||!ie)&&(i.contains(g.bounds,ce)||i.contains(g.bounds,ie))&&F.push(X)}e.startViewTransform(g),g.mouse&&(f.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),f.setOffset(g.mouse,g.bounds.min))}else F=H,B=A,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!M.wireframes||p.enableSleeping&&M.showSleeping?e.bodies(g,B,k):(M.showConvexHulls&&e.bodyConvexHulls(g,B,k),e.bodyWireframes(g,B,k)),M.showBounds&&e.bodyBounds(g,B,k),(M.showAxes||M.showAngleIndicator)&&e.bodyAxes(g,B,k),M.showPositions&&e.bodyPositions(g,B,k),M.showVelocity&&e.bodyVelocity(g,B,k),M.showIds&&e.bodyIds(g,B,k),M.showSeparations&&e.separations(g,p.pairs.list,k),M.showCollisions&&e.collisions(g,p.pairs.list,k),M.showVertexNumbers&&e.vertexNumbers(g,B,k),M.showMousePosition&&e.mousePosition(g,g.mouse,k),e.constraints(F,k),M.hasBounds&&e.endViewTransform(g),c.trigger(g,"afterRender",D),T.lastElapsed=s.now()-d},e.stats=function(g,x,d){for(var p=g.engine,I=p.world,w=n.allBodies(I),k=0,M=55,T=44,A=0,H=0,L=0;L<w.length;L+=1)k+=w[L].parts.length;var B={Part:k,Body:w.length,Cons:n.allConstraints(I).length,Comp:n.allComposites(I).length,Pair:p.pairs.list.length};x.fillStyle="#0e0f19",x.fillRect(A,H,M*5.5,T),x.font="12px Arial",x.textBaseline="top",x.textAlign="right";for(var F in B){var O=B[F];x.fillStyle="#aaa",x.fillText(F,A+M,H+8),x.fillStyle="#eee",x.fillText(O,A+M,H+26),A+=M}},e.performance=function(g,x){var d=g.engine,p=g.timing,I=p.deltaHistory,w=p.elapsedHistory,k=p.timestampElapsedHistory,M=p.engineDeltaHistory,T=p.engineElapsedHistory,A=d.timing.lastDelta,H=l(I),L=l(w),B=l(M),F=l(T),O=l(k),D=O/H||0,Q=1e3/H||0,X=4,q=12,J=60,ce=34,ie=10,se=69;x.fillStyle="#0e0f19",x.fillRect(0,50,q*4+J*5+22,ce),e.status(x,ie,se,J,X,I.length,Math.round(Q)+" fps",Q/e._goodFps,function(ae){return I[ae]/H-1}),e.status(x,ie+q+J,se,J,X,M.length,A.toFixed(2)+" dt",e._goodDelta/A,function(ae){return M[ae]/B-1}),e.status(x,ie+(q+J)*2,se,J,X,T.length,F.toFixed(2)+" ut",1-F/e._goodFps,function(ae){return T[ae]/F-1}),e.status(x,ie+(q+J)*3,se,J,X,w.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(ae){return w[ae]/L-1}),e.status(x,ie+(q+J)*4,se,J,X,k.length,D.toFixed(2)+" x",D*D*D,function(ae){return(k[ae]/I[ae]/D||0)-1})},e.status=function(g,x,d,p,I,w,k,M,T){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(x,d+7,p,1),g.beginPath(),g.moveTo(x,d+7-I*s.clamp(.4*T(0),-2,2));for(var A=0;A<p;A+=1)g.lineTo(x+A,d+7-(A<w?I*s.clamp(.4*T(A),-2,2):0));g.stroke(),g.fillStyle="hsl("+s.clamp(25+95*M,0,120)+",100%,60%)",g.fillRect(x,d-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(k,x+p,d-5)},e.constraints=function(g,x){for(var d=x,p=0;p<g.length;p++){var I=g[p];if(!(!I.render.visible||!I.pointA||!I.pointB)){var w=I.bodyA,k=I.bodyB,M,T;if(w?M=a.add(w.position,I.pointA):M=I.pointA,I.render.type==="pin")d.beginPath(),d.arc(M.x,M.y,3,0,2*Math.PI),d.closePath();else{if(k?T=a.add(k.position,I.pointB):T=I.pointB,d.beginPath(),d.moveTo(M.x,M.y),I.render.type==="spring")for(var A=a.sub(T,M),H=a.perp(a.normalise(A)),L=Math.ceil(s.clamp(I.length/5,12,20)),B,F=1;F<L;F+=1)B=F%2===0?1:-1,d.lineTo(M.x+A.x*(F/L)+H.x*B*4,M.y+A.y*(F/L)+H.y*B*4);d.lineTo(T.x,T.y)}I.render.lineWidth&&(d.lineWidth=I.render.lineWidth,d.strokeStyle=I.render.strokeStyle,d.stroke()),I.render.anchors&&(d.fillStyle=I.render.strokeStyle,d.beginPath(),d.arc(M.x,M.y,3,0,2*Math.PI),d.arc(T.x,T.y,3,0,2*Math.PI),d.closePath(),d.fill())}}},e.bodies=function(g,x,d){var p=d;g.engine;var I=g.options,w=I.showInternalEdges||!I.wireframes,k,M,T,A;for(T=0;T<x.length;T++)if(k=x[T],!!k.render.visible){for(A=k.parts.length>1?1:0;A<k.parts.length;A++)if(M=k.parts[A],!!M.render.visible){if(I.showSleeping&&k.isSleeping?p.globalAlpha=.5*M.render.opacity:M.render.opacity!==1&&(p.globalAlpha=M.render.opacity),M.render.sprite&&M.render.sprite.texture&&!I.wireframes){var H=M.render.sprite,L=C(g,H.texture);p.translate(M.position.x,M.position.y),p.rotate(M.angle),p.drawImage(L,L.width*-H.xOffset*H.xScale,L.height*-H.yOffset*H.yScale,L.width*H.xScale,L.height*H.yScale),p.rotate(-M.angle),p.translate(-M.position.x,-M.position.y)}else{if(M.circleRadius)p.beginPath(),p.arc(M.position.x,M.position.y,M.circleRadius,0,2*Math.PI);else{p.beginPath(),p.moveTo(M.vertices[0].x,M.vertices[0].y);for(var B=1;B<M.vertices.length;B++)!M.vertices[B-1].isInternal||w?p.lineTo(M.vertices[B].x,M.vertices[B].y):p.moveTo(M.vertices[B].x,M.vertices[B].y),M.vertices[B].isInternal&&!w&&p.moveTo(M.vertices[(B+1)%M.vertices.length].x,M.vertices[(B+1)%M.vertices.length].y);p.lineTo(M.vertices[0].x,M.vertices[0].y),p.closePath()}I.wireframes?(p.lineWidth=1,p.strokeStyle="#bbb",p.stroke()):(p.fillStyle=M.render.fillStyle,M.render.lineWidth&&(p.lineWidth=M.render.lineWidth,p.strokeStyle=M.render.strokeStyle,p.stroke()),p.fill())}p.globalAlpha=1}}},e.bodyWireframes=function(g,x,d){var p=d,I=g.options.showInternalEdges,w,k,M,T,A;for(p.beginPath(),M=0;M<x.length;M++)if(w=x[M],!!w.render.visible)for(A=w.parts.length>1?1:0;A<w.parts.length;A++){for(k=w.parts[A],p.moveTo(k.vertices[0].x,k.vertices[0].y),T=1;T<k.vertices.length;T++)!k.vertices[T-1].isInternal||I?p.lineTo(k.vertices[T].x,k.vertices[T].y):p.moveTo(k.vertices[T].x,k.vertices[T].y),k.vertices[T].isInternal&&!I&&p.moveTo(k.vertices[(T+1)%k.vertices.length].x,k.vertices[(T+1)%k.vertices.length].y);p.lineTo(k.vertices[0].x,k.vertices[0].y)}p.lineWidth=1,p.strokeStyle="#bbb",p.stroke()},e.bodyConvexHulls=function(g,x,d){var p=d,I,w,k;for(p.beginPath(),w=0;w<x.length;w++)if(I=x[w],!(!I.render.visible||I.parts.length===1)){for(p.moveTo(I.vertices[0].x,I.vertices[0].y),k=1;k<I.vertices.length;k++)p.lineTo(I.vertices[k].x,I.vertices[k].y);p.lineTo(I.vertices[0].x,I.vertices[0].y)}p.lineWidth=1,p.strokeStyle="rgba(255,255,255,0.2)",p.stroke()},e.vertexNumbers=function(g,x,d){var p=d,I,w,k;for(I=0;I<x.length;I++){var M=x[I].parts;for(k=M.length>1?1:0;k<M.length;k++){var T=M[k];for(w=0;w<T.vertices.length;w++)p.fillStyle="rgba(255,255,255,0.2)",p.fillText(I+"_"+w,T.position.x+(T.vertices[w].x-T.position.x)*.8,T.position.y+(T.vertices[w].y-T.position.y)*.8)}}},e.mousePosition=function(g,x,d){var p=d;p.fillStyle="rgba(255,255,255,0.8)",p.fillText(x.position.x+"  "+x.position.y,x.position.x+5,x.position.y-5)},e.bodyBounds=function(g,x,d){var p=d;g.engine;var I=g.options;p.beginPath();for(var w=0;w<x.length;w++){var k=x[w];if(k.render.visible)for(var M=x[w].parts,T=M.length>1?1:0;T<M.length;T++){var A=M[T];p.rect(A.bounds.min.x,A.bounds.min.y,A.bounds.max.x-A.bounds.min.x,A.bounds.max.y-A.bounds.min.y)}}I.wireframes?p.strokeStyle="rgba(255,255,255,0.08)":p.strokeStyle="rgba(0,0,0,0.1)",p.lineWidth=1,p.stroke()},e.bodyAxes=function(g,x,d){var p=d;g.engine;var I=g.options,w,k,M,T;for(p.beginPath(),k=0;k<x.length;k++){var A=x[k],H=A.parts;if(!!A.render.visible)if(I.showAxes)for(M=H.length>1?1:0;M<H.length;M++)for(w=H[M],T=0;T<w.axes.length;T++){var L=w.axes[T];p.moveTo(w.position.x,w.position.y),p.lineTo(w.position.x+L.x*20,w.position.y+L.y*20)}else for(M=H.length>1?1:0;M<H.length;M++)for(w=H[M],T=0;T<w.axes.length;T++)p.moveTo(w.position.x,w.position.y),p.lineTo((w.vertices[0].x+w.vertices[w.vertices.length-1].x)/2,(w.vertices[0].y+w.vertices[w.vertices.length-1].y)/2)}I.wireframes?(p.strokeStyle="indianred",p.lineWidth=1):(p.strokeStyle="rgba(255, 255, 255, 0.4)",p.globalCompositeOperation="overlay",p.lineWidth=2),p.stroke(),p.globalCompositeOperation="source-over"},e.bodyPositions=function(g,x,d){var p=d;g.engine;var I=g.options,w,k,M,T;for(p.beginPath(),M=0;M<x.length;M++)if(w=x[M],!!w.render.visible)for(T=0;T<w.parts.length;T++)k=w.parts[T],p.arc(k.position.x,k.position.y,3,0,2*Math.PI,!1),p.closePath();for(I.wireframes?p.fillStyle="indianred":p.fillStyle="rgba(0,0,0,0.5)",p.fill(),p.beginPath(),M=0;M<x.length;M++)w=x[M],w.render.visible&&(p.arc(w.positionPrev.x,w.positionPrev.y,2,0,2*Math.PI,!1),p.closePath());p.fillStyle="rgba(255,165,0,0.8)",p.fill()},e.bodyVelocity=function(g,x,d){var p=d;p.beginPath();for(var I=0;I<x.length;I++){var w=x[I];!w.render.visible||(p.moveTo(w.position.x,w.position.y),p.lineTo(w.position.x+(w.position.x-w.positionPrev.x)*2,w.position.y+(w.position.y-w.positionPrev.y)*2))}p.lineWidth=3,p.strokeStyle="cornflowerblue",p.stroke()},e.bodyIds=function(g,x,d){var p=d,I,w;for(I=0;I<x.length;I++)if(!!x[I].render.visible){var k=x[I].parts;for(w=k.length>1?1:0;w<k.length;w++){var M=k[w];p.font="12px Arial",p.fillStyle="rgba(255,255,255,0.5)",p.fillText(M.id,M.position.x+10,M.position.y-10)}}},e.collisions=function(g,x,d){var p=d,I=g.options,w,k,M,T;for(p.beginPath(),M=0;M<x.length;M++)if(w=x[M],!!w.isActive)for(k=w.collision,T=0;T<w.activeContacts.length;T++){var A=w.activeContacts[T],H=A.vertex;p.rect(H.x-1.5,H.y-1.5,3.5,3.5)}for(I.wireframes?p.fillStyle="rgba(255,255,255,0.7)":p.fillStyle="orange",p.fill(),p.beginPath(),M=0;M<x.length;M++)if(w=x[M],!!w.isActive&&(k=w.collision,w.activeContacts.length>0)){var L=w.activeContacts[0].vertex.x,B=w.activeContacts[0].vertex.y;w.activeContacts.length===2&&(L=(w.activeContacts[0].vertex.x+w.activeContacts[1].vertex.x)/2,B=(w.activeContacts[0].vertex.y+w.activeContacts[1].vertex.y)/2),k.bodyB===k.supports[0].body||k.bodyA.isStatic===!0?p.moveTo(L-k.normal.x*8,B-k.normal.y*8):p.moveTo(L+k.normal.x*8,B+k.normal.y*8),p.lineTo(L,B)}I.wireframes?p.strokeStyle="rgba(255,165,0,0.7)":p.strokeStyle="orange",p.lineWidth=1,p.stroke()},e.separations=function(g,x,d){var p=d,I=g.options,w,k,M,T,A;for(p.beginPath(),A=0;A<x.length;A++)if(w=x[A],!!w.isActive){k=w.collision,M=k.bodyA,T=k.bodyB;var H=1;!T.isStatic&&!M.isStatic&&(H=.5),T.isStatic&&(H=0),p.moveTo(T.position.x,T.position.y),p.lineTo(T.position.x-k.penetration.x*H,T.position.y-k.penetration.y*H),H=1,!T.isStatic&&!M.isStatic&&(H=.5),M.isStatic&&(H=0),p.moveTo(M.position.x,M.position.y),p.lineTo(M.position.x+k.penetration.x*H,M.position.y+k.penetration.y*H)}I.wireframes?p.strokeStyle="rgba(255,165,0,0.5)":p.strokeStyle="orange",p.stroke()},e.inspector=function(g,x){g.engine;var d=g.selected,p=g.render,I=p.options,w;if(I.hasBounds){var k=p.bounds.max.x-p.bounds.min.x,M=p.bounds.max.y-p.bounds.min.y,T=k/p.options.width,A=M/p.options.height;x.scale(1/T,1/A),x.translate(-p.bounds.min.x,-p.bounds.min.y)}for(var H=0;H<d.length;H++){var L=d[H].data;switch(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.9)",x.setLineDash([1,2]),L.type){case"body":w=L.bounds,x.beginPath(),x.rect(Math.floor(w.min.x-3),Math.floor(w.min.y-3),Math.floor(w.max.x-w.min.x+6),Math.floor(w.max.y-w.min.y+6)),x.closePath(),x.stroke();break;case"constraint":var B=L.pointA;L.bodyA&&(B=L.pointB),x.beginPath(),x.arc(B.x,B.y,10,0,2*Math.PI),x.closePath(),x.stroke();break}x.setLineDash([]),x.translate(-.5,-.5)}g.selectStart!==null&&(x.translate(.5,.5),x.lineWidth=1,x.strokeStyle="rgba(255,165,0,0.6)",x.fillStyle="rgba(255,165,0,0.1)",w=g.selectBounds,x.beginPath(),x.rect(Math.floor(w.min.x),Math.floor(w.min.y),Math.floor(w.max.x-w.min.x),Math.floor(w.max.y-w.min.y)),x.closePath(),x.stroke(),x.fill(),x.translate(-.5,-.5)),I.hasBounds&&x.setTransform(1,0,0,1,0,0)};var o=function(g,x){var d=g.engine,p=g.timing,I=p.historySize,w=d.timing.timestamp;p.delta=x-p.lastTime||e._goodDelta,p.lastTime=x,p.timestampElapsed=w-p.lastTimestamp||0,p.lastTimestamp=w,p.deltaHistory.unshift(p.delta),p.deltaHistory.length=Math.min(p.deltaHistory.length,I),p.engineDeltaHistory.unshift(d.timing.lastDelta),p.engineDeltaHistory.length=Math.min(p.engineDeltaHistory.length,I),p.timestampElapsedHistory.unshift(p.timestampElapsed),p.timestampElapsedHistory.length=Math.min(p.timestampElapsedHistory.length,I),p.engineElapsedHistory.unshift(d.timing.lastElapsed),p.engineElapsedHistory.length=Math.min(p.engineElapsedHistory.length,I),p.elapsedHistory.unshift(p.lastElapsed),p.elapsedHistory.length=Math.min(p.elapsedHistory.length,I)},l=function(g){for(var x=0,d=0;d<g.length;d+=1)x+=g[d];return x/g.length||0},v=function(g,x){var d=document.createElement("canvas");return d.width=g,d.height=x,d.oncontextmenu=function(){return!1},d.onselectstart=function(){return!1},d},y=function(g){var x=g.getContext("2d"),d=window.devicePixelRatio||1,p=x.webkitBackingStorePixelRatio||x.mozBackingStorePixelRatio||x.msBackingStorePixelRatio||x.oBackingStorePixelRatio||x.backingStorePixelRatio||1;return d/p},C=function(g,x){var d=g.textures[x];return d||(d=g.textures[x]=new Image,d.src=x,d)},E=function(g,x){var d=x;/(jpg|gif|png)$/.test(x)&&(d="url("+x+")"),g.canvas.style.background=d,g.canvas.style.backgroundSize="contain",g.currentBackground=x}})()},function(m,P){var u={};m.exports=u,function(){u.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(m,P,u){var e={};m.exports=e;var s=u(7),n=u(19),i=u(14),c=u(20),a=u(4),f=u(5),r=u(10),t=u(0),o=u(6);(function(){e.create=function(l){l=l||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},y=t.extend(v,l);return y.world=l.world||f.create({label:"World"}),y.pairs=l.pairs||c.create(),y.detector=l.detector||i.create(),y.grid={buckets:[]},y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},e.update=function(l,v,y){var C=t.now();v=v||1e3/60,y=y||1;var E=l.world,g=l.detector,x=l.pairs,d=l.timing,p=d.timestamp,I;d.timestamp+=v*d.timeScale,d.lastDelta=v*d.timeScale;var w={timestamp:d.timestamp};a.trigger(l,"beforeUpdate",w);var k=f.allBodies(E),M=f.allConstraints(E);for(E.isModified&&i.setBodies(g,k),E.isModified&&f.setModified(E,!1,!1,!0),l.enableSleeping&&s.update(k,d.timeScale),e._bodiesApplyGravity(k,l.gravity),e._bodiesUpdate(k,v,d.timeScale,y,E.bounds),r.preSolveAll(k),I=0;I<l.constraintIterations;I++)r.solveAll(M,d.timeScale);r.postSolveAll(k),g.pairs=l.pairs;var T=i.collisions(g);for(c.update(x,T,p),l.enableSleeping&&s.afterCollisions(x.list,d.timeScale),x.collisionStart.length>0&&a.trigger(l,"collisionStart",{pairs:x.collisionStart}),n.preSolvePosition(x.list),I=0;I<l.positionIterations;I++)n.solvePosition(x.list,d.timeScale);for(n.postSolvePosition(k),r.preSolveAll(k),I=0;I<l.constraintIterations;I++)r.solveAll(M,d.timeScale);for(r.postSolveAll(k),n.preSolveVelocity(x.list),I=0;I<l.velocityIterations;I++)n.solveVelocity(x.list,d.timeScale);return x.collisionActive.length>0&&a.trigger(l,"collisionActive",{pairs:x.collisionActive}),x.collisionEnd.length>0&&a.trigger(l,"collisionEnd",{pairs:x.collisionEnd}),e._bodiesClearForces(k),a.trigger(l,"afterUpdate",w),l.timing.lastElapsed=t.now()-C,l},e.merge=function(l,v){if(t.extend(l,v),v.world){l.world=v.world,e.clear(l);for(var y=f.allBodies(l.world),C=0;C<y.length;C++){var E=y[C];s.set(E,!1),E.id=t.nextId()}}},e.clear=function(l){c.clear(l.pairs),i.clear(l.detector)},e._bodiesClearForces=function(l){for(var v=0;v<l.length;v++){var y=l[v];y.force.x=0,y.force.y=0,y.torque=0}},e._bodiesApplyGravity=function(l,v){var y=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||y===0))for(var C=0;C<l.length;C++){var E=l[C];E.isStatic||E.isSleeping||(E.force.y+=E.mass*v.y*y,E.force.x+=E.mass*v.x*y)}},e._bodiesUpdate=function(l,v,y,C,E){for(var g=0;g<l.length;g++){var x=l[g];x.isStatic||x.isSleeping||o.update(x,v,y,C)}}})()},function(m,P,u){var e={};m.exports=e;var s=u(3),n=u(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var c,a,f,r=i.length;for(c=0;c<r;c++)a=i[c],a.isActive&&(f=a.activeContacts.length,a.collision.parentA.totalContacts+=f,a.collision.parentB.totalContacts+=f)},e.solvePosition=function(i,c){var a,f,r,t,o,l,v,y,C=e._positionDampen,E=i.length;for(a=0;a<E;a++)f=i[a],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,l=r.normal,f.separation=l.x*(o.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+l.y*(o.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(a=0;a<E;a++)f=i[a],!(!f.isActive||f.isSensor)&&(r=f.collision,t=r.parentA,o=r.parentB,l=r.normal,y=(f.separation-f.slop)*c,(t.isStatic||o.isStatic)&&(y*=2),t.isStatic||t.isSleeping||(v=C/t.totalContacts,t.positionImpulse.x+=l.x*y*v,t.positionImpulse.y+=l.y*y*v),o.isStatic||o.isSleeping||(v=C/o.totalContacts,o.positionImpulse.x-=l.x*y*v,o.positionImpulse.y-=l.y*y*v))},e.postSolvePosition=function(i){for(var c=e._positionWarming,a=i.length,f=s.translate,r=n.update,t=0;t<a;t++){var o=i[t],l=o.positionImpulse,v=l.x,y=l.y,C=o.velocity;if(o.totalContacts=0,v!==0||y!==0){for(var E=0;E<o.parts.length;E++){var g=o.parts[E];f(g.vertices,l),r(g.bounds,g.vertices,C),g.position.x+=v,g.position.y+=y}o.positionPrev.x+=v,o.positionPrev.y+=y,v*C.x+y*C.y<0?(l.x=0,l.y=0):(l.x*=c,l.y*=c)}}},e.preSolveVelocity=function(i){var c=i.length,a,f;for(a=0;a<c;a++){var r=i[a];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,o=t.length,l=r.collision,v=l.parentA,y=l.parentB,C=l.normal,E=l.tangent;for(f=0;f<o;f++){var g=t[f],x=g.vertex,d=g.normalImpulse,p=g.tangentImpulse;if(d!==0||p!==0){var I=C.x*d+E.x*p,w=C.y*d+E.y*p;v.isStatic||v.isSleeping||(v.positionPrev.x+=I*v.inverseMass,v.positionPrev.y+=w*v.inverseMass,v.anglePrev+=v.inverseInertia*((x.x-v.position.x)*w-(x.y-v.position.y)*I)),y.isStatic||y.isSleeping||(y.positionPrev.x-=I*y.inverseMass,y.positionPrev.y-=w*y.inverseMass,y.anglePrev-=y.inverseInertia*((x.x-y.position.x)*w-(x.y-y.position.y)*I))}}}}},e.solveVelocity=function(i,c){var a=c*c,f=e._restingThresh*a,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*a,o=Number.MAX_VALUE,l=i.length,v,y,C,E;for(C=0;C<l;C++){var g=i[C];if(!(!g.isActive||g.isSensor)){var x=g.collision,d=x.parentA,p=x.parentB,I=d.velocity,w=p.velocity,k=x.normal.x,M=x.normal.y,T=x.tangent.x,A=x.tangent.y,H=g.activeContacts,L=H.length,B=1/L,F=d.inverseMass+p.inverseMass,O=g.friction*g.frictionStatic*r*a;for(I.x=d.position.x-d.positionPrev.x,I.y=d.position.y-d.positionPrev.y,w.x=p.position.x-p.positionPrev.x,w.y=p.position.y-p.positionPrev.y,d.angularVelocity=d.angle-d.anglePrev,p.angularVelocity=p.angle-p.anglePrev,E=0;E<L;E++){var D=H[E],Q=D.vertex,X=Q.x-d.position.x,q=Q.y-d.position.y,J=Q.x-p.position.x,ce=Q.y-p.position.y,ie=I.x-q*d.angularVelocity,se=I.y+X*d.angularVelocity,ae=w.x-ce*p.angularVelocity,yt=w.y+J*p.angularVelocity,je=ie-ae,qe=se-yt,Re=k*je+M*qe,ge=T*je+A*qe,$e=g.separation+Re,_e=Math.min($e,1);_e=$e<0?0:_e;var et=_e*O;ge>et||-ge>et?(y=ge>0?ge:-ge,v=g.friction*(ge>0?1:-1)*a,v<-y?v=-y:v>y&&(v=y)):(v=ge,y=o);var tt=X*M-q*k,nt=J*M-ce*k,it=B/(F+d.inverseInertia*tt*tt+p.inverseInertia*nt*nt),De=(1+g.restitution)*Re*it;if(v*=it,Re*Re>f&&Re<0)D.normalImpulse=0;else{var St=D.normalImpulse;D.normalImpulse+=De,D.normalImpulse=Math.min(D.normalImpulse,0),De=D.normalImpulse-St}if(ge*ge>t)D.tangentImpulse=0;else{var Pt=D.tangentImpulse;D.tangentImpulse+=v,D.tangentImpulse<-y&&(D.tangentImpulse=-y),D.tangentImpulse>y&&(D.tangentImpulse=y),v=D.tangentImpulse-Pt}var Ve=k*De+T*v,We=M*De+A*v;d.isStatic||d.isSleeping||(d.positionPrev.x+=Ve*d.inverseMass,d.positionPrev.y+=We*d.inverseMass,d.anglePrev+=(X*We-q*Ve)*d.inverseInertia),p.isStatic||p.isSleeping||(p.positionPrev.x-=Ve*p.inverseMass,p.positionPrev.y-=We*p.inverseMass,p.anglePrev-=(J*We-ce*Ve)*p.inverseInertia)}}}}})()},function(m,P,u){var e={};m.exports=e;var s=u(9),n=u(0);(function(){e.create=function(i){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,c,a){var f=i.list,r=f.length,t=i.table,o=c.length,l=i.collisionStart,v=i.collisionEnd,y=i.collisionActive,C,E,g,x;for(l.length=0,v.length=0,y.length=0,x=0;x<r;x++)f[x].confirmedActive=!1;for(x=0;x<o;x++)C=c[x],g=C.pair,g?(g.isActive?y.push(g):l.push(g),s.update(g,C,a),g.confirmedActive=!0):(g=s.create(C,a),t[g.id]=g,l.push(g),f.push(g));var d=[];for(r=f.length,x=0;x<r;x++)g=f[x],g.confirmedActive||(s.setActive(g,!1,a),v.push(g),!g.collision.bodyA.isSleeping&&!g.collision.bodyB.isSleeping&&d.push(x));for(x=0;x<d.length;x++)E=d[x]-x,g=f[E],f.splice(E,1),delete t[g.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(m,P,u){var e=m.exports=u(22);e.Axes=u(11),e.Bodies=u(12),e.Body=u(6),e.Bounds=u(1),e.Collision=u(8),e.Common=u(0),e.Composite=u(5),e.Composites=u(23),e.Constraint=u(10),e.Contact=u(17),e.Detector=u(14),e.Engine=u(18),e.Events=u(4),e.Grid=u(24),e.Mouse=u(13),e.MouseConstraint=u(25),e.Pair=u(9),e.Pairs=u(20),e.Plugin=u(15),e.Query=u(26),e.Render=u(16),e.Resolver=u(19),e.Runner=u(27),e.SAT=u(28),e.Sleeping=u(7),e.Svg=u(29),e.Vector=u(2),e.Vertices=u(3),e.World=u(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(m,P,u){var e={};m.exports=e;var s=u(15),n=u(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,c){return i=i.replace(/^Matter./,""),n.chainPathBefore(e,i,c)},e.after=function(i,c){return i=i.replace(/^Matter./,""),n.chainPathAfter(e,i,c)}})()},function(m,P,u){var e={};m.exports=e;var s=u(5),n=u(10),i=u(0),c=u(6),a=u(12),f=i.deprecated;(function(){e.stack=function(r,t,o,l,v,y,C){for(var E=s.create({label:"Stack"}),g=r,x=t,d,p=0,I=0;I<l;I++){for(var w=0,k=0;k<o;k++){var M=C(g,x,k,I,d,p);if(M){var T=M.bounds.max.y-M.bounds.min.y,A=M.bounds.max.x-M.bounds.min.x;T>w&&(w=T),c.translate(M,{x:A*.5,y:T*.5}),g=M.bounds.max.x+v,s.addBody(E,M),d=M,p+=1}else g+=v}x+=w+y,g=r}return E},e.chain=function(r,t,o,l,v,y){for(var C=r.bodies,E=1;E<C.length;E++){var g=C[E-1],x=C[E],d=g.bounds.max.y-g.bounds.min.y,p=g.bounds.max.x-g.bounds.min.x,I=x.bounds.max.y-x.bounds.min.y,w=x.bounds.max.x-x.bounds.min.x,k={bodyA:g,pointA:{x:p*t,y:d*o},bodyB:x,pointB:{x:w*l,y:I*v}},M=i.extend(k,y);s.addConstraint(r,n.create(M))}return r.label+=" Chain",r},e.mesh=function(r,t,o,l,v){var y=r.bodies,C,E,g,x,d;for(C=0;C<o;C++){for(E=1;E<t;E++)g=y[E-1+C*t],x=y[E+C*t],s.addConstraint(r,n.create(i.extend({bodyA:g,bodyB:x},v)));if(C>0)for(E=0;E<t;E++)g=y[E+(C-1)*t],x=y[E+C*t],s.addConstraint(r,n.create(i.extend({bodyA:g,bodyB:x},v))),l&&E>0&&(d=y[E-1+(C-1)*t],s.addConstraint(r,n.create(i.extend({bodyA:d,bodyB:x},v)))),l&&E<t-1&&(d=y[E+1+(C-1)*t],s.addConstraint(r,n.create(i.extend({bodyA:d,bodyB:x},v))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,o,l,v,y,C){return e.stack(r,t,o,l,v,y,function(E,g,x,d,p,I){var w=Math.min(l,Math.ceil(o/2)),k=p?p.bounds.max.x-p.bounds.min.x:0;if(!(d>w)){d=w-d;var M=d,T=o-1-d;if(!(x<M||x>T)){I===1&&c.translate(p,{x:(x+(o%2===1?1:-1))*k,y:0});var A=p?x*k:0;return C(r+A+x*v,g,x,d,p,I)}}})},e.newtonsCradle=function(r,t,o,l,v){for(var y=s.create({label:"Newtons Cradle"}),C=0;C<o;C++){var E=1.9,g=a.circle(r+C*(l*E),t+v,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),x=n.create({pointA:{x:r+C*(l*E),y:t},bodyB:g});s.addBody(y,g),s.addConstraint(y,x)}return y},f(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,o,l,v){var y=c.nextGroup(!0),C=20,E=-o*.5+C,g=o*.5-C,x=0,d=s.create({label:"Car"}),p=a.rectangle(r,t,o,l,{collisionFilter:{group:y},chamfer:{radius:l*.5},density:2e-4}),I=a.circle(r+E,t+x,v,{collisionFilter:{group:y},friction:.8}),w=a.circle(r+g,t+x,v,{collisionFilter:{group:y},friction:.8}),k=n.create({bodyB:p,pointB:{x:E,y:x},bodyA:I,stiffness:1,length:0}),M=n.create({bodyB:p,pointB:{x:g,y:x},bodyA:w,stiffness:1,length:0});return s.addBody(d,p),s.addBody(d,I),s.addBody(d,w),s.addConstraint(d,k),s.addConstraint(d,M),d},f(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,o,l,v,y,C,E,g,x){g=i.extend({inertia:1/0},g),x=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},x);var d=e.stack(r,t,o,l,v,y,function(p,I){return a.circle(p,I,E,g)});return e.mesh(d,o,l,C,x),d.label="Soft Body",d},f(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(m,P,u){var e={};m.exports=e;var s=u(9),n=u(0),i=n.deprecated;(function(){e.create=function(c){var a={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(a,c)},e.update=function(c,a,f,r){var t,o,l,v=f.world,y=c.buckets,C,E,g=!1;for(t=0;t<a.length;t++){var x=a[t];if(!(x.isSleeping&&!r)&&!(v.bounds&&(x.bounds.max.x<v.bounds.min.x||x.bounds.min.x>v.bounds.max.x||x.bounds.max.y<v.bounds.min.y||x.bounds.min.y>v.bounds.max.y))){var d=e._getRegion(c,x);if(!x.region||d.id!==x.region.id||r){(!x.region||r)&&(x.region=d);var p=e._regionUnion(d,x.region);for(o=p.startCol;o<=p.endCol;o++)for(l=p.startRow;l<=p.endRow;l++){E=e._getBucketId(o,l),C=y[E];var I=o>=d.startCol&&o<=d.endCol&&l>=d.startRow&&l<=d.endRow,w=o>=x.region.startCol&&o<=x.region.endCol&&l>=x.region.startRow&&l<=x.region.endRow;!I&&w&&w&&C&&e._bucketRemoveBody(c,C,x),(x.region===d||I&&!w||r)&&(C||(C=e._createBucket(y,E)),e._bucketAddBody(c,C,x))}x.region=d,g=!0}}}g&&(c.pairsList=e._createActivePairsList(c))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(c){c.buckets={},c.pairs={},c.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(c,a){var f=Math.min(c.startCol,a.startCol),r=Math.max(c.endCol,a.endCol),t=Math.min(c.startRow,a.startRow),o=Math.max(c.endRow,a.endRow);return e._createRegion(f,r,t,o)},e._getRegion=function(c,a){var f=a.bounds,r=Math.floor(f.min.x/c.bucketWidth),t=Math.floor(f.max.x/c.bucketWidth),o=Math.floor(f.min.y/c.bucketHeight),l=Math.floor(f.max.y/c.bucketHeight);return e._createRegion(r,t,o,l)},e._createRegion=function(c,a,f,r){return{id:c+","+a+","+f+","+r,startCol:c,endCol:a,startRow:f,endRow:r}},e._getBucketId=function(c,a){return"C"+c+"R"+a},e._createBucket=function(c,a){var f=c[a]=[];return f},e._bucketAddBody=function(c,a,f){var r=c.pairs,t=s.id,o=a.length,l;for(l=0;l<o;l++){var v=a[l];if(!(f.id===v.id||f.isStatic&&v.isStatic)){var y=t(f,v),C=r[y];C?C[2]+=1:r[y]=[f,v,1]}}a.push(f)},e._bucketRemoveBody=function(c,a,f){var r=c.pairs,t=s.id,o;a.splice(n.indexOf(a,f),1);var l=a.length;for(o=0;o<l;o++){var v=r[t(f,a[o])];v&&(v[2]-=1)}},e._createActivePairsList=function(c){var a,f=c.pairs,r=n.keys(f),t=r.length,o=[],l;for(l=0;l<t;l++)a=f[r[l]],a[2]>0?o.push(a):delete f[r[l]];return o}})()},function(m,P,u){var e={};m.exports=e;var s=u(3),n=u(7),i=u(13),c=u(4),a=u(14),f=u(10),r=u(5),t=u(0),o=u(1);(function(){e.create=function(l,v){var y=(l?l.mouse:null)||(v?v.mouse:null);y||(l&&l.render&&l.render.canvas?y=i.create(l.render.canvas):v&&v.element?y=i.create(v.element):(y=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var C=f.create({label:"Mouse Constraint",pointA:y.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),E={type:"mouseConstraint",mouse:y,element:null,body:null,constraint:C,collisionFilter:{category:1,mask:4294967295,group:0}},g=t.extend(E,v);return c.on(l,"beforeUpdate",function(){var x=r.allBodies(l.world);e.update(g,x),e._triggerEvents(g)}),g},e.update=function(l,v){var y=l.mouse,C=l.constraint,E=l.body;if(y.button===0){if(C.bodyB)n.set(C.bodyB,!1),C.pointA=y.position;else for(var g=0;g<v.length;g++)if(E=v[g],o.contains(E.bounds,y.position)&&a.canCollide(E.collisionFilter,l.collisionFilter))for(var x=E.parts.length>1?1:0;x<E.parts.length;x++){var d=E.parts[x];if(s.contains(d.vertices,y.position)){C.pointA=y.position,C.bodyB=l.body=E,C.pointB={x:y.position.x-E.position.x,y:y.position.y-E.position.y},C.angleB=E.angle,n.set(E,!1),c.trigger(l,"startdrag",{mouse:y,body:E});break}}}else C.bodyB=l.body=null,C.pointB=null,E&&c.trigger(l,"enddrag",{mouse:y,body:E})},e._triggerEvents=function(l){var v=l.mouse,y=v.sourceEvents;y.mousemove&&c.trigger(l,"mousemove",{mouse:v}),y.mousedown&&c.trigger(l,"mousedown",{mouse:v}),y.mouseup&&c.trigger(l,"mouseup",{mouse:v}),i.clearSourceEvents(v)}})()},function(m,P,u){var e={};m.exports=e;var s=u(2),n=u(8),i=u(1),c=u(12),a=u(3);(function(){e.collides=function(f,r){for(var t=[],o=r.length,l=f.bounds,v=n.collides,y=i.overlaps,C=0;C<o;C++){var E=r[C],g=E.parts.length,x=g===1?0:1;if(y(E.bounds,l))for(var d=x;d<g;d++){var p=E.parts[d];if(y(p.bounds,l)){var I=v(p,f);if(I){t.push(I);break}}}}return t},e.ray=function(f,r,t,o){o=o||1e-100;for(var l=s.angle(r,t),v=s.magnitude(s.sub(r,t)),y=(t.x+r.x)*.5,C=(t.y+r.y)*.5,E=c.rectangle(y,C,v,o,{angle:l}),g=e.collides(E,f),x=0;x<g.length;x+=1){var d=g[x];d.body=d.bodyB=d.bodyA}return g},e.region=function(f,r,t){for(var o=[],l=0;l<f.length;l++){var v=f[l],y=i.overlaps(v.bounds,r);(y&&!t||!y&&t)&&o.push(v)}return o},e.point=function(f,r){for(var t=[],o=0;o<f.length;o++){var l=f[o];if(i.contains(l.bounds,r))for(var v=l.parts.length===1?0:1;v<l.parts.length;v++){var y=l.parts[v];if(i.contains(y.bounds,r)&&a.contains(y.vertices,r)){t.push(l);break}}}return t}})()},function(m,P,u){var e={};m.exports=e;var s=u(4),n=u(18),i=u(0);(function(){var c,a;if(typeof window!="undefined"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var f;c=function(r){f=setTimeout(function(){r(i.now())},1e3/60)},a=function(){clearTimeout(f)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},o=i.extend(t,r);return o.delta=o.delta||1e3/o.fps,o.deltaMin=o.deltaMin||1e3/o.fps,o.deltaMax=o.deltaMax||1e3/(o.fps*.5),o.fps=1e3/o.delta,o},e.run=function(r,t){return typeof r.positionIterations!="undefined"&&(t=r,r=e.create()),function o(l){r.frameRequestId=c(o),l&&r.enabled&&e.tick(r,t,l)}(),r},e.tick=function(r,t,o){var l=t.timing,v=1,y,C={timestamp:l.timestamp};s.trigger(r,"beforeTick",C),r.isFixed?y=r.delta:(y=o-r.timePrev||r.delta,r.timePrev=o,r.deltaHistory.push(y),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),y=Math.min.apply(null,r.deltaHistory),y=y<r.deltaMin?r.deltaMin:y,y=y>r.deltaMax?r.deltaMax:y,v=y/r.delta,r.delta=y),r.timeScalePrev!==0&&(v*=l.timeScale/r.timeScalePrev),l.timeScale===0&&(v=0),r.timeScalePrev=l.timeScale,r.correction=v,r.frameCounter+=1,o-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((o-r.counterTimestamp)/1e3),r.counterTimestamp=o,r.frameCounter=0),s.trigger(r,"tick",C),s.trigger(r,"beforeUpdate",C),n.update(t,y,v),s.trigger(r,"afterUpdate",C),s.trigger(r,"afterTick",C)},e.stop=function(r){a(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(m,P,u){var e={};m.exports=e;var s=u(8),n=u(0),i=n.deprecated;(function(){e.collides=function(c,a){return s.collides(c,a)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(m,P,u){var e={};m.exports=e,u(1);var s=u(0);(function(){e.pathToVertices=function(n,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,a,f,r,t,o,l,v,y,C,E=[],g,x,d=0,p=0,I=0;i=i||15;var w=function(M,T,A){var H=A%2===1&&A>1;if(!y||M!=y.x||T!=y.y){y&&H?(g=y.x,x=y.y):(g=0,x=0);var L={x:g+M,y:x+T};(H||!y)&&(y=L),E.push(L),p=g+M,I=x+T}},k=function(M){var T=M.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":p=M.x,I=M.y;break;case"H":p=M.x;break;case"V":I=M.y;break}w(p,I,M.pathSegType)}};for(e._svgPathToAbsolute(n),f=n.getTotalLength(),o=[],c=0;c<n.pathSegList.numberOfItems;c+=1)o.push(n.pathSegList.getItem(c));for(l=o.concat();d<f;){if(C=n.getPathSegAtLength(d),t=o[C],t!=v){for(;l.length&&l[0]!=t;)k(l.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=n.getPointAtLength(d),w(r.x,r.y,0);break}d+=i}for(c=0,a=l.length;c<a;++c)k(l[c]);return E},e._svgPathToAbsolute=function(n){for(var i,c,a,f,r,t,o=n.pathSegList,l=0,v=0,y=o.numberOfItems,C=0;C<y;++C){var E=o.getItem(C),g=E.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(g))"x"in E&&(l=E.x),"y"in E&&(v=E.y);else switch("x1"in E&&(a=l+E.x1),"x2"in E&&(r=l+E.x2),"y1"in E&&(f=v+E.y1),"y2"in E&&(t=v+E.y2),"x"in E&&(l+=E.x),"y"in E&&(v+=E.y),g){case"m":o.replaceItem(n.createSVGPathSegMovetoAbs(l,v),C);break;case"l":o.replaceItem(n.createSVGPathSegLinetoAbs(l,v),C);break;case"h":o.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(l),C);break;case"v":o.replaceItem(n.createSVGPathSegLinetoVerticalAbs(v),C);break;case"c":o.replaceItem(n.createSVGPathSegCurvetoCubicAbs(l,v,a,f,r,t),C);break;case"s":o.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(l,v,r,t),C);break;case"q":o.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(l,v,a,f),C);break;case"t":o.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(l,v),C);break;case"a":o.replaceItem(n.createSVGPathSegArcAbs(l,v,E.r1,E.r2,E.angle,E.largeArcFlag,E.sweepFlag),C);break;case"z":case"Z":l=i,v=c;break}(g=="M"||g=="m")&&(i=l,c=v)}}})()},function(m,P,u){var e={};m.exports=e;var s=u(5);u(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(Ye);var W=pt(Ye.exports),xt={exports:{}};/*!
 * matter-attractors 0.1.6 by Liam Brummitt 2017-05-15
 * https://github.com/liabru/matter-attractors
 * License MIT
 */(function(S,h){(function(P,u){S.exports=u(Ye.exports)})(Oe,function(m){return function(P){var u={};function e(s){if(u[s])return u[s].exports;var n=u[s]={i:s,l:!1,exports:{}};return P[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=P,e.c=u,e.i=function(s){return s},e.d=function(s,n,i){e.o(s,n)||Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(s){var n=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(n,"a",n),n},e.o=function(s,n){return Object.prototype.hasOwnProperty.call(s,n)},e.p="/libs",e(e.s=1)}([function(P,u){P.exports=m},function(P,u,e){var s=e(0),n={name:"matter-attractors",version:"0.1.4",for:"matter-js@^0.12.0",install:function(c){c.after("Body.create",function(){n.Body.init(this)}),c.before("Engine.update",function(a){n.Engine.update(a)})},Body:{init:function(c){c.plugin.attractors=c.plugin.attractors||[]}},Engine:{update:function(c){for(var a=c.world,f=s.Composite.allBodies(a),r=0;r<f.length;r+=1){var t=f[r],o=t.plugin.attractors;if(o&&o.length>0)for(var l=0;l<f.length;l+=1){var v=f[l];if(v.id!==t.id)for(var y=0;y<o.length;y+=1){var C=o[y],E=C;s.Common.isFunction(C)&&(E=C(t,v)),E&&s.Body.applyForce(v,v.position,E)}}}}},Attractors:{gravityConstant:.001,gravity:function(c,a){var f=s.Vector.sub(a.position,c.position),r=s.Vector.magnitudeSquared(f)||1e-4,t=s.Vector.normalise(f),o=-n.Attractors.gravityConstant*(c.mass*a.mass/r),l=s.Vector.mult(t,o);s.Body.applyForce(c,c.position,s.Vector.neg(l)),s.Body.applyForce(a,a.position,l)}}};s.Plugin.register(n),P.exports=n}])})})(xt);var un=pt(xt.exports);W.use(un);class cn{constructor(h,m,P,u){this.areaWidth=m,this.areaHeight=P,this.thickness=u;const e={isStatic:!0,render:{fillStyle:"transparent"}};this.top=W.Bodies.rectangle(m/2,-u/2,m,u,e),this.right=W.Bodies.rectangle(m+u/2,P/2,u,P,e),this.bottom=W.Bodies.rectangle(m/2,P+u/2,m,u,e),this.left=W.Bodies.rectangle(-u/2,P/2,u,P,e),W.Composite.add(h.world,[this.top,this.right,this.bottom,this.left])}update(h,m){W.Body.setPosition(this.top,{x:h/2,y:this.top.position.y}),W.Body.setPosition(this.right,{x:h+this.thickness/2,y:m/2}),W.Body.setPosition(this.bottom,{x:h/2,y:m+this.thickness/2}),W.Body.setPosition(this.left,{x:this.left.position.x,y:m/2}),W.Body.scale(this.top,h/this.areaWidth,1),W.Body.scale(this.right,1,m/this.areaHeight),W.Body.scale(this.bottom,h/this.areaWidth,1),W.Body.scale(this.left,1,m/this.areaHeight),this.areaWidth=h,this.areaHeight=m}}const hn=(S,h)=>({x:(S.position.x-h.position.x)*2e-4,y:(S.position.y-h.position.y)*2e-4});class gn{constructor(h,m){this.body=W.Bodies.circle(m.clientWidth/2,0,1,{isStatic:!0,plugin:{attractors:[hn]},collisionFilter:{group:-1}}),W.Composite.add(h.world,this.body),this.mouse=W.Mouse.create(m),W.Events.on(h,"afterUpdate",()=>{!this.mouse.position.x||W.Body.translate(this.body,{x:(this.mouse.position.x-this.body.position.x)*.25,y:(this.mouse.position.y-this.body.position.y)*.25})}),this.mouse.element.removeEventListener("mousewheel",this.mouse.mousewheel),this.mouse.element.removeEventListener("DOMMouseScroll",this.mouse.mousewheel)}setAnchor(){this.mouse.position.x=this.mouse.element.clientWidth/2,this.mouse.position.y=0,W.Body.setPosition(this.body,{x:this.mouse.element.clientWidth/2,y:0})}}function vn(S){let h,m,P=`${S[2]}px`,u=`${S[0]}ms`,e,s,n;const i=S[9].default,c=oe(i,S,S[8],null);return{c(){h=K("ul"),c&&c.c(),this.h()},l(a){h=Z(a,"UL",{class:!0});var f=z(h);c&&c.l(f),f.forEach(R),this.h()},h(){N(h,"class","cpeum-1s5e709"),Je(()=>S[11].call(h)),b(h,"height",P,!1),b(h,"--delay",u,!1)},m(a,f){G(a,h,f),c&&c.m(h,null),S[10](h),m=ht(h,S[11].bind(h)),e=!0,s||(n=[ke(Xe.call(null,h,{rootMargin:"0% 0px -30%"})),re(h,"enter",S[5]),re(h,"leave",S[6]),re(h,"mouseenter",xn),re(h,"mouseleave",S[7])],s=!0)},p(a,[f]){c&&c.p&&(!e||f&256)&&le(c,i,a,a[8],e?ue(i,a[8],f,null):fe(a[8]),null),f&4&&P!==(P=`${a[2]}px`)&&b(h,"height",P,!1),f&1&&u!==(u=`${a[0]}ms`)&&b(h,"--delay",u,!1)},i(a){e||(Y(c,a),e=!0)},o(a){j(c,a),e=!1},d(a){a&&R(h),c&&c.d(a),S[10](null),m(),s=!1,Fe(n)}}}const mn=200,ct=400,dn=500,pn=3;function xn(){}function yn(S,h,m){let P,{$$slots:u={},$$scope:e}=h,{staggerDelay:s=120}=h,n,i,c=500;const a=ze(!1);Ce(S,a,d=>m(15,P=d));let f=0,r=[];Pe("bodies",{getEngine:()=>t,getIndex:()=>f++,addBodyRef:d=>{r.push(d)},visible:a,staggerDelay:s});const t=W.Engine.create();t.gravity.y=0,t.gravity.scale=0,t.positionIterations=5,t.velocityIterations=3,t.enableSleeping=!0;const o=W.Runner.create(),l=new cn(t,ct,ct,mn);let v;function y(){P?t.enabled=!0:(a.set(!0),W.Runner.run(o,t))}function C(){t.enabled=!1}function E(){v.setAnchor()}gt(()=>{v=new gn(t,n)}),Ct(()=>{W.Runner.stop(o),W.World.clear(t.world,!1),W.Engine.clear(t)});function g(d){vt[d?"unshift":"push"](()=>{n=d,m(3,n)})}function x(){i=this.clientWidth,m(1,i)}return S.$$set=d=>{"staggerDelay"in d&&m(0,s=d.staggerDelay),"$$scope"in d&&m(8,e=d.$$scope)},S.$$.update=()=>{S.$$.dirty&6&&i&&(m(2,c=Math.max(Math.ceil((dn+pn*r.map(d=>d.area).reduce((d,p)=>d+p,0))/i),400)),l.update(i,c))},[s,i,c,n,a,y,C,E,e,u,g,x]}class Qn extends ee{constructor(h){super(),te(this,h,yn,vn,ne,{staggerDelay:0})}}function Sn(S){let h,m,P=`rotate(${-1*S[4]}rad)`,u=`${S[2]}px`,e=`${S[0]}px`,s=`${S[1]}px`,n=`-${S[1]*.5}px`,i=`-${S[0]*.5}px`,c=`translate(${S[6]}px, ${S[5]}px) rotate(${S[4]}rad)`,a=`${S[10]*S[8].staggerDelay}ms`,f;const r=S[13].default,t=oe(r,S,S[12],null);return{c(){h=K("li"),m=K("span"),t&&t.c(),this.h()},l(o){h=Z(o,"LI",{class:!0});var l=z(h);m=Z(l,"SPAN",{});var v=z(m);t&&t.l(v),v.forEach(R),l.forEach(R),this.h()},h(){b(m,"transform",P,!1),N(h,"class","cpeum-38i3u2"),V(h,"hidden",!S[7]),b(h,"border-radius",u,!1),b(h,"width",e,!1),b(h,"height",s,!1),b(h,"top",n,!1),b(h,"left",i,!1),b(h,"transform",c,!1),b(h,"--delay",a,!1)},m(o,l){G(o,h,l),_(h,m),t&&t.m(m,null),S[14](h),f=!0},p(o,[l]){t&&t.p&&(!f||l&4096)&&le(t,r,o,o[12],f?ue(r,o[12],l,null):fe(o[12]),null),l&16&&P!==(P=`rotate(${-1*o[4]}rad)`)&&b(m,"transform",P,!1),l&128&&V(h,"hidden",!o[7]),l&4&&u!==(u=`${o[2]}px`)&&b(h,"border-radius",u,!1),l&1&&e!==(e=`${o[0]}px`)&&b(h,"width",e,!1),l&2&&s!==(s=`${o[1]}px`)&&b(h,"height",s,!1),l&2&&n!==(n=`-${o[1]*.5}px`)&&b(h,"top",n,!1),l&1&&i!==(i=`-${o[0]*.5}px`)&&b(h,"left",i,!1),l&112&&c!==(c=`translate(${o[6]}px, ${o[5]}px) rotate(${o[4]}rad)`)&&b(h,"transform",c,!1)},i(o){f||(Y(t,o),f=!0)},o(o){j(t,o),f=!1},d(o){o&&R(h),t&&t.d(o),S[14](null)}}}const Pn=150,Cn=12;function wn(S,h,m){let P,{$$slots:u={},$$scope:e}=h,{size:s=void 0}=h,{width:n=void 0}=h,{height:i=void 0}=h,{radius:c=void 0}=h,a,f=(Math.random()-.5)/180,r=0,t=0;const o=Ne("bodies"),l=o.visible;Ce(S,l,g=>m(7,P=g));const v=o.getIndex(),y=o.getEngine();let C;gt(()=>{s||m(11,s=Pn+Math.sqrt(a.textContent.length)*Cn),n||m(0,n=s),i||m(1,i=n),c||m(2,c=Math.round(Math.random()*.5*n)),C=W.Bodies.rectangle(W.Common.random(0,a.parentElement.clientWidth),W.Common.random(0,a.parentElement.clientHeight),n,i,{angle:f,friction:.1,frictionStatic:12,density:5e-4,chamfer:{radius:c}}),o.addBodyRef(C),W.Composite.add(y.world,C),W.Events.on(y,"afterUpdate",()=>{m(4,f=C.angle),m(5,r=C.position.y),m(6,t=C.position.x)})});function E(g){vt[g?"unshift":"push"](()=>{a=g,m(3,a)})}return S.$$set=g=>{"size"in g&&m(11,s=g.size),"width"in g&&m(0,n=g.width),"height"in g&&m(1,i=g.height),"radius"in g&&m(2,c=g.radius),"$$scope"in g&&m(12,e=g.$$scope)},[n,i,c,a,f,r,t,P,o,l,v,s,e,u,E]}class _n extends ee{constructor(h){super(),te(this,h,wn,Sn,ne,{size:11,width:0,height:1,radius:2})}}export{Qn as B,Dn as C,Un as E,zn as F,Wn as I,On as L,bn as P,qt as S,Nn as a,Vn as b,_n as c,Gn as d};
