import{S as se,i as re,s as ae,_ as fe,C as q,e as J,c as _,a as G,d as D,b as U,a1 as me,I as W,g as Q,J as X,W as Se,X as ue,Y as ce,Z as he,z as ve,q as j,o as $,a2 as de,a3 as ze,f as z,t as Pe,k as Ee,h as Ce,m as Ie,j as Fe,E as Ve,G as Te,w as Ge,x as Ue,y as Ne,Q as ne,B as be,ac as We,r as pe,K as Je,af as ht,N as xe,l as Oe,O as we,P as Me,T as le,a4 as Ke,L as it,v as gt,a5 as Mt,a6 as vt}from"./index-8814b013.js";import{i as _e}from"./intersect-eda3c074.js";import{a as mt,r as dt}from"./revealText-510b6fa3.js";import{b as st}from"./paths-396f020f.js";import"./scroll-15239bd9.js";/* empty css                                            */import{a as rt}from"./Map-861cc6bb.js";import{m as Ze,a as at,b as ke,h as Re,i as pt}from"./Map.svelte_svelte_type_style_lang-ad9468b4.js";import{w as De}from"./index-ff6a0fc0.js";import{g as ot}from"./themeColors-35fcc233.js";import{a as lt}from"./index-b9ab12a0.js";function kt(P){let h,d,E,c,e;const s=P[2].default,n=fe(s,P,P[1],null);let i=[P[0]],u={};for(let a=0;a<i.length;a+=1)u=q(u,i[a]);return{c(){h=J("h2"),d=J("span"),n&&n.c(),this.h()},l(a){h=_(a,"H2",{});var l=G(h);d=_(l,"SPAN",{class:!0});var r=G(d);n&&n.l(r),r.forEach(D),l.forEach(D),this.h()},h(){U(d,"class","cpeum-1uh9iq8"),me(h,u),W(h,"cpeum-1uh9iq8",!0)},m(a,l){Q(a,h,l),X(h,d),n&&n.m(d,null),E=!0,c||(e=Se(mt.call(null,h,dt)),c=!0)},p(a,[l]){n&&n.p&&(!E||l&2)&&ue(n,s,a,a[1],E?he(s,a[1],l,null):ce(a[1]),null),me(h,u=ve(i,[l&1&&a[0]])),W(h,"cpeum-1uh9iq8",!0)},i(a){E||(j(n,a),E=!0)},o(a){$(n,a),E=!1},d(a){a&&D(h),n&&n.d(a),c=!1,e()}}}function Et(P,h,d){const E=[];let c=de(h,E),{$$slots:e={},$$scope:s}=h;return P.$$set=n=>{h=q(q({},h),ze(n)),d(0,c=de(h,E)),"$$scope"in n&&d(1,s=n.$$scope)},[c,s,e]}class xt extends se{constructor(h){super(),re(this,h,Et,kt,ae,{})}}function yt(P,{scrollParent:h=document.body,factor:d=.8}={}){let E=0;function c(){const e=P.getBoundingClientRect();E=(Math.min(window.innerHeight,Math.max(-e.height,e.top-E))+e.height/2-window.innerHeight/2)*(d-1),P.style.transform=`translateY(${E}px)`}return c(),h.addEventListener("scroll",c),{destroy(){h.removeEventListener("scroll",c)}}}function ft(P){let h,d,E,c;return{c(){h=J("div"),this.h()},l(e){h=_(e,"DIV",{class:!0}),G(h).forEach(D),this.h()},h(){U(h,"class","image cpeum-g8o4pc"),z(h,"background-image",P[2]?`url(${st+P[2]})`:"",!1)},m(e,s){Q(e,h,s),E||(c=Se(d=yt.call(null,h,{factor:.8})),E=!0)},p(e,s){s&4&&z(h,"background-image",e[2]?`url(${st+e[2]})`:"",!1)},d(e){e&&D(h),E=!1,c()}}}function It(P){let h,d,E,c,e,s,n,i,u,a,l=P[2]&&ft(P);return{c(){h=J("header"),d=J("hgroup"),E=J("span"),c=Pe(P[0]),e=Ee(),s=J("h3"),n=Pe(P[1]),i=Ee(),l&&l.c(),this.h()},l(r){h=_(r,"HEADER",{class:!0});var t=G(h);d=_(t,"HGROUP",{class:!0});var o=G(d);E=_(o,"SPAN",{class:!0});var f=G(E);c=Ce(f,P[0]),f.forEach(D),e=Ie(o),s=_(o,"H3",{class:!0});var v=G(s);n=Ce(v,P[1]),v.forEach(D),o.forEach(D),i=Ie(t),l&&l.l(t),t.forEach(D),this.h()},h(){U(E,"class","cpeum-g8o4pc"),U(s,"class","cpeum-g8o4pc"),U(d,"class","cpeum-g8o4pc"),U(h,"class","cpeum-g8o4pc")},m(r,t){Q(r,h,t),X(h,d),X(d,E),X(E,c),X(d,e),X(d,s),X(s,n),X(h,i),l&&l.m(h,null),u||(a=[Se(mt.call(null,s,dt)),Se(yt.call(null,d,{factor:.6}))],u=!0)},p(r,[t]){t&1&&Fe(c,r[0]),t&2&&Fe(n,r[1]),r[2]?l?l.p(r,t):(l=ft(r),l.c(),l.m(h,null)):l&&(l.d(1),l=null)},i:Ve,o:Ve,d(r){r&&D(h),l&&l.d(),u=!1,Te(a)}}}function At(P,h,d){let{label:E}=h,{title:c}=h,{src:e=""}=h;return P.$$set=s=>{"label"in s&&d(0,E=s.label),"title"in s&&d(1,c=s.title),"src"in s&&d(2,e=s.src)},[E,c,e]}class Tt extends se{constructor(h){super(),re(this,h,At,It,ae,{label:0,title:1,src:2})}}function Bt(P){let h,d,E,c,e,s;d=new Tt({props:{label:P[0],title:P[1],src:P[2]}});const n=P[5].default,i=fe(n,P,P[4],null);return{c(){h=J("section"),Ge(d.$$.fragment),E=Ee(),i&&i.c(),this.h()},l(u){h=_(u,"SECTION",{class:!0});var a=G(h);Ue(d.$$.fragment,a),E=Ie(a),i&&i.l(a),a.forEach(D),this.h()},h(){U(h,"class","cpeum-194x174")},m(u,a){Q(u,h,a),Ne(d,h,null),X(h,E),i&&i.m(h,null),c=!0,e||(s=[Se(_e.call(null,h)),ne(h,"enter",Ht),ne(h,"leave",Lt)],e=!0)},p(u,[a]){const l={};a&1&&(l.label=u[0]),a&2&&(l.title=u[1]),a&4&&(l.src=u[2]),d.$set(l),i&&i.p&&(!c||a&16)&&ue(i,n,u,u[4],c?he(n,u[4],a,null):ce(u[4]),null)},i(u){c||(j(d.$$.fragment,u),j(i,u),c=!0)},o(u){$(d.$$.fragment,u),$(i,u),c=!1},d(u){u&&D(h),be(d),i&&i.d(u),e=!1,Te(s)}}}function Ht(){}function Lt(){}function Rt(P,h,d){let{$$slots:E={},$$scope:c}=h,{label:e}=h,{title:s}=h,{key:n}=h,{src:i=""}=h;return We("exercice"),P.$$set=u=>{"label"in u&&d(0,e=u.label),"title"in u&&d(1,s=u.title),"key"in u&&d(3,n=u.key),"src"in u&&d(2,i=u.src),"$$scope"in u&&d(4,c=u.$$scope)},[e,s,i,n,c,E]}class Bn extends se{constructor(h){super(),re(this,h,Rt,Bt,ae,{label:0,title:1,key:3,src:2})}}function Dt(P){let h,d;const E=P[3].default,c=fe(E,P,P[2],null);let e=[P[0]],s={};for(let n=0;n<e.length;n+=1)s=q(s,e[n]);return{c(){h=J("dl"),c&&c.c(),this.h()},l(n){h=_(n,"DL",{});var i=G(h);c&&c.l(i),i.forEach(D),this.h()},h(){me(h,s),z(h,"font-size","13px",!1),W(h,"cpeum-1ltqruj",!0)},m(n,i){Q(n,h,i),c&&c.m(h,null),d=!0},p(n,[i]){c&&c.p&&(!d||i&4)&&ue(c,E,n,n[2],d?he(E,n[2],i,null):ce(n[2]),null),me(h,s=ve(e,[i&1&&n[0]])),z(h,"font-size","13px",!1),W(h,"cpeum-1ltqruj",!0)},i(n){d||(j(c,n),d=!0)},o(n){$(c,n),d=!1},d(n){n&&D(h),c&&c.d(n)}}}function Ft(P,h,d){const E=["size"];let c=de(h,E),{$$slots:e={},$$scope:s}=h,{size:n="medium"}=h;return pe("legend",{}),P.$$set=i=>{h=q(q({},h),ze(i)),d(0,c=de(h,E)),"size"in i&&d(1,n=i.size),"$$scope"in i&&d(2,s=i.$$scope)},[c,n,s,e]}class Hn extends se{constructor(h){super(),re(this,h,Ft,Dt,ae,{size:1})}}function Vt(P){let h,d,E,c=`${P[0]}px`,e,s,n;const i=P[15].default,u=fe(i,P,P[14],null);let a=[{class:"trigger"},P[6]],l={};for(let r=0;r<a.length;r+=1)l=q(l,a[r]);return{c(){h=J("div"),d=J("div"),u&&u.c(),this.h()},l(r){h=_(r,"DIV",{class:!0});var t=G(h);d=_(t,"DIV",{class:!0});var o=G(d);u&&u.l(o),o.forEach(D),t.forEach(D),this.h()},h(){U(d,"class","content cpeum-nnyai4"),Je(()=>P[16].call(d)),z(d,"--h",c,!1),me(h,l),W(h,"cpeum-nnyai4",!0)},m(r,t){Q(r,h,t),X(h,d),u&&u.m(d,null),E=ht(d,P[16].bind(d)),e=!0,s||(n=[Se(_e.call(null,h,{rootMargin:"-50% -50% -50% -50%"})),ne(h,"enter",P[4]),ne(h,"leave",P[5])],s=!0)},p(r,[t]){u&&u.p&&(!e||t&16384)&&ue(u,i,r,r[14],e?he(i,r[14],t,null):ce(r[14]),null),t&1&&c!==(c=`${r[0]}px`)&&z(d,"--h",c,!1),me(h,l=ve(a,[{class:"trigger"},t&64&&r[6]])),W(h,"cpeum-nnyai4",!0)},i(r){e||(j(u,r),e=!0)},o(r){$(u,r),e=!1},d(r){r&&D(h),u&&u.d(r),E(),s=!1,Te(n)}}}function Wt(P,h,d){const E=["bounds","pitch"];let c=de(h,E),e,s,n,i;xe(P,Ze,m=>d(11,s=m));let{$$slots:u={},$$scope:a}=h,{bounds:l=null}=h,{pitch:r=void 0}=h,t=0,o=De(!1);xe(P,o,m=>d(10,e=m));let f=!1,v=De(null);xe(P,v,m=>d(13,i=m));let x=De(null);xe(P,x,m=>d(12,n=m));let w=0;const M=["-lines","-circles","-fills"].map(m=>"propositions"+m);function g(){d(9,f=!0),Ze.setClass("figure"),o.set(!0),l&&ke.set({bounds:l,pitch:r})}function p(){d(9,f=!1),Ze.setClass(""),ke.set(null),o.set(!1)}pe("figuremap",{active:o}),pe("currentKey",v),pe("currentView",x),pe("markers",{getIndex:()=>t++});function y(){w=this.clientHeight,d(0,w)}return P.$$set=m=>{h=q(q({},h),ze(m)),d(6,c=de(h,E)),"bounds"in m&&d(7,l=m.bounds),"pitch"in m&&d(8,r=m.pitch),"$$scope"in m&&d(14,a=m.$$scope)},P.$$.update=()=>{if(P.$$.dirty&8576&&(i?(at.set({key:i}),ke.set({filter:{key:i}})):i||(at.set(null),ke.set({bounds:l,pitch:r}))),P.$$.dirty&4480&&(n?ke.set({center:{point:n.lnglat,zoom:n.zoom}}):n||ke.set({bounds:l,pitch:r})),P.$$.dirty&2560&&(s.full&&f?o.set(!1):!s.full&&f&&o.set(!0)),P.$$.dirty&1024){if(e)for(const m of M)rt.setLayoutProperty(m,"visibility","none");else if(!e)for(const m of M)rt.setLayoutProperty(m,"visibility","visible")}},[w,o,v,x,g,p,c,l,r,f,e,s,n,i,a,u,y]}class Ln extends se{constructor(h){super(),re(this,h,Wt,Vt,ae,{bounds:7,pitch:8})}}function Ot(P){let h,d=`url(${P[1]})`,E=[P[10]],c={};for(let e=0;e<E.length;e+=1)c=q(c,E[e]);return{c(){h=J("div"),this.h()},l(e){h=_(e,"DIV",{}),G(h).forEach(D),this.h()},h(){me(h,c),z(h,"background-image",d,!1),W(h,"cpeum-1dhq3ei",!0)},m(e,s){Q(e,h,s)},p(e,s){me(h,c=ve(E,[s&1024&&e[10]])),z(h,"background-image",d,!1),W(h,"cpeum-1dhq3ei",!0)},d(e){e&&D(h)}}}function zt(P){let h,d,E,c,e;function s(r,t){if(t&1&&(d=null),t&2&&(E=null),r[0]==="square")return Qt;if(r[0]==="circle")return bt;if(r[0]==="triangle")return Nt;if(d==null&&(d=["line","dotted","dashed"].indexOf(r[0])>-1),d)return Ut;if(E==null&&(E=!!Boolean(r[1])),E)return Gt}let n=s(P,-1),i=n&&n(P),u=P[4]&&ut(P),a=[{width:N},{height:N},{viewBox:e="0 0 "+N+" "+N},P[10]],l={};for(let r=0;r<a.length;r+=1)l=q(l,a[r]);return{c(){h=we("svg"),i&&i.c(),c=Oe(),u&&u.c(),this.h()},l(r){h=Me(r,"svg",{width:!0,height:!0,viewBox:!0});var t=G(h);i&&i.l(t),c=Oe(),u&&u.l(t),t.forEach(D),this.h()},h(){le(h,l),z(h,"opacity",P[5],!1),W(h,"cpeum-1dhq3ei",!0)},m(r,t){Q(r,h,t),i&&i.m(h,null),X(h,c),u&&u.m(h,null)},p(r,t){n===(n=s(r,t))&&i?i.p(r,t):(i&&i.d(1),i=n&&n(r),i&&(i.c(),i.m(h,c))),r[4]?u?u.p(r,t):(u=ut(r),u.c(),u.m(h,null)):u&&(u.d(1),u=null),le(h,l=ve(a,[{width:N},{height:N},{viewBox:e},t&1024&&r[10]])),z(h,"opacity",r[5],!1),W(h,"cpeum-1dhq3ei",!0)},d(r){r&&D(h),i&&i.d(),u&&u.d()}}}function Gt(P){let h,d,E;return{c(){h=we("text"),d=Pe("Source: "),E=Pe(P[1]),this.h()},l(c){h=Me(c,"text",{class:!0});var e=G(h);d=Ce(e,"Source: "),E=Ce(e,P[1]),e.forEach(D),this.h()},h(){U(h,"class","cpeum-1dhq3ei")},m(c,e){Q(c,h,e),X(h,d),X(h,E)},p(c,e){e&2&&Fe(E,c[1])},d(c){c&&D(h)}}}function Ut(P){let h,d,E=[{d:d="M"+ye+","+N/2+" Q"+N/4+","+N/3+" "+N/2+","+N/2+" T"+(N-ye)+","+N/2},{"vector-effect":"non-scaling-stroke"},P[7]],c={};for(let e=0;e<E.length;e+=1)c=q(c,E[e]);return{c(){h=we("path"),this.h()},l(e){h=Me(e,"path",{d:!0,"vector-effect":!0}),G(h).forEach(D),this.h()},h(){le(h,c),W(h,"highlight",P[6]),W(h,"cpeum-1dhq3ei",!0)},m(e,s){Q(e,h,s)},p(e,s){le(h,c=ve(E,[{d},{"vector-effect":"non-scaling-stroke"},s&128&&e[7]])),W(h,"highlight",e[6]),W(h,"cpeum-1dhq3ei",!0)},d(e){e&&D(h)}}}function Nt(P){let h,d,E=[{points:d=N/2+" "+ye+", "+ye+" "+(N-P[8])+", "+(N-ye)+" "+(N-P[8])},P[7]],c={};for(let e=0;e<E.length;e+=1)c=q(c,E[e]);return{c(){h=we("polygon"),this.h()},l(e){h=Me(e,"polygon",{points:!0}),G(h).forEach(D),this.h()},h(){le(h,c),W(h,"highlight",P[6]),W(h,"cpeum-1dhq3ei",!0)},m(e,s){Q(e,h,s)},p(e,s){le(h,c=ve(E,[{points:d},s&128&&e[7]])),W(h,"highlight",e[6]),W(h,"cpeum-1dhq3ei",!0)},d(e){e&&D(h)}}}function bt(P){let h,d,E,c,e=[{cx:d=N/2},{cy:E=N/2},{r:c=N/2-ye},P[7]],s={};for(let n=0;n<e.length;n+=1)s=q(s,e[n]);return{c(){h=we("circle"),this.h()},l(n){h=Me(n,"circle",{cx:!0,cy:!0,r:!0}),G(h).forEach(D),this.h()},h(){le(h,s),W(h,"highlight",P[6]),W(h,"cpeum-1dhq3ei",!0)},m(n,i){Q(n,h,i)},p(n,i){le(h,s=ve(e,[{cx:d},{cy:E},{r:c},i&128&&n[7]])),W(h,"highlight",n[6]),W(h,"cpeum-1dhq3ei",!0)},d(n){n&&D(h)}}}function Qt(P){let h,d,E,c,e,s=[{rx:d=N/20},{ry:E=N/20},{x:P[8]},{y:P[8]},{width:c=N-2*P[8]},{height:e=N-2*P[8]},P[7]],n={};for(let i=0;i<s.length;i+=1)n=q(n,s[i]);return{c(){h=we("rect"),this.h()},l(i){h=Me(i,"rect",{rx:!0,ry:!0,x:!0,y:!0,width:!0,height:!0}),G(h).forEach(D),this.h()},h(){le(h,n),W(h,"highlight",P[6]),W(h,"cpeum-1dhq3ei",!0)},m(i,u){Q(i,h,u)},p(i,u){le(h,n=ve(s,[{rx:d},{ry:E},{x:i[8]},{y:i[8]},{width:c},{height:e},u&128&&i[7]])),W(h,"highlight",i[6]),W(h,"cpeum-1dhq3ei",!0)},d(i){i&&D(h)}}}function ut(P){let h,d,E;return{c(){h=we("text"),d=Pe(P[4]),this.h()},l(c){h=Me(c,"text",{"font-size":!0,"font-family":!0,"font-weight":!0,dy:!0,x:!0,y:!0,"text-anchor":!0,fill:!0,class:!0});var e=G(h);d=Ce(e,P[4]),e.forEach(D),this.h()},h(){U(h,"font-size",P[9]),U(h,"font-family","var(--font-display)"),U(h,"font-weight","600"),U(h,"dy",".3em"),U(h,"x","50%"),U(h,"y","50%"),U(h,"text-anchor","middle"),U(h,"fill",E=P[6]?P[3]:P[2]),U(h,"class","cpeum-1dhq3ei")},m(c,e){Q(c,h,e),X(h,d)},p(c,e){e&16&&Fe(d,c[4]),e&76&&E!==(E=c[6]?c[3]:c[2])&&U(h,"fill",E)},d(c){c&&D(h)}}}function Kt(P){let h;function d(e,s){return e[1]?Ot:zt}let E=d(P),c=E(P);return{c(){c.c(),h=Oe()},l(e){c.l(e),h=Oe()},m(e,s){c.m(e,s),Q(e,h,s)},p(e,[s]){E===(E=d(e))&&c?c.p(e,s):(c.d(1),c=E(e),c&&(c.c(),c.m(h.parentNode,h)))},i:Ve,o:Ve,d(e){c.d(e),e&&D(h)}}}const N=50,ye=5;function Zt(P,h,d){const E=["shape","src","color","colorHighlight","label","opacity","fill","fillHighlight","stroke","strokeHighlight","strokeWidth","strokeWidthHighlight","strokeType","strokeDashArray","highlight"];let c=de(h,E),{shape:e="circle"}=h,{src:s=null}=h,{color:n="var(--dark1)"}=h,{colorHighlight:i=n}=h,{label:u=null}=h,{opacity:a=1}=h,{fill:l="none"}=h,{fillHighlight:r=l}=h,{stroke:t="none"}=h,{strokeHighlight:o=t}=h,{strokeWidth:f=1}=h,{strokeWidthHighlight:v=f}=h,{strokeType:x="solid"}=h,{strokeDashArray:w=void 0}=h,{highlight:M=!1}=h;const g=ye*1.5,p=N/2.2,y=x==="dashed"?`${3*f}, ${1.5*f}`:x==="dotted"?`0, ${2*f}`:null;let m;return P.$$set=S=>{h=q(q({},h),ze(S)),d(10,c=de(h,E)),"shape"in S&&d(0,e=S.shape),"src"in S&&d(1,s=S.src),"color"in S&&d(2,n=S.color),"colorHighlight"in S&&d(3,i=S.colorHighlight),"label"in S&&d(4,u=S.label),"opacity"in S&&d(5,a=S.opacity),"fill"in S&&d(11,l=S.fill),"fillHighlight"in S&&d(12,r=S.fillHighlight),"stroke"in S&&d(13,t=S.stroke),"strokeHighlight"in S&&d(14,o=S.strokeHighlight),"strokeWidth"in S&&d(15,f=S.strokeWidth),"strokeWidthHighlight"in S&&d(16,v=S.strokeWidthHighlight),"strokeType"in S&&d(17,x=S.strokeType),"strokeDashArray"in S&&d(18,w=S.strokeDashArray),"highlight"in S&&d(6,M=S.highlight)},P.$$.update=()=>{P.$$.dirty&391233&&d(7,m={fill:M?r:l,stroke:M?o:t,"stroke-width":M?v:f,"stroke-linecap":e==="dashed"?"butt":"round","stroke-dasharray":w||y||""})},[e,s,n,i,u,a,M,m,g,p,c,l,r,t,o,f,v,x,w]}class Jt extends se{constructor(h){super(),re(this,h,Zt,Kt,ae,{shape:0,src:1,color:2,colorHighlight:3,label:4,opacity:5,fill:11,fillHighlight:12,stroke:13,strokeHighlight:14,strokeWidth:15,strokeWidthHighlight:16,strokeType:17,strokeDashArray:18,highlight:6})}}function _t(P){let h;return{c(){h=Pe("Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},l(d){h=Ce(d,"Pr\xE9f\xE9rences d'am\xE9nagement des citoyens et des acteurs du milieu")},m(d,E){Q(d,h,E)},d(d){d&&D(h)}}}function Xt(P){let h,d,E,c;d=new xt({props:{$$slots:{default:[_t]},$$scope:{ctx:P}}});const e=P[0].default,s=fe(e,P,P[1],null);return{c(){h=J("section"),Ge(d.$$.fragment),E=Ee(),s&&s.c()},l(n){h=_(n,"SECTION",{});var i=G(h);Ue(d.$$.fragment,i),E=Ie(i),s&&s.l(i),i.forEach(D)},m(n,i){Q(n,h,i),Ne(d,h,null),X(h,E),s&&s.m(h,null),c=!0},p(n,[i]){const u={};i&2&&(u.$$scope={dirty:i,ctx:n}),d.$set(u),s&&s.p&&(!c||i&2)&&ue(s,e,n,n[1],c?he(e,n[1],i,null):ce(n[1]),null)},i(n){c||(j(d.$$.fragment,n),j(s,n),c=!0)},o(n){$(d.$$.fragment,n),$(s,n),c=!1},d(n){n&&D(h),be(d),s&&s.d(n)}}}function Yt(P,h,d){let{$$slots:E={},$$scope:c}=h;return P.$$set=e=>{"$$scope"in e&&d(1,c=e.$$scope)},[E,c]}class Rn extends se{constructor(h){super(),re(this,h,Yt,Xt,ae,{})}}function qt(P){let h;return{c(){h=Pe("Propositions d'am\xE9nagement")},l(d){h=Ce(d,"Propositions d'am\xE9nagement")},m(d,E){Q(d,h,E)},d(d){d&&D(h)}}}function jt(P){let h,d,E,c;d=new xt({props:{$$slots:{default:[qt]},$$scope:{ctx:P}}});const e=P[0].default,s=fe(e,P,P[1],null);return{c(){h=J("section"),Ge(d.$$.fragment),E=Ee(),s&&s.c()},l(n){h=_(n,"SECTION",{});var i=G(h);Ue(d.$$.fragment,i),E=Ie(i),s&&s.l(i),i.forEach(D)},m(n,i){Q(n,h,i),Ne(d,h,null),X(h,E),s&&s.m(h,null),c=!0},p(n,[i]){const u={};i&2&&(u.$$scope={dirty:i,ctx:n}),d.$set(u),s&&s.p&&(!c||i&2)&&ue(s,e,n,n[1],c?he(e,n[1],i,null):ce(n[1]),null)},i(n){c||(j(d.$$.fragment,n),j(s,n),c=!0)},o(n){$(d.$$.fragment,n),$(s,n),c=!1},d(n){n&&D(h),be(d),s&&s.d(n)}}}function $t(P,h,d){let{$$slots:E={},$$scope:c}=h;return P.$$set=e=>{"$$scope"in e&&d(1,c=e.$$scope)},[E,c]}class Dn extends se{constructor(h){super(),re(this,h,$t,jt,ae,{})}}function en(P){let h,d,E,c,e,s,n,i;E=new Jt({props:{style:"transform: scale("+P[5]+")",label:P[1],color:P[6],fill:P[8],stroke:P[9],opacity:P[7],strokeWidth:P[10],colorHighlight:P[12],fillHighlight:P[13],strokeHighlight:P[14],strokeWidthHighlight:P[15],src:P[16],shape:P[4],interactive:P[0],highlight:P[3],strokeDashArray:P[11]}});const u=P[26].default,a=fe(u,P,P[25],null);return{c(){h=J("div"),d=J("dt"),Ge(E.$$.fragment),c=Ee(),e=J("dd"),a&&a.c(),this.h()},l(l){h=_(l,"DIV",{class:!0});var r=G(h);d=_(r,"DT",{class:!0});var t=G(d);Ue(E.$$.fragment,t),t.forEach(D),c=Ie(r),e=_(r,"DD",{class:!0});var o=G(e);a&&a.l(o),o.forEach(D),r.forEach(D),this.h()},h(){U(d,"class","cpeum-char8z"),U(e,"class","cpeum-char8z"),U(h,"class","cpeum-char8z"),W(h,"interactive",P[0]),W(h,"highlight",P[3]||P[18]&&P[17]&&P[17]===P[2])},m(l,r){Q(l,h,r),X(h,d),Ne(E,d,null),X(h,c),X(h,e),a&&a.m(e,null),s=!0,n||(i=[ne(h,"mouseover",P[27]),ne(h,"mouseleave",P[28]),ne(h,"mouseover",P[19]),ne(h,"mouseleave",P[20]),ne(h,"focus",P[29])],n=!0)},p(l,[r]){const t={};r&32&&(t.style="transform: scale("+l[5]+")"),r&2&&(t.label=l[1]),r&64&&(t.color=l[6]),r&256&&(t.fill=l[8]),r&512&&(t.stroke=l[9]),r&128&&(t.opacity=l[7]),r&1024&&(t.strokeWidth=l[10]),r&4096&&(t.colorHighlight=l[12]),r&8192&&(t.fillHighlight=l[13]),r&16384&&(t.strokeHighlight=l[14]),r&32768&&(t.strokeWidthHighlight=l[15]),r&65536&&(t.src=l[16]),r&16&&(t.shape=l[4]),r&1&&(t.interactive=l[0]),r&8&&(t.highlight=l[3]),r&2048&&(t.strokeDashArray=l[11]),E.$set(t),a&&a.p&&(!s||r&33554432)&&ue(a,u,l,l[25],s?he(u,l[25],r,null):ce(l[25]),null),r&1&&W(h,"interactive",l[0]),r&393228&&W(h,"highlight",l[3]||l[18]&&l[17]&&l[17]===l[2])},i(l){s||(j(E.$$.fragment,l),j(a,l),s=!0)},o(l){$(E.$$.fragment,l),$(a,l),s=!1},d(l){l&&D(h),be(E),a&&a.d(l),n=!1,Te(i)}}}function tn(P,h,d){let E,{$$slots:c={},$$scope:e}=h,{label:s=null}=h,{key:n=null}=h,{interactive:i=void 0}=h,{highlight:u=!1}=h,{shape:a="circle"}=h,{symbolScale:l=1}=h,{color:r="var(--light1)"}=h,{opacity:t=1}=h,{fill:o="var(--accent2)"}=h,{stroke:f=null}=h,{strokeWidth:v=0}=h,{strokeDashArray:x=void 0}=h,{colorHighlight:w=void 0}=h,{fillHighlight:M=void 0}=h,{strokeHighlight:g=void 0}=h,{strokeWidthHighlight:p=void 0}=h,{arrowEnd:y=!1}=h,{arrowStart:m=!1}=h,{src:S=null}=h,{lnglat:k=void 0}=h,{zoom:I=void 0}=h;const C=We("currentKey");xe(P,C,B=>d(17,E=B));const A=We("currentView");function T(){C&&n?C.set(n):A&&k&&A.set({lnglat:k,zoom:I})}function H(){C&&n?C.set(null):A&&k&&A.set(null)}function L(B){Ke.call(this,P,B)}function R(B){Ke.call(this,P,B)}function F(B){Ke.call(this,P,B)}return P.$$set=B=>{"label"in B&&d(1,s=B.label),"key"in B&&d(2,n=B.key),"interactive"in B&&d(0,i=B.interactive),"highlight"in B&&d(3,u=B.highlight),"shape"in B&&d(4,a=B.shape),"symbolScale"in B&&d(5,l=B.symbolScale),"color"in B&&d(6,r=B.color),"opacity"in B&&d(7,t=B.opacity),"fill"in B&&d(8,o=B.fill),"stroke"in B&&d(9,f=B.stroke),"strokeWidth"in B&&d(10,v=B.strokeWidth),"strokeDashArray"in B&&d(11,x=B.strokeDashArray),"colorHighlight"in B&&d(12,w=B.colorHighlight),"fillHighlight"in B&&d(13,M=B.fillHighlight),"strokeHighlight"in B&&d(14,g=B.strokeHighlight),"strokeWidthHighlight"in B&&d(15,p=B.strokeWidthHighlight),"arrowEnd"in B&&d(21,y=B.arrowEnd),"arrowStart"in B&&d(22,m=B.arrowStart),"src"in B&&d(16,S=B.src),"lnglat"in B&&d(23,k=B.lnglat),"zoom"in B&&d(24,I=B.zoom),"$$scope"in B&&d(25,e=B.$$scope)},P.$$.update=()=>{P.$$.dirty&8388612&&(n||k)&&d(0,i=!0)},[i,s,n,u,a,l,r,t,o,f,v,x,w,M,g,p,S,E,C,T,H,y,m,k,I,e,c,L,R,F]}class Fn extends se{constructor(h){super(),re(this,h,tn,en,ae,{label:1,key:2,interactive:0,highlight:3,shape:4,symbolScale:5,color:6,opacity:7,fill:8,stroke:9,strokeWidth:10,strokeDashArray:11,colorHighlight:12,fillHighlight:13,strokeHighlight:14,strokeWidthHighlight:15,arrowEnd:21,arrowStart:22,src:16,lnglat:23,zoom:24})}}function nn(P){let h,d,E,c;const e=P[2].default,s=fe(e,P,P[1],null);return{c(){h=J("div"),s&&s.c(),this.h()},l(n){h=_(n,"DIV",{style:!0,class:!0});var i=G(h);s&&s.l(i),i.forEach(D),this.h()},h(){U(h,"style",d=ot(P[0])),U(h,"class","cpeum-1sqjp0y")},m(n,i){Q(n,h,i),s&&s.m(h,null),c=!0},p(n,[i]){s&&s.p&&(!c||i&2)&&ue(s,e,n,n[1],c?he(e,n[1],i,null):ce(n[1]),null),(!c||i&1&&d!==(d=ot(n[0])))&&U(h,"style",d)},i(n){c||(j(s,n),Je(()=>{E||(E=it(h,lt,{},!0)),E.run(1)}),c=!0)},o(n){$(s,n),E||(E=it(h,lt,{},!1)),E.run(0),c=!1},d(n){n&&D(h),s&&s.d(n),n&&E&&E.end()}}}function sn(P,h,d){let{$$slots:E={},$$scope:c}=h,{key:e}=h;return pe("exercice",e),P.$$set=s=>{"key"in s&&d(0,e=s.key),"$$scope"in s&&d(1,c=s.$$scope)},[e,c,E]}class Vn extends se{constructor(h){super(),re(this,h,sn,nn,ae,{key:0})}}var Xe={exports:{}};/*!
 * matter-js 0.18.0 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(P,h){(function(E,c){P.exports=c()})(Re,function(){return function(d){var E={};function c(e){if(E[e])return E[e].exports;var s=E[e]={i:e,l:!1,exports:{}};return d[e].call(s.exports,s,s.exports,c),s.l=!0,s.exports}return c.m=d,c.c=E,c.d=function(e,s,n){c.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:n})},c.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,s){if(s&1&&(e=c(e)),s&8||s&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),s&2&&typeof e!="string")for(var i in e)c.d(n,i,function(u){return e[u]}.bind(null,i));return n},c.n=function(e){var s=e&&e.__esModule?function(){return e.default}:function(){return e};return c.d(s,"a",s),s},c.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},c.p="",c(c.s=21)}([function(d,E){var c={};d.exports=c,function(){c._nextId=0,c._seed=0,c._nowStartTime=+new Date,c._warnedOnce={},c._decomp=null,c.extend=function(s,n){var i,u;typeof n=="boolean"?(i=2,u=n):(i=1,u=!0);for(var a=i;a<arguments.length;a++){var l=arguments[a];if(l)for(var r in l)u&&l[r]&&l[r].constructor===Object&&(!s[r]||s[r].constructor===Object)?(s[r]=s[r]||{},c.extend(s[r],u,l[r])):s[r]=l[r]}return s},c.clone=function(s,n){return c.extend({},n,s)},c.keys=function(s){if(Object.keys)return Object.keys(s);var n=[];for(var i in s)n.push(i);return n},c.values=function(s){var n=[];if(Object.keys){for(var i=Object.keys(s),u=0;u<i.length;u++)n.push(s[i[u]]);return n}for(var a in s)n.push(s[a]);return n},c.get=function(s,n,i,u){n=n.split(".").slice(i,u);for(var a=0;a<n.length;a+=1)s=s[n[a]];return s},c.set=function(s,n,i,u,a){var l=n.split(".").slice(u,a);return c.get(s,n,0,-1)[l[l.length-1]]=i,i},c.shuffle=function(s){for(var n=s.length-1;n>0;n--){var i=Math.floor(c.random()*(n+1)),u=s[n];s[n]=s[i],s[i]=u}return s},c.choose=function(s){return s[Math.floor(c.random()*s.length)]},c.isElement=function(s){return typeof HTMLElement!="undefined"?s instanceof HTMLElement:!!(s&&s.nodeType&&s.nodeName)},c.isArray=function(s){return Object.prototype.toString.call(s)==="[object Array]"},c.isFunction=function(s){return typeof s=="function"},c.isPlainObject=function(s){return typeof s=="object"&&s.constructor===Object},c.isString=function(s){return toString.call(s)==="[object String]"},c.clamp=function(s,n,i){return s<n?n:s>i?i:s},c.sign=function(s){return s<0?-1:1},c.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-c._nowStartTime},c.random=function(s,n){return s=typeof s!="undefined"?s:0,n=typeof n!="undefined"?n:1,s+e()*(n-s)};var e=function(){return c._seed=(c._seed*9301+49297)%233280,c._seed/233280};c.colorToNumber=function(s){return s=s.replace("#",""),s.length==3&&(s=s.charAt(0)+s.charAt(0)+s.charAt(1)+s.charAt(1)+s.charAt(2)+s.charAt(2)),parseInt(s,16)},c.logLevel=1,c.log=function(){console&&c.logLevel>0&&c.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.info=function(){console&&c.logLevel>0&&c.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warn=function(){console&&c.logLevel>0&&c.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},c.warnOnce=function(){var s=Array.prototype.slice.call(arguments).join(" ");c._warnedOnce[s]||(c.warn(s),c._warnedOnce[s]=!0)},c.deprecated=function(s,n,i){s[n]=c.chain(function(){c.warnOnce("\u{1F505} deprecated \u{1F505}",i)},s[n])},c.nextId=function(){return c._nextId++},c.indexOf=function(s,n){if(s.indexOf)return s.indexOf(n);for(var i=0;i<s.length;i++)if(s[i]===n)return i;return-1},c.map=function(s,n){if(s.map)return s.map(n);for(var i=[],u=0;u<s.length;u+=1)i.push(n(s[u]));return i},c.topologicalSort=function(s){var n=[],i=[],u=[];for(var a in s)!i[a]&&!u[a]&&c._topologicalSort(a,i,u,s,n);return n},c._topologicalSort=function(s,n,i,u,a){var l=u[s]||[];i[s]=!0;for(var r=0;r<l.length;r+=1){var t=l[r];i[t]||n[t]||c._topologicalSort(t,n,i,u,a)}i[s]=!1,n[s]=!0,a.push(s)},c.chain=function(){for(var s=[],n=0;n<arguments.length;n+=1){var i=arguments[n];i._chained?s.push.apply(s,i._chained):s.push(i)}var u=function(){for(var a,l=new Array(arguments.length),r=0,t=arguments.length;r<t;r++)l[r]=arguments[r];for(r=0;r<s.length;r+=1){var o=s[r].apply(a,l);typeof o!="undefined"&&(a=o)}return a};return u._chained=s,u},c.chainPathBefore=function(s,n,i){return c.set(s,n,c.chain(i,c.get(s,n)))},c.chainPathAfter=function(s,n,i){return c.set(s,n,c.chain(c.get(s,n),i))},c.setDecomp=function(s){c._decomp=s},c.getDecomp=function(){var s=c._decomp;try{!s&&typeof window!="undefined"&&(s=window.decomp),!s&&typeof Re!="undefined"&&(s=Re.decomp)}catch{s=null}return s}}()},function(d,E){var c={};d.exports=c,function(){c.create=function(e){var s={min:{x:0,y:0},max:{x:0,y:0}};return e&&c.update(s,e),s},c.update=function(e,s,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var i=0;i<s.length;i++){var u=s[i];u.x>e.max.x&&(e.max.x=u.x),u.x<e.min.x&&(e.min.x=u.x),u.y>e.max.y&&(e.max.y=u.y),u.y<e.min.y&&(e.min.y=u.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},c.contains=function(e,s){return s.x>=e.min.x&&s.x<=e.max.x&&s.y>=e.min.y&&s.y<=e.max.y},c.overlaps=function(e,s){return e.min.x<=s.max.x&&e.max.x>=s.min.x&&e.max.y>=s.min.y&&e.min.y<=s.max.y},c.translate=function(e,s){e.min.x+=s.x,e.max.x+=s.x,e.min.y+=s.y,e.max.y+=s.y},c.shift=function(e,s){var n=e.max.x-e.min.x,i=e.max.y-e.min.y;e.min.x=s.x,e.max.x=s.x+n,e.min.y=s.y,e.max.y=s.y+i}}()},function(d,E){var c={};d.exports=c,function(){c.create=function(e,s){return{x:e||0,y:s||0}},c.clone=function(e){return{x:e.x,y:e.y}},c.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},c.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},c.rotate=function(e,s,n){var i=Math.cos(s),u=Math.sin(s);n||(n={});var a=e.x*i-e.y*u;return n.y=e.x*u+e.y*i,n.x=a,n},c.rotateAbout=function(e,s,n,i){var u=Math.cos(s),a=Math.sin(s);i||(i={});var l=n.x+((e.x-n.x)*u-(e.y-n.y)*a);return i.y=n.y+((e.x-n.x)*a+(e.y-n.y)*u),i.x=l,i},c.normalise=function(e){var s=c.magnitude(e);return s===0?{x:0,y:0}:{x:e.x/s,y:e.y/s}},c.dot=function(e,s){return e.x*s.x+e.y*s.y},c.cross=function(e,s){return e.x*s.y-e.y*s.x},c.cross3=function(e,s,n){return(s.x-e.x)*(n.y-e.y)-(s.y-e.y)*(n.x-e.x)},c.add=function(e,s,n){return n||(n={}),n.x=e.x+s.x,n.y=e.y+s.y,n},c.sub=function(e,s,n){return n||(n={}),n.x=e.x-s.x,n.y=e.y-s.y,n},c.mult=function(e,s){return{x:e.x*s,y:e.y*s}},c.div=function(e,s){return{x:e.x/s,y:e.y/s}},c.perp=function(e,s){return s=s===!0?-1:1,{x:s*-e.y,y:s*e.x}},c.neg=function(e){return{x:-e.x,y:-e.y}},c.angle=function(e,s){return Math.atan2(s.y-e.y,s.x-e.x)},c._temp=[c.create(),c.create(),c.create(),c.create(),c.create(),c.create()]}()},function(d,E,c){var e={};d.exports=e;var s=c(2),n=c(0);(function(){e.create=function(i,u){for(var a=[],l=0;l<i.length;l++){var r=i[l],t={x:r.x,y:r.y,index:l,body:u,isInternal:!1};a.push(t)}return a},e.fromPath=function(i,u){var a=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,l=[];return i.replace(a,function(r,t,o){l.push({x:parseFloat(t),y:parseFloat(o)})}),e.create(l,u)},e.centre=function(i){for(var u=e.area(i,!0),a={x:0,y:0},l,r,t,o=0;o<i.length;o++)t=(o+1)%i.length,l=s.cross(i[o],i[t]),r=s.mult(s.add(i[o],i[t]),l),a=s.add(a,r);return s.div(a,6*u)},e.mean=function(i){for(var u={x:0,y:0},a=0;a<i.length;a++)u.x+=i[a].x,u.y+=i[a].y;return s.div(u,i.length)},e.area=function(i,u){for(var a=0,l=i.length-1,r=0;r<i.length;r++)a+=(i[l].x-i[r].x)*(i[l].y+i[r].y),l=r;return u?a/2:Math.abs(a)/2},e.inertia=function(i,u){for(var a=0,l=0,r=i,t,o,f=0;f<r.length;f++)o=(f+1)%r.length,t=Math.abs(s.cross(r[o],r[f])),a+=t*(s.dot(r[o],r[o])+s.dot(r[o],r[f])+s.dot(r[f],r[f])),l+=t;return u/6*(a/l)},e.translate=function(i,u,a){a=typeof a!="undefined"?a:1;var l=i.length,r=u.x*a,t=u.y*a,o;for(o=0;o<l;o++)i[o].x+=r,i[o].y+=t;return i},e.rotate=function(i,u,a){if(u!==0){var l=Math.cos(u),r=Math.sin(u),t=a.x,o=a.y,f=i.length,v,x,w,M;for(M=0;M<f;M++)v=i[M],x=v.x-t,w=v.y-o,v.x=t+(x*l-w*r),v.y=o+(x*r+w*l);return i}},e.contains=function(i,u){for(var a=u.x,l=u.y,r=i.length,t=i[r-1],o,f=0;f<r;f++){if(o=i[f],(a-t.x)*(o.y-t.y)+(l-t.y)*(t.x-o.x)>0)return!1;t=o}return!0},e.scale=function(i,u,a,l){if(u===1&&a===1)return i;l=l||e.centre(i);for(var r,t,o=0;o<i.length;o++)r=i[o],t=s.sub(r,l),i[o].x=l.x+t.x*u,i[o].y=l.y+t.y*a;return i},e.chamfer=function(i,u,a,l,r){typeof u=="number"?u=[u]:u=u||[8],a=typeof a!="undefined"?a:-1,l=l||2,r=r||14;for(var t=[],o=0;o<i.length;o++){var f=i[o-1>=0?o-1:i.length-1],v=i[o],x=i[(o+1)%i.length],w=u[o<u.length?o:u.length-1];if(w===0){t.push(v);continue}var M=s.normalise({x:v.y-f.y,y:f.x-v.x}),g=s.normalise({x:x.y-v.y,y:v.x-x.x}),p=Math.sqrt(2*Math.pow(w,2)),y=s.mult(n.clone(M),w),m=s.normalise(s.mult(s.add(M,g),.5)),S=s.sub(v,s.mult(m,p)),k=a;a===-1&&(k=Math.pow(w,.32)*1.75),k=n.clamp(k,l,r),k%2===1&&(k+=1);for(var I=Math.acos(s.dot(M,g)),C=I/k,A=0;A<k;A++)t.push(s.add(s.rotate(y,C*A),S))}return t},e.clockwiseSort=function(i){var u=e.mean(i);return i.sort(function(a,l){return s.angle(u,a)-s.angle(u,l)}),i},e.isConvex=function(i){var u=0,a=i.length,l,r,t,o;if(a<3)return null;for(l=0;l<a;l++)if(r=(l+1)%a,t=(l+2)%a,o=(i[r].x-i[l].x)*(i[t].y-i[r].y),o-=(i[r].y-i[l].y)*(i[t].x-i[r].x),o<0?u|=1:o>0&&(u|=2),u===3)return!1;return u!==0?!0:null},e.hull=function(i){var u=[],a=[],l,r;for(i=i.slice(0),i.sort(function(t,o){var f=t.x-o.x;return f!==0?f:t.y-o.y}),r=0;r<i.length;r+=1){for(l=i[r];a.length>=2&&s.cross3(a[a.length-2],a[a.length-1],l)<=0;)a.pop();a.push(l)}for(r=i.length-1;r>=0;r-=1){for(l=i[r];u.length>=2&&s.cross3(u[u.length-2],u[u.length-1],l)<=0;)u.pop();u.push(l)}return u.pop(),a.pop(),u.concat(a)}})()},function(d,E,c){var e={};d.exports=e;var s=c(0);(function(){e.on=function(n,i,u){for(var a=i.split(" "),l,r=0;r<a.length;r++)l=a[r],n.events=n.events||{},n.events[l]=n.events[l]||[],n.events[l].push(u);return u},e.off=function(n,i,u){if(!i){n.events={};return}typeof i=="function"&&(u=i,i=s.keys(n.events).join(" "));for(var a=i.split(" "),l=0;l<a.length;l++){var r=n.events[a[l]],t=[];if(u&&r)for(var o=0;o<r.length;o++)r[o]!==u&&t.push(r[o]);n.events[a[l]]=t}},e.trigger=function(n,i,u){var a,l,r,t,o=n.events;if(o&&s.keys(o).length>0){u||(u={}),a=i.split(" ");for(var f=0;f<a.length;f++)if(l=a[f],r=o[l],r){t=s.clone(u,!1),t.name=l,t.source=n;for(var v=0;v<r.length;v++)r[v].apply(n,[t])}}}})()},function(d,E,c){var e={};d.exports=e;var s=c(4),n=c(0),i=c(1),u=c(6);(function(){e.create=function(a){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},a)},e.setModified=function(a,l,r,t){if(a.isModified=l,l&&a.cache&&(a.cache.allBodies=null,a.cache.allConstraints=null,a.cache.allComposites=null),r&&a.parent&&e.setModified(a.parent,l,r,t),t)for(var o=0;o<a.composites.length;o++){var f=a.composites[o];e.setModified(f,l,r,t)}},e.add=function(a,l){var r=[].concat(l);s.trigger(a,"beforeAdd",{object:l});for(var t=0;t<r.length;t++){var o=r[t];switch(o.type){case"body":if(o.parent!==o){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(a,o);break;case"constraint":e.addConstraint(a,o);break;case"composite":e.addComposite(a,o);break;case"mouseConstraint":e.addConstraint(a,o.constraint);break}}return s.trigger(a,"afterAdd",{object:l}),a},e.remove=function(a,l,r){var t=[].concat(l);s.trigger(a,"beforeRemove",{object:l});for(var o=0;o<t.length;o++){var f=t[o];switch(f.type){case"body":e.removeBody(a,f,r);break;case"constraint":e.removeConstraint(a,f,r);break;case"composite":e.removeComposite(a,f,r);break;case"mouseConstraint":e.removeConstraint(a,f.constraint);break}}return s.trigger(a,"afterRemove",{object:l}),a},e.addComposite=function(a,l){return a.composites.push(l),l.parent=a,e.setModified(a,!0,!0,!1),a},e.removeComposite=function(a,l,r){var t=n.indexOf(a.composites,l);if(t!==-1&&e.removeCompositeAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeComposite(a.composites[o],l,!0);return a},e.removeCompositeAt=function(a,l){return a.composites.splice(l,1),e.setModified(a,!0,!0,!1),a},e.addBody=function(a,l){return a.bodies.push(l),e.setModified(a,!0,!0,!1),a},e.removeBody=function(a,l,r){var t=n.indexOf(a.bodies,l);if(t!==-1&&e.removeBodyAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeBody(a.composites[o],l,!0);return a},e.removeBodyAt=function(a,l){return a.bodies.splice(l,1),e.setModified(a,!0,!0,!1),a},e.addConstraint=function(a,l){return a.constraints.push(l),e.setModified(a,!0,!0,!1),a},e.removeConstraint=function(a,l,r){var t=n.indexOf(a.constraints,l);if(t!==-1&&e.removeConstraintAt(a,t),r)for(var o=0;o<a.composites.length;o++)e.removeConstraint(a.composites[o],l,!0);return a},e.removeConstraintAt=function(a,l){return a.constraints.splice(l,1),e.setModified(a,!0,!0,!1),a},e.clear=function(a,l,r){if(r)for(var t=0;t<a.composites.length;t++)e.clear(a.composites[t],l,!0);return l?a.bodies=a.bodies.filter(function(o){return o.isStatic}):a.bodies.length=0,a.constraints.length=0,a.composites.length=0,e.setModified(a,!0,!0,!1),a},e.allBodies=function(a){if(a.cache&&a.cache.allBodies)return a.cache.allBodies;for(var l=[].concat(a.bodies),r=0;r<a.composites.length;r++)l=l.concat(e.allBodies(a.composites[r]));return a.cache&&(a.cache.allBodies=l),l},e.allConstraints=function(a){if(a.cache&&a.cache.allConstraints)return a.cache.allConstraints;for(var l=[].concat(a.constraints),r=0;r<a.composites.length;r++)l=l.concat(e.allConstraints(a.composites[r]));return a.cache&&(a.cache.allConstraints=l),l},e.allComposites=function(a){if(a.cache&&a.cache.allComposites)return a.cache.allComposites;for(var l=[].concat(a.composites),r=0;r<a.composites.length;r++)l=l.concat(e.allComposites(a.composites[r]));return a.cache&&(a.cache.allComposites=l),l},e.get=function(a,l,r){var t,o;switch(r){case"body":t=e.allBodies(a);break;case"constraint":t=e.allConstraints(a);break;case"composite":t=e.allComposites(a).concat(a);break}return t?(o=t.filter(function(f){return f.id.toString()===l.toString()}),o.length===0?null:o[0]):null},e.move=function(a,l,r){return e.remove(a,l),e.add(r,l),a},e.rebase=function(a){for(var l=e.allBodies(a).concat(e.allConstraints(a)).concat(e.allComposites(a)),r=0;r<l.length;r++)l[r].id=n.nextId();return a},e.translate=function(a,l,r){for(var t=r?e.allBodies(a):a.bodies,o=0;o<t.length;o++)u.translate(t[o],l);return a},e.rotate=function(a,l,r,t){for(var o=Math.cos(l),f=Math.sin(l),v=t?e.allBodies(a):a.bodies,x=0;x<v.length;x++){var w=v[x],M=w.position.x-r.x,g=w.position.y-r.y;u.setPosition(w,{x:r.x+(M*o-g*f),y:r.y+(M*f+g*o)}),u.rotate(w,l)}return a},e.scale=function(a,l,r,t,o){for(var f=o?e.allBodies(a):a.bodies,v=0;v<f.length;v++){var x=f[v],w=x.position.x-t.x,M=x.position.y-t.y;u.setPosition(x,{x:t.x+w*l,y:t.y+M*r}),u.scale(x,l,r)}return a},e.bounds=function(a){for(var l=e.allBodies(a),r=[],t=0;t<l.length;t+=1){var o=l[t];r.push(o.bounds.min,o.bounds.max)}return i.create(r)}})()},function(d,E,c){var e={};d.exports=e;var s=c(3),n=c(2),i=c(7);c(16);var u=c(0),a=c(1),l=c(11);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var o={id:u.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:s.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},f=u.extend(o,t);return r(f,t),f},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var r=function(t,o){o=o||{},e.set(t,{bounds:t.bounds||a.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),s.rotate(t.vertices,t.angle,t.position),l.rotate(t.axes,t.angle),a.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:o.axes||t.axes,area:o.area||t.area,mass:o.mass||t.mass,inertia:o.inertia||t.inertia});var f=t.isStatic?"#14151f":u.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),v=t.isStatic?"#555":"#ccc",x=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||f,t.render.strokeStyle=t.render.strokeStyle||v,t.render.lineWidth=t.render.lineWidth||x,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,o,f){var v;typeof o=="string"&&(v=o,o={},o[v]=f);for(v in o)if(!!Object.prototype.hasOwnProperty.call(o,v))switch(f=o[v],v){case"isStatic":e.setStatic(t,f);break;case"isSleeping":i.set(t,f);break;case"mass":e.setMass(t,f);break;case"density":e.setDensity(t,f);break;case"inertia":e.setInertia(t,f);break;case"vertices":e.setVertices(t,f);break;case"position":e.setPosition(t,f);break;case"angle":e.setAngle(t,f);break;case"velocity":e.setVelocity(t,f);break;case"angularVelocity":e.setAngularVelocity(t,f);break;case"parts":e.setParts(t,f);break;case"centre":e.setCentre(t,f);break;default:t[v]=f}},e.setStatic=function(t,o){for(var f=0;f<t.parts.length;f++){var v=t.parts[f];v.isStatic=o,o?(v._original={restitution:v.restitution,friction:v.friction,mass:v.mass,inertia:v.inertia,density:v.density,inverseMass:v.inverseMass,inverseInertia:v.inverseInertia},v.restitution=0,v.friction=1,v.mass=v.inertia=v.density=1/0,v.inverseMass=v.inverseInertia=0,v.positionPrev.x=v.position.x,v.positionPrev.y=v.position.y,v.anglePrev=v.angle,v.angularVelocity=0,v.speed=0,v.angularSpeed=0,v.motion=0):v._original&&(v.restitution=v._original.restitution,v.friction=v._original.friction,v.mass=v._original.mass,v.inertia=v._original.inertia,v.density=v._original.density,v.inverseMass=v._original.inverseMass,v.inverseInertia=v._original.inverseInertia,v._original=null)}},e.setMass=function(t,o){var f=t.inertia/(t.mass/6);t.inertia=f*(o/6),t.inverseInertia=1/t.inertia,t.mass=o,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,o){e.setMass(t,o*t.area),t.density=o},e.setInertia=function(t,o){t.inertia=o,t.inverseInertia=1/t.inertia},e.setVertices=function(t,o){o[0].body===t?t.vertices=o:t.vertices=s.create(o,t),t.axes=l.fromVertices(t.vertices),t.area=s.area(t.vertices),e.setMass(t,t.density*t.area);var f=s.centre(t.vertices);s.translate(t.vertices,f,-1),e.setInertia(t,e._inertiaScale*s.inertia(t.vertices,t.mass)),s.translate(t.vertices,t.position),a.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,o,f){var v;for(o=o.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,v=0;v<o.length;v++){var x=o[v];x!==t&&(x.parent=t,t.parts.push(x))}if(t.parts.length!==1){if(f=typeof f!="undefined"?f:!0,f){var w=[];for(v=0;v<o.length;v++)w=w.concat(o[v].vertices);s.clockwiseSort(w);var M=s.hull(w),g=s.centre(M);e.setVertices(t,M),s.translate(t.vertices,g)}var p=e._totalProperties(t);t.area=p.area,t.parent=t,t.position.x=p.centre.x,t.position.y=p.centre.y,t.positionPrev.x=p.centre.x,t.positionPrev.y=p.centre.y,e.setMass(t,p.mass),e.setInertia(t,p.inertia),e.setPosition(t,p.centre)}},e.setCentre=function(t,o,f){f?(t.positionPrev.x+=o.x,t.positionPrev.y+=o.y,t.position.x+=o.x,t.position.y+=o.y):(t.positionPrev.x=o.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=o.y-(t.position.y-t.positionPrev.y),t.position.x=o.x,t.position.y=o.y)},e.setPosition=function(t,o){var f=n.sub(o,t.position);t.positionPrev.x+=f.x,t.positionPrev.y+=f.y;for(var v=0;v<t.parts.length;v++){var x=t.parts[v];x.position.x+=f.x,x.position.y+=f.y,s.translate(x.vertices,f),a.update(x.bounds,x.vertices,t.velocity)}},e.setAngle=function(t,o){var f=o-t.angle;t.anglePrev+=f;for(var v=0;v<t.parts.length;v++){var x=t.parts[v];x.angle+=f,s.rotate(x.vertices,f,t.position),l.rotate(x.axes,f),a.update(x.bounds,x.vertices,t.velocity),v>0&&n.rotateAbout(x.position,f,t.position,x.position)}},e.setVelocity=function(t,o){t.positionPrev.x=t.position.x-o.x,t.positionPrev.y=t.position.y-o.y,t.velocity.x=o.x,t.velocity.y=o.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,o){t.anglePrev=t.angle-o,t.angularVelocity=o,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,o){e.setPosition(t,n.add(t.position,o))},e.rotate=function(t,o,f){if(!f)e.setAngle(t,t.angle+o);else{var v=Math.cos(o),x=Math.sin(o),w=t.position.x-f.x,M=t.position.y-f.y;e.setPosition(t,{x:f.x+(w*v-M*x),y:f.y+(w*x+M*v)}),e.setAngle(t,t.angle+o)}},e.scale=function(t,o,f,v){var x=0,w=0;v=v||t.position;for(var M=0;M<t.parts.length;M++){var g=t.parts[M];s.scale(g.vertices,o,f,v),g.axes=l.fromVertices(g.vertices),g.area=s.area(g.vertices),e.setMass(g,t.density*g.area),s.translate(g.vertices,{x:-g.position.x,y:-g.position.y}),e.setInertia(g,e._inertiaScale*s.inertia(g.vertices,g.mass)),s.translate(g.vertices,{x:g.position.x,y:g.position.y}),M>0&&(x+=g.area,w+=g.inertia),g.position.x=v.x+(g.position.x-v.x)*o,g.position.y=v.y+(g.position.y-v.y)*f,a.update(g.bounds,g.vertices,t.velocity)}t.parts.length>1&&(t.area=x,t.isStatic||(e.setMass(t,t.density*x),e.setInertia(t,w))),t.circleRadius&&(o===f?t.circleRadius*=o:t.circleRadius=null)},e.update=function(t,o,f,v){var x=Math.pow(o*f*t.timeScale,2),w=1-t.frictionAir*f*t.timeScale,M=t.position.x-t.positionPrev.x,g=t.position.y-t.positionPrev.y;t.velocity.x=M*w*v+t.force.x/t.mass*x,t.velocity.y=g*w*v+t.force.y/t.mass*x,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*w*v+t.torque/t.inertia*x,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var p=0;p<t.parts.length;p++){var y=t.parts[p];s.translate(y.vertices,t.velocity),p>0&&(y.position.x+=t.velocity.x,y.position.y+=t.velocity.y),t.angularVelocity!==0&&(s.rotate(y.vertices,t.angularVelocity,t.position),l.rotate(y.axes,t.angularVelocity),p>0&&n.rotateAbout(y.position,t.angularVelocity,t.position,y.position)),a.update(y.bounds,y.vertices,t.velocity)}},e.applyForce=function(t,o,f){t.force.x+=f.x,t.force.y+=f.y;var v={x:o.x-t.position.x,y:o.y-t.position.y};t.torque+=v.x*f.y-v.y*f.x},e._totalProperties=function(t){for(var o={mass:0,area:0,inertia:0,centre:{x:0,y:0}},f=t.parts.length===1?0:1;f<t.parts.length;f++){var v=t.parts[f],x=v.mass!==1/0?v.mass:1;o.mass+=x,o.area+=v.area,o.inertia+=v.inertia,o.centre=n.add(o.centre,n.mult(v.position,x))}return o.centre=n.div(o.centre,o.mass),o}})()},function(d,E,c){var e={};d.exports=e;var s=c(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,i){for(var u=i*i*i,a=0;a<n.length;a++){var l=n[a],r=l.speed*l.speed+l.angularSpeed*l.angularSpeed;if(l.force.x!==0||l.force.y!==0){e.set(l,!1);continue}var t=Math.min(l.motion,r),o=Math.max(l.motion,r);l.motion=e._minBias*t+(1-e._minBias)*o,l.sleepThreshold>0&&l.motion<e._motionSleepThreshold*u?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold&&e.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}},e.afterCollisions=function(n,i){for(var u=i*i*i,a=0;a<n.length;a++){var l=n[a];if(!!l.isActive){var r=l.collision,t=r.bodyA.parent,o=r.bodyB.parent;if(!(t.isSleeping&&o.isSleeping||t.isStatic||o.isStatic)&&(t.isSleeping||o.isSleeping)){var f=t.isSleeping&&!t.isStatic?t:o,v=f===t?o:t;!f.isStatic&&v.motion>e._motionWakeThreshold*u&&e.set(f,!1)}}}},e.set=function(n,i){var u=n.isSleeping;i?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,u||s.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,u&&s.trigger(n,"sleepEnd"))}})()},function(d,E,c){var e={};d.exports=e;var s=c(3),n=c(9);(function(){var i=[],u={overlap:0,axis:null},a={overlap:0,axis:null};e.create=function(l,r){return{pair:null,collided:!1,bodyA:l,bodyB:r,parentA:l.parent,parentB:r.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[]}},e.collides=function(l,r,t){if(e._overlapAxes(u,l.vertices,r.vertices,l.axes),u.overlap<=0||(e._overlapAxes(a,r.vertices,l.vertices,r.axes),a.overlap<=0))return null;var o=t&&t.table[n.id(l,r)],f;o?f=o.collision:(f=e.create(l,r),f.collided=!0,f.bodyA=l.id<r.id?l:r,f.bodyB=l.id<r.id?r:l,f.parentA=f.bodyA.parent,f.parentB=f.bodyB.parent),l=f.bodyA,r=f.bodyB;var v;u.overlap<a.overlap?v=u:v=a;var x=f.normal,w=f.supports,M=v.axis,g=M.x,p=M.y;g*(r.position.x-l.position.x)+p*(r.position.y-l.position.y)<0?(x.x=g,x.y=p):(x.x=-g,x.y=-p),f.tangent.x=-x.y,f.tangent.y=x.x,f.depth=v.overlap,f.penetration.x=x.x*f.depth,f.penetration.y=x.y*f.depth;var y=e._findSupports(l,r,x,1),m=0;if(s.contains(l.vertices,y[0])&&(w[m++]=y[0]),s.contains(l.vertices,y[1])&&(w[m++]=y[1]),m<2){var S=e._findSupports(r,l,x,-1);s.contains(r.vertices,S[0])&&(w[m++]=S[0]),m<2&&s.contains(r.vertices,S[1])&&(w[m++]=S[1])}return m===0&&(w[m++]=y[0]),w.length=m,f},e._overlapAxes=function(l,r,t,o){var f=r.length,v=t.length,x=r[0].x,w=r[0].y,M=t[0].x,g=t[0].y,p=o.length,y=Number.MAX_VALUE,m=0,S,k,I,C,A,T;for(A=0;A<p;A++){var H=o[A],L=H.x,R=H.y,F=x*L+w*R,B=M*L+g*R,V=F,b=B;for(T=1;T<f;T+=1)C=r[T].x*L+r[T].y*R,C>V?V=C:C<F&&(F=C);for(T=1;T<v;T+=1)C=t[T].x*L+t[T].y*R,C>b?b=C:C<B&&(B=C);if(k=V-B,I=b-F,S=k<I?k:I,S<y&&(y=S,m=A,S<=0))break}l.axis=o[m],l.overlap=y},e._projectToAxis=function(l,r,t){for(var o=r[0].x*t.x+r[0].y*t.y,f=o,v=1;v<r.length;v+=1){var x=r[v].x*t.x+r[v].y*t.y;x>f?f=x:x<o&&(o=x)}l.min=o,l.max=f},e._findSupports=function(l,r,t,o){var f=r.vertices,v=f.length,x=l.position.x,w=l.position.y,M=t.x*o,g=t.y*o,p=Number.MAX_VALUE,y,m,S,k,I;for(I=0;I<v;I+=1)m=f[I],k=M*(x-m.x)+g*(w-m.y),k<p&&(p=k,y=m);return S=f[(v+y.index-1)%v],p=M*(x-S.x)+g*(w-S.y),m=f[(y.index+1)%v],M*(x-m.x)+g*(w-m.y)<p?(i[0]=y,i[1]=m,i):(i[0]=y,i[1]=S,i)}})()},function(d,E,c){var e={};d.exports=e;var s=c(17);(function(){e.create=function(n,i){var u=n.bodyA,a=n.bodyB,l={id:e.id(u,a),bodyA:u,bodyB:a,collision:n,contacts:[],activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:u.isSensor||a.isSensor,timeCreated:i,timeUpdated:i,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return e.update(l,n,i),l},e.update=function(n,i,u){var a=n.contacts,l=i.supports,r=n.activeContacts,t=i.parentA,o=i.parentB,f=t.vertices.length;n.isActive=!0,n.timeUpdated=u,n.collision=i,n.separation=i.depth,n.inverseMass=t.inverseMass+o.inverseMass,n.friction=t.friction<o.friction?t.friction:o.friction,n.frictionStatic=t.frictionStatic>o.frictionStatic?t.frictionStatic:o.frictionStatic,n.restitution=t.restitution>o.restitution?t.restitution:o.restitution,n.slop=t.slop>o.slop?t.slop:o.slop,i.pair=n,r.length=0;for(var v=0;v<l.length;v++){var x=l[v],w=x.body===t?x.index:f+x.index,M=a[w];M?r.push(M):r.push(a[w]=s.create(x))}},e.setActive=function(n,i,u){i?(n.isActive=!0,n.timeUpdated=u):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,i){return n.id<i.id?"A"+n.id+"B"+i.id:"A"+i.id+"B"+n.id}})()},function(d,E,c){var e={};d.exports=e;var s=c(3),n=c(2),i=c(7),u=c(1),a=c(11),l=c(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(r){var t=r;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var o=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,f=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,v=n.magnitude(n.sub(o,f));t.length=typeof t.length!="undefined"?t.length:v,t.id=t.id||l.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var x={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(x.type="pin",x.anchors=!1):t.stiffness<.9&&(x.type="spring"),t.render=l.extend(x,t.render),t},e.preSolveAll=function(r){for(var t=0;t<r.length;t+=1){var o=r[t],f=o.constraintImpulse;o.isStatic||f.x===0&&f.y===0&&f.angle===0||(o.position.x+=f.x,o.position.y+=f.y,o.angle+=f.angle)}},e.solveAll=function(r,t){for(var o=0;o<r.length;o+=1){var f=r[o],v=!f.bodyA||f.bodyA&&f.bodyA.isStatic,x=!f.bodyB||f.bodyB&&f.bodyB.isStatic;(v||x)&&e.solve(r[o],t)}for(o=0;o<r.length;o+=1)f=r[o],v=!f.bodyA||f.bodyA&&f.bodyA.isStatic,x=!f.bodyB||f.bodyB&&f.bodyB.isStatic,!v&&!x&&e.solve(r[o],t)},e.solve=function(r,t){var o=r.bodyA,f=r.bodyB,v=r.pointA,x=r.pointB;if(!(!o&&!f)){o&&!o.isStatic&&(n.rotate(v,o.angle-r.angleA,v),r.angleA=o.angle),f&&!f.isStatic&&(n.rotate(x,f.angle-r.angleB,x),r.angleB=f.angle);var w=v,M=x;if(o&&(w=n.add(o.position,v)),f&&(M=n.add(f.position,x)),!(!w||!M)){var g=n.sub(w,M),p=n.magnitude(g);p<e._minLength&&(p=e._minLength);var y=(p-r.length)/p,m=r.stiffness<1?r.stiffness*t:r.stiffness,S=n.mult(g,y*m),k=(o?o.inverseMass:0)+(f?f.inverseMass:0),I=(o?o.inverseInertia:0)+(f?f.inverseInertia:0),C=k+I,A,T,H,L,R;if(r.damping){var F=n.create();H=n.div(g,p),R=n.sub(f&&n.sub(f.position,f.positionPrev)||F,o&&n.sub(o.position,o.positionPrev)||F),L=n.dot(H,R)}o&&!o.isStatic&&(T=o.inverseMass/k,o.constraintImpulse.x-=S.x*T,o.constraintImpulse.y-=S.y*T,o.position.x-=S.x*T,o.position.y-=S.y*T,r.damping&&(o.positionPrev.x-=r.damping*H.x*L*T,o.positionPrev.y-=r.damping*H.y*L*T),A=n.cross(v,S)/C*e._torqueDampen*o.inverseInertia*(1-r.angularStiffness),o.constraintImpulse.angle-=A,o.angle-=A),f&&!f.isStatic&&(T=f.inverseMass/k,f.constraintImpulse.x+=S.x*T,f.constraintImpulse.y+=S.y*T,f.position.x+=S.x*T,f.position.y+=S.y*T,r.damping&&(f.positionPrev.x+=r.damping*H.x*L*T,f.positionPrev.y+=r.damping*H.y*L*T),A=n.cross(x,S)/C*e._torqueDampen*f.inverseInertia*(1-r.angularStiffness),f.constraintImpulse.angle+=A,f.angle+=A)}}},e.postSolveAll=function(r){for(var t=0;t<r.length;t++){var o=r[t],f=o.constraintImpulse;if(!(o.isStatic||f.x===0&&f.y===0&&f.angle===0)){i.set(o,!1);for(var v=0;v<o.parts.length;v++){var x=o.parts[v];s.translate(x.vertices,f),v>0&&(x.position.x+=f.x,x.position.y+=f.y),f.angle!==0&&(s.rotate(x.vertices,f.angle,o.position),a.rotate(x.axes,f.angle),v>0&&n.rotateAbout(x.position,f.angle,o.position,x.position)),u.update(x.bounds,x.vertices,o.velocity)}f.angle*=e._warming,f.x*=e._warming,f.y*=e._warming}}},e.pointAWorld=function(r){return{x:(r.bodyA?r.bodyA.position.x:0)+r.pointA.x,y:(r.bodyA?r.bodyA.position.y:0)+r.pointA.y}},e.pointBWorld=function(r){return{x:(r.bodyB?r.bodyB.position.x:0)+r.pointB.x,y:(r.bodyB?r.bodyB.position.y:0)+r.pointB.y}}})()},function(d,E,c){var e={};d.exports=e;var s=c(2),n=c(0);(function(){e.fromVertices=function(i){for(var u={},a=0;a<i.length;a++){var l=(a+1)%i.length,r=s.normalise({x:i[l].y-i[a].y,y:i[a].x-i[l].x}),t=r.y===0?1/0:r.x/r.y;t=t.toFixed(3).toString(),u[t]=r}return n.values(u)},e.rotate=function(i,u){if(u!==0)for(var a=Math.cos(u),l=Math.sin(u),r=0;r<i.length;r++){var t=i[r],o;o=t.x*a-t.y*l,t.y=t.x*l+t.y*a,t.x=o}}})()},function(d,E,c){var e={};d.exports=e;var s=c(3),n=c(0),i=c(6),u=c(1),a=c(2);(function(){e.rectangle=function(l,r,t,o,f){f=f||{};var v={label:"Rectangle Body",position:{x:l,y:r},vertices:s.fromPath("L 0 0 L "+t+" 0 L "+t+" "+o+" L 0 "+o)};if(f.chamfer){var x=f.chamfer;v.vertices=s.chamfer(v.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete f.chamfer}return i.create(n.extend({},v,f))},e.trapezoid=function(l,r,t,o,f,v){v=v||{},f*=.5;var x=(1-f*2)*t,w=t*f,M=w+x,g=M+w,p;f<.5?p="L 0 0 L "+w+" "+-o+" L "+M+" "+-o+" L "+g+" 0":p="L 0 0 L "+M+" "+-o+" L "+g+" 0";var y={label:"Trapezoid Body",position:{x:l,y:r},vertices:s.fromPath(p)};if(v.chamfer){var m=v.chamfer;y.vertices=s.chamfer(y.vertices,m.radius,m.quality,m.qualityMin,m.qualityMax),delete v.chamfer}return i.create(n.extend({},y,v))},e.circle=function(l,r,t,o,f){o=o||{};var v={label:"Circle Body",circleRadius:t};f=f||25;var x=Math.ceil(Math.max(10,Math.min(f,t)));return x%2===1&&(x+=1),e.polygon(l,r,x,t,n.extend({},v,o))},e.polygon=function(l,r,t,o,f){if(f=f||{},t<3)return e.circle(l,r,o,f);for(var v=2*Math.PI/t,x="",w=v*.5,M=0;M<t;M+=1){var g=w+M*v,p=Math.cos(g)*o,y=Math.sin(g)*o;x+="L "+p.toFixed(3)+" "+y.toFixed(3)+" "}var m={label:"Polygon Body",position:{x:l,y:r},vertices:s.fromPath(x)};if(f.chamfer){var S=f.chamfer;m.vertices=s.chamfer(m.vertices,S.radius,S.quality,S.qualityMin,S.qualityMax),delete f.chamfer}return i.create(n.extend({},m,f))},e.fromVertices=function(l,r,t,o,f,v,x,w){var M=n.getDecomp(),g,p,y,m,S,k,I,C,A,T,H;for(g=Boolean(M&&M.quickDecomp),o=o||{},y=[],f=typeof f!="undefined"?f:!1,v=typeof v!="undefined"?v:.01,x=typeof x!="undefined"?x:10,w=typeof w!="undefined"?w:.01,n.isArray(t[0])||(t=[t]),T=0;T<t.length;T+=1)if(k=t[T],m=s.isConvex(k),S=!m,S&&!g&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),m||!g)m?k=s.clockwiseSort(k):k=s.hull(k),y.push({position:{x:l,y:r},vertices:k});else{var L=k.map(function(te){return[te.x,te.y]});M.makeCCW(L),v!==!1&&M.removeCollinearPoints(L,v),w!==!1&&M.removeDuplicatePoints&&M.removeDuplicatePoints(L,w);var R=M.quickDecomp(L);for(I=0;I<R.length;I++){var F=R[I],B=F.map(function(te){return{x:te[0],y:te[1]}});x>0&&s.area(B)<x||y.push({position:s.centre(B),vertices:B})}}for(I=0;I<y.length;I++)y[I]=i.create(n.extend(y[I],o));if(f){var V=5;for(I=0;I<y.length;I++){var b=y[I];for(C=I+1;C<y.length;C++){var Z=y[C];if(u.overlaps(b.bounds,Z.bounds)){var Y=b.vertices,K=Z.vertices;for(A=0;A<b.vertices.length;A++)for(H=0;H<Z.vertices.length;H++){var oe=a.magnitudeSquared(a.sub(Y[(A+1)%Y.length],K[H])),ee=a.magnitudeSquared(a.sub(Y[A],K[(H+1)%K.length]));oe<V&&ee<V&&(Y[A].isInternal=!0,K[H].isInternal=!0)}}}}}return y.length>1?(p=i.create(n.extend({parts:y.slice(0)},o)),i.setPosition(p,{x:l,y:r}),p):y[0]}})()},function(d,E,c){var e={};d.exports=e;var s=c(0);(function(){e.create=function(n){var i={};return n||s.log("Mouse.create: element was undefined, defaulting to document.body","warn"),i.element=n||document.body,i.absolute={x:0,y:0},i.position={x:0,y:0},i.mousedownPosition={x:0,y:0},i.mouseupPosition={x:0,y:0},i.offset={x:0,y:0},i.scale={x:1,y:1},i.wheelDelta=0,i.button=-1,i.pixelRatio=parseInt(i.element.getAttribute("data-pixel-ratio"),10)||1,i.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},i.mousemove=function(u){var a=e._getRelativeMousePosition(u,i.element,i.pixelRatio),l=u.changedTouches;l&&(i.button=0,u.preventDefault()),i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.sourceEvents.mousemove=u},i.mousedown=function(u){var a=e._getRelativeMousePosition(u,i.element,i.pixelRatio),l=u.changedTouches;l?(i.button=0,u.preventDefault()):i.button=u.button,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mousedownPosition.x=i.position.x,i.mousedownPosition.y=i.position.y,i.sourceEvents.mousedown=u},i.mouseup=function(u){var a=e._getRelativeMousePosition(u,i.element,i.pixelRatio),l=u.changedTouches;l&&u.preventDefault(),i.button=-1,i.absolute.x=a.x,i.absolute.y=a.y,i.position.x=i.absolute.x*i.scale.x+i.offset.x,i.position.y=i.absolute.y*i.scale.y+i.offset.y,i.mouseupPosition.x=i.position.x,i.mouseupPosition.y=i.position.y,i.sourceEvents.mouseup=u},i.mousewheel=function(u){i.wheelDelta=Math.max(-1,Math.min(1,u.wheelDelta||-u.detail)),u.preventDefault()},e.setElement(i,i.element),i},e.setElement=function(n,i){n.element=i,i.addEventListener("mousemove",n.mousemove),i.addEventListener("mousedown",n.mousedown),i.addEventListener("mouseup",n.mouseup),i.addEventListener("mousewheel",n.mousewheel),i.addEventListener("DOMMouseScroll",n.mousewheel),i.addEventListener("touchmove",n.mousemove),i.addEventListener("touchstart",n.mousedown),i.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,i){n.offset.x=i.x,n.offset.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,i){n.scale.x=i.x,n.scale.y=i.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,i,u){var a=i.getBoundingClientRect(),l=document.documentElement||document.body.parentNode||document.body,r=window.pageXOffset!==void 0?window.pageXOffset:l.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:l.scrollTop,o=n.changedTouches,f,v;return o?(f=o[0].pageX-a.left-r,v=o[0].pageY-a.top-t):(f=n.pageX-a.left-r,v=n.pageY-a.top-t),{x:f/(i.clientWidth/(i.width||i.clientWidth)*u),y:v/(i.clientHeight/(i.height||i.clientHeight)*u)}}})()},function(d,E,c){var e={};d.exports=e;var s=c(0),n=c(8);(function(){e.create=function(i){var u={bodies:[],pairs:null};return s.extend(u,i)},e.setBodies=function(i,u){i.bodies=u.slice(0)},e.clear=function(i){i.bodies=[]},e.collisions=function(i){var u=[],a=i.pairs,l=i.bodies,r=l.length,t=e.canCollide,o=n.collides,f,v;for(l.sort(e._compareBoundsX),f=0;f<r;f++){var x=l[f],w=x.bounds,M=x.bounds.max.x,g=x.bounds.max.y,p=x.bounds.min.y,y=x.isStatic||x.isSleeping,m=x.parts.length,S=m===1;for(v=f+1;v<r;v++){var k=l[v],I=k.bounds;if(I.min.x>M)break;if(!(g<I.min.y||p>I.max.y)&&!(y&&(k.isStatic||k.isSleeping))&&!!t(x.collisionFilter,k.collisionFilter)){var C=k.parts.length;if(S&&C===1){var A=o(x,k,a);A&&u.push(A)}else for(var T=m>1?1:0,H=C>1?1:0,L=T;L<m;L++)for(var R=x.parts[L],w=R.bounds,F=H;F<C;F++){var B=k.parts[F],I=B.bounds;if(!(w.min.x>I.max.x||w.max.x<I.min.x||w.max.y<I.min.y||w.min.y>I.max.y)){var A=o(R,B,a);A&&u.push(A)}}}}}return u},e.canCollide=function(i,u){return i.group===u.group&&i.group!==0?i.group>0:(i.mask&u.category)!==0&&(u.mask&i.category)!==0},e._compareBoundsX=function(i,u){return i.bounds.min.x-u.bounds.min.x}})()},function(d,E,c){var e={};d.exports=e;var s=c(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||s.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var i=e._registry[n.name],u=e.versionParse(n.version).number,a=e.versionParse(i.version).number;u>a?(s.warn("Plugin.register:",e.toString(i),"was upgraded to",e.toString(n)),e._registry[n.name]=n):u<a?s.warn("Plugin.register:",e.toString(i),"can not be downgraded to",e.toString(n)):n!==i&&s.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,i){return n.used.indexOf(i)>-1},e.isFor=function(n,i){var u=n.for&&e.dependencyParse(n.for);return!n.for||i.name===u.name&&e.versionSatisfies(i.version,u.range)},e.use=function(n,i){if(n.uses=(n.uses||[]).concat(i||[]),n.uses.length===0){s.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var u=e.dependencies(n),a=s.topologicalSort(u),l=[],r=0;r<a.length;r+=1)if(a[r]!==n.name){var t=e.resolve(a[r]);if(!t){l.push("\u274C "+a[r]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(s.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(s.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(l.push("\u{1F536} "+e.toString(t)),delete t._warned):l.push("\u2705 "+e.toString(t)),n.used.push(t.name))}l.length>0&&s.info(l.join("  "))},e.dependencies=function(n,i){var u=e.dependencyParse(n),a=u.name;if(i=i||{},!(a in i)){n=e.resolve(n)||n,i[a]=s.map(n.uses||[],function(r){e.isPlugin(r)&&e.register(r);var t=e.dependencyParse(r),o=e.resolve(r);return o&&!e.versionSatisfies(o.version,t.range)?(s.warn("Plugin.dependencies:",e.toString(o),"does not satisfy",e.toString(t),"used by",e.toString(u)+"."),o._warned=!0,n._warned=!0):o||(s.warn("Plugin.dependencies:",e.toString(r),"used by",e.toString(u),"could not be resolved."),n._warned=!0),t.name});for(var l=0;l<i[a].length;l+=1)e.dependencies(i[a][l],i);return i}},e.dependencyParse=function(n){if(s.isString(n)){var i=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/;return i.test(n)||s.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var i=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;i.test(n)||s.warn("Plugin.versionParse:",n,"is not a valid version or range.");var u=i.exec(n),a=Number(u[4]),l=Number(u[5]),r=Number(u[6]);return{isRange:Boolean(u[1]||u[2]),version:u[3],range:n,operator:u[1]||u[2]||"",major:a,minor:l,patch:r,parts:[a,l,r],prerelease:u[7],number:a*1e8+l*1e4+r}},e.versionSatisfies=function(n,i){i=i||"*";var u=e.versionParse(i),a=e.versionParse(n);if(u.isRange){if(u.operator==="*"||n==="*")return!0;if(u.operator===">")return a.number>u.number;if(u.operator===">=")return a.number>=u.number;if(u.operator==="~")return a.major===u.major&&a.minor===u.minor&&a.patch>=u.patch;if(u.operator==="^")return u.major>0?a.major===u.major&&a.number>=u.number:u.minor>0?a.minor===u.minor&&a.patch>=u.patch:a.patch===u.patch}return n===i||n==="*"}})()},function(d,E,c){var e={};d.exports=e;var s=c(0),n=c(5),i=c(1),u=c(4),a=c(2),l=c(13);(function(){var r,t;typeof window!="undefined"&&(r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(g){window.setTimeout(function(){g(s.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(g){var p={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!g.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},y=s.extend(p,g);return y.canvas&&(y.canvas.width=y.options.width||y.canvas.width,y.canvas.height=y.options.height||y.canvas.height),y.mouse=g.mouse,y.engine=g.engine,y.canvas=y.canvas||v(y.options.width,y.options.height),y.context=y.canvas.getContext("2d"),y.textures={},y.bounds=y.bounds||{min:{x:0,y:0},max:{x:y.canvas.width,y:y.canvas.height}},y.options.showBroadphase=!1,y.options.pixelRatio!==1&&e.setPixelRatio(y,y.options.pixelRatio),s.isElement(y.element)?y.element.appendChild(y.canvas):y.canvas.parentNode||s.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),y},e.run=function(g){(function p(y){g.frameRequestId=r(p),o(g,y),e.world(g,y),(g.options.showStats||g.options.showDebug)&&e.stats(g,g.context,y),(g.options.showPerformance||g.options.showDebug)&&e.performance(g,g.context,y)})()},e.stop=function(g){t(g.frameRequestId)},e.setPixelRatio=function(g,p){var y=g.options,m=g.canvas;p==="auto"&&(p=x(m)),y.pixelRatio=p,m.setAttribute("data-pixel-ratio",p),m.width=y.width*p,m.height=y.height*p,m.style.width=y.width+"px",m.style.height=y.height+"px"},e.lookAt=function(g,p,y,m){m=typeof m!="undefined"?m:!0,p=s.isArray(p)?p:[p],y=y||{x:0,y:0};for(var S={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},k=0;k<p.length;k+=1){var I=p[k],C=I.bounds?I.bounds.min:I.min||I.position||I,A=I.bounds?I.bounds.max:I.max||I.position||I;C&&A&&(C.x<S.min.x&&(S.min.x=C.x),A.x>S.max.x&&(S.max.x=A.x),C.y<S.min.y&&(S.min.y=C.y),A.y>S.max.y&&(S.max.y=A.y))}var T=S.max.x-S.min.x+2*y.x,H=S.max.y-S.min.y+2*y.y,L=g.canvas.height,R=g.canvas.width,F=R/L,B=T/H,V=1,b=1;B>F?b=B/F:V=F/B,g.options.hasBounds=!0,g.bounds.min.x=S.min.x,g.bounds.max.x=S.min.x+T*V,g.bounds.min.y=S.min.y,g.bounds.max.y=S.min.y+H*b,m&&(g.bounds.min.x+=T*.5-T*V*.5,g.bounds.max.x+=T*.5-T*V*.5,g.bounds.min.y+=H*.5-H*b*.5,g.bounds.max.y+=H*.5-H*b*.5),g.bounds.min.x-=y.x,g.bounds.max.x-=y.x,g.bounds.min.y-=y.y,g.bounds.max.y-=y.y,g.mouse&&(l.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.canvas.width,y:(g.bounds.max.y-g.bounds.min.y)/g.canvas.height}),l.setOffset(g.mouse,g.bounds.min))},e.startViewTransform=function(g){var p=g.bounds.max.x-g.bounds.min.x,y=g.bounds.max.y-g.bounds.min.y,m=p/g.options.width,S=y/g.options.height;g.context.setTransform(g.options.pixelRatio/m,0,0,g.options.pixelRatio/S,0,0),g.context.translate(-g.bounds.min.x,-g.bounds.min.y)},e.endViewTransform=function(g){g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0)},e.world=function(g,p){var y=s.now(),m=g.engine,S=m.world,k=g.canvas,I=g.context,C=g.options,A=g.timing,T=n.allBodies(S),H=n.allConstraints(S),L=C.wireframes?C.wireframeBackground:C.background,R=[],F=[],B,V={timestamp:m.timing.timestamp};if(u.trigger(g,"beforeRender",V),g.currentBackground!==L&&M(g,L),I.globalCompositeOperation="source-in",I.fillStyle="transparent",I.fillRect(0,0,k.width,k.height),I.globalCompositeOperation="source-over",C.hasBounds){for(B=0;B<T.length;B++){var b=T[B];i.overlaps(b.bounds,g.bounds)&&R.push(b)}for(B=0;B<H.length;B++){var Z=H[B],Y=Z.bodyA,K=Z.bodyB,oe=Z.pointA,ee=Z.pointB;Y&&(oe=a.add(Y.position,Z.pointA)),K&&(ee=a.add(K.position,Z.pointB)),!(!oe||!ee)&&(i.contains(g.bounds,oe)||i.contains(g.bounds,ee))&&F.push(Z)}e.startViewTransform(g),g.mouse&&(l.setScale(g.mouse,{x:(g.bounds.max.x-g.bounds.min.x)/g.options.width,y:(g.bounds.max.y-g.bounds.min.y)/g.options.height}),l.setOffset(g.mouse,g.bounds.min))}else F=H,R=T,g.options.pixelRatio!==1&&g.context.setTransform(g.options.pixelRatio,0,0,g.options.pixelRatio,0,0);!C.wireframes||m.enableSleeping&&C.showSleeping?e.bodies(g,R,I):(C.showConvexHulls&&e.bodyConvexHulls(g,R,I),e.bodyWireframes(g,R,I)),C.showBounds&&e.bodyBounds(g,R,I),(C.showAxes||C.showAngleIndicator)&&e.bodyAxes(g,R,I),C.showPositions&&e.bodyPositions(g,R,I),C.showVelocity&&e.bodyVelocity(g,R,I),C.showIds&&e.bodyIds(g,R,I),C.showSeparations&&e.separations(g,m.pairs.list,I),C.showCollisions&&e.collisions(g,m.pairs.list,I),C.showVertexNumbers&&e.vertexNumbers(g,R,I),C.showMousePosition&&e.mousePosition(g,g.mouse,I),e.constraints(F,I),C.hasBounds&&e.endViewTransform(g),u.trigger(g,"afterRender",V),A.lastElapsed=s.now()-y},e.stats=function(g,p,y){for(var m=g.engine,S=m.world,k=n.allBodies(S),I=0,C=55,A=44,T=0,H=0,L=0;L<k.length;L+=1)I+=k[L].parts.length;var R={Part:I,Body:k.length,Cons:n.allConstraints(S).length,Comp:n.allComposites(S).length,Pair:m.pairs.list.length};p.fillStyle="#0e0f19",p.fillRect(T,H,C*5.5,A),p.font="12px Arial",p.textBaseline="top",p.textAlign="right";for(var F in R){var B=R[F];p.fillStyle="#aaa",p.fillText(F,T+C,H+8),p.fillStyle="#eee",p.fillText(B,T+C,H+26),T+=C}},e.performance=function(g,p){var y=g.engine,m=g.timing,S=m.deltaHistory,k=m.elapsedHistory,I=m.timestampElapsedHistory,C=m.engineDeltaHistory,A=m.engineElapsedHistory,T=y.timing.lastDelta,H=f(S),L=f(k),R=f(C),F=f(A),B=f(I),V=B/H||0,b=1e3/H||0,Z=4,Y=12,K=60,oe=34,ee=10,te=69;p.fillStyle="#0e0f19",p.fillRect(0,50,Y*4+K*5+22,oe),e.status(p,ee,te,K,Z,S.length,Math.round(b)+" fps",b/e._goodFps,function(ie){return S[ie]/H-1}),e.status(p,ee+Y+K,te,K,Z,C.length,T.toFixed(2)+" dt",e._goodDelta/T,function(ie){return C[ie]/R-1}),e.status(p,ee+(Y+K)*2,te,K,Z,A.length,F.toFixed(2)+" ut",1-F/e._goodFps,function(ie){return A[ie]/F-1}),e.status(p,ee+(Y+K)*3,te,K,Z,k.length,L.toFixed(2)+" rt",1-L/e._goodFps,function(ie){return k[ie]/L-1}),e.status(p,ee+(Y+K)*4,te,K,Z,I.length,V.toFixed(2)+" x",V*V*V,function(ie){return(I[ie]/S[ie]/V||0)-1})},e.status=function(g,p,y,m,S,k,I,C,A){g.strokeStyle="#888",g.fillStyle="#444",g.lineWidth=1,g.fillRect(p,y+7,m,1),g.beginPath(),g.moveTo(p,y+7-S*s.clamp(.4*A(0),-2,2));for(var T=0;T<m;T+=1)g.lineTo(p+T,y+7-(T<k?S*s.clamp(.4*A(T),-2,2):0));g.stroke(),g.fillStyle="hsl("+s.clamp(25+95*C,0,120)+",100%,60%)",g.fillRect(p,y-7,4,4),g.font="12px Arial",g.textBaseline="middle",g.textAlign="right",g.fillStyle="#eee",g.fillText(I,p+m,y-5)},e.constraints=function(g,p){for(var y=p,m=0;m<g.length;m++){var S=g[m];if(!(!S.render.visible||!S.pointA||!S.pointB)){var k=S.bodyA,I=S.bodyB,C,A;if(k?C=a.add(k.position,S.pointA):C=S.pointA,S.render.type==="pin")y.beginPath(),y.arc(C.x,C.y,3,0,2*Math.PI),y.closePath();else{if(I?A=a.add(I.position,S.pointB):A=S.pointB,y.beginPath(),y.moveTo(C.x,C.y),S.render.type==="spring")for(var T=a.sub(A,C),H=a.perp(a.normalise(T)),L=Math.ceil(s.clamp(S.length/5,12,20)),R,F=1;F<L;F+=1)R=F%2===0?1:-1,y.lineTo(C.x+T.x*(F/L)+H.x*R*4,C.y+T.y*(F/L)+H.y*R*4);y.lineTo(A.x,A.y)}S.render.lineWidth&&(y.lineWidth=S.render.lineWidth,y.strokeStyle=S.render.strokeStyle,y.stroke()),S.render.anchors&&(y.fillStyle=S.render.strokeStyle,y.beginPath(),y.arc(C.x,C.y,3,0,2*Math.PI),y.arc(A.x,A.y,3,0,2*Math.PI),y.closePath(),y.fill())}}},e.bodies=function(g,p,y){var m=y;g.engine;var S=g.options,k=S.showInternalEdges||!S.wireframes,I,C,A,T;for(A=0;A<p.length;A++)if(I=p[A],!!I.render.visible){for(T=I.parts.length>1?1:0;T<I.parts.length;T++)if(C=I.parts[T],!!C.render.visible){if(S.showSleeping&&I.isSleeping?m.globalAlpha=.5*C.render.opacity:C.render.opacity!==1&&(m.globalAlpha=C.render.opacity),C.render.sprite&&C.render.sprite.texture&&!S.wireframes){var H=C.render.sprite,L=w(g,H.texture);m.translate(C.position.x,C.position.y),m.rotate(C.angle),m.drawImage(L,L.width*-H.xOffset*H.xScale,L.height*-H.yOffset*H.yScale,L.width*H.xScale,L.height*H.yScale),m.rotate(-C.angle),m.translate(-C.position.x,-C.position.y)}else{if(C.circleRadius)m.beginPath(),m.arc(C.position.x,C.position.y,C.circleRadius,0,2*Math.PI);else{m.beginPath(),m.moveTo(C.vertices[0].x,C.vertices[0].y);for(var R=1;R<C.vertices.length;R++)!C.vertices[R-1].isInternal||k?m.lineTo(C.vertices[R].x,C.vertices[R].y):m.moveTo(C.vertices[R].x,C.vertices[R].y),C.vertices[R].isInternal&&!k&&m.moveTo(C.vertices[(R+1)%C.vertices.length].x,C.vertices[(R+1)%C.vertices.length].y);m.lineTo(C.vertices[0].x,C.vertices[0].y),m.closePath()}S.wireframes?(m.lineWidth=1,m.strokeStyle="#bbb",m.stroke()):(m.fillStyle=C.render.fillStyle,C.render.lineWidth&&(m.lineWidth=C.render.lineWidth,m.strokeStyle=C.render.strokeStyle,m.stroke()),m.fill())}m.globalAlpha=1}}},e.bodyWireframes=function(g,p,y){var m=y,S=g.options.showInternalEdges,k,I,C,A,T;for(m.beginPath(),C=0;C<p.length;C++)if(k=p[C],!!k.render.visible)for(T=k.parts.length>1?1:0;T<k.parts.length;T++){for(I=k.parts[T],m.moveTo(I.vertices[0].x,I.vertices[0].y),A=1;A<I.vertices.length;A++)!I.vertices[A-1].isInternal||S?m.lineTo(I.vertices[A].x,I.vertices[A].y):m.moveTo(I.vertices[A].x,I.vertices[A].y),I.vertices[A].isInternal&&!S&&m.moveTo(I.vertices[(A+1)%I.vertices.length].x,I.vertices[(A+1)%I.vertices.length].y);m.lineTo(I.vertices[0].x,I.vertices[0].y)}m.lineWidth=1,m.strokeStyle="#bbb",m.stroke()},e.bodyConvexHulls=function(g,p,y){var m=y,S,k,I;for(m.beginPath(),k=0;k<p.length;k++)if(S=p[k],!(!S.render.visible||S.parts.length===1)){for(m.moveTo(S.vertices[0].x,S.vertices[0].y),I=1;I<S.vertices.length;I++)m.lineTo(S.vertices[I].x,S.vertices[I].y);m.lineTo(S.vertices[0].x,S.vertices[0].y)}m.lineWidth=1,m.strokeStyle="rgba(255,255,255,0.2)",m.stroke()},e.vertexNumbers=function(g,p,y){var m=y,S,k,I;for(S=0;S<p.length;S++){var C=p[S].parts;for(I=C.length>1?1:0;I<C.length;I++){var A=C[I];for(k=0;k<A.vertices.length;k++)m.fillStyle="rgba(255,255,255,0.2)",m.fillText(S+"_"+k,A.position.x+(A.vertices[k].x-A.position.x)*.8,A.position.y+(A.vertices[k].y-A.position.y)*.8)}}},e.mousePosition=function(g,p,y){var m=y;m.fillStyle="rgba(255,255,255,0.8)",m.fillText(p.position.x+"  "+p.position.y,p.position.x+5,p.position.y-5)},e.bodyBounds=function(g,p,y){var m=y;g.engine;var S=g.options;m.beginPath();for(var k=0;k<p.length;k++){var I=p[k];if(I.render.visible)for(var C=p[k].parts,A=C.length>1?1:0;A<C.length;A++){var T=C[A];m.rect(T.bounds.min.x,T.bounds.min.y,T.bounds.max.x-T.bounds.min.x,T.bounds.max.y-T.bounds.min.y)}}S.wireframes?m.strokeStyle="rgba(255,255,255,0.08)":m.strokeStyle="rgba(0,0,0,0.1)",m.lineWidth=1,m.stroke()},e.bodyAxes=function(g,p,y){var m=y;g.engine;var S=g.options,k,I,C,A;for(m.beginPath(),I=0;I<p.length;I++){var T=p[I],H=T.parts;if(!!T.render.visible)if(S.showAxes)for(C=H.length>1?1:0;C<H.length;C++)for(k=H[C],A=0;A<k.axes.length;A++){var L=k.axes[A];m.moveTo(k.position.x,k.position.y),m.lineTo(k.position.x+L.x*20,k.position.y+L.y*20)}else for(C=H.length>1?1:0;C<H.length;C++)for(k=H[C],A=0;A<k.axes.length;A++)m.moveTo(k.position.x,k.position.y),m.lineTo((k.vertices[0].x+k.vertices[k.vertices.length-1].x)/2,(k.vertices[0].y+k.vertices[k.vertices.length-1].y)/2)}S.wireframes?(m.strokeStyle="indianred",m.lineWidth=1):(m.strokeStyle="rgba(255, 255, 255, 0.4)",m.globalCompositeOperation="overlay",m.lineWidth=2),m.stroke(),m.globalCompositeOperation="source-over"},e.bodyPositions=function(g,p,y){var m=y;g.engine;var S=g.options,k,I,C,A;for(m.beginPath(),C=0;C<p.length;C++)if(k=p[C],!!k.render.visible)for(A=0;A<k.parts.length;A++)I=k.parts[A],m.arc(I.position.x,I.position.y,3,0,2*Math.PI,!1),m.closePath();for(S.wireframes?m.fillStyle="indianred":m.fillStyle="rgba(0,0,0,0.5)",m.fill(),m.beginPath(),C=0;C<p.length;C++)k=p[C],k.render.visible&&(m.arc(k.positionPrev.x,k.positionPrev.y,2,0,2*Math.PI,!1),m.closePath());m.fillStyle="rgba(255,165,0,0.8)",m.fill()},e.bodyVelocity=function(g,p,y){var m=y;m.beginPath();for(var S=0;S<p.length;S++){var k=p[S];!k.render.visible||(m.moveTo(k.position.x,k.position.y),m.lineTo(k.position.x+(k.position.x-k.positionPrev.x)*2,k.position.y+(k.position.y-k.positionPrev.y)*2))}m.lineWidth=3,m.strokeStyle="cornflowerblue",m.stroke()},e.bodyIds=function(g,p,y){var m=y,S,k;for(S=0;S<p.length;S++)if(!!p[S].render.visible){var I=p[S].parts;for(k=I.length>1?1:0;k<I.length;k++){var C=I[k];m.font="12px Arial",m.fillStyle="rgba(255,255,255,0.5)",m.fillText(C.id,C.position.x+10,C.position.y-10)}}},e.collisions=function(g,p,y){var m=y,S=g.options,k,I,C,A;for(m.beginPath(),C=0;C<p.length;C++)if(k=p[C],!!k.isActive)for(I=k.collision,A=0;A<k.activeContacts.length;A++){var T=k.activeContacts[A],H=T.vertex;m.rect(H.x-1.5,H.y-1.5,3.5,3.5)}for(S.wireframes?m.fillStyle="rgba(255,255,255,0.7)":m.fillStyle="orange",m.fill(),m.beginPath(),C=0;C<p.length;C++)if(k=p[C],!!k.isActive&&(I=k.collision,k.activeContacts.length>0)){var L=k.activeContacts[0].vertex.x,R=k.activeContacts[0].vertex.y;k.activeContacts.length===2&&(L=(k.activeContacts[0].vertex.x+k.activeContacts[1].vertex.x)/2,R=(k.activeContacts[0].vertex.y+k.activeContacts[1].vertex.y)/2),I.bodyB===I.supports[0].body||I.bodyA.isStatic===!0?m.moveTo(L-I.normal.x*8,R-I.normal.y*8):m.moveTo(L+I.normal.x*8,R+I.normal.y*8),m.lineTo(L,R)}S.wireframes?m.strokeStyle="rgba(255,165,0,0.7)":m.strokeStyle="orange",m.lineWidth=1,m.stroke()},e.separations=function(g,p,y){var m=y,S=g.options,k,I,C,A,T;for(m.beginPath(),T=0;T<p.length;T++)if(k=p[T],!!k.isActive){I=k.collision,C=I.bodyA,A=I.bodyB;var H=1;!A.isStatic&&!C.isStatic&&(H=.5),A.isStatic&&(H=0),m.moveTo(A.position.x,A.position.y),m.lineTo(A.position.x-I.penetration.x*H,A.position.y-I.penetration.y*H),H=1,!A.isStatic&&!C.isStatic&&(H=.5),C.isStatic&&(H=0),m.moveTo(C.position.x,C.position.y),m.lineTo(C.position.x+I.penetration.x*H,C.position.y+I.penetration.y*H)}S.wireframes?m.strokeStyle="rgba(255,165,0,0.5)":m.strokeStyle="orange",m.stroke()},e.inspector=function(g,p){g.engine;var y=g.selected,m=g.render,S=m.options,k;if(S.hasBounds){var I=m.bounds.max.x-m.bounds.min.x,C=m.bounds.max.y-m.bounds.min.y,A=I/m.options.width,T=C/m.options.height;p.scale(1/A,1/T),p.translate(-m.bounds.min.x,-m.bounds.min.y)}for(var H=0;H<y.length;H++){var L=y[H].data;switch(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.9)",p.setLineDash([1,2]),L.type){case"body":k=L.bounds,p.beginPath(),p.rect(Math.floor(k.min.x-3),Math.floor(k.min.y-3),Math.floor(k.max.x-k.min.x+6),Math.floor(k.max.y-k.min.y+6)),p.closePath(),p.stroke();break;case"constraint":var R=L.pointA;L.bodyA&&(R=L.pointB),p.beginPath(),p.arc(R.x,R.y,10,0,2*Math.PI),p.closePath(),p.stroke();break}p.setLineDash([]),p.translate(-.5,-.5)}g.selectStart!==null&&(p.translate(.5,.5),p.lineWidth=1,p.strokeStyle="rgba(255,165,0,0.6)",p.fillStyle="rgba(255,165,0,0.1)",k=g.selectBounds,p.beginPath(),p.rect(Math.floor(k.min.x),Math.floor(k.min.y),Math.floor(k.max.x-k.min.x),Math.floor(k.max.y-k.min.y)),p.closePath(),p.stroke(),p.fill(),p.translate(-.5,-.5)),S.hasBounds&&p.setTransform(1,0,0,1,0,0)};var o=function(g,p){var y=g.engine,m=g.timing,S=m.historySize,k=y.timing.timestamp;m.delta=p-m.lastTime||e._goodDelta,m.lastTime=p,m.timestampElapsed=k-m.lastTimestamp||0,m.lastTimestamp=k,m.deltaHistory.unshift(m.delta),m.deltaHistory.length=Math.min(m.deltaHistory.length,S),m.engineDeltaHistory.unshift(y.timing.lastDelta),m.engineDeltaHistory.length=Math.min(m.engineDeltaHistory.length,S),m.timestampElapsedHistory.unshift(m.timestampElapsed),m.timestampElapsedHistory.length=Math.min(m.timestampElapsedHistory.length,S),m.engineElapsedHistory.unshift(y.timing.lastElapsed),m.engineElapsedHistory.length=Math.min(m.engineElapsedHistory.length,S),m.elapsedHistory.unshift(m.lastElapsed),m.elapsedHistory.length=Math.min(m.elapsedHistory.length,S)},f=function(g){for(var p=0,y=0;y<g.length;y+=1)p+=g[y];return p/g.length||0},v=function(g,p){var y=document.createElement("canvas");return y.width=g,y.height=p,y.oncontextmenu=function(){return!1},y.onselectstart=function(){return!1},y},x=function(g){var p=g.getContext("2d"),y=window.devicePixelRatio||1,m=p.webkitBackingStorePixelRatio||p.mozBackingStorePixelRatio||p.msBackingStorePixelRatio||p.oBackingStorePixelRatio||p.backingStorePixelRatio||1;return y/m},w=function(g,p){var y=g.textures[p];return y||(y=g.textures[p]=new Image,y.src=p,y)},M=function(g,p){var y=p;/(jpg|gif|png)$/.test(p)&&(y="url("+p+")"),g.canvas.style.background=y,g.canvas.style.backgroundSize="contain",g.currentBackground=p}})()},function(d,E){var c={};d.exports=c,function(){c.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}}()},function(d,E,c){var e={};d.exports=e;var s=c(7),n=c(19),i=c(14),u=c(20),a=c(4),l=c(5),r=c(10),t=c(0),o=c(6);(function(){e.create=function(f){f=f||{};var v={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},x=t.extend(v,f);return x.world=f.world||l.create({label:"World"}),x.pairs=f.pairs||u.create(),x.detector=f.detector||i.create(),x.grid={buckets:[]},x.world.gravity=x.gravity,x.broadphase=x.grid,x.metrics={},x},e.update=function(f,v,x){var w=t.now();v=v||1e3/60,x=x||1;var M=f.world,g=f.detector,p=f.pairs,y=f.timing,m=y.timestamp,S;y.timestamp+=v*y.timeScale,y.lastDelta=v*y.timeScale;var k={timestamp:y.timestamp};a.trigger(f,"beforeUpdate",k);var I=l.allBodies(M),C=l.allConstraints(M);for(M.isModified&&i.setBodies(g,I),M.isModified&&l.setModified(M,!1,!1,!0),f.enableSleeping&&s.update(I,y.timeScale),e._bodiesApplyGravity(I,f.gravity),e._bodiesUpdate(I,v,y.timeScale,x,M.bounds),r.preSolveAll(I),S=0;S<f.constraintIterations;S++)r.solveAll(C,y.timeScale);r.postSolveAll(I),g.pairs=f.pairs;var A=i.collisions(g);for(u.update(p,A,m),f.enableSleeping&&s.afterCollisions(p.list,y.timeScale),p.collisionStart.length>0&&a.trigger(f,"collisionStart",{pairs:p.collisionStart}),n.preSolvePosition(p.list),S=0;S<f.positionIterations;S++)n.solvePosition(p.list,y.timeScale);for(n.postSolvePosition(I),r.preSolveAll(I),S=0;S<f.constraintIterations;S++)r.solveAll(C,y.timeScale);for(r.postSolveAll(I),n.preSolveVelocity(p.list),S=0;S<f.velocityIterations;S++)n.solveVelocity(p.list,y.timeScale);return p.collisionActive.length>0&&a.trigger(f,"collisionActive",{pairs:p.collisionActive}),p.collisionEnd.length>0&&a.trigger(f,"collisionEnd",{pairs:p.collisionEnd}),e._bodiesClearForces(I),a.trigger(f,"afterUpdate",k),f.timing.lastElapsed=t.now()-w,f},e.merge=function(f,v){if(t.extend(f,v),v.world){f.world=v.world,e.clear(f);for(var x=l.allBodies(f.world),w=0;w<x.length;w++){var M=x[w];s.set(M,!1),M.id=t.nextId()}}},e.clear=function(f){u.clear(f.pairs),i.clear(f.detector)},e._bodiesClearForces=function(f){for(var v=0;v<f.length;v++){var x=f[v];x.force.x=0,x.force.y=0,x.torque=0}},e._bodiesApplyGravity=function(f,v){var x=typeof v.scale!="undefined"?v.scale:.001;if(!(v.x===0&&v.y===0||x===0))for(var w=0;w<f.length;w++){var M=f[w];M.isStatic||M.isSleeping||(M.force.y+=M.mass*v.y*x,M.force.x+=M.mass*v.x*x)}},e._bodiesUpdate=function(f,v,x,w,M){for(var g=0;g<f.length;g++){var p=f[g];p.isStatic||p.isSleeping||o.update(p,v,x,w)}}})()},function(d,E,c){var e={};d.exports=e;var s=c(3),n=c(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(i){var u,a,l,r=i.length;for(u=0;u<r;u++)a=i[u],a.isActive&&(l=a.activeContacts.length,a.collision.parentA.totalContacts+=l,a.collision.parentB.totalContacts+=l)},e.solvePosition=function(i,u){var a,l,r,t,o,f,v,x,w=e._positionDampen,M=i.length;for(a=0;a<M;a++)l=i[a],!(!l.isActive||l.isSensor)&&(r=l.collision,t=r.parentA,o=r.parentB,f=r.normal,l.separation=f.x*(o.positionImpulse.x+r.penetration.x-t.positionImpulse.x)+f.y*(o.positionImpulse.y+r.penetration.y-t.positionImpulse.y));for(a=0;a<M;a++)l=i[a],!(!l.isActive||l.isSensor)&&(r=l.collision,t=r.parentA,o=r.parentB,f=r.normal,x=(l.separation-l.slop)*u,(t.isStatic||o.isStatic)&&(x*=2),t.isStatic||t.isSleeping||(v=w/t.totalContacts,t.positionImpulse.x+=f.x*x*v,t.positionImpulse.y+=f.y*x*v),o.isStatic||o.isSleeping||(v=w/o.totalContacts,o.positionImpulse.x-=f.x*x*v,o.positionImpulse.y-=f.y*x*v))},e.postSolvePosition=function(i){for(var u=e._positionWarming,a=i.length,l=s.translate,r=n.update,t=0;t<a;t++){var o=i[t],f=o.positionImpulse,v=f.x,x=f.y,w=o.velocity;if(o.totalContacts=0,v!==0||x!==0){for(var M=0;M<o.parts.length;M++){var g=o.parts[M];l(g.vertices,f),r(g.bounds,g.vertices,w),g.position.x+=v,g.position.y+=x}o.positionPrev.x+=v,o.positionPrev.y+=x,v*w.x+x*w.y<0?(f.x=0,f.y=0):(f.x*=u,f.y*=u)}}},e.preSolveVelocity=function(i){var u=i.length,a,l;for(a=0;a<u;a++){var r=i[a];if(!(!r.isActive||r.isSensor)){var t=r.activeContacts,o=t.length,f=r.collision,v=f.parentA,x=f.parentB,w=f.normal,M=f.tangent;for(l=0;l<o;l++){var g=t[l],p=g.vertex,y=g.normalImpulse,m=g.tangentImpulse;if(y!==0||m!==0){var S=w.x*y+M.x*m,k=w.y*y+M.y*m;v.isStatic||v.isSleeping||(v.positionPrev.x+=S*v.inverseMass,v.positionPrev.y+=k*v.inverseMass,v.anglePrev+=v.inverseInertia*((p.x-v.position.x)*k-(p.y-v.position.y)*S)),x.isStatic||x.isSleeping||(x.positionPrev.x-=S*x.inverseMass,x.positionPrev.y-=k*x.inverseMass,x.anglePrev-=x.inverseInertia*((p.x-x.position.x)*k-(p.y-x.position.y)*S))}}}}},e.solveVelocity=function(i,u){var a=u*u,l=e._restingThresh*a,r=e._frictionNormalMultiplier,t=e._restingThreshTangent*a,o=Number.MAX_VALUE,f=i.length,v,x,w,M;for(w=0;w<f;w++){var g=i[w];if(!(!g.isActive||g.isSensor)){var p=g.collision,y=p.parentA,m=p.parentB,S=y.velocity,k=m.velocity,I=p.normal.x,C=p.normal.y,A=p.tangent.x,T=p.tangent.y,H=g.activeContacts,L=H.length,R=1/L,F=y.inverseMass+m.inverseMass,B=g.friction*g.frictionStatic*r*a;for(S.x=y.position.x-y.positionPrev.x,S.y=y.position.y-y.positionPrev.y,k.x=m.position.x-m.positionPrev.x,k.y=m.position.y-m.positionPrev.y,y.angularVelocity=y.angle-y.anglePrev,m.angularVelocity=m.angle-m.anglePrev,M=0;M<L;M++){var V=H[M],b=V.vertex,Z=b.x-y.position.x,Y=b.y-y.position.y,K=b.x-m.position.x,oe=b.y-m.position.y,ee=S.x-Y*y.angularVelocity,te=S.y+Z*y.angularVelocity,ie=k.x-oe*m.angularVelocity,Pt=k.y+K*m.angularVelocity,Ye=ee-ie,qe=te-Pt,Ae=I*Ye+C*qe,ge=A*Ye+T*qe,je=g.separation+Ae,Qe=Math.min(je,1);Qe=je<0?0:Qe;var $e=Qe*B;ge>$e||-ge>$e?(x=ge>0?ge:-ge,v=g.friction*(ge>0?1:-1)*a,v<-x?v=-x:v>x&&(v=x)):(v=ge,x=o);var et=Z*C-Y*I,tt=K*C-oe*I,nt=R/(F+y.inverseInertia*et*et+m.inverseInertia*tt*tt),Be=(1+g.restitution)*Ae*nt;if(v*=nt,Ae*Ae>l&&Ae<0)V.normalImpulse=0;else{var Ct=V.normalImpulse;V.normalImpulse+=Be,V.normalImpulse=Math.min(V.normalImpulse,0),Be=V.normalImpulse-Ct}if(ge*ge>t)V.tangentImpulse=0;else{var wt=V.tangentImpulse;V.tangentImpulse+=v,V.tangentImpulse<-x&&(V.tangentImpulse=-x),V.tangentImpulse>x&&(V.tangentImpulse=x),v=V.tangentImpulse-wt}var He=I*Be+A*v,Le=C*Be+T*v;y.isStatic||y.isSleeping||(y.positionPrev.x+=He*y.inverseMass,y.positionPrev.y+=Le*y.inverseMass,y.anglePrev+=(Z*Le-Y*He)*y.inverseInertia),m.isStatic||m.isSleeping||(m.positionPrev.x-=He*m.inverseMass,m.positionPrev.y-=Le*m.inverseMass,m.anglePrev-=(K*Le-oe*He)*m.inverseInertia)}}}}})()},function(d,E,c){var e={};d.exports=e;var s=c(9),n=c(0);(function(){e.create=function(i){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},i)},e.update=function(i,u,a){var l=i.list,r=l.length,t=i.table,o=u.length,f=i.collisionStart,v=i.collisionEnd,x=i.collisionActive,w,M,g,p;for(f.length=0,v.length=0,x.length=0,p=0;p<r;p++)l[p].confirmedActive=!1;for(p=0;p<o;p++)w=u[p],g=w.pair,g?(g.isActive?x.push(g):f.push(g),s.update(g,w,a),g.confirmedActive=!0):(g=s.create(w,a),t[g.id]=g,f.push(g),l.push(g));var y=[];for(r=l.length,p=0;p<r;p++)g=l[p],g.confirmedActive||(s.setActive(g,!1,a),v.push(g),!g.collision.bodyA.isSleeping&&!g.collision.bodyB.isSleeping&&y.push(p));for(p=0;p<y.length;p++)M=y[p]-p,g=l[M],l.splice(M,1),delete t[g.id]},e.clear=function(i){return i.table={},i.list.length=0,i.collisionStart.length=0,i.collisionActive.length=0,i.collisionEnd.length=0,i}})()},function(d,E,c){var e=d.exports=c(22);e.Axes=c(11),e.Bodies=c(12),e.Body=c(6),e.Bounds=c(1),e.Collision=c(8),e.Common=c(0),e.Composite=c(5),e.Composites=c(23),e.Constraint=c(10),e.Contact=c(17),e.Detector=c(14),e.Engine=c(18),e.Events=c(4),e.Grid=c(24),e.Mouse=c(13),e.MouseConstraint=c(25),e.Pair=c(9),e.Pairs=c(20),e.Plugin=c(15),e.Query=c(26),e.Render=c(16),e.Resolver=c(19),e.Runner=c(27),e.SAT=c(28),e.Sleeping=c(7),e.Svg=c(29),e.Vector=c(2),e.Vertices=c(3),e.World=c(30),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(d,E,c){var e={};d.exports=e;var s=c(15),n=c(0);(function(){e.name="matter-js",e.version="0.18.0",e.uses=[],e.used=[],e.use=function(){s.use(e,Array.prototype.slice.call(arguments))},e.before=function(i,u){return i=i.replace(/^Matter./,""),n.chainPathBefore(e,i,u)},e.after=function(i,u){return i=i.replace(/^Matter./,""),n.chainPathAfter(e,i,u)}})()},function(d,E,c){var e={};d.exports=e;var s=c(5),n=c(10),i=c(0),u=c(6),a=c(12),l=i.deprecated;(function(){e.stack=function(r,t,o,f,v,x,w){for(var M=s.create({label:"Stack"}),g=r,p=t,y,m=0,S=0;S<f;S++){for(var k=0,I=0;I<o;I++){var C=w(g,p,I,S,y,m);if(C){var A=C.bounds.max.y-C.bounds.min.y,T=C.bounds.max.x-C.bounds.min.x;A>k&&(k=A),u.translate(C,{x:T*.5,y:A*.5}),g=C.bounds.max.x+v,s.addBody(M,C),y=C,m+=1}else g+=v}p+=k+x,g=r}return M},e.chain=function(r,t,o,f,v,x){for(var w=r.bodies,M=1;M<w.length;M++){var g=w[M-1],p=w[M],y=g.bounds.max.y-g.bounds.min.y,m=g.bounds.max.x-g.bounds.min.x,S=p.bounds.max.y-p.bounds.min.y,k=p.bounds.max.x-p.bounds.min.x,I={bodyA:g,pointA:{x:m*t,y:y*o},bodyB:p,pointB:{x:k*f,y:S*v}},C=i.extend(I,x);s.addConstraint(r,n.create(C))}return r.label+=" Chain",r},e.mesh=function(r,t,o,f,v){var x=r.bodies,w,M,g,p,y;for(w=0;w<o;w++){for(M=1;M<t;M++)g=x[M-1+w*t],p=x[M+w*t],s.addConstraint(r,n.create(i.extend({bodyA:g,bodyB:p},v)));if(w>0)for(M=0;M<t;M++)g=x[M+(w-1)*t],p=x[M+w*t],s.addConstraint(r,n.create(i.extend({bodyA:g,bodyB:p},v))),f&&M>0&&(y=x[M-1+(w-1)*t],s.addConstraint(r,n.create(i.extend({bodyA:y,bodyB:p},v)))),f&&M<t-1&&(y=x[M+1+(w-1)*t],s.addConstraint(r,n.create(i.extend({bodyA:y,bodyB:p},v))))}return r.label+=" Mesh",r},e.pyramid=function(r,t,o,f,v,x,w){return e.stack(r,t,o,f,v,x,function(M,g,p,y,m,S){var k=Math.min(f,Math.ceil(o/2)),I=m?m.bounds.max.x-m.bounds.min.x:0;if(!(y>k)){y=k-y;var C=y,A=o-1-y;if(!(p<C||p>A)){S===1&&u.translate(m,{x:(p+(o%2===1?1:-1))*I,y:0});var T=m?p*I:0;return w(r+T+p*v,g,p,y,m,S)}}})},e.newtonsCradle=function(r,t,o,f,v){for(var x=s.create({label:"Newtons Cradle"}),w=0;w<o;w++){var M=1.9,g=a.circle(r+w*(f*M),t+v,f,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),p=n.create({pointA:{x:r+w*(f*M),y:t},bodyB:g});s.addBody(x,g),s.addConstraint(x,p)}return x},l(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(r,t,o,f,v){var x=u.nextGroup(!0),w=20,M=-o*.5+w,g=o*.5-w,p=0,y=s.create({label:"Car"}),m=a.rectangle(r,t,o,f,{collisionFilter:{group:x},chamfer:{radius:f*.5},density:2e-4}),S=a.circle(r+M,t+p,v,{collisionFilter:{group:x},friction:.8}),k=a.circle(r+g,t+p,v,{collisionFilter:{group:x},friction:.8}),I=n.create({bodyB:m,pointB:{x:M,y:p},bodyA:S,stiffness:1,length:0}),C=n.create({bodyB:m,pointB:{x:g,y:p},bodyA:k,stiffness:1,length:0});return s.addBody(y,m),s.addBody(y,S),s.addBody(y,k),s.addConstraint(y,I),s.addConstraint(y,C),y},l(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(r,t,o,f,v,x,w,M,g,p){g=i.extend({inertia:1/0},g),p=i.extend({stiffness:.2,render:{type:"line",anchors:!1}},p);var y=e.stack(r,t,o,f,v,x,function(m,S){return a.circle(m,S,M,g)});return e.mesh(y,o,f,w,p),y.label="Soft Body",y},l(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(d,E,c){var e={};d.exports=e;var s=c(9),n=c(0),i=n.deprecated;(function(){e.create=function(u){var a={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(a,u)},e.update=function(u,a,l,r){var t,o,f,v=l.world,x=u.buckets,w,M,g=!1;for(t=0;t<a.length;t++){var p=a[t];if(!(p.isSleeping&&!r)&&!(v.bounds&&(p.bounds.max.x<v.bounds.min.x||p.bounds.min.x>v.bounds.max.x||p.bounds.max.y<v.bounds.min.y||p.bounds.min.y>v.bounds.max.y))){var y=e._getRegion(u,p);if(!p.region||y.id!==p.region.id||r){(!p.region||r)&&(p.region=y);var m=e._regionUnion(y,p.region);for(o=m.startCol;o<=m.endCol;o++)for(f=m.startRow;f<=m.endRow;f++){M=e._getBucketId(o,f),w=x[M];var S=o>=y.startCol&&o<=y.endCol&&f>=y.startRow&&f<=y.endRow,k=o>=p.region.startCol&&o<=p.region.endCol&&f>=p.region.startRow&&f<=p.region.endRow;!S&&k&&k&&w&&e._bucketRemoveBody(u,w,p),(p.region===y||S&&!k||r)&&(w||(w=e._createBucket(x,M)),e._bucketAddBody(u,w,p))}p.region=y,g=!0}}}g&&(u.pairsList=e._createActivePairsList(u))},i(e,"update","Grid.update \u27A4 replaced by Matter.Detector"),e.clear=function(u){u.buckets={},u.pairs={},u.pairsList=[]},i(e,"clear","Grid.clear \u27A4 replaced by Matter.Detector"),e._regionUnion=function(u,a){var l=Math.min(u.startCol,a.startCol),r=Math.max(u.endCol,a.endCol),t=Math.min(u.startRow,a.startRow),o=Math.max(u.endRow,a.endRow);return e._createRegion(l,r,t,o)},e._getRegion=function(u,a){var l=a.bounds,r=Math.floor(l.min.x/u.bucketWidth),t=Math.floor(l.max.x/u.bucketWidth),o=Math.floor(l.min.y/u.bucketHeight),f=Math.floor(l.max.y/u.bucketHeight);return e._createRegion(r,t,o,f)},e._createRegion=function(u,a,l,r){return{id:u+","+a+","+l+","+r,startCol:u,endCol:a,startRow:l,endRow:r}},e._getBucketId=function(u,a){return"C"+u+"R"+a},e._createBucket=function(u,a){var l=u[a]=[];return l},e._bucketAddBody=function(u,a,l){var r=u.pairs,t=s.id,o=a.length,f;for(f=0;f<o;f++){var v=a[f];if(!(l.id===v.id||l.isStatic&&v.isStatic)){var x=t(l,v),w=r[x];w?w[2]+=1:r[x]=[l,v,1]}}a.push(l)},e._bucketRemoveBody=function(u,a,l){var r=u.pairs,t=s.id,o;a.splice(n.indexOf(a,l),1);var f=a.length;for(o=0;o<f;o++){var v=r[t(l,a[o])];v&&(v[2]-=1)}},e._createActivePairsList=function(u){var a,l=u.pairs,r=n.keys(l),t=r.length,o=[],f;for(f=0;f<t;f++)a=l[r[f]],a[2]>0?o.push(a):delete l[r[f]];return o}})()},function(d,E,c){var e={};d.exports=e;var s=c(3),n=c(7),i=c(13),u=c(4),a=c(14),l=c(10),r=c(5),t=c(0),o=c(1);(function(){e.create=function(f,v){var x=(f?f.mouse:null)||(v?v.mouse:null);x||(f&&f.render&&f.render.canvas?x=i.create(f.render.canvas):v&&v.element?x=i.create(v.element):(x=i.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var w=l.create({label:"Mouse Constraint",pointA:x.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),M={type:"mouseConstraint",mouse:x,element:null,body:null,constraint:w,collisionFilter:{category:1,mask:4294967295,group:0}},g=t.extend(M,v);return u.on(f,"beforeUpdate",function(){var p=r.allBodies(f.world);e.update(g,p),e._triggerEvents(g)}),g},e.update=function(f,v){var x=f.mouse,w=f.constraint,M=f.body;if(x.button===0){if(w.bodyB)n.set(w.bodyB,!1),w.pointA=x.position;else for(var g=0;g<v.length;g++)if(M=v[g],o.contains(M.bounds,x.position)&&a.canCollide(M.collisionFilter,f.collisionFilter))for(var p=M.parts.length>1?1:0;p<M.parts.length;p++){var y=M.parts[p];if(s.contains(y.vertices,x.position)){w.pointA=x.position,w.bodyB=f.body=M,w.pointB={x:x.position.x-M.position.x,y:x.position.y-M.position.y},w.angleB=M.angle,n.set(M,!1),u.trigger(f,"startdrag",{mouse:x,body:M});break}}}else w.bodyB=f.body=null,w.pointB=null,M&&u.trigger(f,"enddrag",{mouse:x,body:M})},e._triggerEvents=function(f){var v=f.mouse,x=v.sourceEvents;x.mousemove&&u.trigger(f,"mousemove",{mouse:v}),x.mousedown&&u.trigger(f,"mousedown",{mouse:v}),x.mouseup&&u.trigger(f,"mouseup",{mouse:v}),i.clearSourceEvents(v)}})()},function(d,E,c){var e={};d.exports=e;var s=c(2),n=c(8),i=c(1),u=c(12),a=c(3);(function(){e.collides=function(l,r){for(var t=[],o=r.length,f=l.bounds,v=n.collides,x=i.overlaps,w=0;w<o;w++){var M=r[w],g=M.parts.length,p=g===1?0:1;if(x(M.bounds,f))for(var y=p;y<g;y++){var m=M.parts[y];if(x(m.bounds,f)){var S=v(m,l);if(S){t.push(S);break}}}}return t},e.ray=function(l,r,t,o){o=o||1e-100;for(var f=s.angle(r,t),v=s.magnitude(s.sub(r,t)),x=(t.x+r.x)*.5,w=(t.y+r.y)*.5,M=u.rectangle(x,w,v,o,{angle:f}),g=e.collides(M,l),p=0;p<g.length;p+=1){var y=g[p];y.body=y.bodyB=y.bodyA}return g},e.region=function(l,r,t){for(var o=[],f=0;f<l.length;f++){var v=l[f],x=i.overlaps(v.bounds,r);(x&&!t||!x&&t)&&o.push(v)}return o},e.point=function(l,r){for(var t=[],o=0;o<l.length;o++){var f=l[o];if(i.contains(f.bounds,r))for(var v=f.parts.length===1?0:1;v<f.parts.length;v++){var x=f.parts[v];if(i.contains(x.bounds,r)&&a.contains(x.vertices,r)){t.push(f);break}}}return t}})()},function(d,E,c){var e={};d.exports=e;var s=c(4),n=c(18),i=c(0);(function(){var u,a;if(typeof window!="undefined"&&(u=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,a=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!u){var l;u=function(r){l=setTimeout(function(){r(i.now())},1e3/60)},a=function(){clearTimeout(l)}}e.create=function(r){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},o=i.extend(t,r);return o.delta=o.delta||1e3/o.fps,o.deltaMin=o.deltaMin||1e3/o.fps,o.deltaMax=o.deltaMax||1e3/(o.fps*.5),o.fps=1e3/o.delta,o},e.run=function(r,t){return typeof r.positionIterations!="undefined"&&(t=r,r=e.create()),function o(f){r.frameRequestId=u(o),f&&r.enabled&&e.tick(r,t,f)}(),r},e.tick=function(r,t,o){var f=t.timing,v=1,x,w={timestamp:f.timestamp};s.trigger(r,"beforeTick",w),r.isFixed?x=r.delta:(x=o-r.timePrev||r.delta,r.timePrev=o,r.deltaHistory.push(x),r.deltaHistory=r.deltaHistory.slice(-r.deltaSampleSize),x=Math.min.apply(null,r.deltaHistory),x=x<r.deltaMin?r.deltaMin:x,x=x>r.deltaMax?r.deltaMax:x,v=x/r.delta,r.delta=x),r.timeScalePrev!==0&&(v*=f.timeScale/r.timeScalePrev),f.timeScale===0&&(v=0),r.timeScalePrev=f.timeScale,r.correction=v,r.frameCounter+=1,o-r.counterTimestamp>=1e3&&(r.fps=r.frameCounter*((o-r.counterTimestamp)/1e3),r.counterTimestamp=o,r.frameCounter=0),s.trigger(r,"tick",w),s.trigger(r,"beforeUpdate",w),n.update(t,x,v),s.trigger(r,"afterUpdate",w),s.trigger(r,"afterTick",w)},e.stop=function(r){a(r.frameRequestId)},e.start=function(r,t){e.run(r,t)}})()},function(d,E,c){var e={};d.exports=e;var s=c(8),n=c(0),i=n.deprecated;(function(){e.collides=function(u,a){return s.collides(u,a)},i(e,"collides","SAT.collides \u27A4 replaced by Collision.collides")})()},function(d,E,c){var e={};d.exports=e,c(1);var s=c(0);(function(){e.pathToVertices=function(n,i){typeof window!="undefined"&&!("SVGPathSeg"in window)&&s.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var u,a,l,r,t,o,f,v,x,w,M=[],g,p,y=0,m=0,S=0;i=i||15;var k=function(C,A,T){var H=T%2===1&&T>1;if(!x||C!=x.x||A!=x.y){x&&H?(g=x.x,p=x.y):(g=0,p=0);var L={x:g+C,y:p+A};(H||!x)&&(x=L),M.push(L),m=g+C,S=p+A}},I=function(C){var A=C.pathSegTypeAsLetter.toUpperCase();if(A!=="Z"){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":m=C.x,S=C.y;break;case"H":m=C.x;break;case"V":S=C.y;break}k(m,S,C.pathSegType)}};for(e._svgPathToAbsolute(n),l=n.getTotalLength(),o=[],u=0;u<n.pathSegList.numberOfItems;u+=1)o.push(n.pathSegList.getItem(u));for(f=o.concat();y<l;){if(w=n.getPathSegAtLength(y),t=o[w],t!=v){for(;f.length&&f[0]!=t;)I(f.shift());v=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":r=n.getPointAtLength(y),k(r.x,r.y,0);break}y+=i}for(u=0,a=f.length;u<a;++u)I(f[u]);return M},e._svgPathToAbsolute=function(n){for(var i,u,a,l,r,t,o=n.pathSegList,f=0,v=0,x=o.numberOfItems,w=0;w<x;++w){var M=o.getItem(w),g=M.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(g))"x"in M&&(f=M.x),"y"in M&&(v=M.y);else switch("x1"in M&&(a=f+M.x1),"x2"in M&&(r=f+M.x2),"y1"in M&&(l=v+M.y1),"y2"in M&&(t=v+M.y2),"x"in M&&(f+=M.x),"y"in M&&(v+=M.y),g){case"m":o.replaceItem(n.createSVGPathSegMovetoAbs(f,v),w);break;case"l":o.replaceItem(n.createSVGPathSegLinetoAbs(f,v),w);break;case"h":o.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(f),w);break;case"v":o.replaceItem(n.createSVGPathSegLinetoVerticalAbs(v),w);break;case"c":o.replaceItem(n.createSVGPathSegCurvetoCubicAbs(f,v,a,l,r,t),w);break;case"s":o.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(f,v,r,t),w);break;case"q":o.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(f,v,a,l),w);break;case"t":o.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(f,v),w);break;case"a":o.replaceItem(n.createSVGPathSegArcAbs(f,v,M.r1,M.r2,M.angle,M.largeArcFlag,M.sweepFlag),w);break;case"z":case"Z":f=i,v=u;break}(g=="M"||g=="m")&&(i=f,u=v)}}})()},function(d,E,c){var e={};d.exports=e;var s=c(5);c(0),function(){e.create=s.create,e.add=s.add,e.remove=s.remove,e.clear=s.clear,e.addComposite=s.addComposite,e.addBody=s.addBody,e.addConstraint=s.addConstraint}()}])})})(Xe);var O=pt(Xe.exports),St={exports:{}};/*!
 * matter-attractors 0.1.6 by Liam Brummitt 2017-05-15
 * https://github.com/liabru/matter-attractors
 * License MIT
 */(function(P,h){(function(E,c){P.exports=c(Xe.exports)})(Re,function(d){return function(E){var c={};function e(s){if(c[s])return c[s].exports;var n=c[s]={i:s,l:!1,exports:{}};return E[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}return e.m=E,e.c=c,e.i=function(s){return s},e.d=function(s,n,i){e.o(s,n)||Object.defineProperty(s,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(s){var n=s&&s.__esModule?function(){return s.default}:function(){return s};return e.d(n,"a",n),n},e.o=function(s,n){return Object.prototype.hasOwnProperty.call(s,n)},e.p="/libs",e(e.s=1)}([function(E,c){E.exports=d},function(E,c,e){var s=e(0),n={name:"matter-attractors",version:"0.1.4",for:"matter-js@^0.12.0",install:function(u){u.after("Body.create",function(){n.Body.init(this)}),u.before("Engine.update",function(a){n.Engine.update(a)})},Body:{init:function(u){u.plugin.attractors=u.plugin.attractors||[]}},Engine:{update:function(u){for(var a=u.world,l=s.Composite.allBodies(a),r=0;r<l.length;r+=1){var t=l[r],o=t.plugin.attractors;if(o&&o.length>0)for(var f=0;f<l.length;f+=1){var v=l[f];if(v.id!==t.id)for(var x=0;x<o.length;x+=1){var w=o[x],M=w;s.Common.isFunction(w)&&(M=w(t,v)),M&&s.Body.applyForce(v,v.position,M)}}}}},Attractors:{gravityConstant:.001,gravity:function(u,a){var l=s.Vector.sub(a.position,u.position),r=s.Vector.magnitudeSquared(l)||1e-4,t=s.Vector.normalise(l),o=-n.Attractors.gravityConstant*(u.mass*a.mass/r),f=s.Vector.mult(t,o);s.Body.applyForce(u,u.position,s.Vector.neg(f)),s.Body.applyForce(a,a.position,f)}}};s.Plugin.register(n),E.exports=n}])})})(St);var rn=pt(St.exports);O.use(rn);class an{constructor(h,d,E,c){this.areaWidth=d,this.areaHeight=E,this.thickness=c;const e={isStatic:!0,render:{fillStyle:"transparent"}};this.top=O.Bodies.rectangle(d/2,-c/2,d,c,e),this.right=O.Bodies.rectangle(d+c/2,E/2,c,E,e),this.bottom=O.Bodies.rectangle(d/2,E+c/2,d,c,e),this.left=O.Bodies.rectangle(-c/2,E/2,c,E,e),O.Composite.add(h.world,[this.top,this.right,this.bottom,this.left])}update(h,d){O.Body.setPosition(this.top,{x:h/2,y:this.top.position.y}),O.Body.setPosition(this.right,{x:h+this.thickness/2,y:d/2}),O.Body.setPosition(this.bottom,{x:h/2,y:d+this.thickness/2}),O.Body.setPosition(this.left,{x:this.left.position.x,y:d/2}),O.Body.scale(this.top,h/this.areaWidth,1),O.Body.scale(this.right,1,d/this.areaHeight),O.Body.scale(this.bottom,h/this.areaWidth,1),O.Body.scale(this.left,1,d/this.areaHeight),this.areaWidth=h,this.areaHeight=d}}const on=(P,h)=>({x:(P.position.x-h.position.x)*2e-4,y:(P.position.y-h.position.y)*2e-4});class ln{constructor(h,d){this.body=O.Bodies.circle(d.clientWidth/2,0,1,{isStatic:!0,plugin:{attractors:[on]},collisionFilter:{group:-1}}),O.Composite.add(h.world,this.body),this.mouse=O.Mouse.create(d),O.Events.on(h,"afterUpdate",()=>{!this.mouse.position.x||O.Body.translate(this.body,{x:(this.mouse.position.x-this.body.position.x)*.25,y:(this.mouse.position.y-this.body.position.y)*.25})}),this.mouse.element.removeEventListener("mousewheel",this.mouse.mousewheel),this.mouse.element.removeEventListener("DOMMouseScroll",this.mouse.mousewheel)}setAnchor(){this.mouse.position.x=this.mouse.element.clientWidth/2,this.mouse.position.y=0,O.Body.setPosition(this.body,{x:this.mouse.element.clientWidth/2,y:0})}}function fn(P){let h,d,E=`${P[2]}px`,c=`${P[0]}ms`,e,s,n;const i=P[9].default,u=fe(i,P,P[8],null);return{c(){h=J("ul"),u&&u.c(),this.h()},l(a){h=_(a,"UL",{class:!0});var l=G(h);u&&u.l(l),l.forEach(D),this.h()},h(){U(h,"class","cpeum-1s5e709"),Je(()=>P[11].call(h)),z(h,"height",E,!1),z(h,"--delay",c,!1)},m(a,l){Q(a,h,l),u&&u.m(h,null),P[10](h),d=ht(h,P[11].bind(h)),e=!0,s||(n=[Se(_e.call(null,h,{rootMargin:"0% 0px -30%"})),ne(h,"enter",P[5]),ne(h,"leave",P[6]),ne(h,"mouseenter",gn),ne(h,"mouseleave",P[7])],s=!0)},p(a,[l]){u&&u.p&&(!e||l&256)&&ue(u,i,a,a[8],e?he(i,a[8],l,null):ce(a[8]),null),l&4&&E!==(E=`${a[2]}px`)&&z(h,"height",E,!1),l&1&&c!==(c=`${a[0]}ms`)&&z(h,"--delay",c,!1)},i(a){e||(j(u,a),e=!0)},o(a){$(u,a),e=!1},d(a){a&&D(h),u&&u.d(a),P[10](null),d(),s=!1,Te(n)}}}const un=200,ct=400,cn=500,hn=3;function gn(){}function vn(P,h,d){let E,{$$slots:c={},$$scope:e}=h,{staggerDelay:s=120}=h,n,i,u=500;const a=De(!1);xe(P,a,y=>d(15,E=y));let l=0,r=[];pe("bodies",{getEngine:()=>t,getIndex:()=>l++,addBodyRef:y=>{r.push(y)},visible:a,staggerDelay:s});const t=O.Engine.create();t.gravity.y=0,t.gravity.scale=0,t.positionIterations=5,t.velocityIterations=3,t.enableSleeping=!0;const o=O.Runner.create(),f=new an(t,ct,ct,un);let v;function x(){E?t.enabled=!0:(a.set(!0),O.Runner.run(o,t))}function w(){t.enabled=!1}function M(){v.setAnchor()}gt(()=>{v=new ln(t,n)}),Mt(()=>{O.Runner.stop(o),O.World.clear(t.world,!1),O.Engine.clear(t)});function g(y){vt[y?"unshift":"push"](()=>{n=y,d(3,n)})}function p(){i=this.clientWidth,d(1,i)}return P.$$set=y=>{"staggerDelay"in y&&d(0,s=y.staggerDelay),"$$scope"in y&&d(8,e=y.$$scope)},P.$$.update=()=>{P.$$.dirty&6&&i&&(d(2,u=Math.max(Math.ceil((cn+hn*r.map(y=>y.area).reduce((y,m)=>y+m,0))/i),400)),f.update(i,u))},[s,i,u,n,a,x,w,M,e,c,g,p]}class Wn extends se{constructor(h){super(),re(this,h,vn,fn,ae,{staggerDelay:0})}}function mn(P){let h,d,E=`rotate(${-1*P[4]}rad)`,c=`${P[2]}px`,e=`${P[0]}px`,s=`${P[1]}px`,n=`-${P[1]*.5}px`,i=`-${P[0]*.5}px`,u=`translate(${P[6]}px, ${P[5]}px) rotate(${P[4]}rad)`,a=`${P[10]*P[8].staggerDelay}ms`,l;const r=P[13].default,t=fe(r,P,P[12],null);return{c(){h=J("li"),d=J("span"),t&&t.c(),this.h()},l(o){h=_(o,"LI",{class:!0});var f=G(h);d=_(f,"SPAN",{});var v=G(d);t&&t.l(v),v.forEach(D),f.forEach(D),this.h()},h(){z(d,"transform",E,!1),U(h,"class","cpeum-38i3u2"),W(h,"hidden",!P[7]),z(h,"border-radius",c,!1),z(h,"width",e,!1),z(h,"height",s,!1),z(h,"top",n,!1),z(h,"left",i,!1),z(h,"transform",u,!1),z(h,"--delay",a,!1)},m(o,f){Q(o,h,f),X(h,d),t&&t.m(d,null),P[14](h),l=!0},p(o,[f]){t&&t.p&&(!l||f&4096)&&ue(t,r,o,o[12],l?he(r,o[12],f,null):ce(o[12]),null),f&16&&E!==(E=`rotate(${-1*o[4]}rad)`)&&z(d,"transform",E,!1),f&128&&W(h,"hidden",!o[7]),f&4&&c!==(c=`${o[2]}px`)&&z(h,"border-radius",c,!1),f&1&&e!==(e=`${o[0]}px`)&&z(h,"width",e,!1),f&2&&s!==(s=`${o[1]}px`)&&z(h,"height",s,!1),f&2&&n!==(n=`-${o[1]*.5}px`)&&z(h,"top",n,!1),f&1&&i!==(i=`-${o[0]*.5}px`)&&z(h,"left",i,!1),f&112&&u!==(u=`translate(${o[6]}px, ${o[5]}px) rotate(${o[4]}rad)`)&&z(h,"transform",u,!1)},i(o){l||(j(t,o),l=!0)},o(o){$(t,o),l=!1},d(o){o&&D(h),t&&t.d(o),P[14](null)}}}const dn=150,pn=12;function xn(P,h,d){let E,{$$slots:c={},$$scope:e}=h,{size:s=void 0}=h,{width:n=void 0}=h,{height:i=void 0}=h,{radius:u=void 0}=h,a,l=(Math.random()-.5)/180,r=0,t=0;const o=We("bodies"),f=o.visible;xe(P,f,g=>d(7,E=g));const v=o.getIndex(),x=o.getEngine();let w;gt(()=>{s||d(11,s=dn+Math.sqrt(a.textContent.length)*pn),n||d(0,n=s),i||d(1,i=n),u||d(2,u=Math.round(Math.random()*.5*n)),w=O.Bodies.rectangle(O.Common.random(0,a.parentElement.clientWidth),O.Common.random(0,a.parentElement.clientHeight),n,i,{angle:l,friction:.1,frictionStatic:12,density:5e-4,chamfer:{radius:u}}),o.addBodyRef(w),O.Composite.add(x.world,w),O.Events.on(x,"afterUpdate",()=>{d(4,l=w.angle),d(5,r=w.position.y),d(6,t=w.position.x)})});function M(g){vt[g?"unshift":"push"](()=>{a=g,d(3,a)})}return P.$$set=g=>{"size"in g&&d(11,s=g.size),"width"in g&&d(0,n=g.width),"height"in g&&d(1,i=g.height),"radius"in g&&d(2,u=g.radius),"$$scope"in g&&d(12,e=g.$$scope)},[n,i,u,a,l,r,t,E,o,f,v,s,e,c,M]}class On extends se{constructor(h){super(),re(this,h,xn,mn,ae,{size:11,width:0,height:1,radius:2})}}export{Wn as B,Vn as E,Ln as F,Hn as L,Rn as P,xt as S,Dn as a,Bn as b,On as c,Fn as d,Jt as e};
